(function(A,B){typeof exports==="object"&&typeof module!=="undefined"?module.exports=B():typeof define==="function"&&define.amd?define(B):(A.CodeMirror=B())}(this,(function(){var Gb=navigator.userAgent;var Bt=navigator.platform;var Gn=/gecko\/\d/i.test(Gb);var BJ=/MSIE \d/.test(Gb);var AP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gb);var Gk=/Edge\/(\d+)/.exec(Gb);var AD=BJ||AP||Gk;var Ew=AD&&(BJ?document.documentMode||6:+(Gk||AP)[1]);var AJ=!Gk&&/WebKit\//.test(Gb);var Dd=AJ&&/Qt\/\d+\.\d+/.test(Gb);var Cf=!Gk&&/Chrome\//.test(Gb);var FX=/Opera\//.test(Gb);var Fj=/Apple Computer/.test(navigator.vendor);var BN=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Gb);var T=/PhantomJS/.test(Gb);var Do=!Gk&&/AppleWebKit/.test(Gb)&&/Mobile\/\w+/.test(Gb);var e=Do||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Gb);var Gv=Do||/Mac/.test(Bt);var Gw=/\bCrOS\b/.test(Gb);var J=/win/i.test(Bt);var FY=FX&&Gb.match(/Version\/(\d*\.\d*)/);if(FY){FY=Number(FY[1])}if(FY&&FY>=15){FX=false;AJ=true}var Fk=Gv&&(Dd||FX&&(FY==null||FY<12.11));var Eo=Gn||(AD&&Ew>=9);function Cv(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var F3=function(GO,GQ){var GP=GO.className;var i=Cv(GQ).exec(GP);if(i){var GR=GP.slice(i.index+i[0].length);GO.className=GP.slice(0,i.index)+(GR?i[1]+GR:"")}};function A1(GO){for(var i=GO.childNodes.length;i>0;--i){GO.removeChild(GO.firstChild)}return GO}function EE(GO,i){return A1(GO).appendChild(i)}function Bo(GO,GT,GP,GS){var GQ=document.createElement(GO);if(GP){GQ.className=GP}if(GS){GQ.style.cssText=GS}if(typeof GT=="string"){GQ.appendChild(document.createTextNode(GT))}else{if(GT){for(var GR=0;GR<GT.length;++GR){GQ.appendChild(GT[GR])}}}return GQ}var EK;if(document.createRange){EK=function(GP,GR,GQ,GO){var i=document.createRange();i.setEnd(GO||GP,GQ);i.setStart(GP,GR);return i}}else{EK=function(GP,GR,GQ){var i=document.body.createTextRange();try{i.moveToElementText(GP.parentNode)}catch(GO){return i}i.collapse(true);i.moveEnd("character",GQ);i.moveStart("character",GR);return i}}function C6(GO,i){if(i.nodeType==3){i=i.parentNode}if(GO.contains){return GO.contains(i)}do{if(i.nodeType==11){i=i.host}if(i==GO){return true}}while(i=i.parentNode)}function Fx(){var GO;try{GO=document.activeElement}catch(i){GO=document.body||null}while(GO&&GO.root&&GO.root.activeElement){GO=GO.root.activeElement}return GO}function Fc(i,GP){var GO=i.className;if(!Cv(GP).test(GO)){i.className+=(GO?" ":"")+GP}}function EH(GR,GP){var GQ=GR.split(" ");for(var GO=0;GO<GQ.length;GO++){if(GQ[GO]&&!Cv(GQ[GO]).test(GP)){GP+=" "+GQ[GO]}}return GP}var EO=function(i){i.select()};if(Do){EO=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(AD){EO=function(i){try{i.select()}catch(GO){}}}}function CQ(GO){var i=Array.prototype.slice.call(arguments,1);return function(){return GO.apply(null,i)}}function C1(i,GQ,GO){if(!GQ){GQ={}}for(var GP in i){if(i.hasOwnProperty(GP)&&(GO!==false||!GQ.hasOwnProperty(GP))){GQ[GP]=i[GP]}}return GQ}function n(GP,GO,GS,GU,GR){if(GO==null){GO=GP.search(/[^\s\u00a0]/);if(GO==-1){GO=GP.length}}for(var GT=GU||0,GQ=GR||0;;){var GV=GP.indexOf("\t",GT);if(GV<0||GV>=GO){return GQ+(GO-GT)}GQ+=GV-GT;GQ+=GS-(GQ%GS);GT=GV+1}}var FN=function(){this.id=null};FN.prototype.set=function(i,GO){clearTimeout(this.id);this.id=setTimeout(GO,i)};function D3(GO,GQ){for(var GP=0;GP<GO.length;++GP){if(GO[GP]==GQ){return GP}}return -1}var B5=30;var Cp={toString:function(){return"CodeMirror.Pass"}};var BV={scroll:false};var Dp={origin:"*mouse"};var AR={origin:"+move"};function Dj(GR,i,GT){for(var GQ=0,GO=0;;){var GS=GR.indexOf("\t",GQ);if(GS==-1){GS=GR.length}var GP=GS-GQ;if(GS==GR.length||GO+GP>=i){return GQ+Math.min(GP,i-GO)}GO+=GS-GQ;GO+=GT-(GO%GT);GQ=GS+1;if(GO>=i){return GQ}}}var C0=[""];function CD(i){while(C0.length<=i){C0.push(Au(C0)+" ")}return C0[i]}function Au(i){return i[i.length-1]}function Gp(GO,GR){var GQ=[];for(var GP=0;GP<GO.length;GP++){GQ[GP]=GR(GO[GP],GP)}return GQ}function CV(i,GR,GO){var GP=0,GQ=GO(GR);while(GP<i.length&&GO(i[GP])<=GQ){GP++}i.splice(GP,0,GR)}function GG(){}function At(GP,GO){var i;if(Object.create){i=Object.create(GP)}else{GG.prototype=GP;i=new GG()}if(GO){C1(GO,i)}return i}var AS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function GM(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||AS.test(i))}function E9(i,GO){if(!GO){return GM(i)}if(GO.source.indexOf("\\w")>-1&&GM(i)){return true}return GO.test(i)}function C(i){for(var GO in i){if(i.hasOwnProperty(GO)&&i[GO]){return false}}return true}var z=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Fr(i){return i.charCodeAt(0)>=768&&z.test(i)}function Ak(GP,GO,i){while((i<0?GO>0:GO<GP.length)&&Fr(GP.charAt(GO))){GO+=i}return GO}function D4(GQ,i,GO){for(;;){if(Math.abs(i-GO)<=1){return GQ(i)?i:GO}var GP=Math.floor((i+GO)/2);if(GQ(GP)){GO=GP}else{i=GP}}}function s(i,GQ,GP){var GO=this;this.input=GP;GO.scrollbarFiller=Bo("div",null,"CodeMirror-scrollbar-filler");GO.scrollbarFiller.setAttribute("cm-not-content","true");GO.gutterFiller=Bo("div",null,"CodeMirror-gutter-filler");GO.gutterFiller.setAttribute("cm-not-content","true");GO.lineDiv=Bo("div",null,"CodeMirror-code");GO.selectionDiv=Bo("div",null,null,"position: relative; z-index: 1");GO.cursorDiv=Bo("div",null,"CodeMirror-cursors");GO.measure=Bo("div",null,"CodeMirror-measure");GO.lineMeasure=Bo("div",null,"CodeMirror-measure");GO.lineSpace=Bo("div",[GO.measure,GO.lineMeasure,GO.selectionDiv,GO.cursorDiv,GO.lineDiv],null,"position: relative; outline: none");GO.mover=Bo("div",[Bo("div",[GO.lineSpace],"CodeMirror-lines")],null,"position: relative");GO.sizer=Bo("div",[GO.mover],"CodeMirror-sizer");GO.sizerWidth=null;GO.heightForcer=Bo("div",null,null,"position: absolute; height: "+B5+"px; width: 1px;");GO.gutters=Bo("div",null,"CodeMirror-gutters");GO.lineGutter=null;GO.scroller=Bo("div",[GO.sizer,GO.heightForcer,GO.gutters],"CodeMirror-scroll");GO.scroller.setAttribute("tabIndex","-1");GO.wrapper=Bo("div",[GO.scrollbarFiller,GO.gutterFiller,GO.scroller],"CodeMirror");if(AD&&Ew<8){GO.gutters.style.zIndex=-1;GO.scroller.style.paddingRight=0}if(!AJ&&!(Gn&&e)){GO.scroller.draggable=true}if(i){if(i.appendChild){i.appendChild(GO.wrapper)}else{i(GO.wrapper)}}GO.viewFrom=GO.viewTo=GQ.first;GO.reportedViewFrom=GO.reportedViewTo=GQ.first;GO.view=[];GO.renderedView=null;GO.externalMeasured=null;GO.viewOffset=0;GO.lastWrapHeight=GO.lastWrapWidth=0;GO.updateLineNumbers=null;GO.nativeBarWidth=GO.barHeight=GO.barWidth=0;GO.scrollbarsClipped=false;GO.lineNumWidth=GO.lineNumInnerWidth=GO.lineNumChars=null;GO.alignWidgets=false;GO.cachedCharWidth=GO.cachedTextHeight=GO.cachedPaddingH=null;GO.maxLine=null;GO.maxLineLength=0;GO.maxLineChanged=false;GO.wheelDX=GO.wheelDY=GO.wheelStartX=GO.wheelStartY=null;GO.shift=false;GO.selForContextMenu=null;GO.activeTouch=null;GP.init(GO)}function DC(GT,GQ){GQ-=GT.first;if(GQ<0||GQ>=GT.size){throw new Error("There is no line "+(GQ+GT.first)+" in the document.")}var GO=GT;while(!GO.lines){for(var GP=0;;++GP){var GS=GO.children[GP],GR=GS.chunkSize();if(GQ<GR){GO=GS;break}GQ-=GR}}return GO.lines[GQ]}function CI(GR,GQ,GP){var GO=[],i=GQ.line;GR.iter(GQ.line,GP.line+1,function(GT){var GS=GT.text;if(i==GP.line){GS=GS.slice(0,GP.ch)}if(i==GQ.line){GS=GS.slice(GQ.ch)}GO.push(GS);++i});return GO}function EJ(GQ,i,GO){var GP=[];GQ.iter(i,GO,function(GR){GP.push(GR.text)});return GP}function Dr(GP,i){var GQ=i-GP.height;if(GQ){for(var GO=GP;GO;GO=GO.parent){GO.height+=GQ}}}function Fy(GQ){if(GQ.parent==null){return null}var GO=GQ.parent,GR=D3(GO.lines,GQ);for(var GS=GO.parent;GS;GO=GS,GS=GS.parent){for(var GP=0;;++GP){if(GS.children[GP]==GO){break}GR+=GS.children[GP].chunkSize()}}return GR+GO.first}function Gc(GV,GU){var GT=GV.first;outer:do{for(var GP=0;GP<GV.children.length;++GP){var GW=GV.children[GP],GR=GW.height;if(GU<GR){GV=GW;continue outer}GU-=GR;GT+=GW.chunkSize()}return GT}while(!GV.lines);var GS=0;for(;GS<GV.lines.length;++GS){var GO=GV.lines[GS],GQ=GO.height;if(GU<GQ){break}GU-=GQ}return GT+GS}function FV(GO,i){return i>=GO.first&&i<GO.first+GO.size}function Ba(GP,GO){return String(GP.lineNumberFormatter(GO+GP.firstLineNumber))}function A5(GO,i,GP){if(GP===void 0){GP=null}if(!(this instanceof A5)){return new A5(GO,i,GP)}this.line=GO;this.ch=i;this.sticky=GP}function DM(GO,i){return GO.line-i.line||GO.ch-i.ch}function F7(GO,i){return GO.sticky==i.sticky&&DM(GO,i)==0}function Gi(i){return A5(i.line,i.ch)}function DL(GO,i){return DM(GO,i)<0?i:GO}function Fq(GO,i){return DM(GO,i)<0?GO:i}function v(GO,i){return Math.max(GO.first,Math.min(i,GO.first+GO.size-1))}function GF(GP,i){if(i.line<GP.first){return A5(GP.first,0)}var GO=GP.first+GP.size-1;if(i.line>GO){return A5(GO,DC(GP,GO).text.length)}return E2(i,DC(GP,i.line).text.length)}function E2(i,GP){var GO=i.ch;if(GO==null||GO>GP){return A5(i.line,GP)}else{if(GO<0){return A5(i.line,0)}else{return i}}}function Ge(GR,GO){var GQ=[];for(var GP=0;GP<GO.length;GP++){GQ[GP]=GF(GR,GO[GP])}return GQ}var F5=false;var D1=false;function GL(){F5=true}function FS(){D1=true}function L(GP,i,GO){this.marker=GP;this.from=i;this.to=GO}function B0(GR,GQ){if(GR){for(var GO=0;GO<GR.length;++GO){var GP=GR[GO];if(GP.marker==GQ){return GP}}}}function Fa(GR,GP){var GO;for(var GQ=0;GQ<GR.length;++GQ){if(GR[GQ]!=GP){(GO||(GO=[])).push(GR[GQ])}}return GO}function Gf(GO,i){GO.markedSpans=GO.markedSpans?GO.markedSpans.concat([i]):[i];i.marker.attachLine(GO)}function FH(GP,GO,GT){var GW;if(GP){for(var GV=0;GV<GP.length;++GV){var GU=GP[GV],GR=GU.marker;var GQ=GU.from==null||(GR.inclusiveLeft?GU.from<=GO:GU.from<GO);if(GQ||GU.from==GO&&GR.type=="bookmark"&&(!GT||!GU.marker.insertLeft)){var GS=GU.to==null||(GR.inclusiveRight?GU.to>=GO:GU.to>GO);(GW||(GW=[])).push(new L(GR,GU.from,GS?null:GU.to))}}}return GW}function Gs(GP,GS,GT){var GW;if(GP){for(var GV=0;GV<GP.length;++GV){var GU=GP[GV],GR=GU.marker;var GO=GU.to==null||(GR.inclusiveRight?GU.to>=GS:GU.to>GS);if(GO||GU.from==GS&&GR.type=="bookmark"&&(!GT||GU.marker.insertLeft)){var GQ=GU.from==null||(GR.inclusiveLeft?GU.from<=GS:GU.from<GS);(GW||(GW=[])).push(new L(GR,GQ?null:GU.from-GS,GU.to==null?null:GU.to-GS))}}}return GW}function Cz(GZ,G0){if(G0.full){return null}var GP=FV(GZ,G0.from.line)&&DC(GZ,G0.from.line).markedSpans;var G5=FV(GZ,G0.to.line)&&DC(GZ,G0.to.line).markedSpans;if(!GP&&!G5){return null}var GV=G0.from.ch,GU=G0.to.ch,G7=DM(G0.from,G0.to)==0;var GO=FH(GP,GV,G7);var G2=Gs(G5,GU,G7);var GY=G0.text.length==1,GX=Au(G0.text).length+(GY?GV:0);if(GO){for(var G6=0;G6<GO.length;++G6){var G1=GO[G6];if(G1.to==null){var GW=B0(G2,G1.marker);if(!GW){G1.to=GV}else{if(GY){G1.to=GW.to==null?null:GW.to+GX}}}}}if(G2){for(var G9=0;G9<G2.length;++G9){var GT=G2[G9];if(GT.to!=null){GT.to+=GX}if(GT.from==null){var GQ=B0(GO,GT.marker);if(!GQ){GT.from=GX;if(GY){(GO||(GO=[])).push(GT)}}}else{GT.from+=GX;if(GY){(GO||(GO=[])).push(GT)}}}}if(GO){GO=CZ(GO)}if(G2&&G2!=GO){G2=CZ(G2)}var GR=[GO];if(!GY){var GS=G0.text.length-2,G3;if(GS>0&&GO){for(var G8=0;G8<GO.length;++G8){if(GO[G8].to==null){(G3||(G3=[])).push(new L(GO[G8].marker,null,null))}}}for(var G4=0;G4<GS;++G4){GR.push(G3)}GR.push(G2)}return GR}function CZ(GQ){for(var GO=0;GO<GQ.length;++GO){var GP=GQ[GO];if(GP.from!=null&&GP.from==GP.to&&GP.marker.clearWhenEmpty!==false){GQ.splice(GO--,1)}}if(!GQ.length){return null}return GQ}function F1(GW,GO,G0){var GQ=null;GW.iter(GO.line,G0.line+1,function(G2){if(G2.markedSpans){for(var G1=0;G1<G2.markedSpans.length;++G1){var G3=G2.markedSpans[G1].marker;if(G3.readOnly&&(!GQ||D3(GQ,G3)==-1)){(GQ||(GQ=[])).push(G3)}}}});if(!GQ){return null}var GR=[{from:GO,to:G0}];for(var GY=0;GY<GQ.length;++GY){var GV=GQ[GY],GX=GV.find(0);for(var GT=0;GT<GR.length;++GT){var GP=GR[GT];if(DM(GP.to,GX.from)<0||DM(GP.from,GX.to)>0){continue}var GZ=[GT,1],GS=DM(GP.from,GX.from),GU=DM(GP.to,GX.to);if(GS<0||!GV.inclusiveLeft&&!GS){GZ.push({from:GP.from,to:GX.from})}if(GU>0||!GV.inclusiveRight&&!GU){GZ.push({from:GX.to,to:GP.to})}GR.splice.apply(GR,GZ);GT+=GZ.length-3}}return GR}function Ej(GQ){var GP=GQ.markedSpans;if(!GP){return}for(var GO=0;GO<GP.length;++GO){GP[GO].marker.detachLine(GQ)}GQ.markedSpans=null}function Ao(GQ,GP){if(!GP){return}for(var GO=0;GO<GP.length;++GO){GP[GO].marker.attachLine(GQ)}GQ.markedSpans=GP}function Br(i){return i.inclusiveLeft?-1:0}function El(i){return i.inclusiveRight?1:0}function Fl(GT,GR){var GO=GT.lines.length-GR.lines.length;if(GO!=0){return GO}var GS=GT.find(),GP=GR.find();var GQ=DM(GS.from,GP.from)||Br(GT)-Br(GR);if(GQ){return -GQ}var i=DM(GS.to,GP.to)||El(GT)-El(GR);if(i){return i}return GR.id-GT.id}function B9(GS,GT){var GR=D1&&GS.markedSpans,GQ;if(GR){for(var GP=(void 0),GO=0;GO<GR.length;++GO){GP=GR[GO];if(GP.marker.collapsed&&(GT?GP.from:GP.to)==null&&(!GQ||Fl(GQ,GP.marker)<0)){GQ=GP.marker}}}return GQ}function E(i){return B9(i,true)}function Et(i){return B9(i,false)}function AY(GV,GZ,GO,GX,GQ){var GP=DC(GV,GZ);var GU=D1&&GP.markedSpans;if(GU){for(var GS=0;GS<GU.length;++GS){var GR=GU[GS];if(!GR.marker.collapsed){continue}var GT=GR.marker.find(0);var GW=DM(GT.from,GO)||Br(GR.marker)-Br(GQ);var GY=DM(GT.to,GX)||El(GR.marker)-El(GQ);if(GW>=0&&GY<=0||GW<=0&&GY>=0){continue}if(GW<=0&&(GR.marker.inclusiveRight&&GQ.inclusiveLeft?DM(GT.to,GO)>=0:DM(GT.to,GO)>0)||GW>=0&&(GR.marker.inclusiveRight&&GQ.inclusiveLeft?DM(GT.from,GX)<=0:DM(GT.from,GX)<0)){return true}}}}function FR(GO){var i;while(i=E(GO)){GO=i.find(-1,true).line}return GO}function EW(GO){var i;while(i=Et(GO)){GO=i.find(1,true).line}return GO}function R(GP){var GO,i;while(GO=Et(GP)){GP=GO.find(1,true).line;(i||(i=[])).push(GP)}return i}function Cr(GQ,GO){var GP=DC(GQ,GO),i=FR(GP);if(GP==i){return GO}return Fy(i)}function DP(GQ,GO){if(GO>GQ.lastLine()){return GO}var GP=DC(GQ,GO),i;if(!Ff(GQ,GP)){return GO}while(i=Et(GP)){GP=i.find(1,true).line}return Fy(GP)+1}function Ff(GS,GR){var GQ=D1&&GR.markedSpans;if(GQ){for(var GP=(void 0),GO=0;GO<GQ.length;++GO){GP=GQ[GO];if(!GP.marker.collapsed){continue}if(GP.from==null){return true}if(GP.marker.widgetNode){continue}if(GP.from==0&&GP.marker.inclusiveLeft&&B6(GS,GR,GP)){return true}}}}function B6(GT,GS,GP){if(GP.to==null){var GR=GP.marker.find(1,true);return B6(GT,GR.line,B0(GR.line.markedSpans,GP.marker))}if(GP.marker.inclusiveRight&&GP.to==GS.text.length){return true}for(var GQ=(void 0),GO=0;GO<GS.markedSpans.length;++GO){GQ=GS.markedSpans[GO];if(GQ.marker.collapsed&&!GQ.marker.widgetNode&&GQ.from==GP.to&&(GQ.to==null||GQ.to!=GP.from)&&(GQ.marker.inclusiveLeft||GP.marker.inclusiveRight)&&B6(GT,GS,GQ)){return true}}}function FC(GV){GV=FR(GV);var GS=0,GU=GV.parent;for(var GT=0;GT<GU.lines.length;++GT){var GP=GU.lines[GT];if(GP==GV){break}else{GS+=GP.height}}for(var GQ=GU.parent;GQ;GU=GQ,GQ=GU.parent){for(var GR=0;GR<GQ.children.length;++GR){var GO=GQ.children[GR];if(GO==GU){break}else{GS+=GO.height}}}return GS}function BZ(GR){if(GR.height==0){return 0}var GQ=GR.text.length,GP,i=GR;while(GP=E(i)){var GS=GP.find(0,true);i=GS.from.line;GQ+=GS.from.ch-GS.to.ch}i=GR;while(GP=Et(i)){var GO=GP.find(0,true);GQ-=i.text.length-GO.from.ch;i=GO.to.line;GQ+=i.text.length-GO.to.ch}return GQ}function D8(GO){var i=GO.display,GP=GO.doc;i.maxLine=DC(GP,GP.first);i.maxLineLength=BZ(i.maxLine);i.maxLineChanged=true;GP.iter(function(GR){var GQ=BZ(GR);if(GQ>i.maxLineLength){i.maxLineLength=GQ;i.maxLine=GR}})}function AF(GR,GO,GQ,GU){if(!GR){return GU(GO,GQ,"ltr")}var GT=false;for(var GP=0;GP<GR.length;++GP){var GS=GR[GP];if(GS.from<GQ&&GS.to>GO||GO==GQ&&GS.to==GO){GU(Math.max(GS.from,GO),Math.min(GS.to,GQ),GS.level==1?"rtl":"ltr");GT=true}}if(!GT){GU(GO,GQ,"ltr")}}var CH=null;function Ap(GR,GS,GT){var GQ;CH=null;for(var GP=0;GP<GR.length;++GP){var GO=GR[GP];if(GO.from<GS&&GO.to>GS){return GP}if(GO.to==GS){if(GO.from!=GO.to&&GT=="before"){GQ=GP}else{CH=GP}}if(GO.from==GS){if(GO.from!=GO.to&&GT!="before"){GQ=GP}else{CH=GP}}}return GQ!=null?GQ:CH}var DT=(function(){var GT="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var GP="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(GX){if(GX<=247){return GT.charAt(GX)}else{if(1424<=GX&&GX<=1524){return"R"}else{if(1536<=GX&&GX<=1785){return GP.charAt(GX-1536)}else{if(1774<=GX&&GX<=2220){return"r"}else{if(8192<=GX&&GX<=8203){return"w"}else{if(GX==8204){return"b"}else{return"L"}}}}}}}var GV=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var GR=/[stwN]/,GS=/[LRr]/,GW=/[Lb1n]/,GU=/[1n]/;var GO="L";function GQ(GY,GX,GZ){this.level=GY;this.from=GX;this.to=GZ}return function(Hl){if(!GV.test(Hl)){return false}var Hf=Hl.length,Hj=[];for(var Hr=0;Hr<Hf;++Hr){Hj.push(i(Hl.charCodeAt(Hr)))}for(var G7=0,G0=GO;G7<Hf;++G7){var GY=Hj[G7];if(GY=="m"){Hj[G7]=G0}else{G0=GY}}for(var G6=0,Hp=GO;G6<Hf;++G6){var Hi=Hj[G6];if(Hi=="1"&&Hp=="r"){Hj[G6]="n"}else{if(GS.test(Hi)){Hp=Hi;if(Hi=="r"){Hj[G6]="R"}}}}for(var G5=1,Hn=Hj[0];G5<Hf-1;++G5){var G4=Hj[G5];if(G4=="+"&&Hn=="1"&&Hj[G5+1]=="1"){Hj[G5]="1"}else{if(G4==","&&Hn==Hj[G5+1]&&(Hn=="1"||Hn=="n")){Hj[G5]=Hn}}Hn=G4}for(var Hb=0;Hb<Hf;++Hb){var Hm=Hj[Hb];if(Hm==","){Hj[Hb]="N"}else{if(Hm=="%"){var GX=(void 0);for(GX=Hb+1;GX<Hf&&Hj[GX]=="%";++GX){}var Hu=(Hb&&Hj[Hb-1]=="!")||(GX<Hf&&Hj[GX]=="1")?"1":"N";for(var Hq=Hb;Hq<GX;++Hq){Hj[Hq]=Hu}Hb=GX-1}}}for(var Ha=0,Hh=GO;Ha<Hf;++Ha){var Hg=Hj[Ha];if(Hh=="L"&&Hg=="1"){Hj[Ha]="L"}else{if(GS.test(Hg)){Hh=Hg}}}for(var G9=0;G9<Hf;++G9){if(GR.test(Hj[G9])){var Hc=(void 0);for(Hc=G9+1;Hc<Hf&&GR.test(Hj[Hc]);++Hc){}var G1=(G9?Hj[G9-1]:GO)=="L";var He=(Hc<Hf?Hj[Hc]:GO)=="L";var Hd=G1||He?"L":"R";for(var Hv=G9;Hv<Hc;++Hv){Hj[Hv]=Hd}G9=Hc-1}}var Ho=[],Hs;for(var G8=0;G8<Hf;){if(GW.test(Hj[G8])){var Hk=G8;for(++G8;G8<Hf&&GW.test(Hj[G8]);++G8){}Ho.push(new GQ(0,Hk,G8))}else{var G2=G8,G3=Ho.length;for(++G8;G8<Hf&&Hj[G8]!="L";++G8){}for(var Ht=G2;Ht<G8;){if(GU.test(Hj[Ht])){if(G2<Ht){Ho.splice(G3,0,new GQ(1,G2,Ht))}var GZ=Ht;for(++Ht;Ht<G8&&GU.test(Hj[Ht]);++Ht){}Ho.splice(G3,0,new GQ(2,GZ,Ht));G2=Ht}else{++Ht}}if(G2<G8){Ho.splice(G3,0,new GQ(1,G2,G8))}}}if(Ho[0].level==1&&(Hs=Hl.match(/^\s+/))){Ho[0].from=Hs[0].length;Ho.unshift(new GQ(0,0,Hs[0].length))}if(Au(Ho).level==1&&(Hs=Hl.match(/\s+$/))){Au(Ho).to-=Hs[0].length;Ho.push(new GQ(0,Hf-Hs[0].length,Hf))}return Ho}})();function ED(GO){var i=GO.order;if(i==null){i=GO.order=DT(GO.text)}return i}function B3(GQ,GO,i){var GP=Ak(GQ.text,GO+i,i);return GP<0||GP>GQ.text.length?null:GP}function BH(GP,GQ,i){var GO=B3(GP,GQ.ch,i);return GO==null?null:new A5(GQ.line,GO,i<0?"after":"before")}function D2(GV,GR,GX,GY,GO){if(GV){var GW=ED(GX);if(GW){var GQ=GO<0?Au(GW):GW[0];var i=(GO<0)==(GQ.level==1);var GS=i?"after":"before";var GT;if(GQ.level>0){var GU=Gg(GR,GX);GT=GO<0?GX.text.length-1:0;var GP=A2(GR,GU,GT).top;GT=D4(function(GZ){return A2(GR,GU,GZ).top==GP},(GO<0)==(GQ.level==1)?GQ.from:GQ.to-1,GT);if(GS=="before"){GT=B3(GX,GT,1,true)}}else{GT=GO<0?GQ.to:GQ.from}return new A5(GY,GT,GS)}}return new A5(GY,GO<0?GX.text.length:0,GO<0?"before":"after")}function B8(GT,GO,GP,GU){var GR=ED(GO);if(!GR){return BH(GO,GP,GU)}if(GP.ch>=GO.text.length){GP.ch=GO.text.length;GP.sticky="before"}else{if(GP.ch<=0){GP.ch=0;GP.sticky="after"}}var GV=Ap(GR,GP.ch,GP.sticky),GX=GR[GV];if(GX.level%2==0&&(GU>0?GX.to>GP.ch:GX.from<GP.ch)){return BH(GO,GP,GU)}var G2=function(G4,G3){return B3(GO,G4 instanceof A5?G4.ch:G4,G3)};var G0;var GW=function(G3){if(!GT.options.lineWrapping){return{begin:0,end:GO.text.length}}G0=G0||Gg(GT,GO);return Ey(GT,GO,G0,G3)};var GY=GW(GP.sticky=="before"?G2(GP,-1):GP.ch);if(GX.level%2==1){var i=G2(GP,-GU);if(i!=null&&(GU>0?i>=GX.from&&i>=GY.begin:i<=GX.to&&i<=GY.end)){var GS=GU<0?"before":"after";return new A5(GP.line,i,GS)}}var GZ=function(G7,G3,G9){var G5=function(Hb,Ha){return Ha?new A5(GP.line,G2(Hb,1),"before"):new A5(GP.line,Hb,"after")};for(;G7>=0&&G7<GR.length;G7+=G3){var G6=GR[G7];var G4=(G3>0)==(G6.level!=1);var G8=G4?G9.begin:G2(G9.end,-1);if(G6.from<=G8&&G8<G6.to){return G5(G8,G4)}G8=G4?G6.from:G2(G6.to,-1);if(G9.begin<=G8&&G8<G9.end){return G5(G8,G4)}}};var G1=GZ(GV+GU,GU,GY);if(G1){return G1}var GQ=GU>0?GY.end:G2(GY.begin,-1);if(GQ!=null&&!(GU>0&&GQ==GO.text.length)){G1=GZ(GU>0?0:GR.length-1,GU,GW(GQ));if(G1){return G1}}return null}var AW=[];var B=function(GP,i,GQ){if(GP.addEventListener){GP.addEventListener(i,GQ,false)}else{if(GP.attachEvent){GP.attachEvent("on"+i,GQ)}else{var GO=GP._handlers||(GP._handlers={});GO[i]=(GO[i]||AW).concat(GQ)}}};function Fz(GO,i){return GO._handlers&&GO._handlers[i]||AW}function Ax(GQ,i,GS){if(GQ.removeEventListener){GQ.removeEventListener(i,GS,false)}else{if(GQ.detachEvent){GQ.detachEvent("on"+i,GS)}else{var GO=GQ._handlers,GR=GO&&GO[i];if(GR){var GP=D3(GR,GS);if(GP>-1){GO[i]=GR.slice(0,GP).concat(GR.slice(GP+1))}}}}}function BM(GQ,GO){var GR=Fz(GQ,GO);if(!GR.length){return}var GS=Array.prototype.slice.call(arguments,2);for(var GP=0;GP<GR.length;++GP){GR[GP].apply(null,GS)}}function GC(GP,i,GO){if(typeof i=="string"){i={type:i,preventDefault:function(){this.defaultPrevented=true}}}BM(GP,GO||i.type,GP,i);return DU(i)||i.codemirrorIgnore}function Da(GR){var GP=GR._handlers&&GR._handlers.cursorActivity;if(!GP){return}var GQ=GR.curOp.cursorActivityHandlers||(GR.curOp.cursorActivityHandlers=[]);for(var GO=0;GO<GP.length;++GO){if(D3(GQ,GP[GO])==-1){GQ.push(GP[GO])}}}function GE(GO,i){return Fz(GO,i).length>0}function Aq(i){i.prototype.on=function(GO,GP){B(this,GO,GP)};i.prototype.off=function(GO,GP){Ax(this,GO,GP)}}function Gm(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function M(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function DU(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function Bc(i){Gm(i);M(i)}function Cu(i){return i.target||i.srcElement}function Bi(i){var GO=i.which;if(GO==null){if(i.button&1){GO=1}else{if(i.button&2){GO=3}else{if(i.button&4){GO=2}}}}if(Gv&&i.ctrlKey&&GO==1){GO=3}return GO}var AI=function(){if(AD&&Ew<9){return false}var i=Bo("div");return"draggable" in i||"dragDrop" in i}();var DF;function BB(GP){if(DF==null){var i=Bo("span","\u200b");EE(GP,Bo("span",[i,document.createTextNode("x")]));if(GP.firstChild.offsetHeight!=0){DF=i.offsetWidth<=1&&i.offsetHeight>2&&!(AD&&Ew<8)}}var GO=DF?Bo("span","\u200b"):Bo("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");GO.setAttribute("cm-text","");return GO}var AV;function Ce(GQ){if(AV!=null){return AV}var GP=EE(GQ,document.createTextNode("A\u062eA"));var i=EK(GP,0,1).getBoundingClientRect();var GO=EK(GP,1,2).getBoundingClientRect();A1(GQ);if(!i||i.left==i.right){return false}return AV=(GO.right-i.right<3)}var Gr="\n\nb".split(/\n/).length!=3?function(GS){var GQ=0,GP=[],GR=GS.length;while(GQ<=GR){var i=GS.indexOf("\n",GQ);if(i==-1){i=GS.length}var GT=GS.slice(GQ,GS.charAt(i-1)=="\r"?i-1:i);var GO=GT.indexOf("\r");if(GO!=-1){GP.push(GT.slice(0,GO));GQ+=GO+1}else{GP.push(GT);GQ=i+1}}return GP}:function(i){return i.split(/\r\n?|\n/)};var DJ=window.getSelection?function(GO){try{return GO.selectionStart!=GO.selectionEnd}catch(i){return false}}:function(GO){var GP;try{GP=GO.ownerDocument.selection.createRange()}catch(i){}if(!GP||GP.parentElement()!=GO){return false}return GP.compareEndPoints("StartToEnd",GP)!=0};var t=(function(){var i=Bo("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var Dk=null;function En(GQ){if(Dk!=null){return Dk}var GO=EE(GQ,Bo("span","x"));var i=GO.getBoundingClientRect();var GP=EK(GO,0,1).getBoundingClientRect();return Dk=Math.abs(i.left-GP.left)>1}var Cw={};var BC={};function EM(GO,i){if(arguments.length>2){i.dependencies=Array.prototype.slice.call(arguments,2)}Cw[GO]=i}function BF(i,GO){BC[i]=GO}function FG(i){if(typeof i=="string"&&BC.hasOwnProperty(i)){i=BC[i]}else{if(i&&typeof i.name=="string"&&BC.hasOwnProperty(i.name)){var GO=BC[i.name];if(typeof GO=="string"){GO={name:GO}}i=At(GO,i);i.name=GO.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return FG("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return FG("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function Dx(GQ,GS){GS=FG(GS);var GP=Cw[GS.name];if(!GP){return Dx(GQ,"text/plain")}var GO=GP(GQ,GS);if(EB.hasOwnProperty(GS.name)){var GT=EB[GS.name];for(var GR in GT){if(!GT.hasOwnProperty(GR)){continue}if(GO.hasOwnProperty(GR)){GO["_"+GR]=GO[GR]}GO[GR]=GT[GR]}}GO.name=GS.name;if(GS.helperType){GO.helperType=GS.helperType}if(GS.modeProps){for(var i in GS.modeProps){GO[i]=GS.modeProps[i]}}return GO}var EB={};function Ez(i,GO){var GP=EB.hasOwnProperty(i)?EB[i]:(EB[i]={});C1(GO,GP)}function CC(i,GR){if(GR===true){return GR}if(i.copyState){return i.copyState(GR)}var GP={};for(var GO in GR){var GQ=GR[GO];if(GQ instanceof Array){GQ=GQ.concat([])}GP[GO]=GQ}return GP}function BD(i,GP){var GO;while(i.innerMode){GO=i.innerMode(GP);if(!GO||GO.mode==i){break}GP=GO.state;i=GO.mode}return GO||{mode:i,state:GP}}function An(GO,i,GP){return GO.startState?GO.startState(i,GP):true}var EQ=function(GO,i){this.pos=this.start=0;this.string=GO;this.tabSize=i||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};EQ.prototype.eol=function(){return this.pos>=this.string.length};EQ.prototype.sol=function(){return this.pos==this.lineStart};EQ.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};EQ.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};EQ.prototype.eat=function(GO){var GP=this.string.charAt(this.pos);var i;if(typeof GO=="string"){i=GP==GO}else{i=GP&&(GO.test?GO.test(GP):GO(GP))}if(i){++this.pos;return GP}};EQ.prototype.eatWhile=function(i){var GO=this.pos;while(this.eat(i)){}return this.pos>GO};EQ.prototype.eatSpace=function(){var i=this;var GO=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++i.pos}return this.pos>GO};EQ.prototype.skipToEnd=function(){this.pos=this.string.length};EQ.prototype.skipTo=function(i){var GO=this.string.indexOf(i,this.pos);if(GO>-1){this.pos=GO;return true}};EQ.prototype.backUp=function(i){this.pos-=i};EQ.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=n(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?n(this.string,this.lineStart,this.tabSize):0)};EQ.prototype.indentation=function(){return n(this.string,null,this.tabSize)-(this.lineStart?n(this.string,this.lineStart,this.tabSize):0)};EQ.prototype.match=function(GR,GQ,i){if(typeof GR=="string"){var GS=function(GT){return i?GT.toLowerCase():GT};var GP=this.string.substr(this.pos,GR.length);if(GS(GP)==GS(GR)){if(GQ!==false){this.pos+=GR.length}return true}}else{var GO=this.string.slice(this.pos).match(GR);if(GO&&GO.index>0){return null}if(GO&&GQ!==false){this.pos+=GO[0].length}return GO}};EQ.prototype.current=function(){return this.string.slice(this.start,this.pos)};EQ.prototype.hideFirstChars=function(i,GO){this.lineStart+=i;try{return GO()}finally{this.lineStart-=i}};function CO(GQ,GO,GR,GP){var i=[GQ.state.modeGen],GT={};FL(GQ,GO.text,GQ.doc.mode,GR,function(GW,GV){return i.push(GW,GV)},GT,GP);var GU=function(GW){var GX=GQ.state.overlays[GW],GV=1,GY=0;FL(GQ,GO.text,GX.mode,true,function(G1,G0){var G3=GV;while(GY<G1){var G2=i[GV];if(G2>G1){i.splice(GV,1,G1,i[GV+1],G2)}GV+=2;GY=Math.min(G1,G2)}if(!G0){return}if(GX.opaque){i.splice(G3,GV-G3,G1,"overlay "+G0);GV=G3+2}else{for(;G3<GV;G3+=2){var GZ=i[G3+1];i[G3+1]=(GZ?GZ+" ":"")+"overlay "+G0}}},GT)};for(var GS=0;GS<GQ.state.overlays.length;++GS){GU(GS)}return{styles:i,classes:GT.bgClass||GT.textClass?GT:null}}function AC(GQ,GP,i){if(!GP.styles||GP.styles[0]!=GQ.state.modeGen){var GR=Ai(GQ,Fy(GP));var GO=CO(GQ,GP,GP.text.length>GQ.options.maxHighlightLength?CC(GQ.doc.mode,GR):GR);GP.stateAfter=GR;GP.styles=GO.styles;if(GO.classes){GP.styleClasses=GO.classes}else{if(GP.styleClasses){GP.styleClasses=null}}if(i===GQ.doc.frontier){GQ.doc.frontier++}}return GP.styles}function Ai(GS,GO,GQ){var GT=GS.doc,GP=GS.display;if(!GT.mode.startState){return true}var i=CF(GS,GO,GQ),GR=i>GT.first&&DC(GT,i-1).stateAfter;if(!GR){GR=An(GT.mode)}else{GR=CC(GT.mode,GR)}GT.iter(i,GO,function(GV){A0(GS,GV.text,GR);var GU=i==GO-1||i%5==0||i>=GP.viewFrom&&i<GP.viewTo;GV.stateAfter=GU?CC(GT.mode,GR):null;++i});if(GQ){GT.frontier=i}return GR}function A0(GR,GQ,GS,GO){var i=GR.doc.mode;var GP=new EQ(GQ,GR.options.tabSize);GP.start=GP.pos=GO||0;if(GQ==""){Eq(i,GS)}while(!GP.eol()){GA(i,GP,GS);GP.start=GP.pos}}function Eq(i,GP){if(i.blankLine){return i.blankLine(GP)}if(!i.innerMode){return}var GO=BD(i,GP);if(GO.mode.blankLine){return GO.mode.blankLine(GO.state)}}function GA(GP,GT,GR,GS){for(var GO=0;GO<10;GO++){if(GS){GS[0]=BD(GP,GR).mode}var GQ=GP.token(GT,GR);if(GT.pos>GT.start){return GQ}}throw new Error("Mode "+GP.name+" failed to advance stream.")}function EP(GQ,GO,GX,GP){var GY=function(GZ){return({start:GS.start,end:GS.pos,string:GS.current(),type:GU||null,state:GZ?CC(GV.mode,GT):GT})};var GV=GQ.doc,GW=GV.mode,GU;GO=GF(GV,GO);var i=DC(GV,GO.line),GT=Ai(GQ,GO.line,GX);var GS=new EQ(i.text,GQ.options.tabSize),GR;if(GP){GR=[]}while((GP||GS.pos<GO.ch)&&!GS.eol()){GS.start=GS.pos;GU=GA(GW,GS,GT);if(GP){GR.push(GY(true))}}return GP?GR:GY()}function GJ(i,GQ){if(i){for(;;){var GO=i.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!GO){break}i=i.slice(0,GO.index)+i.slice(GO.index+GO[0].length);var GP=GO[1]?"bgClass":"textClass";if(GQ[GP]==null){GQ[GP]=GO[2]}else{if(!(new RegExp("(?:^|s)"+GO[2]+"(?:$|s)")).test(GQ[GP])){GQ[GP]+=" "+GO[2]}}}}return i}function FL(GQ,GW,GY,GU,G0,GX,GP){var GR=GY.flattenSpans;if(GR==null){GR=GQ.options.flattenSpans}var GS=0,GO=null;var GT=new EQ(GW,GQ.options.tabSize),GV;var i=GQ.options.addModeClass&&[null];if(GW==""){GJ(Eq(GY,GU),GX)}while(!GT.eol()){if(GT.pos>GQ.options.maxHighlightLength){GR=false;if(GP){A0(GQ,GW,GU,GT.pos)}GT.pos=GW.length;GV=null}else{GV=GJ(GA(GY,GT,GU,i),GX)}if(i){var G1=i[0].name;if(G1){GV="m-"+(GV?G1+" "+GV:G1)}}if(!GR||GO!=GV){while(GS<GT.start){GS=Math.min(GT.start,GS+5000);G0(GS,GO)}GO=GV}GT.start=GT.pos}while(GS<GT.pos){var GZ=Math.min(GT.pos,GS+5000);G0(GZ,GO);GS=GZ}}function CF(GQ,GR,GU){var GW,GV,GS=GQ.doc;var GT=GU?-1:GR-(GQ.doc.mode.innerMode?1000:100);for(var GP=GR;GP>GT;--GP){if(GP<=GS.first){return GS.first}var i=DC(GS,GP-1);if(i.stateAfter&&(!GU||GP<=GS.frontier)){return GP}var GO=n(i.text,null,GQ.options.tabSize);if(GV==null||GW>GO){GV=GP-1;GW=GO}}return GV}var P=function(GO,i,GP){this.text=GO;Ao(this,i);this.height=GP?GP(this):1};P.prototype.lineNo=function(){return Fy(this)};Aq(P);function A7(GQ,GO,i,GP){GQ.text=GO;if(GQ.stateAfter){GQ.stateAfter=null}if(GQ.styles){GQ.styles=null}if(GQ.order!=null){GQ.order=null}Ej(GQ);Ao(GQ,i);var GR=GP?GP(GQ):1;if(GR!=GQ.height){Dr(GQ,GR)}}function Gu(i){i.parent=null;Ej(i)}var F9={};var Ca={};function Ds(GP,GO){if(!GP||/^\s*$/.test(GP)){return null}var i=GO.addModeClass?Ca:F9;return i[GP]||(i[GP]=GP.replace(/\S+/g,"cm-$&"))}function X(GR,GP){var GW=Bo("span",null,null,AJ?"padding-right: .1px":null);var GV={pre:Bo("pre",[GW],"CodeMirror-line"),content:GW,col:0,pos:0,cm:GR,trailingSpace:false,splitSpaces:(AD||AJ)&&GR.getOption("lineWrapping")};GW.setAttribute("role","presentation");GV.pre.setAttribute("role","presentation");GP.measure={};for(var GS=0;GS<=(GP.rest?GP.rest.length:0);GS++){var GO=GS?GP.rest[GS-1]:GP.line,GU=(void 0);GV.pos=0;GV.addToken=Ah;if(Ce(GR.display.measure)&&(GU=ED(GO))){GV.addToken=AQ(GV.addToken,GU)}GV.map=[];var GQ=GP!=GR.display.externalMeasured&&Fy(GO);D(GO,GV,AC(GR,GO,GQ));if(GO.styleClasses){if(GO.styleClasses.bgClass){GV.bgClass=EH(GO.styleClasses.bgClass,GV.bgClass||"")}if(GO.styleClasses.textClass){GV.textClass=EH(GO.styleClasses.textClass,GV.textClass||"")}}if(GV.map.length==0){GV.map.push(0,0,GV.content.appendChild(BB(GR.display.measure)))}if(GS==0){GP.measure.map=GV.map;GP.measure.cache={}}else{(GP.measure.maps||(GP.measure.maps=[])).push(GV.map);(GP.measure.caches||(GP.measure.caches=[])).push({})}}if(AJ){var GT=GV.content.lastChild;if(/\bcm-tab\b/.test(GT.className)||(GT.querySelector&&GT.querySelector(".cm-tab"))){GV.content.className="cm-tab-wrap-hack"}}BM(GR,"renderLine",GR,GP.line,GV.pre);if(GV.pre.className){GV.textClass=EH(GV.pre.className,GV.textClass||"")}return GV}function Ee(GO){var i=Bo("span","\u2022","cm-invalidchar");i.title="\\u"+GO.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function Ah(G3,i,G6,GQ,G2,GX,GP){if(!i){return}var G1=G3.splitSpaces?DK(i,G3.trailingSpace):i;var GU=G3.cm.state.specialChars,GO=false;var GZ;if(!GU.test(i)){G3.col+=i.length;GZ=document.createTextNode(G1);G3.map.push(G3.pos,G3.pos+i.length,GZ);if(AD&&Ew<9){GO=true}G3.pos+=i.length}else{GZ=document.createDocumentFragment();var G4=0;while(true){GU.lastIndex=G4;var GT=GU.exec(i);var G5=GT?GT.index-G4:i.length-G4;if(G5){var GY=document.createTextNode(G1.slice(G4,G4+G5));if(AD&&Ew<9){GZ.appendChild(Bo("span",[GY]))}else{GZ.appendChild(GY)}G3.map.push(G3.pos,G3.pos+G5,GY);G3.col+=G5;G3.pos+=G5}if(!GT){break}G4+=G5+1;var GR=(void 0);if(GT[0]=="\t"){var GV=G3.cm.options.tabSize,G0=GV-G3.col%GV;GR=GZ.appendChild(Bo("span",CD(G0),"cm-tab"));GR.setAttribute("role","presentation");GR.setAttribute("cm-text","\t");G3.col+=G0}else{if(GT[0]=="\r"||GT[0]=="\n"){GR=GZ.appendChild(Bo("span",GT[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));GR.setAttribute("cm-text",GT[0]);G3.col+=1}else{GR=G3.cm.options.specialCharPlaceholder(GT[0]);GR.setAttribute("cm-text",GT[0]);if(AD&&Ew<9){GZ.appendChild(Bo("span",[GR]))}else{GZ.appendChild(GR)}G3.col+=1}}G3.map.push(G3.pos,G3.pos+1,GR);G3.pos++}}G3.trailingSpace=G1.charCodeAt(i.length-1)==32;if(G6||GQ||G2||GO||GP){var GW=G6||"";if(GQ){GW+=GQ}if(G2){GW+=G2}var GS=Bo("span",[GZ],GW,GP);if(GX){GS.title=GX}return G3.content.appendChild(GS)}G3.content.appendChild(GZ)}function DK(GR,GT){if(GR.length>1&&!/  /.test(GR)){return GR}var GO=GT,GQ="";for(var GP=0;GP<GR.length;GP++){var GS=GR.charAt(GP);if(GS==" "&&GO&&(GP==GR.length-1||GR.charCodeAt(GP+1)==32)){GS="\u00a0"}GQ+=GS;GO=GS==" "}return GQ}function AQ(GO,i){return function(GR,GU,GT,GP,GS,GX,GQ){GT=GT?GT+" cm-force-border":"cm-force-border";var GZ=GR.pos,GV=GZ+GU.length;for(;;){var GW=(void 0);for(var GY=0;GY<i.length;GY++){GW=i[GY];if(GW.to>GZ&&GW.from<=GZ){break}}if(GW.to>=GV){return GO(GR,GU,GT,GP,GS,GX,GQ)}GO(GR,GU.slice(0,GW.to-GZ),GT,GP,null,GX,GQ);GP=null;GU=GU.slice(GW.to-GZ);GZ=GW.to}}}function K(GO,i,GP,GR){var GQ=!GR&&GP.widgetNode;if(GQ){GO.map.push(GO.pos,GO.pos+i,GQ)}if(!GR&&GO.cm.display.input.needsContentAttribute){if(!GQ){GQ=GO.content.appendChild(document.createElement("span"))}GQ.setAttribute("cm-marker",GP.id)}if(GQ){GO.cm.display.input.setUneditable(GQ);GO.content.appendChild(GQ)}GO.pos+=i;GO.trailingSpace=false}function D(GQ,G4,G8){var GP=GQ.markedSpans,G7=GQ.text,GT=0;if(!GP){for(var Hf=1;Hf<G8.length;Hf+=2){G4.addToken(G4,G7.slice(GT,GT=G8[Hf]),Ds(G8[Hf+1],G4.cm.options))}return}var GO=G7.length,He=0,GW=1,G2="",Hg,Ha;var G5=0,G6,G3,G1,G9,GX;for(;;){if(G5==He){G6=G3=G1=G9=Ha="";GX=null;G5=Infinity;var GU=[],GV=(void 0);for(var Hb=0;Hb<GP.length;++Hb){var GY=GP[Hb],GZ=GY.marker;if(GZ.type=="bookmark"&&GY.from==He&&GZ.widgetNode){GU.push(GZ)}else{if(GY.from<=He&&(GY.to==null||GY.to>He||GZ.collapsed&&GY.to==He&&GY.from==He)){if(GY.to!=null&&GY.to!=He&&G5>GY.to){G5=GY.to;G3=""}if(GZ.className){G6+=" "+GZ.className}if(GZ.css){Ha=(Ha?Ha+";":"")+GZ.css}if(GZ.startStyle&&GY.from==He){G1+=" "+GZ.startStyle}if(GZ.endStyle&&GY.to==G5){(GV||(GV=[])).push(GZ.endStyle,GY.to)}if(GZ.title&&!G9){G9=GZ.title}if(GZ.collapsed&&(!GX||Fl(GX.marker,GZ)<0)){GX=GY}}else{if(GY.from>He&&G5>GY.from){G5=GY.from}}}}if(GV){for(var GR=0;GR<GV.length;GR+=2){if(GV[GR+1]==G5){G3+=" "+GV[GR]}}}if(!GX||GX.from==He){for(var GS=0;GS<GU.length;++GS){K(G4,0,GU[GS])}}if(GX&&(GX.from||0)==He){K(G4,(GX.to==null?GO+1:GX.to)-He,GX.marker,GX.from==null);if(GX.to==null){return}if(GX.to==He){GX=false}}}if(He>=GO){break}var Hd=Math.min(GO,G5);while(true){if(G2){var G0=He+G2.length;if(!GX){var Hc=G0>Hd?G2.slice(0,Hd-He):G2;G4.addToken(G4,Hc,Hg?Hg+G6:G6,G1,He+Hc.length==G5?G3:"",G9,Ha)}if(G0>=Hd){G2=G2.slice(Hd-He);He=Hd;break}He=G0;G1=""}G2=G7.slice(GT,GT=G8[GW++]);Hg=Ds(G8[GW++],G4.cm.options)}}}function AB(GP,GO,i){this.line=GO;this.rest=R(GO);this.size=this.rest?Fy(Au(this.rest))-i+1:1;this.node=this.text=null;this.hidden=Ff(GP,GO)}function F4(GS,i,GO){var GR=[],GP;for(var GT=i;GT<GO;GT=GP){var GQ=new AB(GS.doc,DC(GS.doc,GT),GT);GP=GT+GQ.size;GR.push(GQ)}return GR}var DQ=null;function By(i){if(DQ){DQ.ops.push(i)}else{i.ownsGroup=DQ={ops:[i],delayedCallbacks:[]}}}function AG(GO){var GS=GO.delayedCallbacks,GP=0;do{for(;GP<GS.length;GP++){GS[GP].call(null)}for(var GR=0;GR<GO.ops.length;GR++){var GQ=GO.ops[GR];if(GQ.cursorActivityHandlers){while(GQ.cursorActivityCalled<GQ.cursorActivityHandlers.length){GQ.cursorActivityHandlers[GQ.cursorActivityCalled++].call(null,GQ.cm)}}}}while(GP<GS.length)}function B1(GP,GO){var i=GP.ownsGroup;if(!i){return}try{AG(i)}finally{DQ=null;GO(i)}}var Fg=null;function Y(GR,GO){var GT=Fz(GR,GO);if(!GT.length){return}var GU=Array.prototype.slice.call(arguments,2),GS;if(DQ){GS=DQ.delayedCallbacks}else{if(Fg){GS=Fg}else{GS=Fg=[];setTimeout(Eu,0)}}var GP=function(GV){GS.push(function(){return GT[GV].apply(null,GU)})};for(var GQ=0;GQ<GT.length;++GQ){GP(GQ)}}function Eu(){var GP=Fg;Fg=null;for(var GO=0;GO<GP.length;++GO){GP[GO]()}}function N(GR,GO,GQ,GP){for(var GS=0;GS<GO.changes.length;GS++){var i=GO.changes[GS];if(i=="text"){Ex(GR,GO)}else{if(i=="gutter"){EC(GR,GO,GQ,GP)}else{if(i=="class"){y(GO)}else{if(i=="widget"){Af(GR,GO,GP)}}}}}GO.changes=null}function FB(i){if(i.node==i.text){i.node=Bo("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(AD&&Ew<8){i.node.style.zIndex=2}}return i.node}function Cd(i){var GO=i.bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass;if(GO){GO+=" CodeMirror-linebackground"}if(i.background){if(GO){i.background.className=GO}else{i.background.parentNode.removeChild(i.background);i.background=null}}else{if(GO){var GP=FB(i);i.background=GP.insertBefore(Bo("div",null,GO),GP.firstChild)}}}function E7(GP,GO){var i=GP.display.externalMeasured;if(i&&i.line==GO.line){GP.display.externalMeasured=null;GO.measure=i.measure;return i.built}return X(GP,GO)}function Ex(GQ,GO){var GP=GO.text.className;var i=E7(GQ,GO);if(GO.text==GO.node){GO.node=i.pre}GO.text.parentNode.replaceChild(i.pre,GO.text);GO.text=i.pre;if(i.bgClass!=GO.bgClass||i.textClass!=GO.textClass){GO.bgClass=i.bgClass;GO.textClass=i.textClass;y(GO)}else{if(GP){GO.text.className=GP}}}function y(i){Cd(i);if(i.line.wrapClass){FB(i).className=i.line.wrapClass}else{if(i.node!=i.text){i.node.className=""}}var GO=i.textClass?i.textClass+" "+(i.line.textClass||""):i.line.textClass;i.text.className=GO||""}function EC(GQ,GP,GR,GU){if(GP.gutter){GP.node.removeChild(GP.gutter);GP.gutter=null}if(GP.gutterBackground){GP.node.removeChild(GP.gutterBackground);GP.gutterBackground=null}if(GP.line.gutterClass){var GS=FB(GP);GP.gutterBackground=Bo("div",null,"CodeMirror-gutter-background "+GP.line.gutterClass,("left: "+(GQ.options.fixedGutter?GU.fixedPos:-GU.gutterTotalWidth)+"px; width: "+(GU.gutterTotalWidth)+"px"));GS.insertBefore(GP.gutterBackground,GP.text)}var GO=GP.line.gutterMarkers;if(GQ.options.lineNumbers||GO){var GW=FB(GP);var i=GP.gutter=Bo("div",null,"CodeMirror-gutter-wrapper",("left: "+(GQ.options.fixedGutter?GU.fixedPos:-GU.gutterTotalWidth)+"px"));GQ.display.input.setUneditable(i);GW.insertBefore(i,GP.text);if(GP.line.gutterClass){i.className+=" "+GP.line.gutterClass}if(GQ.options.lineNumbers&&(!GO||!GO["CodeMirror-linenumbers"])){GP.lineNumber=i.appendChild(Bo("div",Ba(GQ.options,GR),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(GU.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(GQ.display.lineNumInnerWidth)+"px")))}if(GO){for(var GT=0;GT<GQ.options.gutters.length;++GT){var GV=GQ.options.gutters[GT],GX=GO.hasOwnProperty(GV)&&GO[GV];if(GX){i.appendChild(Bo("div",[GX],"CodeMirror-gutter-elt",("left: "+(GU.gutterLeft[GV])+"px; width: "+(GU.gutterWidth[GV])+"px")))}}}}}function Af(GR,i,GQ){if(i.alignable){i.alignable=null}for(var GP=i.node.firstChild,GO=(void 0);GP;GP=GO){GO=GP.nextSibling;if(GP.className=="CodeMirror-linewidget"){i.node.removeChild(GP)}}AM(GR,i,GQ)}function BT(GR,GO,GQ,GP){var i=E7(GR,GO);GO.text=GO.node=i.pre;if(i.bgClass){GO.bgClass=i.bgClass}if(i.textClass){GO.textClass=i.textClass}y(GO);EC(GR,GO,GQ,GP);AM(GR,GO,GP);return GO.node}function AM(GR,GO,GQ){CR(GR,GO.line,GO,GQ,true);if(GO.rest){for(var GP=0;GP<GO.rest.length;GP++){CR(GR,GO.rest[GP],GO,GQ,false)}}}function CR(GQ,GO,GP,GU,GT){if(!GO.widgets){return}var GR=FB(GP);for(var GW=0,GS=GO.widgets;GW<GS.length;++GW){var GV=GS[GW],GX=Bo("div",[GV.node],"CodeMirror-linewidget");if(!GV.handleMouseEvents){GX.setAttribute("cm-ignore-events","true")}DB(GV,GX,GP,GU);GQ.display.input.setUneditable(GX);if(GT&&GV.above){GR.insertBefore(GX,GP.gutter||GP.text)}else{GR.appendChild(GX)}Y(GV,"redraw")}}function DB(GR,GP,i,GQ){if(GR.noHScroll){(i.alignable||(i.alignable=[])).push(GP);var GO=GQ.wrapperWidth;GP.style.left=GQ.fixedPos+"px";if(!GR.coverGutter){GO-=GQ.gutterTotalWidth;GP.style.paddingLeft=GQ.gutterTotalWidth+"px"}GP.style.width=GO+"px"}if(GR.coverGutter){GP.style.zIndex=5;GP.style.position="relative";if(!GR.noHScroll){GP.style.marginLeft=-GQ.gutterTotalWidth+"px"}}}function Gx(GO){if(GO.height!=null){return GO.height}var GP=GO.doc.cm;if(!GP){return 0}if(!C6(document.body,GO.node)){var i="position: relative;";if(GO.coverGutter){i+="margin-left: -"+GP.display.gutters.offsetWidth+"px;"}if(GO.noHScroll){i+="width: "+GP.display.wrapper.clientWidth+"px;"}EE(GP.display.measure,Bo("div",[GO.node],null,i))}return GO.height=GO.node.parentNode.offsetHeight}function q(GP,i){for(var GO=Cu(i);GO!=GP.wrapper;GO=GO.parentNode){if(!GO||(GO.nodeType==1&&GO.getAttribute("cm-ignore-events")=="true")||(GO.parentNode==GP.sizer&&GO!=GP.mover)){return true}}}function V(i){return i.lineSpace.offsetTop}function FW(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function m(GO){if(GO.cachedPaddingH){return GO.cachedPaddingH}var i=EE(GO.measure,Bo("pre","x"));var GP=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle;var GQ={left:parseInt(GP.paddingLeft),right:parseInt(GP.paddingRight)};if(!isNaN(GQ.left)&&!isNaN(GQ.right)){GO.cachedPaddingH=GQ}return GQ}function x(i){return B5-i.display.nativeBarWidth}function Df(i){return i.display.scroller.clientWidth-x(i)-i.display.barWidth}function U(i){return i.display.scroller.clientHeight-x(i)-i.display.barHeight}function DS(GS,GQ,GP){var GO=GS.options.lineWrapping;var GX=GO&&Df(GS);if(!GQ.measure.heights||GO&&GQ.measure.width!=GX){var GU=GQ.measure.heights=[];if(GO){GQ.measure.width=GX;var GR=GQ.text.firstChild.getClientRects();for(var GT=0;GT<GR.length-1;GT++){var GV=GR[GT],GW=GR[GT+1];if(Math.abs(GV.bottom-GW.bottom)>2){GU.push((GV.bottom+GW.top)/2-GP.top)}}}GU.push(GP.bottom-GP.top)}}function Cj(GO,GR,GQ){if(GO.line==GR){return{map:GO.measure.map,cache:GO.measure.cache}}for(var GP=0;GP<GO.rest.length;GP++){if(GO.rest[GP]==GR){return{map:GO.measure.maps[GP],cache:GO.measure.caches[GP]}}}for(var GS=0;GS<GO.rest.length;GS++){if(Fy(GO.rest[GS])>GQ){return{map:GO.measure.maps[GS],cache:GO.measure.caches[GS],before:true}}}}function BE(GQ,GP){GP=FR(GP);var GO=Fy(GP);var i=GQ.display.externalMeasured=new AB(GQ.doc,GP,GO);i.lineN=GO;var GR=i.built=X(GQ,i);i.text=GR.pre;EE(GQ.display.lineMeasure,GR.pre);return i}function A3(GP,GO,i,GQ){return A2(GP,Gg(GP,GO),i,GQ)}function FA(GP,GO){if(GO>=GP.display.viewFrom&&GO<GP.display.viewTo){return GP.display.view[C8(GP,GO)]}var i=GP.display.externalMeasured;if(i&&GO>=i.lineN&&GO<i.lineN+i.size){return i}}function Gg(GQ,GP){var GO=Fy(GP);var i=FA(GQ,GO);if(i&&!i.text){i=null}else{if(i&&i.changes){N(GQ,i,GO,Fo(GQ));GQ.curOp.forceUpdate=true}}if(!i){i=BE(GQ,GP)}var GR=Cj(i,GP,GO);return{line:GP,view:i,rect:null,map:GR.map,cache:GR.cache,before:GR.before,hasHeights:false}}function A2(GS,GO,GR,GT,GQ){if(GO.before){GR=-1}var i=GR+(GT||""),GP;if(GO.cache.hasOwnProperty(i)){GP=GO.cache[i]}else{if(!GO.rect){GO.rect=GO.view.text.getBoundingClientRect()}if(!GO.hasHeights){DS(GS,GO.view,GO.rect);GO.hasHeights=true}GP=D0(GS,GO,GR,GT);if(!GP.bogus){GO.cache[i]=GP}}return{left:GP.left,right:GP.right,top:GQ?GP.rtop:GP.top,bottom:GQ?GP.rbottom:GP.bottom}}var W={left:0,right:0,top:0,bottom:0};function BO(GX,GR,GU){var GT,GP,GQ,GV,GO,GW;for(var GS=0;GS<GX.length;GS+=3){GO=GX[GS];GW=GX[GS+1];if(GR<GO){GP=0;GQ=1;GV="left"}else{if(GR<GW){GP=GR-GO;GQ=GP+1}else{if(GS==GX.length-3||GR==GW&&GX[GS+3]>GR){GQ=GW-GO;GP=GQ-1;if(GR>=GW){GV="right"}}}}if(GP!=null){GT=GX[GS+2];if(GO==GW&&GU==(GT.insertLeft?"left":"right")){GV=GU}if(GU=="left"&&GP==0){while(GS&&GX[GS-2]==GX[GS-3]&&GX[GS-1].insertLeft){GT=GX[(GS-=3)+2];GV="left"}}if(GU=="right"&&GP==GW-GO){while(GS<GX.length-3&&GX[GS+3]==GX[GS+4]&&!GX[GS+5].insertLeft){GT=GX[(GS+=3)+2];GV="right"}}break}}return{node:GT,start:GP,end:GQ,collapse:GV,coverStart:GO,coverEnd:GW}}function FT(GO,GS){var GQ=W;if(GS=="left"){for(var GP=0;GP<GO.length;GP++){if((GQ=GO[GP]).left!=GQ.right){break}}}else{for(var GR=GO.length-1;GR>=0;GR--){if((GQ=GO[GR]).left!=GQ.right){break}}}return GQ}function D0(G0,G5,GW,G7){var G3=BO(G5.map,GW,G7);var G2=G3.node,GY=G3.start,GU=G3.end,GZ=G3.collapse;var GV;if(G2.nodeType==3){for(var G6=0;G6<4;G6++){while(GY&&Fr(G5.line.text.charAt(G3.coverStart+GY))){--GY}while(G3.coverStart+GU<G3.coverEnd&&Fr(G5.line.text.charAt(G3.coverStart+GU))){++GU}if(AD&&Ew<9&&GY==0&&GU==G3.coverEnd-G3.coverStart){GV=G2.parentNode.getBoundingClientRect()}else{GV=FT(EK(G2,GY,GU).getClientRects(),G7)}if(GV.left||GV.right||GY==0){break}GU=GY;GY=GY-1;GZ="right"}if(AD&&Ew<11){GV=GN(G0.display.measure,GV)}}else{if(GY>0){GZ=G7="right"}var G8;if(G0.options.lineWrapping&&(G8=G2.getClientRects()).length>1){GV=G8[G7=="right"?G8.length-1:0]}else{GV=G2.getBoundingClientRect()}}if(AD&&Ew<9&&!GY&&(!GV||!GV.left&&!GV.right)){var GX=G2.parentNode.getClientRects()[0];if(GX){GV={left:GX.left,right:GX.left+DA(G0.display),top:GX.top,bottom:GX.bottom}}else{GV=W}}var G1=GV.top-G5.rect.top,GO=GV.bottom-G5.rect.top;var GS=(G1+GO)/2;var GQ=G5.view.measure.heights;var G4=0;for(;G4<GQ.length-1;G4++){if(GS<GQ[G4]){break}}var GT=G4?GQ[G4-1]:0,GR=GQ[G4];var GP={left:(GZ=="right"?GV.right:GV.left)-G5.rect.left,right:(GZ=="left"?GV.left:GV.right)-G5.rect.left,top:GT,bottom:GR};if(!GV.left&&!GV.right){GP.bogus=true}if(!G0.options.singleCursorHeightPerLine){GP.rtop=G1;GP.rbottom=GO}return GP}function GN(GQ,i){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!En(GQ)){return i}var GO=screen.logicalXDPI/screen.deviceXDPI;var GP=screen.logicalYDPI/screen.deviceYDPI;return{left:i.left*GO,right:i.right*GO,top:i.top*GP,bottom:i.bottom*GP}}function Ft(GO){if(GO.measure){GO.measure.cache={};GO.measure.heights=null;if(GO.rest){for(var GP=0;GP<GO.rest.length;GP++){GO.measure.caches[GP]={}}}}}function EF(GP){GP.display.externalMeasure=null;A1(GP.display.lineMeasure);for(var GO=0;GO<GP.display.view.length;GO++){Ft(GP.display.view[GO])}}function h(i){EF(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function EX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function EY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Cm(GR,GW,GQ,GS,GP){if(!GP&&GW.widgets){for(var GU=0;GU<GW.widgets.length;++GU){if(GW.widgets[GU].above){var GT=Gx(GW.widgets[GU]);GQ.top+=GT;GQ.bottom+=GT}}}if(GS=="line"){return GQ}if(!GS){GS="local"}var GX=FC(GW);if(GS=="local"){GX+=V(GR.display)}else{GX-=GR.display.viewOffset}if(GS=="page"||GS=="window"){var GO=GR.display.lineSpace.getBoundingClientRect();GX+=GO.top+(GS=="window"?0:EY());var GV=GO.left+(GS=="window"?0:EX());GQ.left+=GV;GQ.right+=GV}GQ.top+=GX;GQ.bottom+=GX;return GQ}function Bf(GT,GP,GO){if(GO=="div"){return GP}var GQ=GP.left,GR=GP.top;if(GO=="page"){GQ-=EX();GR-=EY()}else{if(GO=="local"||!GO){var i=GT.display.sizer.getBoundingClientRect();GQ+=i.left;GR+=i.top}}var GS=GT.display.lineSpace.getBoundingClientRect();return{left:GQ-GS.left,top:GR-GS.top}}function CB(GQ,GO,i,GP,GR){if(!GP){GP=DC(GQ.doc,GO.line)}return Cm(GQ,GP,A3(GQ,GP,GO.ch,GR),i)}function f(GP,GU,GR,GX,i,GS){GX=GX||DC(GP.doc,GU.line);if(!i){i=Gg(GP,GX)}function GT(G3,G1){var G2=A2(GP,i,G3,G1?"right":"left",GS);if(G1){G2.left=G2.right}else{G2.right=G2.left}return Cm(GP,GX,G2,GR)}var GW=ED(GX),GO=GU.ch,GQ=GU.sticky;if(GO>=GX.text.length){GO=GX.text.length;GQ="before"}else{if(GO<=0){GO=0;GQ="after"}}if(!GW){return GT(GQ=="before"?GO-1:GO,GQ=="before")}function G0(G4,G5,G2){var G3=GW[G5],G1=(G3.level%2)!=0;return GT(G2?G4-1:G4,G1!=G2)}var GV=Ap(GW,GO,GQ);var GZ=CH;var GY=G0(GO,GV,GQ=="before");if(GZ!=null){GY.other=G0(GO,GZ,GQ!="before")}return GY}function DH(GR,GO){var i=0;GO=GF(GR.doc,GO);if(!GR.options.lineWrapping){i=DA(GR.display)*GO.ch}var GQ=DC(GR.doc,GO.line);var GP=FC(GQ)+V(GR.display);return{left:i,right:i,top:GP,bottom:GP+GQ.height}}function GB(GR,GP,GS,i,GQ){var GO=A5(GR,GP,GS);GO.xRel=GQ;if(i){GO.outside=true}return GO}function Aw(GP,GU,GV){var GS=GP.doc;GV+=GP.display.viewOffset;if(GV<0){return GB(GS.first,0,null,true,-1)}var GQ=Gc(GS,GV),GR=GS.first+GS.size-1;if(GQ>GR){return GB(GS.first+GS.size-1,DC(GS,GR).text.length,null,true,1)}if(GU<0){GU=0}var i=DC(GS,GQ);for(;;){var GW=Bk(GP,i,GQ,GU,GV);var GO=Et(i);var GT=GO&&GO.find(0,true);if(GO&&(GW.ch>GT.from.ch||GW.ch==GT.from.ch&&GW.xRel>0)){GQ=Fy(i=GT.to.line)}else{return GW}}}function Cc(GS,GQ,GP,GR){var GT=function(GU){return Cm(GS,GQ,A2(GS,GP,GU),"line")};var i=GQ.text.length;var GO=D4(function(GU){return GT(GU-1).bottom<=GR},i,0);i=D4(function(GU){return GT(GU).top>GR},GO,i);return{begin:GO,end:i}}function Ey(GR,GP,GO,GQ){var i=Cm(GR,GP,A2(GR,GO,GQ),"line").top;return Cc(GR,GP,GO,i)}function Bk(GY,GR,i,G2,G3){G3-=FC(GR);var GU=0,GO=GR.text.length;var G0=Gg(GY,GR);var GW;var GS=ED(GR);if(GS){if(GY.options.lineWrapping){var GT;((GT=Cc(GY,GR,G0,G3),GU=GT.begin,GO=GT.end,GT))}GW=new A5(i,GU);var GQ=f(GY,GW,"line",GR,G0).left;var GZ=GQ<G2?1:-1;var GX,GP=GQ-G2,G1;do{GX=GP;G1=GW;GW=B8(GY,GR,GW,GZ);if(GW==null||GW.ch<GU||GO<=(GW.sticky=="before"?GW.ch-1:GW.ch)){GW=G1;break}GP=f(GY,GW,"line",GR,G0).left-G2}while((GZ<0)!=(GP<0)&&(Math.abs(GP)<=Math.abs(GX)));if(Math.abs(GP)>Math.abs(GX)){if((GP<0)==(GX<0)){throw new Error("Broke out of infinite loop in coordsCharInner")}GW=G1}}else{var GV=D4(function(G6){var G5=Cm(GY,GR,A2(GY,G0,G6),"line");if(G5.top>G3){GO=Math.min(G6,GO);return true}else{if(G5.bottom<=G3){return false}else{if(G5.left>G2){return true}else{if(G5.right<G2){return false}else{return(G2-G5.left<G5.right-G2)}}}}},GU,GO);GV=Ak(GR.text,GV,1);GW=new A5(i,GV,GV==GO?"before":"after")}var G4=f(GY,GW,"line",GR,G0);if(G3<G4.top||G4.bottom<G3){GW.outside=true}GW.xRel=G2<G4.left?-1:(G2>G4.right?1:0);return GW}var Fw;function EA(GP){if(GP.cachedTextHeight!=null){return GP.cachedTextHeight}if(Fw==null){Fw=Bo("pre");for(var GO=0;GO<49;++GO){Fw.appendChild(document.createTextNode("x"));Fw.appendChild(Bo("br"))}Fw.appendChild(document.createTextNode("x"))}EE(GP.measure,Fw);var GQ=Fw.offsetHeight/50;if(GQ>3){GP.cachedTextHeight=GQ}A1(GP.measure);return GQ||1}function DA(i){if(i.cachedCharWidth!=null){return i.cachedCharWidth}var GR=Bo("span","xxxxxxxxxx");var GO=Bo("pre",[GR]);EE(i.measure,GO);var GP=GR.getBoundingClientRect(),GQ=(GP.right-GP.left)/10;if(GQ>2){i.cachedCharWidth=GQ}return GQ||10}function Fo(GU){var GP=GU.display,GQ={},GT={};var GO=GP.gutters.clientLeft;for(var GR=GP.gutters.firstChild,GS=0;GR;GR=GR.nextSibling,++GS){GQ[GU.options.gutters[GS]]=GR.offsetLeft+GR.clientLeft+GO;GT[GU.options.gutters[GS]]=GR.clientWidth}return{fixedPos:BL(GP),gutterTotalWidth:GP.gutters.offsetWidth,gutterLeft:GQ,gutterWidth:GT,wrapperWidth:GP.wrapper.clientWidth}}function BL(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function AU(GP){var GO=EA(GP.display),GQ=GP.options.lineWrapping;var i=GQ&&Math.max(5,GP.display.scroller.clientWidth/DA(GP.display)-3);return function(GT){if(Ff(GP.doc,GT)){return 0}var GS=0;if(GT.widgets){for(var GR=0;GR<GT.widgets.length;GR++){if(GT.widgets[GR].height){GS+=GT.widgets[GR].height}}}if(GQ){return GS+(Math.ceil(GT.text.length/i)||1)*GO}else{return GS+GO}}}function BA(GO){var GP=GO.doc,i=AU(GO);GP.iter(function(GQ){var GR=i(GQ);if(GR!=GQ.height){Dr(GQ,GR)}})}function Eh(GS,i,GQ,GO){var GV=GS.display;if(!GQ&&Cu(i).getAttribute("cm-not-content")=="true"){return null}var GT,GU,GR=GV.lineSpace.getBoundingClientRect();try{GT=i.clientX-GR.left;GU=i.clientY-GR.top}catch(i){return null}var GW=Aw(GS,GT,GU),GP;if(GO&&GW.xRel==1&&(GP=DC(GS.doc,GW.line).text).length==GW.ch){var GX=n(GP,GP.length,GS.options.tabSize)-GP.length;GW=A5(GW.line,Math.max(0,Math.round((GT-m(GS.display).left)/DA(GS.display))-GX))}return GW}function C8(GR,GP){if(GP>=GR.display.viewTo){return null}GP-=GR.display.viewFrom;if(GP<0){return null}var GQ=GR.display.view;for(var GO=0;GO<GQ.length;GO++){GP-=GQ[GO].size;if(GP<0){return GO}}}function Ch(i){i.display.input.showSelection(i.display.input.prepareSelection())}function De(GP,GQ){var GT=GP.doc,GO={};var GW=GO.cursors=document.createDocumentFragment();var GS=GO.selection=document.createDocumentFragment();for(var GR=0;GR<GT.sel.ranges.length;GR++){if(GQ===false&&GR==GT.sel.primIndex){continue}var GU=GT.sel.ranges[GR];if(GU.from().line>=GP.display.viewTo||GU.to().line<GP.display.viewFrom){continue}var GV=GU.empty();if(GV||GP.options.showCursorWhenSelecting){FI(GP,GU.head,GW)}if(!GV){CJ(GP,GU,GS)}}return GO}function FI(GR,GQ,GS){var GP=f(GR,GQ,"div",null,null,!GR.options.singleCursorHeightPerLine);var i=GS.appendChild(Bo("div","\u00a0","CodeMirror-cursor"));i.style.left=GP.left+"px";i.style.top=GP.top+"px";i.style.height=Math.max(0,GP.bottom-GP.top)*GR.options.cursorHeight+"px";if(GP.other){var GO=GS.appendChild(Bo("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));GO.style.display="";GO.style.left=GP.other.left+"px";GO.style.top=GP.other.top+"px";GO.style.height=(GP.other.bottom-GP.other.top)*0.85+"px"}}function CJ(G0,GP,GU){var G1=G0.display,GY=G0.doc;var GT=document.createDocumentFragment();var GW=m(G0.display),GR=GW.left;var G3=Math.max(G1.sizerWidth,Df(G0)-G1.sizer.offsetLeft)-GW.right;function G2(G5,G6,G7,G8){if(G6<0){G6=0}G6=Math.round(G6);G8=Math.round(G8);GT.appendChild(Bo("div",null,"CodeMirror-selected",("position: absolute; left: "+G5+"px;\n                             top: "+G6+"px; width: "+(G7==null?G3-G5:G7)+"px;\n                             height: "+(G8-G6)+"px")))}function GZ(G5,G7,Ha){var Hc=DC(GY,G5);var G9=Hc.text.length;var G6,G8;function Hb(Hd,He){return CB(G0,A5(G5,Hd),"div",Hc,He)}AF(ED(Hc),G7||0,Ha==null?G9:Ha,function(Hi,Hj,Hf){var Hd=Hb(Hi,"left"),Hk,Hh,He;if(Hi==Hj){Hk=Hd;Hh=He=Hd.left}else{Hk=Hb(Hj-1,"right");if(Hf=="rtl"){var Hg=Hd;Hd=Hk;Hk=Hg}Hh=Hd.left;He=Hk.right}if(G7==null&&Hi==0){Hh=GR}if(Hk.top-Hd.top>3){G2(Hh,Hd.top,null,Hd.bottom);Hh=GR;if(Hd.bottom<Hk.top){G2(Hh,Hd.bottom,null,Hk.top)}}if(Ha==null&&Hj==G9){He=G3}if(!G6||Hd.top<G6.top||Hd.top==G6.top&&Hd.left<G6.left){G6=Hd}if(!G8||Hk.bottom>G8.bottom||Hk.bottom==G8.bottom&&Hk.right>G8.right){G8=Hk}if(Hh<GR+1){Hh=GR}G2(Hh,Hk.top,He-Hh,Hk.bottom)});return{start:G6,end:G8}}var GS=GP.from(),i=GP.to();if(GS.line==i.line){GZ(GS.line,GS.ch,i.ch)}else{var GO=DC(GY,GS.line),G4=DC(GY,i.line);var GV=FR(GO)==FR(G4);var GX=GZ(GS.line,GS.ch,GV?GO.text.length+1:null).end;var GQ=GZ(i.line,GV?0:null,i.ch).start;if(GV){if(GX.top<GQ.top-2){G2(GX.right,GX.top,null,GX.bottom);G2(GR,GQ.top,GQ.left,GQ.bottom)}else{G2(GX.right,GX.top,GQ.left-GX.right,GX.bottom)}}if(GX.bottom<GQ.top){G2(GR,GX.bottom,null,GQ.top)}}GU.appendChild(GT)}function E5(GP){if(!GP.state.focused){return}var i=GP.display;clearInterval(i.blinker);var GO=true;i.cursorDiv.style.visibility="";if(GP.options.cursorBlinkRate>0){i.blinker=setInterval(function(){return i.cursorDiv.style.visibility=(GO=!GO)?"":"hidden"},GP.options.cursorBlinkRate)}else{if(GP.options.cursorBlinkRate<0){i.cursorDiv.style.visibility="hidden"}}}function C7(i){if(!i.state.focused){i.display.input.focus();Ec(i)}}function Eg(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;d(i)}},100)}function Ec(GO,i){if(GO.state.delayingBlurEvent){GO.state.delayingBlurEvent=false}if(GO.options.readOnly=="nocursor"){return}if(!GO.state.focused){BM(GO,"focus",GO,i);GO.state.focused=true;Fc(GO.display.wrapper,"CodeMirror-focused");if(!GO.curOp&&GO.display.selForContextMenu!=GO.doc.sel){GO.display.input.reset();if(AJ){setTimeout(function(){return GO.display.input.reset(true)},20)}}GO.display.input.receivedFocus()}E5(GO)}function d(GO,i){if(GO.state.delayingBlurEvent){return}if(GO.state.focused){BM(GO,"blur",GO,i);GO.state.focused=false;F3(GO.display.wrapper,"CodeMirror-focused")}clearInterval(GO.display.blinker);setTimeout(function(){if(!GO.state.focused){GO.display.shift=false}},150)}function EZ(GQ){var GW=GQ.display,GO=GW.view;if(!GW.alignWidgets&&(!GW.gutters.firstChild||!GQ.options.fixedGutter)){return}var GV=BL(GW)-GW.scroller.scrollLeft+GQ.doc.scrollLeft;var GP=GW.gutters.offsetWidth,GT=GV+"px";for(var GU=0;GU<GO.length;GU++){if(!GO[GU].hidden){if(GQ.options.fixedGutter){if(GO[GU].gutter){GO[GU].gutter.style.left=GT}if(GO[GU].gutterBackground){GO[GU].gutterBackground.style.left=GT}}var GS=GO[GU].alignable;if(GS){for(var GR=0;GR<GS.length;GR++){GS[GR].style.left=GT}}}}if(GQ.options.fixedGutter){GW.gutters.style.left=(GV+GP)+"px"}}function EU(GS){if(!GS.options.lineNumbers){return false}var GT=GS.doc,GR=Ba(GS.options,GT.first+GT.size-1),GP=GS.display;if(GR.length!=GP.lineNumChars){var i=GP.measure.appendChild(Bo("div",[Bo("div",GR)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var GQ=i.firstChild.offsetWidth,GO=i.offsetWidth-GQ;GP.lineGutter.style.width="";GP.lineNumInnerWidth=Math.max(GQ,GP.lineGutter.offsetWidth-GO)+1;GP.lineNumWidth=GP.lineNumInnerWidth+GO;GP.lineNumChars=GP.lineNumInnerWidth?GR.length:-1;GP.lineGutter.style.width=GP.lineNumWidth+"px";Dn(GS);return true}return false}function BU(GQ){var GW=GQ.display;var GU=GW.lineDiv.offsetTop;for(var GT=0;GT<GW.view.length;GT++){var GO=GW.view[GT],GP=(void 0);if(GO.hidden){continue}if(AD&&Ew<8){var GX=GO.node.offsetTop+GO.node.offsetHeight;GP=GX-GU;GU=GX}else{var GS=GO.node.getBoundingClientRect();GP=GS.bottom-GS.top}var GR=GO.line.height-GP;if(GP<2){GP=EA(GW)}if(GR>0.001||GR<-0.001){Dr(GO.line,GP);BP(GO.line);if(GO.rest){for(var GV=0;GV<GO.rest.length;GV++){BP(GO.rest[GV])}}}}}function BP(GP){if(GP.widgets){for(var GO=0;GO<GP.widgets.length;++GO){GP.widgets[GO].height=GP.widgets[GO].node.parentNode.offsetHeight}}}function Aa(GU,GR,GQ){var GO=GQ&&GQ.top!=null?Math.max(0,GQ.top):GU.scroller.scrollTop;GO=Math.floor(GO-V(GU));var GS=GQ&&GQ.bottom!=null?GQ.bottom:GO+GU.wrapper.clientHeight;var i=Gc(GR,GO),GV=Gc(GR,GS);if(GQ&&GQ.ensure){var GP=GQ.ensure.from.line,GT=GQ.ensure.to.line;if(GP<i){i=GP;GV=Gc(GR,FC(DC(GR,GP))+GU.wrapper.clientHeight)}else{if(Math.min(GT,GR.lastLine())>=GV){i=Gc(GR,FC(DC(GR,GT))-GU.wrapper.clientHeight);GV=GT}}}return{from:i,to:Math.max(GV,i+1)}}function DD(GO,i){if(Math.abs(GO.doc.scrollTop-i)<2){return}GO.doc.scrollTop=i;if(!Gn){FD(GO,{top:i})}if(GO.display.scroller.scrollTop!=i){GO.display.scroller.scrollTop=i}GO.display.scrollbars.setScrollTop(i);if(Gn){FD(GO)}CY(GO,100)}function Bq(GP,GO,i){if(i?GO==GP.doc.scrollLeft:Math.abs(GP.doc.scrollLeft-GO)<2){return}GO=Math.min(GO,GP.display.scroller.scrollWidth-GP.display.scroller.clientWidth);GP.doc.scrollLeft=GO;EZ(GP);if(GP.display.scroller.scrollLeft!=GO){GP.display.scroller.scrollLeft=GO}GP.display.scrollbars.setScrollLeft(GO)}var EN=0;var Fm=null;if(AD){Fm=-0.53}else{if(Gn){Fm=15}else{if(Cf){Fm=-0.7}else{if(Fj){Fm=-1/3}}}}function EI(i){var GO=i.wheelDeltaX,GP=i.wheelDeltaY;if(GO==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS){GO=i.detail}if(GP==null&&i.detail&&i.axis==i.VERTICAL_AXIS){GP=i.detail}else{if(GP==null){GP=i.wheelDelta}}return{x:GO,y:GP}}function j(GO){var i=EI(GO);i.x*=Fm;i.y*=Fm;return i}function F(GS,GO){var GZ=EI(GO),GY=GZ.x,GV=GZ.y;var G0=GS.display,GX=G0.scroller;var G1=GX.scrollWidth>GX.clientWidth;var G2=GX.scrollHeight>GX.clientHeight;if(!(GY&&G1||GV&&G2)){return}if(GV&&Gv&&AJ){outer:for(var GP=GO.target,GU=G0.view;GP!=GX;GP=GP.parentNode){for(var GW=0;GW<GU.length;GW++){if(GU[GW].node==GP){GS.display.currentWheelTarget=GP;break outer}}}}if(GY&&!Gn&&!FX&&Fm!=null){if(GV&&G2){DD(GS,Math.max(0,Math.min(GX.scrollTop+GV*Fm,GX.scrollHeight-GX.clientHeight)))}Bq(GS,Math.max(0,Math.min(GX.scrollLeft+GY*Fm,GX.scrollWidth-GX.clientWidth)));if(!GV||(GV&&G2)){Gm(GO)}G0.wheelStartX=null;return}if(GV&&Fm!=null){var GR=GV*Fm;var GT=GS.doc.scrollTop,GQ=GT+G0.wrapper.clientHeight;if(GR<0){GT=Math.max(0,GT+GR-50)}else{GQ=Math.min(GS.doc.height,GQ+GR+50)}FD(GS,{top:GT,bottom:GQ})}if(EN<20){if(G0.wheelStartX==null){G0.wheelStartX=GX.scrollLeft;G0.wheelStartY=GX.scrollTop;G0.wheelDX=GY;G0.wheelDY=GV;setTimeout(function(){if(G0.wheelStartX==null){return}var G3=GX.scrollLeft-G0.wheelStartX;var i=GX.scrollTop-G0.wheelStartY;var G4=(i&&G0.wheelDY&&i/G0.wheelDY)||(G3&&G0.wheelDX&&G3/G0.wheelDX);G0.wheelStartX=G0.wheelStartY=null;if(!G4){return}Fm=(Fm*EN+G4)/(EN+1);++EN},200)}else{G0.wheelDX+=GY;G0.wheelDY+=GV}}}function Z(GQ){var i=GQ.display,GO=i.gutters.offsetWidth;var GP=Math.round(GQ.doc.height+FW(GQ.display));return{clientHeight:i.scroller.clientHeight,viewHeight:i.wrapper.clientHeight,scrollWidth:i.scroller.scrollWidth,clientWidth:i.scroller.clientWidth,viewWidth:i.wrapper.clientWidth,barLeft:GQ.options.fixedGutter?GO:0,docHeight:GP,scrollHeight:GP+x(GQ)+i.barHeight,nativeBarWidth:i.nativeBarWidth,gutterWidth:GO}}var Bm=function(i,GP,GR){this.cm=GR;var GQ=this.vert=Bo("div",[Bo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var GO=this.horiz=Bo("div",[Bo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i(GQ);i(GO);B(GQ,"scroll",function(){if(GQ.clientHeight){GP(GQ.scrollTop,"vertical")}});B(GO,"scroll",function(){if(GO.clientWidth){GP(GO.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(AD&&Ew<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};Bm.prototype.update=function(GS){var GR=GS.scrollWidth>GS.clientWidth+1;var GP=GS.scrollHeight>GS.clientHeight+1;var GQ=GS.nativeBarWidth;if(GP){this.vert.style.display="block";this.vert.style.bottom=GR?GQ+"px":"0";var i=GS.viewHeight-(GR?GQ:0);this.vert.firstChild.style.height=Math.max(0,GS.scrollHeight-GS.clientHeight+i)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(GR){this.horiz.style.display="block";this.horiz.style.right=GP?GQ+"px":"0";this.horiz.style.left=GS.barLeft+"px";var GO=GS.viewWidth-GS.barLeft-(GP?GQ:0);this.horiz.firstChild.style.width=Math.max(0,GS.scrollWidth-GS.clientWidth+GO)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&GS.clientHeight>0){if(GQ==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:GP?GQ:0,bottom:GR?GQ:0}};Bm.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}};Bm.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}};Bm.prototype.zeroWidthHack=function(){var i=Gv&&!BN?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new FN;this.disableVert=new FN};Bm.prototype.enableZeroWidthBar=function(GO,GP){GO.style.pointerEvents="auto";function i(){var GQ=GO.getBoundingClientRect();var GR=document.elementFromPoint(GQ.left+1,GQ.bottom-1);if(GR!=GO){GO.style.pointerEvents="none"}else{GP.set(1000,i)}}GP.set(1000,i)};Bm.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var D7=function(){};D7.prototype.update=function(){return{bottom:0,right:0}};D7.prototype.setScrollLeft=function(){};D7.prototype.setScrollTop=function(){};D7.prototype.clear=function(){};function CG(GR,GS){if(!GS){GS=Z(GR)}var GO=GR.display.barWidth,GP=GR.display.barHeight;A9(GR,GS);for(var GQ=0;GQ<4&&GO!=GR.display.barWidth||GP!=GR.display.barHeight;GQ++){if(GO!=GR.display.barWidth&&GR.options.lineWrapping){BU(GR)}A9(GR,Z(GR));GO=GR.display.barWidth;GP=GR.display.barHeight}}function A9(GP,GQ){var i=GP.display;var GO=i.scrollbars.update(GQ);i.sizer.style.paddingRight=(i.barWidth=GO.right)+"px";i.sizer.style.paddingBottom=(i.barHeight=GO.bottom)+"px";i.heightForcer.style.borderBottom=GO.bottom+"px solid transparent";if(GO.right&&GO.bottom){i.scrollbarFiller.style.display="block";i.scrollbarFiller.style.height=GO.bottom+"px";i.scrollbarFiller.style.width=GO.right+"px"}else{i.scrollbarFiller.style.display=""}if(GO.bottom&&GP.options.coverGutterNextToScrollbar&&GP.options.fixedGutter){i.gutterFiller.style.display="block";i.gutterFiller.style.height=GO.bottom+"px";i.gutterFiller.style.width=GQ.gutterWidth+"px"}else{i.gutterFiller.style.display=""}}var C9={"native":Bm,"null":D7};function Bz(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){F3(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new C9[i.options.scrollbarStyle](function(GO){i.display.wrapper.insertBefore(GO,i.display.scrollbarFiller);B(GO,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});GO.setAttribute("cm-not-content","true")},function(GO,GP){if(GP=="horizontal"){Bq(i,GO)}else{DD(i,GO)}},i);if(i.display.scrollbars.addClass){Fc(i.display.wrapper,i.display.scrollbars.addClass)}}function DY(GS,GO){if(GC(GS,"scrollCursorIntoView")){return}var GP=GS.display,GQ=GP.sizer.getBoundingClientRect(),GR=null;if(GO.top+GQ.top<0){GR=true}else{if(GO.bottom+GQ.top>(window.innerHeight||document.documentElement.clientHeight)){GR=false}}if(GR!=null&&!T){var i=Bo("div","\u200b",null,("position: absolute;\n                         top: "+(GO.top-GP.viewOffset-V(GS.display))+"px;\n                         height: "+(GO.bottom-GO.top+x(GS)+GP.barHeight)+"px;\n                         left: "+(GO.left)+"px; width: 2px;"));GS.display.lineSpace.appendChild(i);i.scrollIntoView(GR);GS.display.lineSpace.removeChild(i)}}function DW(GR,GT,GQ,i){if(i==null){i=0}var GU;for(var GO=0;GO<5;GO++){var GX=false;GU=f(GR,GT);var GS=!GQ||GQ==GT?GU:f(GR,GQ);var GP=Gh(GR,Math.min(GU.left,GS.left),Math.min(GU.top,GS.top)-i,Math.max(GU.left,GS.left),Math.max(GU.bottom,GS.bottom)+i);var GV=GR.doc.scrollTop,GW=GR.doc.scrollLeft;if(GP.scrollTop!=null){DD(GR,GP.scrollTop);if(Math.abs(GR.doc.scrollTop-GV)>1){GX=true}}if(GP.scrollLeft!=null){Bq(GR,GP.scrollLeft);if(Math.abs(GR.doc.scrollLeft-GW)>1){GX=true}}if(!GX){break}}return GU}function B7(GS,GR,GQ,i,GO){var GP=Gh(GS,GR,GQ,i,GO);if(GP.scrollTop!=null){DD(GS,GP.scrollTop)}if(GP.scrollLeft!=null){Bq(GS,GP.scrollLeft)}}function Gh(GW,GY,GZ,G2,G3){var GX=GW.display,GT=EA(GW.display);if(GZ<0){GZ=0}var GU=GW.curOp&&GW.curOp.scrollTop!=null?GW.curOp.scrollTop:GX.scroller.scrollTop;var GO=U(GW),GV={};if(G3-GZ>GO){G3=GZ+GO}var GS=GW.doc.height+FW(GX);var i=GZ<GT,GQ=G3>GS-GT;if(GZ<GU){GV.scrollTop=i?0:GZ}else{if(G3>GU+GO){var G1=Math.min(GZ,(GQ?GS:G3)-GO);if(G1!=GU){GV.scrollTop=G1}}}var GR=GW.curOp&&GW.curOp.scrollLeft!=null?GW.curOp.scrollLeft:GX.scroller.scrollLeft;var GP=Df(GW)-(GW.options.fixedGutter?GX.gutters.offsetWidth:0);var G0=G2-GY>GP;if(G0){G2=GY+GP}if(GY<10){GV.scrollLeft=0}else{if(GY<GR){GV.scrollLeft=Math.max(0,GY-(G0?0:10))}else{if(G2>GP+GR-3){GV.scrollLeft=G2+(G0?0:10)-GP}}}return GV}function b(GP,i,GO){if(i!=null||GO!=null){DE(GP)}if(i!=null){GP.curOp.scrollLeft=(GP.curOp.scrollLeft==null?GP.doc.scrollLeft:GP.curOp.scrollLeft)+i}if(GO!=null){GP.curOp.scrollTop=(GP.curOp.scrollTop==null?GP.doc.scrollTop:GP.curOp.scrollTop)+GO}}function G(GQ){DE(GQ);var i=GQ.getCursor(),GO=i,GP=i;if(!GQ.options.lineWrapping){GO=i.ch?A5(i.line,i.ch-1):i;GP=A5(i.line,i.ch+1)}GQ.curOp.scrollToPos={from:GO,to:GP,margin:GQ.options.cursorScrollMargin,isCursor:true}}function DE(GR){var GQ=GR.curOp.scrollToPos;if(GQ){GR.curOp.scrollToPos=null;var i=DH(GR,GQ.from),GP=DH(GR,GQ.to);var GO=Gh(GR,Math.min(i.left,GP.left),Math.min(i.top,GP.top)-GQ.margin,Math.max(i.right,GP.right),Math.max(i.bottom,GP.bottom)+GQ.margin);GR.scrollTo(GO.scrollLeft,GO.scrollTop)}}var Ef=0;function Ed(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++Ef};By(i.curOp)}function Bp(GO){var i=GO.curOp;B1(i,function(GP){for(var GQ=0;GQ<GP.ops.length;GQ++){GP.ops[GQ].cm.curOp=null}Gd(GP)})}function Gd(GP){var GT=GP.ops;for(var GQ=0;GQ<GT.length;GQ++){Cg(GT[GQ])}for(var GU=0;GU<GT.length;GU++){Bs(GT[GU])}for(var GR=0;GR<GT.length;GR++){Ci(GT[GR])}for(var GS=0;GS<GT.length;GS++){Bv(GT[GS])}for(var GO=0;GO<GT.length;GO++){CL(GT[GO])}}function Cg(i){var GO=i.cm,GP=GO.display;BK(GO);if(i.updateMaxLine){D8(GO)}i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<GP.viewFrom||i.scrollToPos.to.line>=GP.viewTo)||GP.maxLineChanged&&GO.options.lineWrapping;i.update=i.mustUpdate&&new Be(GO,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function Bs(i){i.updatedDisplay=i.mustUpdate&&Ad(i.cm,i.update)}function Ci(i){var GO=i.cm,GP=GO.display;if(i.updatedDisplay){BU(GO)}i.barMeasure=Z(GO);if(GP.maxLineChanged&&!GO.options.lineWrapping){i.adjustWidthTo=A3(GO,GP.maxLine,GP.maxLine.text.length).left+3;GO.display.sizerWidth=i.adjustWidthTo;i.barMeasure.scrollWidth=Math.max(GP.scroller.clientWidth,GP.sizer.offsetLeft+i.adjustWidthTo+x(GO)+GO.display.barWidth);i.maxScrollLeft=Math.max(0,GP.sizer.offsetLeft+i.adjustWidthTo-Df(GO))}if(i.updatedDisplay||i.selectionChanged){i.preparedSelection=GP.input.prepareSelection(i.focus)}}function Bv(i){var GP=i.cm;if(i.adjustWidthTo!=null){GP.display.sizer.style.minWidth=i.adjustWidthTo+"px";if(i.maxScrollLeft<GP.doc.scrollLeft){Bq(GP,Math.min(GP.display.scroller.scrollLeft,i.maxScrollLeft),true)}GP.display.maxLineChanged=false}var GO=i.focus&&i.focus==Fx()&&(!document.hasFocus||document.hasFocus());if(i.preparedSelection){GP.display.input.showSelection(i.preparedSelection,GO)}if(i.updatedDisplay||i.startHeight!=GP.doc.height){CG(GP,i.barMeasure)}if(i.updatedDisplay){C5(GP,i.barMeasure)}if(i.selectionChanged){E5(GP)}if(GP.state.focused&&i.updateInput){GP.display.input.reset(i.typing)}if(GO){C7(i.cm)}}function CL(GV){var GQ=GV.cm,GW=GQ.display,GT=GQ.doc;if(GV.updatedDisplay){CA(GQ,GV.update)}if(GW.wheelStartX!=null&&(GV.scrollTop!=null||GV.scrollLeft!=null||GV.scrollToPos)){GW.wheelStartX=GW.wheelStartY=null}if(GV.scrollTop!=null&&(GW.scroller.scrollTop!=GV.scrollTop||GV.forceScroll)){GT.scrollTop=Math.max(0,Math.min(GW.scroller.scrollHeight-GW.scroller.clientHeight,GV.scrollTop));GW.scrollbars.setScrollTop(GT.scrollTop);GW.scroller.scrollTop=GT.scrollTop}if(GV.scrollLeft!=null&&(GW.scroller.scrollLeft!=GV.scrollLeft||GV.forceScroll)){GT.scrollLeft=Math.max(0,Math.min(GW.scroller.scrollWidth-GW.scroller.clientWidth,GV.scrollLeft));GW.scrollbars.setScrollLeft(GT.scrollLeft);GW.scroller.scrollLeft=GT.scrollLeft;EZ(GQ)}if(GV.scrollToPos){var GU=DW(GQ,GF(GT,GV.scrollToPos.from),GF(GT,GV.scrollToPos.to),GV.scrollToPos.margin);if(GV.scrollToPos.isCursor&&GQ.state.focused){DY(GQ,GU)}}var GO=GV.maybeHiddenMarkers,GS=GV.maybeUnhiddenMarkers;if(GO){for(var GR=0;GR<GO.length;++GR){if(!GO[GR].lines.length){BM(GO[GR],"hide")}}}if(GS){for(var GP=0;GP<GS.length;++GP){if(GS[GP].lines.length){BM(GS[GP],"unhide")}}}if(GW.wrapper.offsetHeight){GT.scrollTop=GQ.display.scroller.scrollTop}if(GV.changeObjs){BM(GQ,"changes",GQ,GV.changeObjs)}if(GV.update){GV.update.finish()}}function Ct(i,GO){if(i.curOp){return GO()}Ed(i);try{return GO()}finally{Bp(i)}}function B4(i,GO){return function(){if(i.curOp){return GO.apply(i,arguments)}Ed(i);try{return GO.apply(i,arguments)}finally{Bp(i)}}}function Em(i){return function(){if(this.curOp){return i.apply(this,arguments)}Ed(this);try{return i.apply(this,arguments)}finally{Bp(this)}}}function O(i){return function(){var GO=this.cm;if(!GO||GO.curOp){return i.apply(this,arguments)}Ed(GO);try{return i.apply(this,arguments)}finally{Bp(GO)}}}function Fe(GP,GS,GW,GT){if(GS==null){GS=GP.doc.first}if(GW==null){GW=GP.doc.first+GP.doc.size}if(!GT){GT=0}var GV=GP.display;if(GT&&GW<GV.viewTo&&(GV.updateLineNumbers==null||GV.updateLineNumbers>GS)){GV.updateLineNumbers=GS}GP.curOp.viewChanged=true;if(GS>=GV.viewTo){if(D1&&Cr(GP.doc,GS)<GV.viewTo){D5(GP)}}else{if(GW<=GV.viewFrom){if(D1&&DP(GP.doc,GW+GT)>GV.viewFrom){D5(GP)}else{GV.viewFrom+=GT;GV.viewTo+=GT}}else{if(GS<=GV.viewFrom&&GW>=GV.viewTo){D5(GP)}else{if(GS<=GV.viewFrom){var i=l(GP,GW,GW+GT,1);if(i){GV.view=GV.view.slice(i.index);GV.viewFrom=i.lineN;GV.viewTo+=GT}else{D5(GP)}}else{if(GW>=GV.viewTo){var GQ=l(GP,GS,GS,-1);if(GQ){GV.view=GV.view.slice(0,GQ.index);GV.viewTo=GQ.lineN}else{D5(GP)}}else{var GO=l(GP,GS,GS,-1);var GR=l(GP,GW,GW+GT,1);if(GO&&GR){GV.view=GV.view.slice(0,GO.index).concat(F4(GP,GO.lineN,GR.lineN)).concat(GV.view.slice(GR.index));GV.viewTo+=GT}else{D5(GP)}}}}}}var GU=GV.externalMeasured;if(GU){if(GW<GU.lineN){GU.lineN+=GT}else{if(GS<GU.lineN+GU.size){GV.externalMeasured=null}}}}function CU(GS,GR,i){GS.curOp.viewChanged=true;var GP=GS.display,GT=GS.display.externalMeasured;if(GT&&GR>=GT.lineN&&GR<GT.lineN+GT.size){GP.externalMeasured=null}if(GR<GP.viewFrom||GR>=GP.viewTo){return}var GO=GP.view[C8(GS,GR)];if(GO.node==null){return}var GQ=GO.changes||(GO.changes=[]);if(D3(GQ,i)==-1){GQ.push(i)}}function D5(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function l(GS,GR,GV,GP){var GQ=C8(GS,GR),GT,GO=GS.display.view;if(!D1||GV==GS.doc.first+GS.doc.size){return{index:GQ,lineN:GV}}var GW=GS.display.viewFrom;for(var GU=0;GU<GQ;GU++){GW+=GO[GU].size}if(GW!=GR){if(GP>0){if(GQ==GO.length-1){return null}GT=(GW+GO[GQ].size)-GR;GQ++}else{GT=GW-GR}GR+=GT;GV+=GT}while(Cr(GS.doc,GV)!=GV){if(GQ==(GP<0?0:GO.length-1)){return null}GV+=GP*GO[GQ-(GP<0?1:0)].size;GQ+=GP}return{index:GQ,lineN:GV}}function E1(GR,i,GO){var GP=GR.display,GQ=GP.view;if(GQ.length==0||i>=GP.viewTo||GO<=GP.viewFrom){GP.view=F4(GR,i,GO);GP.viewFrom=i}else{if(GP.viewFrom>i){GP.view=F4(GR,i,GP.viewFrom).concat(GP.view)}else{if(GP.viewFrom<i){GP.view=GP.view.slice(C8(GR,i))}}GP.viewFrom=i;if(GP.viewTo<GO){GP.view=GP.view.concat(F4(GR,GP.viewTo,GO))}else{if(GP.viewTo>GO){GP.view=GP.view.slice(0,C8(GR,GO))}}}GP.viewTo=GO}function DN(GR){var GP=GR.display.view,GS=0;for(var GO=0;GO<GP.length;GO++){var GQ=GP[GO];if(!GQ.hidden&&(!GQ.node||GQ.changes)){++GS}}return GS}function CY(GO,i){if(GO.doc.mode.startState&&GO.doc.frontier<GO.display.viewTo){GO.state.highlight.set(i,CQ(AK,GO))}}function AK(GQ){var GR=GQ.doc;if(GR.frontier<GR.first){GR.frontier=GR.first}if(GR.frontier>=GQ.display.viewTo){return}var GO=+new Date+GQ.options.workTime;var i=CC(GR.mode,Ai(GQ,GR.frontier));var GP=[];GR.iter(GR.frontier,Math.min(GR.first+GR.size,GQ.display.viewTo+500),function(GT){if(GR.frontier>=GQ.display.viewFrom){var GY=GT.styles,GS=GT.text.length>GQ.options.maxHighlightLength;var GV=CO(GQ,GT,GS?CC(GR.mode,i):i,true);GT.styles=GV.styles;var GX=GT.styleClasses,GU=GV.classes;if(GU){GT.styleClasses=GU}else{if(GX){GT.styleClasses=null}}var GZ=!GY||GY.length!=GT.styles.length||GX!=GU&&(!GX||!GU||GX.bgClass!=GU.bgClass||GX.textClass!=GU.textClass);for(var GW=0;!GZ&&GW<GY.length;++GW){GZ=GY[GW]!=GT.styles[GW]}if(GZ){GP.push(GR.frontier)}GT.stateAfter=GS?i:CC(GR.mode,i)}else{if(GT.text.length<=GQ.options.maxHighlightLength){A0(GQ,GT.text,i)}GT.stateAfter=GR.frontier%5==0?CC(GR.mode,i):null}++GR.frontier;if(+new Date>GO){CY(GQ,GQ.options.workDelay);return true}});if(GP.length){Ct(GQ,function(){for(var GS=0;GS<GP.length;GS++){CU(GQ,GP[GS],"text")}})}}var Be=function(GQ,GP,GO){var i=GQ.display;this.viewport=GP;this.visible=Aa(i,GQ.doc,GP);this.editorIsHidden=!i.wrapper.offsetWidth;this.wrapperHeight=i.wrapper.clientHeight;this.wrapperWidth=i.wrapper.clientWidth;this.oldDisplayWidth=Df(GQ);this.force=GO;this.dims=Fo(GQ);this.events=[]};Be.prototype.signal=function(GO,i){if(GE(GO,i)){this.events.push(arguments)}};Be.prototype.finish=function(){var GO=this;for(var GP=0;GP<this.events.length;GP++){BM.apply(null,GO.events[GP])}};function BK(GO){var i=GO.display;if(!i.scrollbarsClipped&&i.scroller.offsetWidth){i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth;i.heightForcer.style.height=x(GO)+"px";i.sizer.style.marginBottom=-i.nativeBarWidth+"px";i.sizer.style.borderRightWidth=x(GO)+"px";i.scrollbarsClipped=true}}function Ad(GR,GS){var GV=GR.display,GT=GR.doc;if(GS.editorIsHidden){D5(GR);return false}if(!GS.force&&GS.visible.from>=GV.viewFrom&&GS.visible.to<=GV.viewTo&&(GV.updateLineNumbers==null||GV.updateLineNumbers>=GV.viewTo)&&GV.renderedView==GV.view&&DN(GR)==0){return false}if(EU(GR)){D5(GR);GS.dims=Fo(GR)}var GQ=GT.first+GT.size;var i=Math.max(GS.visible.from-GR.options.viewportMargin,GT.first);var GW=Math.min(GQ,GS.visible.to+GR.options.viewportMargin);if(GV.viewFrom<i&&i-GV.viewFrom<20){i=Math.max(GT.first,GV.viewFrom)}if(GV.viewTo>GW&&GV.viewTo-GW<20){GW=Math.min(GQ,GV.viewTo)}if(D1){i=Cr(GR.doc,i);GW=DP(GR.doc,GW)}var GU=i!=GV.viewFrom||GW!=GV.viewTo||GV.lastWrapHeight!=GS.wrapperHeight||GV.lastWrapWidth!=GS.wrapperWidth;E1(GR,i,GW);GV.viewOffset=FC(DC(GR.doc,GV.viewFrom));GR.display.mover.style.top=GV.viewOffset+"px";var GP=DN(GR);if(!GU&&GP==0&&!GS.force&&GV.renderedView==GV.view&&(GV.updateLineNumbers==null||GV.updateLineNumbers>=GV.viewTo)){return false}var GO=Fx();if(GP>4){GV.lineDiv.style.display="none"}Es(GR,GV.updateLineNumbers,GS.dims);if(GP>4){GV.lineDiv.style.display=""}GV.renderedView=GV.view;if(GO&&Fx()!=GO&&GO.offsetHeight){GO.focus()}A1(GV.cursorDiv);A1(GV.selectionDiv);GV.gutters.style.height=GV.sizer.style.minHeight=0;if(GU){GV.lastWrapHeight=GS.wrapperHeight;GV.lastWrapWidth=GS.wrapperWidth;CY(GR,400)}GV.updateLineNumbers=null;return true}function CA(GR,GO){var GQ=GO.viewport;for(var GP=true;;GP=false){if(!GP||!GR.options.lineWrapping||GO.oldDisplayWidth==Df(GR)){if(GQ&&GQ.top!=null){GQ={top:Math.min(GR.doc.height+FW(GR.display)-U(GR),GQ.top)}}GO.visible=Aa(GR.display,GR.doc,GQ);if(GO.visible.from>=GR.display.viewFrom&&GO.visible.to<=GR.display.viewTo){break}}if(!Ad(GR,GO)){break}BU(GR);var i=Z(GR);Ch(GR);CG(GR,i);C5(GR,i)}GO.signal(GR,"update",GR);if(GR.display.viewFrom!=GR.display.reportedViewFrom||GR.display.viewTo!=GR.display.reportedViewTo){GO.signal(GR,"viewportChange",GR,GR.display.viewFrom,GR.display.viewTo);GR.display.reportedViewFrom=GR.display.viewFrom;GR.display.reportedViewTo=GR.display.viewTo}}function FD(GQ,GP){var GO=new Be(GQ,GP);if(Ad(GQ,GO)){BU(GQ);CA(GQ,GO);var i=Z(GQ);Ch(GQ);CG(GQ,i);C5(GQ,i);GO.finish()}}function Es(GT,GV,GO){var G0=GT.display,GR=GT.options.lineNumbers;var GY=G0.lineDiv,GP=GY.firstChild;function GW(i){var G2=i.nextSibling;if(AJ&&Gv&&GT.display.currentWheelTarget==i){i.style.display="none"}else{i.parentNode.removeChild(i)}return G2}var GQ=G0.view,GU=G0.viewFrom;for(var GX=0;GX<GQ.length;GX++){var GS=GQ[GX];if(GS.hidden){}else{if(!GS.node||GS.node.parentNode!=GY){var GZ=BT(GT,GS,GU,GO);GY.insertBefore(GZ,GP)}else{while(GP!=GS.node){GP=GW(GP)}var G1=GR&&GV!=null&&GV<=GU&&GS.lineNumber;if(GS.changes){if(D3(GS.changes,"gutter")>-1){G1=false}N(GT,GS,GU,GO)}if(G1){A1(GS.lineNumber);GS.lineNumber.appendChild(document.createTextNode(Ba(GT.options,GU)))}GP=GS.node.nextSibling}}GU+=GS.size}while(GP){GP=GW(GP)}}function Dn(GO){var i=GO.display.gutters.offsetWidth;GO.display.sizer.style.marginLeft=i+"px"}function C5(i,GO){i.display.sizer.style.minHeight=GO.docHeight+"px";i.display.heightForcer.style.top=GO.docHeight+"px";i.display.gutters.style.height=(GO.docHeight+i.display.barHeight+x(i))+"px"}function CE(GT){var GQ=GT.display.gutters,GS=GT.options.gutters;A1(GQ);var GO=0;for(;GO<GS.length;++GO){var GR=GS[GO];var GP=GQ.appendChild(Bo("div",null,"CodeMirror-gutter "+GR));if(GR=="CodeMirror-linenumbers"){GT.display.lineGutter=GP;GP.style.width=(GT.display.lineNumWidth||1)+"px"}}GQ.style.display=GO?"":"none";Dn(GT)}function CP(i){var GO=D3(i.gutters,"CodeMirror-linenumbers");if(GO==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(GO>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(GO,1)}}}var Di=function(GO,i){this.ranges=GO;this.primIndex=i};Di.prototype.primary=function(){return this.ranges[this.primIndex]};Di.prototype.equals=function(GS){var GO=this;if(GS==this){return true}if(GS.primIndex!=this.primIndex||GS.ranges.length!=this.ranges.length){return false}for(var GP=0;GP<this.ranges.length;GP++){var GQ=GO.ranges[GP],GR=GS.ranges[GP];if(!F7(GQ.anchor,GR.anchor)||!F7(GQ.head,GR.head)){return false}}return true};Di.prototype.deepCopy=function(){var GO=this;var GQ=[];for(var GP=0;GP<this.ranges.length;GP++){GQ[GP]=new A(Gi(GO.ranges[GP].anchor),Gi(GO.ranges[GP].head))}return new Di(GQ,this.primIndex)};Di.prototype.somethingSelected=function(){var GO=this;for(var GP=0;GP<this.ranges.length;GP++){if(!GO.ranges[GP].empty()){return true}}return false};Di.prototype.contains=function(GQ,GR){var GO=this;if(!GR){GR=GQ}for(var GP=0;GP<this.ranges.length;GP++){var GS=GO.ranges[GP];if(DM(GR,GS.from())>=0&&DM(GQ,GS.to())<=0){return GP}}return -1};var A=function(GO,i){this.anchor=GO;this.head=i};A.prototype.from=function(){return Fq(this.anchor,this.head)};A.prototype.to=function(){return DL(this.anchor,this.head)};A.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function BY(GU,GP){var GR=GU[GP];GU.sort(function(GX,i){return DM(GX.from(),i.from())});GP=D3(GU,GR);for(var GS=1;GS<GU.length;GS++){var GO=GU[GS],GT=GU[GS-1];if(DM(GT.to(),GO.from())>=0){var GV=Fq(GT.from(),GO.from()),GW=DL(GT.to(),GO.to());var GQ=GT.empty()?GO.from()==GO.head:GT.from()==GT.head;if(GS<=GP){--GP}GU.splice(--GS,2,new A(GQ?GW:GV,GQ?GV:GW))}}return new Di(GU,GP)}function FM(GO,i){return new Di([new A(GO,i||GO)],0)}function FE(i){if(!i.text){return i.to}return A5(i.from.line+i.text.length-1,Au(i.text).length+(i.text.length==1?i.from.ch:0))}function CW(GO,i){if(DM(GO,i.from)<0){return GO}if(DM(GO,i.to)<=0){return FE(i)}var GQ=GO.line+i.text.length-(i.to.line-i.from.line)-1,GP=GO.ch;if(GO.line==i.to.line){GP+=FE(i).ch-i.to.ch}return A5(GQ,GP)}function p(GS,GP){var GQ=[];for(var GO=0;GO<GS.sel.ranges.length;GO++){var GR=GS.sel.ranges[GO];GQ.push(new A(CW(GR.anchor,GP),CW(GR.head,GP)))}return BY(GQ,GS.sel.primIndex)}function B2(GP,GO,i){if(GP.line==GO.line){return A5(i.line,GP.ch-GO.ch+i.ch)}else{return A5(i.line+(GP.line-GO.line),GP.ch)}}function DV(GU,GZ,GY){var GO=[];var GQ=A5(GU.first,0),GT=GQ;for(var GS=0;GS<GZ.length;GS++){var GV=GZ[GS];var GX=B2(GV.from,GQ,GT);var GP=B2(FE(GV),GQ,GT);GQ=GV.to;GT=GP;if(GY=="around"){var GW=GU.sel.ranges[GS],GR=DM(GW.head,GW.anchor)<0;GO[GS]=new A(GR?GP:GX,GR?GX:GP)}else{GO[GS]=new A(GX,GX)}}return new Di(GO,GU.sel.primIndex)}function DX(i){i.doc.mode=Dx(i.options,i.doc.modeOption);Dg(i)}function Dg(i){i.doc.iter(function(GO){if(GO.stateAfter){GO.stateAfter=null}if(GO.styles){GO.styles=null}});i.doc.frontier=i.doc.first;CY(i,100);i.state.modeGen++;if(i.curOp){Fe(i)}}function Gj(GO,i){return i.from.ch==0&&i.to.ch==0&&Au(i.text)==""&&(!GO.cm||GO.cm.options.wholeLineUpdateBefore)}function H(G0,G4,GY,G3){function GZ(G5){return GY?GY[G5]:null}function G2(G7,G5,G6){A7(G7,G5,G6,G3);Y(G7,"change",G7,G4)}function GO(G8,G7){var G6=[];for(var G5=G8;G5<G7;++G5){G6.push(new P(GV[G5],GZ(G5),G3))}return G6}var GX=G4.from,GP=G4.to,GV=G4.text;var i=DC(G0,GX.line),G1=DC(G0,GP.line);var GR=Au(GV),GQ=GZ(GV.length-1),GW=GP.line-GX.line;if(G4.full){G0.insert(0,GO(0,GV.length));G0.remove(GV.length,G0.size-GV.length)}else{if(Gj(G0,G4)){var GS=GO(0,GV.length-1);G2(G1,G1.text,GQ);if(GW){G0.remove(GX.line,GW)}if(GS.length){G0.insert(GX.line,GS)}}else{if(i==G1){if(GV.length==1){G2(i,i.text.slice(0,GX.ch)+GR+i.text.slice(GP.ch),GQ)}else{var GU=GO(1,GV.length-1);GU.push(new P(GR+i.text.slice(GP.ch),GQ,G3));G2(i,i.text.slice(0,GX.ch)+GV[0],GZ(0));G0.insert(GX.line+1,GU)}}else{if(GV.length==1){G2(i,i.text.slice(0,GX.ch)+GV[0]+G1.text.slice(GP.ch),GZ(0));G0.remove(GX.line+1,GW)}else{G2(i,i.text.slice(0,GX.ch)+GV[0],GZ(0));G2(G1,GR+G1.text.slice(GP.ch),GQ);var GT=GO(1,GV.length-1);if(GW>1){G0.remove(GX.line+1,GW-1)}G0.insert(GX.line+1,GT)}}}}Y(G0,"change",G0,G4)}function GH(GQ,GO,GP){function i(GW,GR,GS){if(GW.linked){for(var GT=0;GT<GW.linked.length;++GT){var GU=GW.linked[GT];if(GU.doc==GR){continue}var GV=GS&&GU.sharedHist;if(GP&&!GV){continue}GO(GU.doc,GV);i(GU.doc,GW,GV)}}}i(GQ,null,true)}function E4(i,GO){if(GO.cm){throw new Error("This document is already in use.")}i.doc=GO;GO.cm=i;BA(i);DX(i);if(!i.options.lineWrapping){D8(i)}i.options.mode=GO.modeOption;Fe(i)}function ER(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function BX(GP,i){var GO={from:Gi(i.from),to:FE(i),text:CI(GP,i.from,i.to)};BW(GP,GO,i.from.line,i.to.line+1);GH(GP,function(GQ){return BW(GQ,GO,i.from.line,i.to.line+1)},true);return GO}function Ep(i){while(i.length){var GO=Au(i);if(GO.ranges){i.pop()}else{break}}}function CK(GO,i){if(i){Ep(GO.done);return Au(GO.done)}else{if(GO.done.length&&!Au(GO.done).ranges){return Au(GO.done)}else{if(GO.done.length>1&&!GO.done[GO.done.length-2].ranges){GO.done.pop();return Au(GO.done)}}}}function EL(GS,GT,GO,GU){var GQ=GS.history;GQ.undone.length=0;var i=+new Date,GP;var GR;if((GQ.lastOp==GU||GQ.lastOrigin==GT.origin&&GT.origin&&((GT.origin.charAt(0)=="+"&&GS.cm&&GQ.lastModTime>i-GS.cm.options.historyEventDelay)||GT.origin.charAt(0)=="*"))&&(GP=CK(GQ,GQ.lastOp==GU))){GR=Au(GP.changes);if(DM(GT.from,GT.to)==0&&DM(GT.from,GR.to)==0){GR.to=FE(GT)}else{GP.changes.push(BX(GS,GT))}}else{var GV=Au(GQ.done);if(!GV||!GV.ranges){Ar(GS.sel,GQ.done)}GP={changes:[BX(GS,GT)],generation:GQ.generation};GQ.done.push(GP);while(GQ.done.length>GQ.undoDepth){GQ.done.shift();if(!GQ.done[0].ranges){GQ.done.shift()}}}GQ.done.push(GO);GQ.generation=++GQ.maxGeneration;GQ.lastModTime=GQ.lastSelTime=i;GQ.lastOp=GQ.lastSelOp=GU;GQ.lastOrigin=GQ.lastSelOrigin=GT.origin;if(!GR){BM(GS,"historyAdded")}}function Du(GR,GP,GQ,GO){var i=GP.charAt(0);return i=="*"||i=="+"&&GQ.ranges.length==GO.ranges.length&&GQ.somethingSelected()==GO.somethingSelected()&&new Date-GR.history.lastSelTime<=(GR.cm?GR.cm.options.historyEventDelay:500)}function Ae(GS,GQ,i,GP){var GO=GS.history,GR=GP&&GP.origin;if(i==GO.lastSelOp||(GR&&GO.lastSelOrigin==GR&&(GO.lastModTime==GO.lastSelTime&&GO.lastOrigin==GR||Du(GS,GR,Au(GO.done),GQ)))){GO.done[GO.done.length-1]=GQ}else{Ar(GQ,GO.done)}GO.lastSelTime=+new Date;GO.lastSelOrigin=GR;GO.lastSelOp=i;if(GP&&GP.clearRedo!==false){Ep(GO.undone)}}function Ar(GP,i){var GO=Au(i);if(!(GO&&GO.ranges&&GO.equals(GP))){i.push(GP)}}function BW(GS,GO,i,GP){var GR=GO["spans_"+GS.id],GQ=0;GS.iter(Math.max(GS.first,i),Math.min(GS.first+GS.size,GP),function(GT){if(GT.markedSpans){(GR||(GR=GO["spans_"+GS.id]={}))[GQ]=GT.markedSpans}++GQ})}function A8(GQ){if(!GQ){return null}var GP;for(var GO=0;GO<GQ.length;++GO){if(GQ[GO].marker.explicitlyCleared){if(!GP){GP=GQ.slice(0,GO)}}else{if(GP){GP.push(GQ[GO])}}}return !GP?GQ:GP.length?GP:null}function FJ(GS,GQ){var GR=GQ["spans_"+GS.id];if(!GR){return null}var GO=[];for(var GP=0;GP<GQ.text.length;++GP){GO.push(A8(GR[GP]))}return GO}function BR(GV,GW){var GO=FJ(GV,GW);var GX=Cz(GV,GW);if(!GO){return GX}if(!GX){return GO}for(var GT=0;GT<GO.length;++GT){var GQ=GO[GT],GP=GX[GT];if(GQ&&GP){spans:for(var GR=0;GR<GP.length;++GR){var GU=GP[GR];for(var GS=0;GS<GQ.length;++GS){if(GQ[GS].marker==GU.marker){continue spans}}GQ.push(GU)}}else{if(GP){GO[GT]=GP}}}return GO}function Fp(GX,GQ,GR){var GW=[];for(var GT=0;GT<GX.length;++GT){var GS=GX[GT];if(GS.ranges){GW.push(GR?Di.prototype.deepCopy.call(GS):GS);continue}var GZ=GS.changes,GY=[];GW.push({changes:GY});for(var GU=0;GU<GZ.length;++GU){var GO=GZ[GU],GV=(void 0);GY.push({from:GO.from,to:GO.to,text:GO.text});if(GQ){for(var GP in GO){if(GV=GP.match(/^spans_(\d+)$/)){if(D3(GQ,Number(GV[1]))>-1){Au(GY)[GP]=GO[GP];delete GO[GP]}}}}}}return GW}function AZ(GS,GR,GP,GQ){if(GS.cm&&GS.cm.display.shift||GS.extend){var i=GR.anchor;if(GQ){var GO=DM(GP,i)<0;if(GO!=(DM(GQ,i)<0)){i=GP;GP=GQ}else{if(GO!=(DM(GP,GQ)<0)){GP=GQ}}}return new A(i,GP)}else{return new A(GQ||GP,GP)}}function GK(GQ,GO,GP,i){CS(GQ,new Di([AZ(GQ,GQ.sel.primary(),GO,GP)],0),i)}function Gz(GT,GP,GQ){var GR=[];for(var GO=0;GO<GT.sel.ranges.length;GO++){GR[GO]=AZ(GT,GT.sel.ranges[GO],GP[GO],null)}var GS=BY(GR,GT.sel.primIndex);CS(GT,GS,GQ)}function Fu(GS,GO,GR,GQ){var GP=GS.sel.ranges.slice(0);GP[GO]=GR;CS(GS,BY(GP,GS.sel.primIndex),GQ)}function Ag(GQ,GP,GO,i){CS(GQ,FM(GP,GO),i)}function AN(GQ,GP,GO){var i={ranges:GP.ranges,update:function(GT){var GR=this;this.ranges=[];for(var GS=0;GS<GT.length;GS++){GR.ranges[GS]=new A(GF(GQ,GT[GS].anchor),GF(GQ,GT[GS].head))}},origin:GO&&GO.origin};BM(GQ,"beforeSelectionChange",GQ,i);if(GQ.cm){BM(GQ.cm,"beforeSelectionChange",GQ.cm,i)}if(i.ranges!=GP.ranges){return BY(i.ranges,i.ranges.length-1)}else{return GP}}function DG(GR,GP,GO){var i=GR.history.done,GQ=Au(i);if(GQ&&GQ.ranges){i[i.length-1]=GP;Dl(GR,GP,GO)}else{CS(GR,GP,GO)}}function CS(GP,GO,i){Dl(GP,GO,i);Ae(GP,GP.sel,GP.cm?GP.cm.curOp.id:NaN,i)}function Dl(GQ,GP,GO){if(GE(GQ,"beforeSelectionChange")||GQ.cm&&GE(GQ.cm,"beforeSelectionChange")){GP=AN(GQ,GP,GO)}var i=GO&&GO.bias||(DM(GP.primary().head,GQ.sel.primary().head)<0?-1:1);Ck(GQ,F6(GQ,GP,i,true));if(!(GO&&GO.scroll===false)&&GQ.cm){G(GQ.cm)}}function Ck(GO,i){if(i.equals(GO.sel)){return}GO.sel=i;if(GO.cm){GO.cm.curOp.updateInput=GO.cm.curOp.selectionChanged=true;Da(GO.cm)}Y(GO,"cursorActivity",GO)}function Bu(i){Ck(i,F6(i,i.sel,null,false),BV)}function F6(GT,GS,GU,GQ){var GO;for(var GV=0;GV<GS.ranges.length;GV++){var GW=GS.ranges[GV];var GP=GS.ranges.length==GT.sel.ranges.length&&GT.sel.ranges[GV];var GX=AE(GT,GW.anchor,GP&&GP.anchor,GU,GQ);var GR=AE(GT,GW.head,GP&&GP.head,GU,GQ);if(GO||GX!=GW.anchor||GR!=GW.head){if(!GO){GO=GS.ranges.slice(0,GV)}GO[GV]=new A(GX,GR)}}return GO?BY(GO,GS.primIndex):GS}function FO(GV,GQ,GR,GP,GX){var GO=DC(GV,GQ.line);if(GO.markedSpans){for(var GU=0;GU<GO.markedSpans.length;++GU){var GY=GO.markedSpans[GU],GW=GY.marker;if((GY.from==null||(GW.inclusiveLeft?GY.from<=GQ.ch:GY.from<GQ.ch))&&(GY.to==null||(GW.inclusiveRight?GY.to>=GQ.ch:GY.to>GQ.ch))){if(GX){BM(GW,"beforeCursorEnter");if(GW.explicitlyCleared){if(!GO.markedSpans){break}else{--GU;continue}}}if(!GW.atomic){continue}if(GR){var GS=GW.find(GP<0?1:-1),GT=(void 0);if(GP<0?GW.inclusiveRight:GW.inclusiveLeft){GS=Bx(GV,GS,-GP,GS&&GS.line==GQ.line?GO:null)}if(GS&&GS.line==GQ.line&&(GT=DM(GS,GR))&&(GP<0?GT<0:GT>0)){return FO(GV,GS,GQ,GP,GX)}}var GZ=GW.find(GP<0?-1:1);if(GP<0?GW.inclusiveLeft:GW.inclusiveRight){GZ=Bx(GV,GZ,GP,GZ.line==GQ.line?GO:null)}return GZ?FO(GV,GZ,GQ,GP,GX):null}}}return GQ}function AE(GT,GP,GR,GO,GQ){var i=GO||1;var GS=FO(GT,GP,GR,i,GQ)||(!GQ&&FO(GT,GP,GR,i,true))||FO(GT,GP,GR,-i,GQ)||(!GQ&&FO(GT,GP,GR,-i,true));if(!GS){GT.cantEdit=true;return A5(GT.first,0)}return GS}function Bx(GQ,GO,i,GP){if(i<0&&GO.ch==0){if(GO.line>GQ.first){return GF(GQ,A5(GO.line-1))}else{return null}}else{if(i>0&&GO.ch==(GP||DC(GQ,GO.line)).text.length){if(GO.line<GQ.first+GQ.size-1){return A5(GO.line+1,0)}else{return null}}else{return new A5(GO.line,GO.ch+i)}}}function Q(i){i.setSelection(A5(i.firstLine(),0),A5(i.lastLine()),BV)}function Cn(GQ,GO,i){var GP={canceled:false,from:GO.from,to:GO.to,text:GO.text,origin:GO.origin,cancel:function(){return GP.canceled=true}};if(i){GP.update=function(GR,GS,GT,GU){if(GR){GP.from=GF(GQ,GR)}if(GS){GP.to=GF(GQ,GS)}if(GT){GP.text=GT}if(GU!==undefined){GP.origin=GU}}}BM(GQ,"beforeChange",GQ,GP);if(GQ.cm){BM(GQ.cm,"beforeChange",GQ.cm,GP)}if(GP.canceled){return null}return{from:GP.from,to:GP.to,text:GP.text,origin:GP.origin}}function E3(GS,GP,GO){if(GS.cm){if(!GS.cm.curOp){return B4(GS.cm,E3)(GS,GP,GO)}if(GS.cm.state.suppressEdits){return}}if(GE(GS,"beforeChange")||GS.cm&&GE(GS.cm,"beforeChange")){GP=Cn(GS,GP,true);if(!GP){return}}var GR=F5&&!GO&&F1(GS,GP.from,GP.to);if(GR){for(var GQ=GR.length-1;GQ>=0;--GQ){Er(GS,{from:GR[GQ].from,to:GR[GQ].to,text:GQ?[""]:GP.text})}}else{Er(GS,GP)}}function Er(GQ,i){if(i.text.length==1&&i.text[0]==""&&DM(i.from,i.to)==0){return}var GO=p(GQ,i);EL(GQ,i,GO,GQ.cm?GQ.cm.curOp.id:NaN);w(GQ,i,GO,Cz(GQ,i));var GP=[];GH(GQ,function(GS,GR){if(!GR&&D3(GP,GS.history)==-1){Av(GS.history,i);GP.push(GS.history)}w(GS,i,null,Cz(GS,i))})}function Ek(GW,GZ,GO){if(GW.cm&&GW.cm.state.suppressEdits&&!GO){return}var GU=GW.history,GT,GQ=GW.sel;var GX=GZ=="undo"?GU.done:GU.undone,GY=GZ=="undo"?GU.undone:GU.done;var GV=0;for(;GV<GX.length;GV++){GT=GX[GV];if(GO?GT.ranges&&!GT.equals(GW.sel):!GT.ranges){break}}if(GV==GX.length){return}GU.lastOrigin=GU.lastSelOrigin=null;for(;;){GT=GX.pop();if(GT.ranges){Ar(GT,GY);if(GO&&!GT.equals(GW.sel)){CS(GW,GT,{clearRedo:false});return}GQ=GT}else{break}}var G0=[];Ar(GQ,GY);GY.push({changes:G0,generation:GU.generation});GU.generation=GT.generation||++GU.maxGeneration;var GS=GE(GW,"beforeChange")||GW.cm&&GE(GW.cm,"beforeChange");var G1=function(G2){var G3=GT.changes[G2];G3.origin=GZ;if(GS&&!Cn(GW,G3,false)){GX.length=0;return{}}G0.push(BX(GW,G3));var G4=G2?p(GW,G3):Au(GX);w(GW,G3,G4,BR(GW,G3));if(!G2&&GW.cm){GW.cm.scrollIntoView({from:G3.from,to:FE(G3)})}var G5=[];GH(GW,function(G6,i){if(!i&&D3(G5,G6.history)==-1){Av(G6.history,G3);G5.push(G6.history)}w(G6,G3,null,BR(G6,G3))})};for(var GR=GT.changes.length-1;GR>=0;--GR){var GP=G1(GR);if(GP){return GP.v}}}function Am(GQ,GP){if(GP==0){return}GQ.first+=GP;GQ.sel=new Di(Gp(GQ.sel.ranges,function(GR){return new A(A5(GR.anchor.line+GP,GR.anchor.ch),A5(GR.head.line+GP,GR.head.ch))}),GQ.sel.primIndex);if(GQ.cm){Fe(GQ.cm,GQ.first,GQ.first-GP,GP);for(var i=GQ.cm.display,GO=i.viewFrom;GO<i.viewTo;GO++){CU(GQ.cm,GO,"gutter")}}}function w(GS,i,GP,GQ){if(GS.cm&&!GS.cm.curOp){return B4(GS.cm,w)(GS,i,GP,GQ)}if(i.to.line<GS.first){Am(GS,i.text.length-1-(i.to.line-i.from.line));return}if(i.from.line>GS.lastLine()){return}if(i.from.line<GS.first){var GO=i.text.length-1-(GS.first-i.from.line);Am(GS,GO);i={from:A5(GS.first,0),to:A5(i.to.line+GO,i.to.ch),text:[Au(i.text)],origin:i.origin}}var GR=GS.lastLine();if(i.to.line>GR){i={from:i.from,to:A5(GR,DC(GS,GR).text.length),text:[i.text[0]],origin:i.origin}}i.removed=CI(GS,i.from,i.to);if(!GP){GP=p(GS,i)}if(GS.cm){BG(GS.cm,i,GQ)}else{H(GS,i,GQ)}Dl(GS,GP,BV)}function BG(GQ,GW,GP){var GU=GQ.doc,GX=GQ.display,GO=GW.from,GZ=GW.to;var GR=false,GS=GO.line;if(!GQ.options.lineWrapping){GS=Fy(FR(DC(GU,GO.line)));GU.iter(GS,GZ.line+1,function(G0){if(G0==GX.maxLine){GR=true;return true}})}if(GU.sel.contains(GW.from,GW.to)>-1){Da(GQ)}H(GU,GW,GP,AU(GQ));if(!GQ.options.lineWrapping){GU.iter(GS,GO.line+GW.text.length,function(G1){var G0=BZ(G1);if(G0>GX.maxLineLength){GX.maxLine=G1;GX.maxLineLength=G0;GX.maxLineChanged=true;GR=false}});if(GR){GQ.curOp.updateMaxLine=true}}GU.frontier=Math.min(GU.frontier,GO.line);CY(GQ,400);var GV=GW.text.length-(GZ.line-GO.line)-1;if(GW.full){Fe(GQ)}else{if(GO.line==GZ.line&&GW.text.length==1&&!Gj(GQ.doc,GW)){CU(GQ,GO.line,"text")}else{Fe(GQ,GO.line,GZ.line+1,GV)}}var GT=GE(GQ,"changes"),i=GE(GQ,"change");if(i||GT){var GY={from:GO,to:GZ,text:GW.text,removed:GW.removed,origin:GW.origin};if(i){Y(GQ,"change",GQ,GY)}if(GT){(GQ.curOp.changeObjs||(GQ.curOp.changeObjs=[])).push(GY)}}GQ.display.selForContextMenu=null}function Fv(GS,GP,GO,GQ,GR){if(!GQ){GQ=GO}if(DM(GQ,GO)<0){var i=GQ;GQ=GO;GO=i}if(typeof GP=="string"){GP=GS.splitLines(GP)}E3(GS,{from:GO,to:GQ,text:GP,origin:GR})}function AA(GP,i,GO,GQ){if(GO<GP.line){GP.line+=GQ}else{if(i<GP.line){GP.line=i;GP.ch=0}}}function Co(GP,GU,GX,GR){for(var GT=0;GT<GP.length;++GT){var GW=GP[GT],GS=true;if(GW.ranges){if(!GW.copied){GW=GP[GT]=GW.deepCopy();GW.copied=true}for(var GV=0;GV<GW.ranges.length;GV++){AA(GW.ranges[GV].anchor,GU,GX,GR);AA(GW.ranges[GV].head,GU,GX,GR)}continue}for(var GQ=0;GQ<GW.changes.length;++GQ){var GO=GW.changes[GQ];if(GX<GO.from.line){GO.from=A5(GO.from.line+GR,GO.from.ch);GO.to=A5(GO.to.line+GR,GO.to.ch)}else{if(GU<=GO.to.line){GS=false;break}}}if(!GS){GP.splice(0,GT+1);GT=0}}}function Av(GQ,GO){var i=GO.from.line,GP=GO.to.line,GR=GO.text.length-(GP-i)-1;Co(GQ.done,i,GP,GR);Co(GQ.undone,i,GP,GR)}function Bj(GS,i,GR,GP){var GO=i,GQ=i;if(typeof i=="number"){GQ=DC(GS,v(GS,i))}else{GO=Fy(i)}if(GO==null){return null}if(GP(GQ,GO)&&GS.cm){CU(GS.cm,GO,GR)}return GQ}var Fi=function(GQ){var GO=this;this.lines=GQ;this.parent=null;var GR=0;for(var GP=0;GP<GQ.length;++GP){GQ[GP].parent=GO;GR+=GQ[GP].height}this.height=GR};Fi.prototype.chunkSize=function(){return this.lines.length};Fi.prototype.removeInner=function(GT,GP){var GO=this;for(var GQ=GT,GR=GT+GP;GQ<GR;++GQ){var GS=GO.lines[GQ];GO.height-=GS.height;Gu(GS);Y(GS,"delete")}this.lines.splice(GT,GP)};Fi.prototype.collapse=function(i){i.push.apply(i,this.lines)};Fi.prototype.insertInner=function(GS,GQ,GO){var GR=this;this.height+=GO;this.lines=this.lines.slice(0,GS).concat(GQ).concat(this.lines.slice(GS));for(var GP=0;GP<GQ.length;++GP){GQ[GP].parent=GR}};Fi.prototype.iterN=function(GR,GO,GP){var i=this;for(var GQ=GR+GO;GR<GQ;++GR){if(GP(i.lines[GR])){return true}}};var Cl=function(GT){var GP=this;this.children=GT;var GO=0,GR=0;for(var GQ=0;GQ<GT.length;++GQ){var GS=GT[GQ];GO+=GS.chunkSize();GR+=GS.height;GS.parent=GP}this.size=GO;this.height=GR;this.parent=null};Cl.prototype.chunkSize=function(){return this.size};Cl.prototype.removeInner=function(GW,GT){var GR=this;this.size-=GT;for(var GS=0;GS<this.children.length;++GS){var GV=GR.children[GS],GO=GV.chunkSize();if(GW<GO){var GU=Math.min(GT,GO-GW),GP=GV.height;GV.removeInner(GW,GU);GR.height-=GP-GV.height;if(GO==GU){GR.children.splice(GS--,1);GV.parent=null}if((GT-=GU)==0){break}GW=0}else{GW-=GO}}if(this.size-GT<25&&(this.children.length>1||!(this.children[0] instanceof Fi))){var GQ=[];this.collapse(GQ);this.children=[new Fi(GQ)];this.children[0].parent=this}};Cl.prototype.collapse=function(GQ){var GO=this;for(var GP=0;GP<this.children.length;++GP){GO.children[GP].collapse(GQ)}};Cl.prototype.insertInner=function(GW,GR,GP){var GS=this;this.size+=GR.length;this.height+=GP;for(var GT=0;GT<this.children.length;++GT){var GV=GS.children[GT],GO=GV.chunkSize();if(GW<=GO){GV.insertInner(GW,GR,GP);if(GV.lines&&GV.lines.length>50){var GQ=GV.lines.length%25+25;for(var GU=GQ;GU<GV.lines.length;){var GX=new Fi(GV.lines.slice(GU,GU+=25));GV.height-=GX.height;GS.children.splice(++GT,0,GX);GX.parent=GS}GV.lines=GV.lines.slice(0,GQ);GS.maybeSpill()}break}GW-=GO}};Cl.prototype.maybeSpill=function(){if(this.children.length<=10){return}var GQ=this;do{var i=GQ.children.splice(GQ.children.length-5,5);var GP=new Cl(i);if(!GQ.parent){var GR=new Cl(GQ.children);GR.parent=GQ;GQ.children=[GR,GP];GQ=GR}else{GQ.size-=GP.size;GQ.height-=GP.height;var GO=D3(GQ.parent.children,GQ);GQ.parent.children.splice(GO+1,0,GP)}GP.parent=GQ.parent}while(GQ.children.length>10);GQ.parent.maybeSpill()};Cl.prototype.iterN=function(GV,GS,GT){var GQ=this;for(var GR=0;GR<this.children.length;++GR){var GU=GQ.children[GR],GO=GU.chunkSize();if(GV<GO){var GP=Math.min(GS,GO-GV);if(GU.iterN(GV,GP,GT)){return true}if((GS-=GP)==0){break}GV=0}else{GV-=GO}}};var EG=function(GR,GP,GQ){var i=this;if(GQ){for(var GO in GQ){if(GQ.hasOwnProperty(GO)){i[GO]=GQ[GO]}}}this.doc=GR;this.node=GP};EG.prototype.clear=function(){var GO=this;var GU=this.doc.cm,GR=this.line.widgets,GT=this.line,GP=Fy(GT);if(GP==null||!GR){return}for(var GQ=0;GQ<GR.length;++GQ){if(GR[GQ]==GO){GR.splice(GQ--,1)}}if(!GR.length){GT.widgets=null}var GS=Gx(this);Dr(GT,Math.max(0,GT.height-GS));if(GU){Ct(GU,function(){EV(GU,GT,-GS);CU(GU,GP,"widget")});Y(GU,"lineWidgetCleared",GU,this,GP)}};EG.prototype.changed=function(){var i=this;var GO=this.height,GQ=this.doc.cm,GP=this.line;this.height=null;var GR=Gx(this)-GO;if(!GR){return}Dr(GP,GP.height+GR);if(GQ){Ct(GQ,function(){GQ.curOp.forceUpdate=true;EV(GQ,GP,GR);Y(GQ,"lineWidgetChanged",GQ,i,Fy(GP))})}};Aq(EG);function EV(GO,i,GP){if(FC(i)<((GO.curOp&&GO.curOp.scrollTop)||GO.doc.scrollTop)){b(GO,null,GP)}}function Gq(GS,i,GO,GP){var GQ=new EG(GS,GO,GP);var GR=GS.cm;if(GR&&GQ.noHScroll){GR.display.alignWidgets=true}Bj(GS,i,"widget",function(GU){var GV=GU.widgets||(GU.widgets=[]);if(GQ.insertAt==null){GV.push(GQ)}else{GV.splice(Math.min(GV.length-1,Math.max(0,GQ.insertAt)),0,GQ)}GQ.line=GU;if(GR&&!Ff(GS,GU)){var GT=FC(GU)<GS.scrollTop;Dr(GU,GU.height+Gx(GQ));if(GT){b(GR,null,GQ.height)}GR.curOp.forceUpdate=true}return true});Y(GR,"lineWidgetAdded",GR,GQ,typeof i=="number"?i:Fy(i));return GQ}var D6=0;var o=function(GO,i){this.lines=[];this.type=i;this.doc=GO;this.id=++D6};o.prototype.clear=function(){var GU=this;if(this.explicitlyCleared){return}var GT=this.doc.cm,GP=GT&&!GT.curOp;if(GP){Ed(GT)}if(GE(this,"clear")){var GW=this.find();if(GW){Y(this,"clear",GW.from,GW.to)}}var GQ=null,GR=null;for(var GV=0;GV<this.lines.length;++GV){var GO=GU.lines[GV];var GX=B0(GO.markedSpans,GU);if(GT&&!GU.collapsed){CU(GT,Fy(GO),"text")}else{if(GT){if(GX.to!=null){GR=Fy(GO)}if(GX.from!=null){GQ=Fy(GO)}}}GO.markedSpans=Fa(GO.markedSpans,GX);if(GX.from==null&&GU.collapsed&&!Ff(GU.doc,GO)&&GT){Dr(GO,EA(GT.display))}}if(GT&&this.collapsed&&!GT.options.lineWrapping){for(var GS=0;GS<this.lines.length;++GS){var GZ=FR(GU.lines[GS]),GY=BZ(GZ);if(GY>GT.display.maxLineLength){GT.display.maxLine=GZ;GT.display.maxLineLength=GY;GT.display.maxLineChanged=true}}}if(GQ!=null&&GT&&this.collapsed){Fe(GT,GQ,GR+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(GT){Bu(GT.doc)}}if(GT){Y(GT,"markerCleared",GT,this,GQ,GR)}if(GP){Bp(GT)}if(this.parent){this.parent.clear()}};o.prototype.find=function(GP,GU){var GQ=this;if(GP==null&&this.type=="bookmark"){GP=1}var GT,GV;for(var GR=0;GR<this.lines.length;++GR){var GO=GQ.lines[GR];var GS=B0(GO.markedSpans,GQ);if(GS.from!=null){GT=A5(GU?GO:Fy(GO),GS.from);if(GP==-1){return GT}}if(GS.to!=null){GV=A5(GU?GO:Fy(GO),GS.to);if(GP==1){return GV}}}return GT&&{from:GT,to:GV}};o.prototype.changed=function(){var i=this;var GO=this.find(-1,true),GP=this,GQ=this.doc.cm;if(!GO||!GQ){return}Ct(GQ,function(){var GV=GO.line,GU=Fy(GO.line);var GR=FA(GQ,GU);if(GR){Ft(GR);GQ.curOp.selectionChanged=GQ.curOp.forceUpdate=true}GQ.curOp.updateMaxLine=true;if(!Ff(GP.doc,GV)&&GP.height!=null){var GS=GP.height;GP.height=null;var GT=Gx(GP)-GS;if(GT){Dr(GV,GV.height+GT)}}Y(GQ,"markerChanged",GQ,i)})};o.prototype.attachLine=function(GO){if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;if(!i.maybeHiddenMarkers||D3(i.maybeHiddenMarkers,this)==-1){(i.maybeUnhiddenMarkers||(i.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(GO)};o.prototype.detachLine=function(GO){this.lines.splice(D3(this.lines,GO),1);if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;(i.maybeHiddenMarkers||(i.maybeHiddenMarkers=[])).push(this)}};Aq(o);function AT(GV,GO,GX,GU,GW){if(GU&&GU.shared){return FZ(GV,GO,GX,GU,GW)}if(GV.cm&&!GV.cm.curOp){return B4(GV.cm,AT)(GV,GO,GX,GU,GW)}var GQ=new o(GV,GW),GS=DM(GO,GX);if(GU){C1(GU,GQ,false)}if(GS>0||GS==0&&GQ.clearWhenEmpty!==false){return GQ}if(GQ.replacedWith){GQ.collapsed=true;GQ.widgetNode=Bo("span",[GQ.replacedWith],"CodeMirror-widget");GQ.widgetNode.setAttribute("role","presentation");if(!GU.handleMouseEvents){GQ.widgetNode.setAttribute("cm-ignore-events","true")}if(GU.insertLeft){GQ.widgetNode.insertLeft=true}}if(GQ.collapsed){if(AY(GV,GO.line,GO,GX,GQ)||GO.line!=GX.line&&AY(GV,GX.line,GO,GX,GQ)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}FS()}if(GQ.addToHistory){EL(GV,{from:GO,to:GX,origin:"markText"},GV.sel,NaN)}var GP=GO.line,GR=GV.cm,GY;GV.iter(GP,GX.line+1,function(i){if(GR&&GQ.collapsed&&!GR.options.lineWrapping&&FR(i)==GR.display.maxLine){GY=true}if(GQ.collapsed&&GP!=GO.line){Dr(i,0)}Gf(i,new L(GQ,GP==GO.line?GO.ch:null,GP==GX.line?GX.ch:null));++GP});if(GQ.collapsed){GV.iter(GO.line,GX.line+1,function(i){if(Ff(GV,i)){Dr(i,0)}})}if(GQ.clearOnEnter){B(GQ,"beforeCursorEnter",function(){return GQ.clear()})}if(GQ.readOnly){GL();if(GV.history.done.length||GV.history.undone.length){GV.clearHistory()}}if(GQ.collapsed){GQ.id=++D6;GQ.atomic=true}if(GR){if(GY){GR.curOp.updateMaxLine=true}if(GQ.collapsed){Fe(GR,GO.line,GX.line+1)}else{if(GQ.className||GQ.title||GQ.startStyle||GQ.endStyle||GQ.css){for(var GT=GO.line;GT<=GX.line;GT++){CU(GR,GT,"text")}}}if(GQ.atomic){Bu(GR.doc)}Y(GR,"markerAdded",GR,GQ)}return GQ}var Ab=function(GO,GP){var GR=this;this.markers=GO;this.primary=GP;for(var GQ=0;GQ<GO.length;++GQ){GO[GQ].parent=GR}};Ab.prototype.clear=function(){var GO=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var GP=0;GP<this.markers.length;++GP){GO.markers[GP].clear()}Y(this,"clear")};Ab.prototype.find=function(i,GO){return this.primary.find(i,GO)};Aq(Ab);function FZ(GR,i,GU,GQ,GT){GQ=C1(GQ);GQ.shared=false;var GO=[AT(GR,i,GU,GQ,GT)],GP=GO[0];var GS=GQ.widgetNode;GH(GR,function(GW){if(GS){GQ.widgetNode=GS.cloneNode(true)}GO.push(AT(GW,GF(GW,i),GF(GW,GU),GQ,GT));for(var GV=0;GV<GW.linked.length;++GV){if(GW.linked[GV].isParent){return}}GP=Au(GO)});return new Ab(GO,GP)}function DO(i){return i.findMarks(A5(i.first,0),i.clipPos(A5(i.lastLine())),function(GO){return GO.parent})}function Fd(GT,GO){for(var GS=0;GS<GO.length;GS++){var GP=GO[GS],GQ=GP.find();var GV=GT.clipPos(GQ.from),GR=GT.clipPos(GQ.to);if(DM(GV,GR)){var GU=AT(GT,GV,GR,GP.primary,GP.primary.type);GP.markers.push(GU);GU.parent=GP}}}function Ac(GO){var GQ=function(GS){var GT=GO[GS],GU=[GT.primary.doc];GH(GT.primary.doc,function(i){return GU.push(i)});for(var GV=0;GV<GT.markers.length;GV++){var GR=GT.markers[GV];if(D3(GU,GR.doc)==-1){GR.parent=null;GT.markers.splice(GV--,1)}}};for(var GP=0;GP<GO.length;GP++){GQ(GP)}}var Bw=0;var Fs=function(GO,i,GP,GR){if(!(this instanceof Fs)){return new Fs(GO,i,GP,GR)}if(GP==null){GP=0}Cl.call(this,[new Fi([new P("",null)])]);this.first=GP;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=GP;var GQ=A5(GP,0);this.sel=FM(GQ);this.history=new ER(null);this.id=++Bw;this.modeOption=i;this.lineSep=GR;this.extend=false;if(typeof GO=="string"){GO=this.splitLines(GO)}H(this,{from:GQ,to:GQ,text:GO});CS(this,FM(GQ),BV)};Fs.prototype=At(Cl.prototype,{constructor:Fs,iter:function(i,GO,GP){if(GP){this.iterN(i-this.first,GO-i,GP)}else{this.iterN(this.first,this.first+this.size,i)}},insert:function(GR,GQ){var GO=0;for(var GP=0;GP<GQ.length;++GP){GO+=GQ[GP].height}this.insertInner(GR-this.first,GQ,GO)},remove:function(GO,i){this.removeInner(GO-this.first,i)},getValue:function(i){var GO=EJ(this,this.first,this.first+this.size);if(i===false){return GO}return GO.join(i||this.lineSeparator())},setValue:O(function(i){var GO=A5(this.first,0),GP=this.first+this.size-1;E3(this,{from:GO,to:A5(GP,DC(this,GP).text.length),text:this.splitLines(i),origin:"setValue",full:true},true);CS(this,FM(GO))}),replaceRange:function(GO,i,GP,GQ){i=GF(this,i);GP=GP?GF(this,GP):i;Fv(this,GO,i,GP,GQ)},getRange:function(i,GP,GO){var GQ=CI(this,GF(this,i),GF(this,GP));if(GO===false){return GQ}return GQ.join(GO||this.lineSeparator())},getLine:function(GO){var i=this.getLineHandle(GO);return i&&i.text},getLineHandle:function(i){if(FV(this,i)){return DC(this,i)}},getLineNumber:function(i){return Fy(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=DC(this,i)}return FR(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return GF(this,i)},getCursor:function(GO){var i=this.sel.primary(),GP;if(GO==null||GO=="head"){GP=i.head}else{if(GO=="anchor"){GP=i.anchor}else{if(GO=="end"||GO=="to"||GO===false){GP=i.to()}else{GP=i.from()}}}return GP},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:O(function(GP,GO,i){Ag(this,GF(this,typeof GP=="number"?A5(GP,GO||0):GP),null,i)}),setSelection:O(function(GP,GO,i){Ag(this,GF(this,GP),GF(this,GO||GP),i)}),extendSelection:O(function(GO,GP,i){GK(this,GF(this,GO),GP&&GF(this,GP),i)}),extendSelections:O(function(i,GO){Gz(this,Ge(this,i),GO)}),extendSelectionsBy:O(function(GP,GO){var i=Gp(this.sel.ranges,GP);Gz(this,Ge(this,i),GO)}),setSelections:O(function(GR,GP,GS){var GO=this;if(!GR.length){return}var GT=[];for(var GQ=0;GQ<GR.length;GQ++){GT[GQ]=new A(GF(GO,GR[GQ].anchor),GF(GO,GR[GQ].head))}if(GP==null){GP=Math.min(GR.length-1,this.sel.primIndex)}CS(this,BY(GT,GP),GS)}),addSelection:O(function(GQ,GP,GO){var i=this.sel.ranges.slice(0);i.push(new A(GF(this,GQ),GF(this,GP||GQ)));CS(this,BY(i,i.length-1),GO)}),getSelection:function(GP){var GO=this;var GR=this.sel.ranges,GT;for(var GQ=0;GQ<GR.length;GQ++){var GS=CI(GO,GR[GQ].from(),GR[GQ].to());GT=GT?GT.concat(GS):GS}if(GP===false){return GT}else{return GT.join(GP||this.lineSeparator())}},getSelections:function(GQ){var GP=this;var GO=[],GS=this.sel.ranges;for(var GR=0;GR<GS.length;GR++){var GT=CI(GP,GS[GR].from(),GS[GR].to());if(GQ!==false){GT=GT.join(GQ||GP.lineSeparator())}GO[GR]=GT}return GO},replaceSelection:function(GQ,GO,GR){var GS=[];for(var GP=0;GP<this.sel.ranges.length;GP++){GS[GP]=GQ}this.replaceSelections(GS,GO,GR||"+input")},replaceSelections:O(function(GQ,GV,GT){var GR=this;var GX=[],GS=this.sel;for(var GU=0;GU<GS.ranges.length;GU++){var GW=GS.ranges[GU];GX[GU]={from:GW.from(),to:GW.to(),text:GR.splitLines(GQ[GU]),origin:GT}}var GO=GV&&GV!="end"&&DV(this,GX,GV);for(var GP=GX.length-1;GP>=0;GP--){E3(GR,GX[GP])}if(GO){DG(this,GO)}else{if(this.cm){G(this.cm)}}}),undo:O(function(){Ek(this,"undo")}),redo:O(function(){Ek(this,"redo")}),undoSelection:O(function(){Ek(this,"undo",true)}),redoSelection:O(function(){Ek(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var GR=this.history,GO=0,GQ=0;for(var GP=0;GP<GR.done.length;GP++){if(!GR.done[GP].ranges){++GO}}for(var GS=0;GS<GR.undone.length;GS++){if(!GR.undone[GS].ranges){++GQ}}return{undo:GO,redo:GQ}},clearHistory:function(){this.history=new ER(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:Fp(this.history.done),undone:Fp(this.history.undone)}},setHistory:function(i){var GO=this.history=new ER(this.history.maxGeneration);GO.done=Fp(i.done.slice(0),null,true);GO.undone=Fp(i.undone.slice(0),null,true)},setGutterMarker:O(function(GP,GO,i){return Bj(this,GP,"gutter",function(GR){var GQ=GR.gutterMarkers||(GR.gutterMarkers={});GQ[GO]=i;if(!i&&C(GQ)){GR.gutterMarkers=null}return true})}),clearGutter:O(function(GO){var i=this;this.iter(function(GP){if(GP.gutterMarkers&&GP.gutterMarkers[GO]){Bj(i,GP,"gutter",function(){GP.gutterMarkers[GO]=null;if(C(GP.gutterMarkers)){GP.gutterMarkers=null}return true})}})}),lineInfo:function(GO){var i;if(typeof GO=="number"){if(!FV(this,GO)){return null}i=GO;GO=DC(this,GO);if(!GO){return null}}else{i=Fy(GO);if(i==null){return null}}return{line:i,handle:GO,text:GO.text,gutterMarkers:GO.gutterMarkers,textClass:GO.textClass,bgClass:GO.bgClass,wrapClass:GO.wrapClass,widgets:GO.widgets}},addLineClass:O(function(i,GP,GO){return Bj(this,i,GP=="gutter"?"gutter":"class",function(GR){var GQ=GP=="text"?"textClass":GP=="background"?"bgClass":GP=="gutter"?"gutterClass":"wrapClass";if(!GR[GQ]){GR[GQ]=GO}else{if(Cv(GO).test(GR[GQ])){return false}else{GR[GQ]+=" "+GO}}return true})}),removeLineClass:O(function(i,GP,GO){return Bj(this,i,GP=="gutter"?"gutter":"class",function(GT){var GR=GP=="text"?"textClass":GP=="background"?"bgClass":GP=="gutter"?"gutterClass":"wrapClass";var GQ=GT[GR];if(!GQ){return false}else{if(GO==null){GT[GR]=null}else{var GU=GQ.match(Cv(GO));if(!GU){return false}var GS=GU.index+GU[0].length;GT[GR]=GQ.slice(0,GU.index)+(!GU.index||GS==GQ.length?"":" ")+GQ.slice(GS)||null}}return true})}),addLineWidget:O(function(i,GO,GP){return Gq(this,i,GO,GP)}),removeLineWidget:function(i){i.clear()},markText:function(i,GO,GP){return AT(this,GF(this,i),GF(this,GO),GP,GP&&GP.type||"range")},setBookmark:function(i,GO){var GP={replacedWith:GO&&(GO.nodeType==null?GO.widget:GO),insertLeft:GO&&GO.insertLeft,clearWhenEmpty:false,shared:GO&&GO.shared,handleMouseEvents:GO&&GO.handleMouseEvents};i=GF(this,i);return AT(this,i,i,GP,"bookmark")},findMarksAt:function(GQ){GQ=GF(this,GQ);var GO=[],GR=DC(this,GQ.line).markedSpans;if(GR){for(var GP=0;GP<GR.length;++GP){var GS=GR[GP];if((GS.from==null||GS.from<=GQ.ch)&&(GS.to==null||GS.to>=GQ.ch)){GO.push(GS.marker.parent||GS.marker)}}}return GO},findMarks:function(i,GP,GQ){i=GF(this,i);GP=GF(this,GP);var GR=[],GO=i.line;this.iter(i.line,GP.line+1,function(GV){var GU=GV.markedSpans;if(GU){for(var GS=0;GS<GU.length;GS++){var GT=GU[GS];if(!(GT.to!=null&&GO==i.line&&i.ch>=GT.to||GT.from==null&&GO!=i.line||GT.from!=null&&GO==GP.line&&GT.from>=GP.ch)&&(!GQ||GQ(GT.marker))){GR.push(GT.marker.parent||GT.marker)}}}++GO});return GR},getAllMarks:function(){var i=[];this.iter(function(GQ){var GP=GQ.markedSpans;if(GP){for(var GO=0;GO<GP.length;++GO){if(GP[GO].from!=null){i.push(GP[GO].marker)}}}});return i},posFromIndex:function(i){var GP,GO=this.first,GQ=this.lineSeparator().length;this.iter(function(GS){var GR=GS.text.length+GQ;if(GR>i){GP=i;return true}i-=GR;++GO});return GF(this,A5(GO,GP))},indexFromPos:function(i){i=GF(this,i);var GO=i.ch;if(i.line<this.first||i.ch<0){return 0}var GP=this.lineSeparator().length;this.iter(this.first,i.line,function(GQ){GO+=GQ.text.length+GP});return GO},copy:function(i){var GO=new Fs(EJ(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);GO.scrollTop=this.scrollTop;GO.scrollLeft=this.scrollLeft;GO.sel=this.sel;GO.extend=false;if(i){GO.history.undoDepth=this.history.undoDepth;GO.setHistory(this.getHistory())}return GO},linkedDoc:function(GP){if(!GP){GP={}}var i=this.first,GO=this.first+this.size;if(GP.from!=null&&GP.from>i){i=GP.from}if(GP.to!=null&&GP.to<GO){GO=GP.to}var GQ=new Fs(EJ(this,i,GO),GP.mode||this.modeOption,i,this.lineSep);if(GP.sharedHist){GQ.history=this.history}(this.linked||(this.linked=[])).push({doc:GQ,sharedHist:GP.sharedHist});GQ.linked=[{doc:this,isParent:true,sharedHist:GP.sharedHist}];Fd(GQ,DO(this));return GQ},unlinkDoc:function(GS){var GO=this;if(GS instanceof Dy){GS=GS.doc}if(this.linked){for(var GP=0;GP<this.linked.length;++GP){var GQ=GO.linked[GP];if(GQ.doc!=GS){continue}GO.linked.splice(GP,1);GS.unlinkDoc(GO);Ac(DO(GO));break}}if(GS.history==this.history){var GR=[GS.id];GH(GS,function(i){return GR.push(i.id)},true);GS.history=new ER(null);GS.history.done=Fp(this.history.done,GR);GS.history.undone=Fp(this.history.undone,GR)}},iterLinkedDocs:function(i){GH(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return Gr(i)},lineSeparator:function(){return this.lineSep||"\n"}});Fs.prototype.eachLine=Fs.prototype.iter;var FU=0;function Cq(GO){var GS=this;D9(GS);if(GC(GS,GO)||q(GS.display,GO)){return}Gm(GO);if(AD){FU=+new Date}var GW=Eh(GS,GO,true),GQ=GO.dataTransfer.files;if(!GW||GS.isReadOnly()){return}if(GQ&&GQ.length&&window.FileReader&&window.File){var GU=GQ.length,GV=Array(GU),GP=0;var GZ=function(G2,G0){if(GS.options.allowDropFileTypes&&D3(GS.options.allowDropFileTypes,G2.type)==-1){return}var G1=new FileReader;G1.onload=B4(GS,function(){var G3=G1.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(G3)){G3=""}GV[G0]=G3;if(++GP==GU){GW=GF(GS.doc,GW);var i={from:GW,to:GW,text:GS.doc.splitLines(GV.join(GS.doc.lineSeparator())),origin:"paste"};E3(GS.doc,i);DG(GS.doc,FM(GW,FE(i)))}});G1.readAsText(G2)};for(var GT=0;GT<GU;++GT){GZ(GQ[GT],GT)}}else{if(GS.state.draggingText&&GS.doc.sel.contains(GW)>-1){GS.state.draggingText(GO);setTimeout(function(){return GS.display.input.focus()},20);return}try{var GX=GO.dataTransfer.getData("Text");if(GX){var GY;if(GS.state.draggingText&&!GS.state.draggingText.copy){GY=GS.listSelections()}Dl(GS.doc,FM(GW,GW));if(GY){for(var GR=0;GR<GY.length;++GR){Fv(GS.doc,"",GY[GR].anchor,GY[GR].head,"drag")}}GS.replaceSelection(GX,"around","paste");GS.display.input.focus()}}catch(GO){}}}function BI(GP,i){if(AD&&(!GP.state.draggingText||+new Date-FU<100)){Bc(i);return}if(GC(GP,i)||q(GP.display,i)){return}i.dataTransfer.setData("Text",GP.getSelection());i.dataTransfer.effectAllowed="copyMove";if(i.dataTransfer.setDragImage&&!Fj){var GO=Bo("img",null,null,"position: fixed; left: 0; top: 0;");GO.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(FX){GO.width=GO.height=1;GP.display.wrapper.appendChild(GO);GO._top=GO.offsetTop}i.dataTransfer.setDragImage(GO,0,0);if(FX){GO.parentNode.removeChild(GO)}}}function Db(GQ,i){var GP=Eh(GQ,i);if(!GP){return}var GO=document.createDocumentFragment();FI(GQ,GP,GO);if(!GQ.display.dragCursor){GQ.display.dragCursor=Bo("div",null,"CodeMirror-cursors CodeMirror-dragcursors");GQ.display.lineSpace.insertBefore(GQ.display.dragCursor,GQ.display.cursorDiv)}EE(GQ.display.dragCursor,GO)}function D9(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function AO(GR){if(!document.body.getElementsByClassName){return}var GO=document.body.getElementsByClassName("CodeMirror");for(var GP=0;GP<GO.length;GP++){var GQ=GO[GP].CodeMirror;if(GQ){GR(GQ)}}}var Gy=false;function Ei(){if(Gy){return}Cb();Gy=true}function Cb(){var i;B(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;AO(FF)},100)}});B(window,"blur",function(){return AO(d)})}function FF(GO){var i=GO.display;if(i.lastWrapHeight==i.wrapper.clientHeight&&i.lastWrapWidth==i.wrapper.clientWidth){return}i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null;i.scrollbarsClipped=false;GO.setSize()}var CM={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var BQ=0;BQ<10;BQ++){CM[BQ+48]=CM[BQ+96]=String(BQ)}for(var Az=65;Az<=90;Az++){CM[Az]=String.fromCharCode(Az)}for(var Ay=1;Ay<=12;Ay++){CM[Ay+111]=CM[Ay+63235]="F"+Ay}var Fb={};Fb.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};Fb.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Fb.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};Fb.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};Fb["default"]=Gv?Fb.macDefault:Fb.pcDefault;function Bg(GO){var GT=GO.split(/-(?!$)/);GO=GT[GT.length-1];var GV,GR,GQ,GP;for(var GS=0;GS<GT.length-1;GS++){var GU=GT[GS];if(/^(cmd|meta|m)$/i.test(GU)){GP=true}else{if(/^a(lt)?$/i.test(GU)){GV=true}else{if(/^(c|ctrl|control)$/i.test(GU)){GR=true}else{if(/^s(hift)?$/i.test(GU)){GQ=true}else{throw new Error("Unrecognized modifier name: "+GU)}}}}}if(GV){GO="Alt-"+GO}if(GR){GO="Ctrl-"+GO}if(GP){GO="Cmd-"+GO}if(GQ){GO="Shift-"+GO}return GO}function Dw(GX){var GW={};for(var GT in GX){if(GX.hasOwnProperty(GT)){var GQ=GX[GT];if(/^(name|fallthrough|(de|at)tach)$/.test(GT)){continue}if(GQ=="..."){delete GX[GT];continue}var GV=Gp(GT.split(" "),Bg);for(var GU=0;GU<GV.length;GU++){var GR=(void 0),GO=(void 0);if(GU==GV.length-1){GO=GV.join(" ");GR=GQ}else{GO=GV.slice(0,GU+1).join(" ");GR="..."}var GS=GW[GO];if(!GS){GW[GO]=GR}else{if(GS!=GR){throw new Error("Inconsistent bindings for "+GO)}}}delete GX[GT]}}for(var GP in GW){GX[GP]=GW[GP]}return GX}function Cs(GP,GQ,GO,GU){GQ=Dc(GQ);var GT=GQ.call?GQ.call(GP,GU):GQ[GP];if(GT===false){return"nothing"}if(GT==="..."){return"multi"}if(GT!=null&&GO(GT)){return"handled"}if(GQ.fallthrough){if(Object.prototype.toString.call(GQ.fallthrough)!="[object Array]"){return Cs(GP,GQ.fallthrough,GO,GU)}for(var GR=0;GR<GQ.fallthrough.length;GR++){var GS=Cs(GP,GQ.fallthrough[GR],GO,GU);if(GS){return GS}}}}function c(GO){var i=typeof GO=="string"?GO:CM[GO.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function F0(GO,GP){if(FX&&GO.keyCode==34&&GO["char"]){return false}var GQ=CM[GO.keyCode],i=GQ;if(i==null||GO.altGraphKey){return false}if(GO.altKey&&GQ!="Alt"){i="Alt-"+i}if((Fk?GO.metaKey:GO.ctrlKey)&&GQ!="Ctrl"){i="Ctrl-"+i}if((Fk?GO.ctrlKey:GO.metaKey)&&GQ!="Cmd"){i="Cmd-"+i}if(!GP&&GO.shiftKey&&GQ!="Shift"){i="Shift-"+i}return i}function Dc(i){return typeof i=="string"?Fb[i]:i}function A4(GU,GT){var GR=GU.doc.sel.ranges,GQ=[];for(var GP=0;GP<GR.length;GP++){var GO=GT(GR[GP]);while(GQ.length&&DM(GO.from,Au(GQ).to)<=0){var GS=GQ.pop();if(DM(GS.from,GO.from)<0){GO.from=GS.from;break}}GQ.push(GO)}Ct(GU,function(){for(var GV=GQ.length-1;GV>=0;GV--){Fv(GU.doc,"",GQ[GV].from,GQ[GV].to,"+delete")}G(GU)})}var Cy={selectAll:Q,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),BV)},killLine:function(i){return A4(i,function(GP){if(GP.empty()){var GO=DC(i.doc,GP.head.line).text.length;if(GP.head.ch==GO&&GP.head.line<i.lastLine()){return{from:GP.head,to:A5(GP.head.line+1,0)}}else{return{from:GP.head,to:A5(GP.head.line,GO)}}}else{return{from:GP.from(),to:GP.to()}}})},deleteLine:function(i){return A4(i,function(GO){return({from:A5(GO.from().line,0),to:GF(i.doc,A5(GO.to().line+1,0))})})},delLineLeft:function(i){return A4(i,function(GO){return({from:A5(GO.from().line,0),to:GO.from()})})},delWrappedLineLeft:function(i){return A4(i,function(GQ){var GO=i.charCoords(GQ.head,"div").top+5;var GP=i.coordsChar({left:0,top:GO},"div");return{from:GP,to:GQ.from()}})},delWrappedLineRight:function(i){return A4(i,function(GQ){var GP=i.charCoords(GQ.head,"div").top+5;var GO=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:GP},"div");return{from:GQ.from(),to:GO}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(A5(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(A5(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(GO){return Al(i,GO.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(GO){return GD(i,GO.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(GO){return Gl(i,GO.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(GP){var GO=i.charCoords(GP.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:GO},"div")},AR)},goLineLeft:function(i){return i.extendSelectionsBy(function(GP){var GO=i.charCoords(GP.head,"div").top+5;return i.coordsChar({left:0,top:GO},"div")},AR)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(GQ){var GP=i.charCoords(GQ.head,"div").top+5;var GO=i.coordsChar({left:0,top:GP},"div");if(GO.ch<i.getLine(GO.line).search(/\S/)){return GD(i,GQ.head)}return GO},AR)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(GT){var GP=[],GR=GT.listSelections(),GO=GT.options.tabSize;for(var GQ=0;GQ<GR.length;GQ++){var GU=GR[GQ].from();var GS=n(GT.getLine(GU.line),GU.ch,GO);GP.push(CD(GO-GS%GO))}GT.replaceSelections(GP)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return Ct(i,function(){var GQ=i.listSelections(),GR=[];for(var GP=0;GP<GQ.length;GP++){if(!GQ[GP].empty()){continue}var GO=GQ[GP].head,GS=DC(i.doc,GO.line).text;if(GS){if(GO.ch==GS.length){GO=new A5(GO.line,GO.ch-1)}if(GO.ch>0){GO=new A5(GO.line,GO.ch+1);i.replaceRange(GS.charAt(GO.ch-1)+GS.charAt(GO.ch-2),A5(GO.line,GO.ch-2),GO,"+transpose")}else{if(GO.line>i.doc.first){var GT=DC(i.doc,GO.line-1).text;if(GT){GO=new A5(GO.line,1);i.replaceRange(GS.charAt(0)+i.doc.lineSeparator()+GT.charAt(GT.length-1),A5(GO.line-1,GT.length-1),GO,"+transpose")}}}}GR.push(new A(GO,GO))}i.setSelections(GR)})},newlineAndIndent:function(i){return Ct(i,function(){var GO=i.listSelections();for(var GP=GO.length-1;GP>=0;GP--){i.replaceRange(i.doc.lineSeparator(),GO[GP].anchor,GO[GP].head,"+input")}GO=i.listSelections();for(var GQ=0;GQ<GO.length;GQ++){i.indentLine(GO[GQ].from().line,null,true)}G(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function Al(GQ,i){var GP=DC(GQ.doc,i);var GO=FR(GP);if(GO!=GP){i=Fy(GO)}return D2(true,GQ,GO,i,1)}function Gl(GQ,i){var GP=DC(GQ.doc,i);var GO=EW(GP);if(GO!=GP){i=Fy(GO)}return D2(true,GQ,GP,i,-1)}function GD(GS,GP){var GT=Al(GS,GP.line);var GR=DC(GS.doc,GT.line);var GQ=ED(GR);if(!GQ||GQ[0].level==0){var GO=Math.max(0,GR.text.search(/\S/));var i=GP.line==GT.line&&GP.ch<=GO&&GP.ch;return A5(GT.line,i?0:GO,GT.sticky)}return GT}function C3(GR,GO,i){if(typeof GO=="string"){GO=Cy[GO];if(!GO){return false}}GR.display.input.ensurePolled();var GQ=GR.display.shift,GP=false;try{if(GR.isReadOnly()){GR.state.suppressEdits=true}if(i){GR.display.shift=false}GP=GO(GR)!=Cp}finally{GR.display.shift=GQ;GR.state.suppressEdits=false}return GP}function As(GS,GR,GO){for(var GP=0;GP<GS.state.keyMaps.length;GP++){var GQ=Cs(GR,GS.state.keyMaps[GP],GO,GS);if(GQ){return GQ}}return(GS.options.extraKeys&&Cs(GR,GS.options.extraKeys,GO,GS))||Cs(GR,GS.options.keyMap,GO,GS)}var Bl=new FN;function FP(GS,GQ,GO,i){var GP=GS.state.keySeq;if(GP){if(c(GQ)){return"handled"}Bl.set(50,function(){if(GS.state.keySeq==GP){GS.state.keySeq=null;GS.display.input.reset()}});GQ=GP+" "+GQ}var GR=As(GS,GQ,i);if(GR=="multi"){GS.state.keySeq=GQ}if(GR=="handled"){Y(GS,"keyHandled",GS,GQ,GO)}if(GR=="handled"||GR=="multi"){Gm(GO);E5(GS)}if(GP&&!GR&&/\'$/.test(GQ)){Gm(GO);return true}return !!GR}function Dz(GP,i){var GO=F0(i,true);if(!GO){return false}if(i.shiftKey&&!GP.state.keySeq){return FP(GP,"Shift-"+GO,i,function(GQ){return C3(GP,GQ,true)})||FP(GP,GO,i,function(GQ){if(typeof GQ=="string"?/^go[A-Z]/.test(GQ):GQ.motion){return C3(GP,GQ)}})}else{return FP(GP,GO,i,function(GQ){return C3(GP,GQ)})}}function F2(GP,i,GO){return FP(GP,"'"+GO+"'",i,function(GQ){return C3(GP,GQ,true)})}var DI=null;function CN(GO){var GQ=this;GQ.curOp.focus=Fx();if(GC(GQ,GO)){return}if(AD&&Ew<11&&GO.keyCode==27){GO.returnValue=false}var GP=GO.keyCode;GQ.display.shift=GP==16||GO.shiftKey;var i=Dz(GQ,GO);if(FX){DI=i?GP:null;if(!i&&GP==88&&!t&&(Gv?GO.metaKey:GO.ctrlKey)){GQ.replaceSelection("",null,"cut")}}if(GP==18&&!/\bCodeMirror-crosshair\b/.test(GQ.display.lineDiv.className)){FQ(GQ)}}function FQ(GO){var i=GO.display.lineDiv;Fc(i,"CodeMirror-crosshair");function GP(GQ){if(GQ.keyCode==18||!GQ.altKey){F3(i,"CodeMirror-crosshair");Ax(document,"keyup",GP);Ax(document,"mouseover",GP)}}B(document,"keyup",GP);B(document,"mouseover",GP)}function F8(i){if(i.keyCode==16){this.doc.sel.shift=false}GC(this,i)}function E0(i){var GR=this;if(q(GR.display,i)||GC(GR,i)||i.ctrlKey&&!i.altKey||Gv&&i.metaKey){return}var GO=i.keyCode,GQ=i.charCode;if(FX&&GO==DI){DI=null;Gm(i);return}if((FX&&(!i.which||i.which<10))&&Dz(GR,i)){return}var GP=String.fromCharCode(GQ==null?GO:GQ);if(GP=="\x08"){return}if(F2(GR,i,GP)){return}GR.display.input.onKeyPress(i)}function ET(i){var GP=this,GO=GP.display;if(GC(GP,i)||GO.activeTouch&&GO.input.supportsTouch()){return}GO.input.ensurePolled();GO.shift=i.shiftKey;if(q(GO,i)){if(!AJ){GO.scroller.draggable=false;setTimeout(function(){return GO.scroller.draggable=true},100)}return}if(Dt(GP,i)){return}var GQ=Eh(GP,i);window.focus();switch(Bi(i)){case 1:if(GP.state.selectingText){GP.state.selectingText(i)}else{if(GQ){E8(GP,i,GQ)}else{if(Cu(i)==GO.scroller){Gm(i)}}}break;case 2:if(AJ){GP.state.lastMiddleDown=+new Date}if(GQ){GK(GP.doc,GQ)}setTimeout(function(){return GO.input.focus()},20);Gm(i);break;case 3:if(Eo){CX(GP,i)}else{Eg(GP)}break}}var Dh;var Dm;function E8(GQ,i,GO){if(AD){setTimeout(CQ(C7,GQ),0)}else{GQ.curOp.focus=Fx()}var GU=+new Date,GT;if(Dm&&Dm.time>GU-400&&DM(Dm.pos,GO)==0){GT="triple"}else{if(Dh&&Dh.time>GU-400&&DM(Dh.pos,GO)==0){GT="double";Dm={time:GU,pos:GO}}else{GT="single";Dh={time:GU,pos:GO}}}var GS=GQ.doc.sel,GP=Gv?i.metaKey:i.ctrlKey,GR;if(GQ.options.dragDrop&&AI&&!GQ.isReadOnly()&&GT=="single"&&(GR=GS.contains(GO))>-1&&(DM((GR=GS.ranges[GR]).from(),GO)<0||GO.xRel>0)&&(DM(GR.to(),GO)>0||GO.xRel<0)){Bb(GQ,i,GO,GP)}else{Fn(GQ,i,GO,GT,GP)}}function Bb(GS,GO,GT,GP){var GQ=GS.display,GR=+new Date;var i=B4(GS,function(GU){if(AJ){GQ.scroller.draggable=false}GS.state.draggingText=false;Ax(document,"mouseup",i);Ax(GQ.scroller,"drop",i);if(Math.abs(GO.clientX-GU.clientX)+Math.abs(GO.clientY-GU.clientY)<10){Gm(GU);if(!GP&&+new Date-200<GR){GK(GS.doc,GT)}if(AJ||AD&&Ew==9){setTimeout(function(){document.body.focus();GQ.input.focus()},20)}else{GQ.input.focus()}}});if(AJ){GQ.scroller.draggable=true}GS.state.draggingText=i;i.copy=Gv?GO.altKey:GO.ctrlKey;if(GQ.scroller.dragDrop){GQ.scroller.dragDrop()}B(document,"mouseup",i);B(GQ.scroller,"drop",i)}function Fn(GZ,GU,G7,i,GW){var G0=GZ.display,GX=GZ.doc;Gm(GU);var G2,G1,GY=GX.sel,G6=GY.ranges;if(GW&&!GU.shiftKey){G1=GX.sel.contains(G7);if(G1>-1){G2=G6[G1]}else{G2=new A(G7,G7)}}else{G2=GX.sel.primary();G1=GX.sel.primIndex}if(Gw?GU.shiftKey&&GU.metaKey:GU.altKey){i="rect";if(!GW){G2=new A(G7,G7)}G7=Eh(GZ,GU,true,true);G1=-1}else{if(i=="double"){var GQ=GZ.findWordAt(G7);if(GZ.display.shift||GX.extend){G2=AZ(GX,G2,GQ.anchor,GQ.head)}else{G2=GQ}}else{if(i=="triple"){var GO=new A(A5(G7.line,0),GF(GX,A5(G7.line+1,0)));if(GZ.display.shift||GX.extend){G2=AZ(GX,G2,GO.anchor,GO.head)}else{G2=GO}}else{G2=AZ(GX,G2,G7)}}}if(!GW){G1=0;CS(GX,new Di([G2],0),Dp);GY=GX.sel}else{if(G1==-1){G1=G6.length;CS(GX,BY(G6.concat([G2]),G1),{scroll:false,origin:"*mouse"})}else{if(G6.length>1&&G6[G1].empty()&&i=="single"&&!GU.shiftKey){CS(GX,BY(G6.slice(0,G1).concat(G6.slice(G1+1)),0),{scroll:false,origin:"*mouse"});GY=GX.sel}else{Fu(GX,G1,G2,Dp)}}}var G3=G7;function GV(Hi){if(DM(G3,Hi)==0){return}G3=Hi;if(i=="rect"){var Hc=[],Hk=GZ.options.tabSize;var Hd=n(DC(GX,G7.line).text,G7.ch,Hk);var He=n(DC(GX,Hi.line).text,Hi.ch,Hk);var Hf=Math.min(Hd,He),Ha=Math.max(Hd,He);for(var G9=Math.min(G7.line,Hi.line),Hn=Math.min(GZ.lastLine(),Math.max(G7.line,Hi.line));G9<=Hn;G9++){var Hh=DC(GX,G9).text,G8=Dj(Hh,Hf,Hk);if(Hf==Ha){Hc.push(new A(A5(G9,G8),A5(G9,G8)))}else{if(Hh.length>G8){Hc.push(new A(A5(G9,G8),A5(G9,Dj(Hh,Ha,Hk))))}}}if(!Hc.length){Hc.push(new A(G7,G7))}CS(GX,BY(GY.ranges.slice(0,G1).concat(Hc),G1),{origin:"*mouse",scroll:false});GZ.scrollIntoView(Hi)}else{var Hm=G2;var Hj=Hm.anchor,Hb=Hi;if(i!="single"){var Hl;if(i=="double"){Hl=GZ.findWordAt(Hi)}else{Hl=new A(A5(Hi.line,0),GF(GX,A5(Hi.line+1,0)))}if(DM(Hl.anchor,Hj)>0){Hb=Hl.head;Hj=Fq(Hm.from(),Hl.anchor)}else{Hb=Hl.anchor;Hj=DL(Hm.to(),Hl.head)}}var Hg=GY.ranges.slice(0);Hg[G1]=new A(GF(GX,Hj),Hb);CS(GX,BY(Hg,G1),Dp)}}var G5=G0.wrapper.getBoundingClientRect();var GT=0;function GR(Ha){var Hc=++GT;var G8=Eh(GZ,Ha,true,i=="rect");if(!G8){return}if(DM(G8,G3)!=0){GZ.curOp.focus=Fx();GV(G8);var Hb=Aa(G0,GX);if(G8.line>=Hb.to||G8.line<Hb.from){setTimeout(B4(GZ,function(){if(GT==Hc){GR(Ha)}}),150)}}else{var G9=Ha.clientY<G5.top?-20:Ha.clientY>G5.bottom?20:0;if(G9){setTimeout(B4(GZ,function(){if(GT!=Hc){return}G0.scroller.scrollTop+=G9;GR(Ha)}),50)}}}function GP(G8){GZ.state.selectingText=false;GT=Infinity;Gm(G8);G0.input.focus();Ax(document,"mousemove",G4);Ax(document,"mouseup",GS);GX.history.lastSelOrigin=null}var G4=B4(GZ,function(G8){if(!Bi(G8)){GP(G8)}else{GR(G8)}});var GS=B4(GZ,GP);GZ.state.selectingText=GS;B(document,"mousemove",G4);B(document,"mouseup",GS)}function Fh(GS,GO,GY,GW){var GR,GT;try{GR=GO.clientX;GT=GO.clientY}catch(GO){return false}if(GR>=Math.floor(GS.display.gutters.getBoundingClientRect().right)){return false}if(GW){Gm(GO)}var GX=GS.display;var GQ=GX.lineDiv.getBoundingClientRect();if(GT>GQ.bottom||!GE(GS,GY)){return DU(GO)}GT-=GQ.top-GX.viewOffset;for(var GU=0;GU<GS.options.gutters.length;++GU){var GZ=GX.gutters.childNodes[GU];if(GZ&&GZ.getBoundingClientRect().right>=GR){var GP=Gc(GS.doc,GT);var GV=GS.options.gutters[GU];BM(GS,GY,GS,GP,GV,GO);return DU(GO)}}}function Dt(GO,i){return Fh(GO,i,"gutterClick",true)}function CX(GO,i){if(q(GO.display,i)||FK(GO,i)){return}if(GC(GO,i,"contextmenu")){return}GO.display.input.onContextMenu(i)}function FK(GO,i){if(!GE(GO,"gutterContextMenu")){return false}return Fh(GO,i,"gutterContextMenu",false)}function Cx(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");h(i)}var Eb={toString:function(){return"CodeMirror.Init"}};var DR={};var Gt={};function AL(GP){var i=GP.optionHandlers;function GO(GT,GS,GQ,GR){GP.defaults[GT]=GS;if(GQ){i[GT]=GR?function(GW,GV,GU){if(GU!=Eb){GQ(GW,GV,GU)}}:GQ}}GP.defineOption=GO;GP.Init=Eb;GO("value","",function(GR,GQ){return GR.setValue(GQ)},true);GO("mode",null,function(GR,GQ){GR.doc.modeOption=GQ;DX(GR)},true);GO("indentUnit",2,DX,true);GO("indentWithTabs",false);GO("smartIndent",true);GO("tabSize",4,function(GQ){Dg(GQ);h(GQ);Fe(GQ)},true);GO("lineSeparator",null,function(GU,GT){GU.doc.lineSep=GT;if(!GT){return}var GQ=[],GR=GU.doc.first;GU.doc.iter(function(GW){for(var GV=0;;){var GX=GW.text.indexOf(GT,GV);if(GX==-1){break}GV=GX+GT.length;GQ.push(A5(GR,GX))}GR++});for(var GS=GQ.length-1;GS>=0;GS--){Fv(GU.doc,GT,GQ[GS],A5(GQ[GS].line,GQ[GS].ch+GT.length))}});GO("specialChars",/[\u0000-\u001f\u007f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(GS,GR,GQ){GS.state.specialChars=new RegExp(GR.source+(GR.test("\t")?"":"|\t"),"g");if(GQ!=Eb){GS.refresh()}});GO("specialCharPlaceholder",Ee,function(GQ){return GQ.refresh()},true);GO("electricChars",true);GO("inputStyle",e?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);GO("spellcheck",false,function(GR,GQ){return GR.getInputField().spellcheck=GQ},true);GO("rtlMoveVisually",!J);GO("wholeLineUpdateBefore",true);GO("theme","default",function(GQ){Cx(GQ);AH(GQ)},true);GO("keyMap","default",function(GU,GT,GS){var GR=Dc(GT);var GQ=GS!=Eb&&Dc(GS);if(GQ&&GQ.detach){GQ.detach(GU,GR)}if(GR.attach){GR.attach(GU,GQ||null)}});GO("extraKeys",null);GO("lineWrapping",false,Ev,true);GO("gutters",[],function(GQ){CP(GQ.options);AH(GQ)},true);GO("fixedGutter",true,function(GR,GQ){GR.display.gutters.style.left=GQ?BL(GR.display)+"px":"0";GR.refresh()},true);GO("coverGutterNextToScrollbar",false,function(GQ){return CG(GQ)},true);GO("scrollbarStyle","native",function(GQ){Bz(GQ);CG(GQ);GQ.display.scrollbars.setScrollTop(GQ.doc.scrollTop);GQ.display.scrollbars.setScrollLeft(GQ.doc.scrollLeft)},true);GO("lineNumbers",false,function(GQ){CP(GQ.options);AH(GQ)},true);GO("firstLineNumber",1,AH,true);GO("lineNumberFormatter",function(GQ){return GQ},AH,true);GO("showCursorWhenSelecting",false,Ch,true);GO("resetSelectionOnContextMenu",true);GO("lineWiseCopyCut",true);GO("readOnly",false,function(GR,GQ){if(GQ=="nocursor"){d(GR);GR.display.input.blur();GR.display.disabled=true}else{GR.display.disabled=false}GR.display.input.readOnlyChanged(GQ)});GO("disableInput",false,function(GR,GQ){if(!GQ){GR.display.input.reset()}},true);GO("dragDrop",true,AX);GO("allowDropFileTypes",null);GO("cursorBlinkRate",530);GO("cursorScrollMargin",0);GO("cursorHeight",1,Ch,true);GO("singleCursorHeightPerLine",true,Ch,true);GO("workTime",100);GO("workDelay",100);GO("flattenSpans",true,Dg,true);GO("addModeClass",false,Dg,true);GO("pollInterval",100);GO("undoDepth",200,function(GR,GQ){return GR.doc.history.undoDepth=GQ});GO("historyEventDelay",1250);GO("viewportMargin",10,function(GQ){return GQ.refresh()},true);GO("maxHighlightLength",10000,Dg,true);GO("moveInputWithCursor",true,function(GR,GQ){if(!GQ){GR.display.input.resetPosition()}});GO("tabindex",null,function(GR,GQ){return GR.display.input.getField().tabIndex=GQ||""});GO("autofocus",null)}function AH(i){CE(i);Fe(i);EZ(i)}function AX(GS,GR,GP){var i=GP&&GP!=Eb;if(!GR!=!i){var GO=GS.display.dragFunctions;var GQ=GR?B:Ax;GQ(GS.display.scroller,"dragstart",GO.start);GQ(GS.display.scroller,"dragenter",GO.enter);GQ(GS.display.scroller,"dragover",GO.over);GQ(GS.display.scroller,"dragleave",GO.leave);GQ(GS.display.scroller,"drop",GO.drop)}}function Ev(i){if(i.options.lineWrapping){Fc(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{F3(i.display.wrapper,"CodeMirror-wrap");D8(i)}BA(i);Fe(i);h(i);setTimeout(function(){return CG(i)},100)}function Dy(GR,GS){var GP=this;if(!(this instanceof Dy)){return new Dy(GR,GS)}this.options=GS=GS?C1(GS):{};C1(DR,GS,false);CP(GS);var GT=GS.value;if(typeof GT=="string"){GT=new Fs(GT,GS.mode,null,GS.lineSeparator)}this.doc=GT;var GU=new Dy.inputStyles[GS.inputStyle](this);var GV=this.display=new s(GR,GT,GU);GV.wrapper.CodeMirror=this;CE(this);Cx(this);if(GS.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}Bz(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new FN(),keySeq:null,specialChars:null};if(GS.autofocus&&!e){GV.input.focus()}if(AD&&Ew<11){setTimeout(function(){return GP.display.input.reset(true)},20)}g(this);Ei();Ed(this);this.curOp.forceUpdate=true;E4(this,GT);if((GS.autofocus&&!e)||this.hasFocus()){setTimeout(CQ(Ec,this),20)}else{d(this)}for(var GO in Gt){if(Gt.hasOwnProperty(GO)){Gt[GO](GP,GS[GO],Eb)}}EU(this);if(GS.finishInit){GS.finishInit(this)}for(var GQ=0;GQ<Bd.length;++GQ){Bd[GQ](GP)}Bp(this);if(AJ&&GS.lineWrapping&&getComputedStyle(GV.lineDiv).textRendering=="optimizelegibility"){GV.lineDiv.style.textRendering="auto"}}Dy.defaults=DR;Dy.optionHandlers=Gt;function g(GQ){var GO=GQ.display;B(GO.scroller,"mousedown",B4(GQ,ET));if(AD&&Ew<11){B(GO.scroller,"dblclick",B4(GQ,function(GV){if(GC(GQ,GV)){return}var GW=Eh(GQ,GV);if(!GW||Dt(GQ,GV)||q(GQ.display,GV)){return}Gm(GV);var GX=GQ.findWordAt(GW);GK(GQ.doc,GX.anchor,GX.head)}))}else{B(GO.scroller,"dblclick",function(GV){return GC(GQ,GV)||Gm(GV)})}if(!Eo){B(GO.scroller,"contextmenu",function(GV){return CX(GQ,GV)})}var i,GT={end:0};function GU(){if(GO.activeTouch){i=setTimeout(function(){return GO.activeTouch=null},1000);GT=GO.activeTouch;GT.end=+new Date}}function GS(GV){if(GV.touches.length!=1){return false}var GW=GV.touches[0];return GW.radiusX<=1&&GW.radiusY<=1}function GR(GX,GY){if(GY.left==null){return true}var GV=GY.left-GX.left,GW=GY.top-GX.top;return GV*GV+GW*GW>20*20}B(GO.scroller,"touchstart",function(GV){if(!GC(GQ,GV)&&!GS(GV)){GO.input.ensurePolled();clearTimeout(i);var GW=+new Date;GO.activeTouch={start:GW,moved:false,prev:GW-GT.end<=300?GT:null};if(GV.touches.length==1){GO.activeTouch.left=GV.touches[0].pageX;GO.activeTouch.top=GV.touches[0].pageY}}});B(GO.scroller,"touchmove",function(){if(GO.activeTouch){GO.activeTouch.moved=true}});B(GO.scroller,"touchend",function(GV){var GX=GO.activeTouch;if(GX&&!q(GO,GV)&&GX.left!=null&&!GX.moved&&new Date-GX.start<300){var GW=GQ.coordsChar(GO.activeTouch,"page"),GY;if(!GX.prev||GR(GX,GX.prev)){GY=new A(GW,GW)}else{if(!GX.prev.prev||GR(GX,GX.prev.prev)){GY=GQ.findWordAt(GW)}else{GY=new A(A5(GW.line,0),GF(GQ.doc,A5(GW.line+1,0)))}}GQ.setSelection(GY.anchor,GY.head);GQ.focus();Gm(GV)}GU()});B(GO.scroller,"touchcancel",GU);B(GO.scroller,"scroll",function(){if(GO.scroller.clientHeight){DD(GQ,GO.scroller.scrollTop);Bq(GQ,GO.scroller.scrollLeft,true);BM(GQ,"scroll",GQ)}});B(GO.scroller,"mousewheel",function(GV){return F(GQ,GV)});B(GO.scroller,"DOMMouseScroll",function(GV){return F(GQ,GV)});B(GO.wrapper,"scroll",function(){return GO.wrapper.scrollTop=GO.wrapper.scrollLeft=0});GO.dragFunctions={enter:function(GV){if(!GC(GQ,GV)){Bc(GV)}},over:function(GV){if(!GC(GQ,GV)){Db(GQ,GV);Bc(GV)}},start:function(GV){return BI(GQ,GV)},drop:B4(GQ,Cq),leave:function(GV){if(!GC(GQ,GV)){D9(GQ)}}};var GP=GO.input.getField();B(GP,"keyup",function(GV){return F8.call(GQ,GV)});B(GP,"keydown",B4(GQ,CN));B(GP,"keypress",B4(GQ,E0));B(GP,"focus",function(GV){return Ec(GQ,GV)});B(GP,"blur",function(GV){return d(GQ,GV)})}var Bd=[];Dy.defineInitHook=function(i){return Bd.push(i)};function I(GZ,GT,G4,GU){var GX=GZ.doc,G1;if(G4==null){G4="add"}if(G4=="smart"){if(!GX.mode.indent){G4="prev"}else{G1=Ai(GZ,GT)}}var GR=GZ.options.tabSize;var G0=DC(GX,GT),GP=n(G0.text,null,GR);if(G0.stateAfter){G0.stateAfter=null}var GO=G0.text.match(/^\s*/)[0],GW;if(!GU&&!/\S/.test(G0.text)){GW=0;G4="not"}else{if(G4=="smart"){GW=GX.mode.indent(G1,G0.text.slice(GO.length),G0.text);if(GW==Cp||GW>150){if(!GU){return}G4="prev"}}}if(G4=="prev"){if(GT>GX.first){GW=n(DC(GX,GT-1).text,null,GR)}else{GW=0}}else{if(G4=="add"){GW=GP+GZ.options.indentUnit}else{if(G4=="subtract"){GW=GP-GZ.options.indentUnit}else{if(typeof G4=="number"){GW=GP+G4}}}}GW=Math.max(0,GW);var G3="",GY=0;if(GZ.options.indentWithTabs){for(var GS=Math.floor(GW/GR);GS;--GS){GY+=GR;G3+="\t"}}if(GY<GW){G3+=CD(GW-GY)}if(G3!=GO){Fv(GX,G3,A5(GT,0),A5(GT,GO.length),"+input");G0.stateAfter=null;return true}else{for(var G2=0;G2<GX.sel.ranges.length;G2++){var GQ=GX.sel.ranges[G2];if(GQ.head.line==GT&&GQ.head.ch<GO.length){var GV=A5(GT,GO.length);Fu(GX,G2,new A(GV,GV));break}}}}var Bn=null;function DZ(i){Bn=i}function BS(GS,GT,GO,GV,GW){var GX=GS.doc;GS.display.shift=false;if(!GV){GV=GX.sel}var G3=GS.state.pasteIncoming||GW=="paste";var GP=Gr(GT),G1=null;if(G3&&GV.ranges.length>1){if(Bn&&Bn.text.join("\n")==GT){if(GV.ranges.length%Bn.text.length==0){G1=[];for(var GZ=0;GZ<Bn.text.length;GZ++){G1.push(GX.splitLines(Bn.text[GZ]))}}}else{if(GP.length==GV.ranges.length){G1=Gp(GP,function(i){return[i]})}}}var GY;for(var GR=GV.ranges.length-1;GR>=0;GR--){var G0=GV.ranges[GR];var G2=G0.from(),GQ=G0.to();if(G0.empty()){if(GO&&GO>0){G2=A5(G2.line,G2.ch-GO)}else{if(GS.state.overwrite&&!G3){GQ=A5(GQ.line,Math.min(DC(GX,GQ.line).text.length,GQ.ch+Au(GP).length))}else{if(Bn&&Bn.lineWise&&Bn.text.join("\n")==GT){G2=GQ=A5(G2.line,0)}}}}GY=GS.curOp.updateInput;var GU={from:G2,to:GQ,text:G1?G1[GR%G1.length]:GP,origin:GW||(G3?"paste":GS.state.cutIncoming?"cut":"+input")};E3(GS.doc,GU);Y(GS,"inputRead",GS,GU)}if(GT&&!G3){a(GS,GT)}G(GS);GS.curOp.updateInput=GY;GS.curOp.typing=true;GS.state.pasteIncoming=GS.state.cutIncoming=false}function Aj(i,GO){var GP=i.clipboardData&&i.clipboardData.getData("Text");if(GP){i.preventDefault();if(!GO.isReadOnly()&&!GO.options.disableInput){Ct(GO,function(){return BS(GO,GP,0,null,"paste")})}return true}}function a(GP,GQ){if(!GP.options.electricChars||!GP.options.smartIndent){return}var GR=GP.doc.sel;for(var GS=GR.ranges.length-1;GS>=0;GS--){var GV=GR.ranges[GS];if(GV.head.ch>100||(GS&&GR.ranges[GS-1].head.line==GV.head.line)){continue}var GT=GP.getModeAt(GV.head);var GO=false;if(GT.electricChars){for(var GU=0;GU<GT.electricChars.length;GU++){if(GQ.indexOf(GT.electricChars.charAt(GU))>-1){GO=I(GP,GV.head.line,"smart");break}}}else{if(GT.electricInput){if(GT.electricInput.test(DC(GP.doc,GV.head.line).text.slice(0,GV.head.ch))){GO=I(GP,GV.head.line,"smart")}}}if(GO){Y(GP,"electricInput",GP,GV.head.line)}}}function k(GT){var GR=[],GQ=[];for(var GP=0;GP<GT.doc.sel.ranges.length;GP++){var GS=GT.doc.sel.ranges[GP].head.line;var GO={anchor:A5(GS,0),head:A5(GS+1,0)};GQ.push(GO);GR.push(GT.getRange(GO.anchor,GO.head))}return{text:GR,ranges:GQ}}function r(GO,i){GO.setAttribute("autocorrect","off");GO.setAttribute("autocapitalize","off");GO.setAttribute("spellcheck",!!i)}function u(){var GO=Bo("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var i=Bo("div",[GO],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(AJ){GO.style.width="1000px"}else{GO.setAttribute("wrap","off")}if(Do){GO.style.border="1px solid black"}r(GO);return i}function C2(GP){var i=GP.optionHandlers;var GO=GP.helpers={};GP.prototype={constructor:GP,focus:function(){window.focus();this.display.input.focus()},setOption:function(GQ,GT){var GS=this.options,GR=GS[GQ];if(GS[GQ]==GT&&GQ!="mode"){return}GS[GQ]=GT;if(i.hasOwnProperty(GQ)){B4(this,i[GQ])(this,GT,GR)}BM(this,"optionChange",this,GQ)},getOption:function(GQ){return this.options[GQ]},getDoc:function(){return this.doc},addKeyMap:function(GQ,GR){this.state.keyMaps[GR?"push":"unshift"](Dc(GQ))},removeKeyMap:function(GR){var GS=this.state.keyMaps;for(var GQ=0;GQ<GS.length;++GQ){if(GS[GQ]==GR||GS[GQ].name==GR){GS.splice(GQ,1);return true}}},addOverlay:Em(function(GS,GR){var GQ=GS.token?GS:GP.getMode(this.options,GS);if(GQ.startState){throw new Error("Overlays may not be stateful.")}CV(this.state.overlays,{mode:GQ,modeSpec:GS,opaque:GR&&GR.opaque,priority:(GR&&GR.priority)||0},function(GT){return GT.priority});this.state.modeGen++;Fe(this)}),removeOverlay:Em(function(GU){var GR=this;var GT=this.state.overlays;for(var GS=0;GS<GT.length;++GS){var GQ=GT[GS].modeSpec;if(GQ==GU||typeof GU=="string"&&GQ.name==GU){GT.splice(GS,1);GR.state.modeGen++;Fe(GR);return}}}),indentLine:Em(function(GS,GQ,GR){if(typeof GQ!="string"&&typeof GQ!="number"){if(GQ==null){GQ=this.options.smartIndent?"smart":"prev"}else{GQ=GQ?"add":"subtract"}}if(FV(this.doc,GS)){I(this,GS,GQ,GR)}}),indentSelection:Em(function(GY){var GT=this;var GV=this.doc.sel.ranges,GS=-1;for(var GU=0;GU<GV.length;GU++){var GX=GV[GU];if(!GX.empty()){var GQ=GX.from(),G0=GX.to();var GR=Math.max(GS,GQ.line);GS=Math.min(GT.lastLine(),G0.line-(G0.ch?0:1))+1;for(var GW=GR;GW<GS;++GW){I(GT,GW,GY)}var GZ=GT.doc.sel.ranges;if(GQ.ch==0&&GV.length==GZ.length&&GZ[GU].from().ch>0){Fu(GT.doc,GU,new A(GQ,GZ[GU].to()),BV)}}else{if(GX.head.line>GS){I(GT,GX.head.line,GY,true);GS=GX.head.line;if(GU==GT.doc.sel.primIndex){G(GT)}}}}}),getTokenAt:function(GQ,GR){return EP(this,GQ,GR)},getLineTokens:function(GQ,GR){return EP(this,A5(GQ),GR,true)},getTokenTypeAt:function(GU){GU=GF(this.doc,GU);var GR=AC(this,DC(this.doc,GU.line));var GX=0,GS=(GR.length-1)/2,GT=GU.ch;var GW;if(GT==0){GW=GR[2]}else{for(;;){var GV=(GX+GS)>>1;if((GV?GR[GV*2-1]:0)>=GT){GS=GV}else{if(GR[GV*2+1]<GT){GX=GV+1}else{GW=GR[GV*2+2];break}}}}var GQ=GW?GW.indexOf("overlay "):-1;return GQ<0?GW:GQ==0?null:GW.slice(0,GQ-1)},getModeAt:function(GR){var GQ=this.doc.mode;if(!GQ.innerMode){return GQ}return GP.innerMode(GQ,this.getTokenAt(GR).state).mode},getHelper:function(GR,GQ){return this.getHelpers(GR,GQ)[0]},getHelpers:function(GW,GY){var GT=this;var GV=[];if(!GO.hasOwnProperty(GY)){return GV}var GR=GO[GY],GX=this.getModeAt(GW);if(typeof GX[GY]=="string"){if(GR[GX[GY]]){GV.push(GR[GX[GY]])}}else{if(GX[GY]){for(var GU=0;GU<GX[GY].length;GU++){var GZ=GR[GX[GY][GU]];if(GZ){GV.push(GZ)}}}else{if(GX.helperType&&GR[GX.helperType]){GV.push(GR[GX.helperType])}else{if(GR[GX.name]){GV.push(GR[GX.name])}}}}for(var GS=0;GS<GR._global.length;GS++){var GQ=GR._global[GS];if(GQ.pred(GX,GT)&&D3(GV,GQ.val)==-1){GV.push(GQ.val)}}return GV},getStateAfter:function(GQ,GR){var GS=this.doc;GQ=v(GS,GQ==null?GS.first+GS.size-1:GQ);return Ai(this,GQ+1,GR)},cursorCoords:function(GS,GQ){var GR,GT=this.doc.sel.primary();if(GS==null){GR=GT.head}else{if(typeof GS=="object"){GR=GF(this.doc,GS)}else{GR=GS?GT.from():GT.to()}}return f(this,GR,GQ||"page")},charCoords:function(GR,GQ){return CB(this,GF(this.doc,GR),GQ||"page")},coordsChar:function(GQ,GR){GQ=Bf(this,GQ,GR||"page");return Aw(this,GQ.left,GQ.top)},lineAtHeight:function(GQ,GR){GQ=Bf(this,{top:GQ,left:0},GR||"page").top;return Gc(this.doc,GQ+this.display.viewOffset)},heightAtLine:function(GU,GR,GS){var GT=false,GQ;if(typeof GU=="number"){var GV=this.doc.first+this.doc.size-1;if(GU<this.doc.first){GU=this.doc.first}else{if(GU>GV){GU=GV;GT=true}}GQ=DC(this.doc,GU)}else{GQ=GU}return Cm(this,GQ,{top:0,left:0},GR||"page",GS||GT).top+(GT?this.doc.height-FC(GQ):0)},defaultTextHeight:function(){return EA(this.display)},defaultCharWidth:function(){return DA(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(GV,GX,GW,GU,GQ){var GY=this.display;GV=f(this,GF(this.doc,GV));var GS=GV.bottom,GT=GV.left;GX.style.position="absolute";GX.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(GX);GY.sizer.appendChild(GX);if(GU=="over"){GS=GV.top}else{if(GU=="above"||GU=="near"){var GZ=Math.max(GY.wrapper.clientHeight,this.doc.height),GR=Math.max(GY.sizer.clientWidth,GY.lineSpace.clientWidth);if((GU=="above"||GV.bottom+GX.offsetHeight>GZ)&&GV.top>GX.offsetHeight){GS=GV.top-GX.offsetHeight}else{if(GV.bottom+GX.offsetHeight<=GZ){GS=GV.bottom}}if(GT+GX.offsetWidth>GR){GT=GR-GX.offsetWidth}}}GX.style.top=GS+"px";GX.style.left=GX.style.right="";if(GQ=="right"){GT=GY.sizer.clientWidth-GX.offsetWidth;GX.style.right="0px"}else{if(GQ=="left"){GT=0}else{if(GQ=="middle"){GT=(GY.sizer.clientWidth-GX.offsetWidth)/2}}GX.style.left=GT+"px"}if(GW){B7(this,GT,GS,GT+GX.offsetWidth,GS+GX.offsetHeight)}},triggerOnKeyDown:Em(CN),triggerOnKeyPress:Em(E0),triggerOnKeyUp:F8,execCommand:function(GQ){if(Cy.hasOwnProperty(GQ)){return Cy[GQ].call(null,this)}},triggerElectric:Em(function(GQ){a(this,GQ)}),findPosH:function(GV,GS,GX,GW){var GT=this;var GR=1;if(GS<0){GR=-1;GS=-GS}var GQ=GF(this.doc,GV);for(var GU=0;GU<GS;++GU){GQ=Dv(GT.doc,GQ,GR,GX,GW);if(GQ.hitSide){break}}return GQ},moveH:Em(function(GQ,GS){var GR=this;this.extendSelectionsBy(function(GT){if(GR.display.shift||GR.doc.extend||GT.empty()){return Dv(GR.doc,GT.head,GQ,GS,GR.options.rtlMoveVisually)}else{return GQ<0?GT.from():GT.to()}},AR)}),deleteH:Em(function(GQ,GR){var GS=this.doc.sel,GT=this.doc;if(GS.somethingSelected()){GT.replaceSelection("",null,"+delete")}else{A4(this,function(GU){var GV=Dv(GT,GU.head,GQ,GR,false);return GQ<0?{from:GV,to:GU.head}:{from:GU.head,to:GV}})}}),findPosV:function(GW,GT,GZ,GQ){var GU=this;var GS=1,GX=GQ;if(GT<0){GS=-1;GT=-GT}var GR=GF(this.doc,GW);for(var GV=0;GV<GT;++GV){var GY=f(GU,GR,"div");if(GX==null){GX=GY.left}else{GY.left=GX}GR=CT(GU,GY,GS,GZ);if(GR.hitSide){break}}return GR},moveV:Em(function(GQ,GT){var GR=this;var GW=this.doc,GU=[];var GV=!this.display.shift&&!GW.extend&&GW.sel.somethingSelected();GW.extendSelectionsBy(function(GY){if(GV){return GQ<0?GY.from():GY.to()}var GZ=f(GR,GY.head,"div");if(GY.goalColumn!=null){GZ.left=GY.goalColumn}GU.push(GZ.left);var GX=CT(GR,GZ,GQ,GT);if(GT=="page"&&GY==GW.sel.primary()){b(GR,null,CB(GR,GX,"div").top-GZ.top)}return GX},AR);if(GU.length){for(var GS=0;GS<GW.sel.ranges.length;GS++){GW.sel.ranges[GS].goalColumn=GU[GS]}}}),findWordAt:function(GS){var GV=this.doc,GQ=DC(GV,GS.line).text;var GR=GS.ch,GT=GS.ch;if(GQ){var GX=this.getHelper(GS,"wordChars");if((GS.sticky=="before"||GT==GQ.length)&&GR){--GR}else{++GT}var GW=GQ.charAt(GR);var GU=E9(GW,GX)?function(GY){return E9(GY,GX)}:/\s/.test(GW)?function(GY){return/\s/.test(GY)}:function(GY){return(!/\s/.test(GY)&&!E9(GY))};while(GR>0&&GU(GQ.charAt(GR-1))){--GR}while(GT<GQ.length&&GU(GQ.charAt(GT))){++GT}}return new A(A5(GS.line,GR),A5(GS.line,GT))},toggleOverwrite:function(GQ){if(GQ!=null&&GQ==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){Fc(this.display.cursorDiv,"CodeMirror-overwrite")}else{F3(this.display.cursorDiv,"CodeMirror-overwrite")}BM(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Fx()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Em(function(GQ,GR){if(GQ!=null||GR!=null){DE(this)}if(GQ!=null){this.curOp.scrollLeft=GQ}if(GR!=null){this.curOp.scrollTop=GR}}),getScrollInfo:function(){var GQ=this.display.scroller;return{left:GQ.scrollLeft,top:GQ.scrollTop,height:GQ.scrollHeight-x(this)-this.display.barHeight,width:GQ.scrollWidth-x(this)-this.display.barWidth,clientHeight:U(this),clientWidth:Df(this)}},scrollIntoView:Em(function(GS,GQ){if(GS==null){GS={from:this.doc.sel.primary().head,to:null};if(GQ==null){GQ=this.options.cursorScrollMargin}}else{if(typeof GS=="number"){GS={from:A5(GS,0),to:null}}else{if(GS.from==null){GS={from:GS,to:null}}}}if(!GS.to){GS.to=GS.from}GS.margin=GQ||0;if(GS.from.line!=null){DE(this);this.curOp.scrollToPos=GS}else{var GR=Gh(this,Math.min(GS.from.left,GS.to.left),Math.min(GS.from.top,GS.to.top)-GS.margin,Math.max(GS.from.right,GS.to.right),Math.max(GS.from.bottom,GS.to.bottom)+GS.margin);this.scrollTo(GR.scrollLeft,GR.scrollTop)}}),setSize:Em(function(GU,GQ){var GT=this;var GS=function(GV){return typeof GV=="number"||/^\d+$/.test(String(GV))?GV+"px":GV};if(GU!=null){this.display.wrapper.style.width=GS(GU)}if(GQ!=null){this.display.wrapper.style.height=GS(GQ)}if(this.options.lineWrapping){EF(this)}var GR=this.display.viewFrom;this.doc.iter(GR,this.display.viewTo,function(GW){if(GW.widgets){for(var GV=0;GV<GW.widgets.length;GV++){if(GW.widgets[GV].noHScroll){CU(GT,GR,"widget");break}}}++GR});this.curOp.forceUpdate=true;BM(this,"refresh",this)}),operation:function(GQ){return Ct(this,GQ)},refresh:Em(function(){var GQ=this.display.cachedTextHeight;Fe(this);this.curOp.forceUpdate=true;h(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);Dn(this);if(GQ==null||Math.abs(GQ-EA(this.display))>0.5){BA(this)}BM(this,"refresh",this)}),swapDoc:Em(function(GR){var GQ=this.doc;GQ.cm=null;E4(this,GR);h(this);this.display.input.reset();this.scrollTo(GR.scrollLeft,GR.scrollTop);this.curOp.forceScroll=true;Y(this,"swapDoc",this,GQ);return GQ}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Aq(GP);GP.registerHelper=function(GQ,GR,GS){if(!GO.hasOwnProperty(GQ)){GO[GQ]=GP[GQ]={_global:[]}}GO[GQ][GR]=GS};GP.registerGlobalHelper=function(GQ,GS,GR,GT){GP.registerHelper(GQ,GS,GT);GO[GQ]._global.push({pred:GR,val:GT})}}function Dv(GV,G2,GQ,GZ,G3){var GS=G2;var GY=GQ;var GW=DC(GV,G2.line);function G0(){var G4=G2.line+GQ;if(G4<GV.first||G4>=GV.first+GV.size){return false}G2=new A5(G4,G2.ch,G2.sticky);return GW=DC(GV,G4)}function GR(G5){var G4;if(G3){G4=B8(GV.cm,GW,G2,GQ)}else{G4=BH(GW,G2,GQ)}if(G4==null){if(!G5&&G0()){G2=D2(G3,GV.cm,GW,G2.line,GQ)}else{return false}}else{G2=G4}return true}if(GZ=="char"){GR()}else{if(GZ=="column"){GR(true)}else{if(GZ=="word"||GZ=="group"){var i=null,GX=GZ=="group";var GU=GV.cm&&GV.cm.getHelper(G2,"wordChars");for(var GO=true;;GO=false){if(GQ<0&&!GR(!GO)){break}var GT=GW.text.charAt(G2.ch)||"\n";var G1=E9(GT,GU)?"w":GX&&GT=="\n"?"n":!GX||/\s/.test(GT)?null:"p";if(GX&&!GO&&!G1){G1="s"}if(i&&i!=G1){if(GQ<0){GQ=1;GR();G2.sticky="after"}break}if(G1){i=G1}if(GQ>0&&!GR(!GO)){break}}}}}var GP=AE(GV,G2,GS,GY,true);if(F7(GS,GP)){GP.hitSide=true}return GP}function CT(GQ,GP,i,GW){var GR=GQ.doc,GU=GP.left,GV;if(GW=="page"){var GS=Math.min(GQ.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var GO=Math.max(GS-0.5*EA(GQ.display),3);GV=(i>0?GP.bottom:GP.top)+i*GO}else{if(GW=="line"){GV=i>0?GP.bottom+3:GP.top-3}}var GT;for(;;){GT=Aw(GQ,GU,GV);if(!GT.outside){break}if(i<0?GV<=0:GV>=GR.height){GT.hitSide=true;break}GV+=i*5}return GT}var A6=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new FN();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};A6.prototype.init=function(GP){var i=this;var GQ=this,GS=GQ.cm;var GR=GQ.div=GP.lineDiv;r(GR,GS.options.spellcheck);B(GR,"paste",function(GT){if(GC(GS,GT)||Aj(GT,GS)){return}if(Ew<=11){setTimeout(B4(GS,function(){if(!GQ.pollContent()){Fe(GS)}}),20)}});B(GR,"compositionstart",function(GT){i.composing={data:GT.data,done:false}});B(GR,"compositionupdate",function(GT){if(!i.composing){i.composing={data:GT.data,done:false}}});B(GR,"compositionend",function(GT){if(i.composing){if(GT.data!=i.composing.data){i.readFromDOMSoon()}i.composing.done=true}});B(GR,"touchstart",function(){return GQ.forceCompositionEnd()});B(GR,"input",function(){if(!i.composing){i.readFromDOMSoon()}});function GO(GT){if(GC(GS,GT)){return}if(GS.somethingSelected()){DZ({lineWise:false,text:GS.getSelections()});if(GT.type=="cut"){GS.replaceSelection("",null,"cut")}}else{if(!GS.options.lineWiseCopyCut){return}else{var GV=k(GS);DZ({lineWise:true,text:GV.text});if(GT.type=="cut"){GS.operation(function(){GS.setSelections(GV.ranges,0,BV);GS.replaceSelection("",null,"cut")})}}}if(GT.clipboardData){GT.clipboardData.clearData();var GY=Bn.text.join("\n");GT.clipboardData.setData("Text",GY);if(GT.clipboardData.getData("Text")==GY){GT.preventDefault();return}}var GW=u(),GX=GW.firstChild;GS.display.lineSpace.insertBefore(GW,GS.display.lineSpace.firstChild);GX.value=Bn.text.join("\n");var GU=document.activeElement;EO(GX);setTimeout(function(){GS.display.lineSpace.removeChild(GW);GU.focus();if(GU==GR){GQ.showPrimarySelection()}},50)}B(GR,"copy",GO);B(GR,"cut",GO)};A6.prototype.prepareSelection=function(){var i=De(this.cm,false);i.focus=this.cm.state.focused;return i};A6.prototype.showSelection=function(GO,i){if(!GO||!this.cm.display.view.length){return}if(GO.focus||i){this.showPrimarySelection()}this.showMultipleSelections(GO)};A6.prototype.showPrimarySelection=function(){var GV=window.getSelection(),GU=this.cm.doc.sel.primary();var GW=Dq(this.cm,GV.anchorNode,GV.anchorOffset);var GP=Dq(this.cm,GV.focusNode,GV.focusOffset);if(GW&&!GW.bad&&GP&&!GP.bad&&DM(Fq(GW,GP),GU.from())==0&&DM(DL(GW,GP),GU.to())==0){return}var GQ=Ga(this.cm,GU.from());var GS=Ga(this.cm,GU.to());if(!GQ&&!GS){return}var i=this.cm.display.view;var GO=GV.rangeCount&&GV.getRangeAt(0);if(!GQ){GQ={node:i[0].measure.map[2],offset:0}}else{if(!GS){var GT=i[i.length-1].measure;var GX=GT.maps?GT.maps[GT.maps.length-1]:GT.map;GS={node:GX[GX.length-1],offset:GX[GX.length-2]-GX[GX.length-3]}}}var GY;try{GY=EK(GQ.node,GQ.offset,GS.offset,GS.node)}catch(GR){}if(GY){if(!Gn&&this.cm.state.focused){GV.collapse(GQ.node,GQ.offset);if(!GY.collapsed){GV.removeAllRanges();GV.addRange(GY)}}else{GV.removeAllRanges();GV.addRange(GY)}if(GO&&GV.anchorNode==null){GV.addRange(GO)}else{if(Gn){this.startGracePeriod()}}}this.rememberSelection()};A6.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};A6.prototype.showMultipleSelections=function(i){EE(this.cm.display.cursorDiv,i.cursors);EE(this.cm.display.selectionDiv,i.selection)};A6.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};A6.prototype.selectionInEditor=function(){var GO=window.getSelection();if(!GO.rangeCount){return false}var i=GO.getRangeAt(0).commonAncestorContainer;return C6(this.div,i)};A6.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};A6.prototype.blur=function(){this.div.blur()};A6.prototype.getField=function(){return this.div};A6.prototype.supportsTouch=function(){return true};A6.prototype.receivedFocus=function(){var GO=this;if(this.selectionInEditor()){this.pollSelection()}else{Ct(this.cm,function(){return GO.cm.curOp.selectionChanged=true})}function i(){if(GO.cm.state.focused){GO.pollSelection();GO.polling.set(GO.cm.options.pollInterval,i)}}this.polling.set(this.cm.options.pollInterval,i)};A6.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};A6.prototype.pollSelection=function(){if(!this.composing&&this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var GP=window.getSelection(),GQ=this.cm;this.rememberSelection();var GO=Dq(GQ,GP.anchorNode,GP.anchorOffset);var i=Dq(GQ,GP.focusNode,GP.focusOffset);if(GO&&i){Ct(GQ,function(){CS(GQ.doc,FM(GO,i),BV);if(GO.bad||i.bad){GQ.curOp.selectionChanged=true}})}}};A6.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var G2=this.cm,G3=G2.display,GV=G2.doc.sel.primary();var GZ=GV.from(),GO=GV.to();if(GZ.ch==0&&GZ.line>G2.firstLine()){GZ=A5(GZ.line-1,DC(G2.doc,GZ.line-1).length)}if(GO.ch==DC(G2.doc,GO.line).text.length&&GO.line<G2.lastLine()){GO=A5(GO.line+1,0)}if(GZ.line<G3.viewFrom||GO.line>G3.viewTo-1){return false}var GT,i,G4;if(GZ.line==G3.viewFrom||(GT=C8(G2,GZ.line))==0){i=Fy(G3.view[0].line);G4=G3.view[0].node}else{i=Fy(G3.view[GT].line);G4=G3.view[GT-1].node.nextSibling}var GY=C8(G2,GO.line);var G8,GS;if(GY==G3.view.length-1){G8=G3.viewTo-1;GS=G3.lineDiv.lastChild}else{G8=Fy(G3.view[GY+1].line)-1;GS=G3.view[GY+1].node.previousSibling}if(!G4){return false}var GQ=G2.doc.splitLines(GI(G2,G4,GS,i,G8));var G1=CI(G2.doc,A5(i,0),A5(G8,DC(G2.doc,G8).text.length));while(GQ.length>1&&G1.length>1){if(Au(GQ)==Au(G1)){GQ.pop();G1.pop();G8--}else{if(GQ[0]==G1[0]){GQ.shift();G1.shift();i++}else{break}}}var GW=0,GR=0;var G7=GQ[0],GX=G1[0],G9=Math.min(G7.length,GX.length);while(GW<G9&&G7.charCodeAt(GW)==GX.charCodeAt(GW)){++GW}var GP=Au(GQ),G0=Au(G1);var G6=Math.min(GP.length-(GQ.length==1?GW:0),G0.length-(G1.length==1?GW:0));while(GR<G6&&GP.charCodeAt(GP.length-GR-1)==G0.charCodeAt(G0.length-GR-1)){++GR}GQ[GQ.length-1]=GP.slice(0,GP.length-GR).replace(/^\u200b+/,"");GQ[0]=GQ[0].slice(GW).replace(/\u200b+$/,"");var GU=A5(i,GW);var G5=A5(G8,G1.length?Au(G1).length-GR:0);if(GQ.length>1||GQ[0]||DM(GU,G5)){Fv(G2.doc,GQ,GU,G5,"+input");return true}};A6.prototype.ensurePolled=function(){this.forceCompositionEnd()};A6.prototype.reset=function(){this.forceCompositionEnd()};A6.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;if(!this.pollContent()){Fe(this.cm)}this.div.blur();this.div.focus()};A6.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}if(i.cm.isReadOnly()||!i.pollContent()){Ct(i.cm,function(){return Fe(i.cm)})}},80)};A6.prototype.setUneditable=function(i){i.contentEditable="false"};A6.prototype.onKeyPress=function(i){if(i.charCode==0){return}i.preventDefault();if(!this.cm.isReadOnly()){B4(this.cm,BS)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};A6.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};A6.prototype.onContextMenu=function(){};A6.prototype.resetPosition=function(){};A6.prototype.needsContentAttribute=true;function Ga(GR,GT){var i=FA(GR,GT.line);if(!i||i.hidden){return null}var GO=DC(GR.doc,GT.line);var GU=Cj(i,GO,GT.line);var GV=ED(GO),GP="left";if(GV){var GS=Ap(GV,GT.ch);GP=GS%2?"right":"left"}var GQ=BO(GU.map,GT.ch,GP);GQ.offset=GQ.collapse=="right"?GQ.end:GQ.start;return GQ}function S(GO,i){if(i){GO.bad=true}return GO}function GI(GP,GT,GV,GU,GO){var GS="",GR=false,GW=GP.doc.lineSeparator();function i(GX){return function(GY){return GY.id==GX}}function GQ(GZ){if(GZ.nodeType==1){var G0=GZ.getAttribute("cm-text");if(G0!=null){if(G0==""){GS+=GZ.textContent.replace(/\u200b/g,"")}else{GS+=G0}return}var GY=GZ.getAttribute("cm-marker"),G2;if(GY){var G3=GP.findMarks(A5(GU,0),A5(GO+1,0),i(+GY));if(G3.length&&(G2=G3[0].find())){GS+=CI(GP.doc,G2.from,G2.to).join(GW)}return}if(GZ.getAttribute("contenteditable")=="false"){return}for(var GX=0;GX<GZ.childNodes.length;GX++){GQ(GZ.childNodes[GX])}if(/^(pre|div|p)$/i.test(GZ.nodeName)){GR=true}}else{if(GZ.nodeType==3){var G1=GZ.nodeValue;if(!G1){return}if(GR){GS+=GW;GR=false}GS+=G1}}}for(;;){GQ(GT);if(GT==GV){break}GT=GT.nextSibling}return GS}function Dq(GT,GR,GO){var GQ;if(GR==GT.display.lineDiv){GQ=GT.display.lineDiv.childNodes[GO];if(!GQ){return S(GT.clipPos(A5(GT.display.viewTo-1)),true)}GR=null;GO=0}else{for(GQ=GR;;GQ=GQ.parentNode){if(!GQ||GQ==GT.display.lineDiv){return null}if(GQ.parentNode&&GQ.parentNode==GT.display.lineDiv){break}}}for(var GP=0;GP<GT.display.view.length;GP++){var GS=GT.display.view[GP];if(GS.node==GQ){return C4(GS,GR,GO)}}}function C4(GR,GY,GP){var G1=GR.text.firstChild,GV=false;if(!GY||!C6(G1,GY)){return S(A5(Fy(GR.line),0),true)}if(GY==G1){GV=true;GY=G1.childNodes[GP];GP=0;if(!GY){var GO=GR.rest?Au(GR.rest):GR.line;return S(A5(Fy(GO),GO.text.length),GV)}}var GS=GY.nodeType==3?GY:null,GQ=GY;if(!GS&&GY.childNodes.length==1&&GY.firstChild.nodeType==3){GS=GY.firstChild;if(GP){GP=GS.nodeValue.length}}while(GQ.parentNode!=G1){GQ=GQ.parentNode}var GU=GR.measure,GZ=GU.maps;function GW(G5,G9,G4){for(var G8=-1;G8<(GZ?GZ.length:0);G8++){var Hb=G8<0?GU.map:GZ[G8];for(var G6=0;G6<Hb.length;G6+=3){var Ha=Hb[G6+2];if(Ha==G5||Ha==G9){var G3=Fy(G8<0?GR.line:GR.rest[G8]);var G7=Hb[G6]+G4;if(G4<0||Ha!=G5){G7=Hb[G6+(G4?1:0)]}return A5(G3,G7)}}}}var GX=GW(GS,GQ,GP);if(GX){return S(GX,GV)}for(var GT=GQ.nextSibling,G0=GS?GS.nodeValue.length-GP:0;GT;GT=GT.nextSibling){GX=GW(GT,GT.firstChild,0);if(GX){return S(A5(GX.line,GX.ch-G0),GV)}else{G0+=GT.textContent.length}}for(var G2=GQ.previousSibling,i=GP;G2;G2=G2.previousSibling){GX=GW(G2,G2.firstChild,-1);if(GX){return S(A5(GX.line,GX.ch+i),GV)}else{i+=G2.textContent.length}}}var Go=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new FN();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null};Go.prototype.init=function(GQ){var GO=this;var GR=this,GT=this.cm;var GS=this.wrapper=u();var GP=this.textarea=GS.firstChild;GQ.wrapper.insertBefore(GS,GQ.wrapper.firstChild);if(Do){GP.style.width="0px"}B(GP,"input",function(){if(AD&&Ew>=9&&GO.hasSelection){GO.hasSelection=null}GR.poll()});B(GP,"paste",function(GU){if(GC(GT,GU)||Aj(GU,GT)){return}GT.state.pasteIncoming=true;GR.fastPoll()});function i(GU){if(GC(GT,GU)){return}if(GT.somethingSelected()){DZ({lineWise:false,text:GT.getSelections()});if(GR.inaccurateSelection){GR.prevInput="";GR.inaccurateSelection=false;GP.value=Bn.text.join("\n");EO(GP)}}else{if(!GT.options.lineWiseCopyCut){return}else{var GV=k(GT);DZ({lineWise:true,text:GV.text});if(GU.type=="cut"){GT.setSelections(GV.ranges,null,BV)}else{GR.prevInput="";GP.value=GV.text.join("\n");EO(GP)}}}if(GU.type=="cut"){GT.state.cutIncoming=true}}B(GP,"cut",i);B(GP,"copy",i);B(GQ.scroller,"paste",function(GU){if(q(GQ,GU)||GC(GT,GU)){return}GT.state.pasteIncoming=true;GR.focus()});B(GQ.lineSpace,"selectstart",function(GU){if(!q(GQ,GU)){Gm(GU)}});B(GP,"compositionstart",function(){var GU=GT.getCursor("from");if(GR.composing){GR.composing.range.clear()}GR.composing={start:GU,range:GT.markText(GU,GT.getCursor("to"),{className:"CodeMirror-composing"})}});B(GP,"compositionend",function(){if(GR.composing){GR.poll();GR.composing.range.clear();GR.composing=null}})};Go.prototype.prepareSelection=function(){var GS=this.cm,GQ=GS.display,GT=GS.doc;var GP=De(GS);if(GS.options.moveInputWithCursor){var GO=f(GS,GT.sel.primary().head,"div");var i=GQ.wrapper.getBoundingClientRect(),GR=GQ.lineDiv.getBoundingClientRect();GP.teTop=Math.max(0,Math.min(GQ.wrapper.clientHeight-10,GO.top+GR.top-i.top));GP.teLeft=Math.max(0,Math.min(GQ.wrapper.clientWidth-10,GO.left+GR.left-i.left))}return GP};Go.prototype.showSelection=function(GO){var i=this.cm,GP=i.display;EE(GP.cursorDiv,GO.cursors);EE(GP.selectionDiv,GO.selection);if(GO.teTop!=null){this.wrapper.style.top=GO.teTop+"px";this.wrapper.style.left=GO.teLeft+"px"}};Go.prototype.reset=function(GO){if(this.contextMenuPending){return}var i,GT,GS=this.cm,GQ=GS.doc;if(GS.somethingSelected()){this.prevInput="";var GP=GQ.sel.primary();i=t&&(GP.to().line-GP.from().line>100||(GT=GS.getSelection()).length>1000);var GR=i?"-":GT||GS.getSelection();this.textarea.value=GR;if(GS.state.focused){EO(this.textarea)}if(AD&&Ew>=9){this.hasSelection=GR}}else{if(!GO){this.prevInput=this.textarea.value="";if(AD&&Ew>=9){this.hasSelection=null}}}this.inaccurateSelection=i};Go.prototype.getField=function(){return this.textarea};Go.prototype.supportsTouch=function(){return false};Go.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!e||Fx()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};Go.prototype.blur=function(){this.textarea.blur()};Go.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};Go.prototype.receivedFocus=function(){this.slowPoll()};Go.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};Go.prototype.fastPoll=function(){var GO=false,GP=this;GP.pollingFast=true;function i(){var GQ=GP.poll();if(!GQ&&!GO){GO=true;GP.polling.set(60,i)}else{GP.pollingFast=false;GP.slowPoll()}}GP.polling.set(20,i)};Go.prototype.poll=function(){var GQ=this;var GP=this.cm,GT=this.textarea,GS=this.prevInput;if(this.contextMenuPending||!GP.state.focused||(DJ(GT)&&!GS&&!this.composing)||GP.isReadOnly()||GP.options.disableInput||GP.state.keySeq){return false}var GR=GT.value;if(GR==GS&&!GP.somethingSelected()){return false}if(AD&&Ew>=9&&this.hasSelection===GR||Gv&&/[\uf700-\uf7ff]/.test(GR)){GP.display.input.reset();return false}if(GP.doc.sel==GP.display.selForContextMenu){var GO=GR.charCodeAt(0);if(GO==8203&&!GS){GS="\u200b"}if(GO==8666){this.reset();return this.cm.execCommand("undo")}}var i=0,GU=Math.min(GS.length,GR.length);while(i<GU&&GS.charCodeAt(i)==GR.charCodeAt(i)){++i}Ct(GP,function(){BS(GP,GR.slice(i),GS.length-i,null,GQ.composing?"*compose":null);if(GR.length>1000||GR.indexOf("\n")>-1){GT.value=GQ.prevInput=""}else{GQ.prevInput=GR}if(GQ.composing){GQ.composing.range.clear();GQ.composing.range=GP.markText(GQ.composing.start,GP.getCursor("to"),{className:"CodeMirror-composing"})}});return true};Go.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};Go.prototype.onKeyPress=function(){if(AD&&Ew>=9){this.hasSelection=null}this.fastPoll()};Go.prototype.onContextMenu=function(i){var GX=this,GS=GX.cm,GZ=GS.display,G0=GX.textarea;var GV=Eh(GS,i),G1=GZ.scroller.scrollTop;if(!GV||FX){return}var GR=GS.options.resetSelectionOnContextMenu;if(GR&&GS.doc.sel.contains(GV)==-1){B4(GS,CS)(GS.doc,FM(GV),BV)}var GO=G0.style.cssText,GQ=GX.wrapper.style.cssText;GX.wrapper.style.cssText="position: absolute";var GT=GX.wrapper.getBoundingClientRect();G0.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(i.clientY-GT.top-5)+"px; left: "+(i.clientX-GT.left-5)+"px;\n      z-index: 1000; background: "+(AD?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var GU;if(AJ){GU=window.scrollY}GZ.input.focus();if(AJ){window.scrollTo(null,GU)}GZ.input.reset();if(!GS.somethingSelected()){G0.value=GX.prevInput=" "}GX.contextMenuPending=true;GZ.selForContextMenu=GS.doc.sel;clearTimeout(GZ.detectingSelectAll);function GY(){if(G0.selectionStart!=null){var G3=GS.somethingSelected();var G2="\u200b"+(G3?G0.value:"");G0.value="\u21da";G0.value=G2;GX.prevInput=G3?"":"\u200b";G0.selectionStart=1;G0.selectionEnd=G2.length;GZ.selForContextMenu=GS.doc.sel}}function GP(){GX.contextMenuPending=false;GX.wrapper.style.cssText=GQ;G0.style.cssText=GO;if(AD&&Ew<9){GZ.scrollbars.setScrollTop(GZ.scroller.scrollTop=G1)}if(G0.selectionStart!=null){if(!AD||(AD&&Ew<9)){GY()}var G2=0,G3=function(){if(GZ.selForContextMenu==GS.doc.sel&&G0.selectionStart==0&&G0.selectionEnd>0&&GX.prevInput=="\u200b"){B4(GS,Q)(GS)}else{if(G2++<10){GZ.detectingSelectAll=setTimeout(G3,500)}else{GZ.selForContextMenu=null;GZ.input.reset()}}};GZ.detectingSelectAll=setTimeout(G3,200)}}if(AD&&Ew>=9){GY()}if(Eo){Bc(i);var GW=function(){Ax(window,"mouseup",GW);setTimeout(GP,20)};B(window,"mouseup",GW)}else{setTimeout(GP,50)}};Go.prototype.readOnlyChanged=function(i){if(!i){this.reset()}};Go.prototype.setUneditable=function(){};Go.prototype.needsContentAttribute=false;function Ea(GU,GT){GT=GT?C1(GT):{};GT.value=GU.value;if(!GT.tabindex&&GU.tabIndex){GT.tabindex=GU.tabIndex}if(!GT.placeholder&&GU.placeholder){GT.placeholder=GU.placeholder}if(GT.autofocus==null){var GS=Fx();GT.autofocus=GS==GU||GU.getAttribute("autofocus")!=null&&GS==document.body}function GQ(){GU.value=GR.getValue()}var GV;if(GU.form){B(GU.form,"submit",GQ);if(!GT.leaveSubmitMethodAlone){var GP=GU.form;GV=GP.submit;try{var GO=GP.submit=function(){GQ();GP.submit=GV;GP.submit();GP.submit=GO}}catch(i){}}}GT.finishInit=function(GW){GW.save=GQ;GW.getTextArea=function(){return GU};GW.toTextArea=function(){GW.toTextArea=isNaN;GQ();GU.parentNode.removeChild(GW.getWrapperElement());GU.style.display="";if(GU.form){Ax(GU.form,"submit",GQ);if(typeof GU.form.submit=="function"){GU.form.submit=GV}}}};GU.style.display="none";var GR=Dy(function(GW){return GU.parentNode.insertBefore(GW,GU.nextSibling)},GT);return GR}function E6(i){i.off=Ax;i.on=B;i.wheelEventPixels=j;i.Doc=Fs;i.splitLines=Gr;i.countColumn=n;i.findColumn=Dj;i.isWordChar=GM;i.Pass=Cp;i.signal=BM;i.Line=P;i.changeEnd=FE;i.scrollbarModel=C9;i.Pos=A5;i.cmpPos=DM;i.modes=Cw;i.mimeModes=BC;i.resolveMode=FG;i.getMode=Dx;i.modeExtensions=EB;i.extendMode=Ez;i.copyState=CC;i.startState=An;i.innerMode=BD;i.commands=Cy;i.keyMap=Fb;i.keyName=F0;i.isModifierKey=c;i.lookupKey=Cs;i.normalizeKeyMap=Dw;i.StringStream=EQ;i.SharedTextMarker=Ab;i.TextMarker=o;i.LineWidget=EG;i.e_preventDefault=Gm;i.e_stopPropagation=M;i.e_stop=Bc;i.addClass=Fc;i.contains=C6;i.rmClass=F3;i.keyNames=CM}AL(Dy);C2(Dy);var ES="iter insert remove copy getEditor constructor".split(" ");for(var Bh in Fs.prototype){if(Fs.prototype.hasOwnProperty(Bh)&&D3(ES,Bh)<0){Dy.prototype[Bh]=(function(i){return function(){return i.apply(this.doc,arguments)}})(Fs.prototype[Bh])}}Aq(Fs);Dy.inputStyles={"textarea":Go,"contenteditable":A6};Dy.defineMode=function(i){if(!Dy.defaults.mode&&i!="null"){Dy.defaults.mode=i}EM.apply(this,arguments)};Dy.defineMIME=BF;Dy.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});Dy.defineMIME("text/plain","null");Dy.defineExtension=function(GO,i){Dy.prototype[GO]=i};Dy.defineDocExtension=function(GO,i){Fs.prototype[GO]=i};Dy.fromTextArea=Ea;E6(Dy);Dy.version="5.24.2";return Dy})));