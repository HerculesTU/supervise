(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("julia",function(Z,R){function M(d,e){if(typeof e==="undefined"){e="\\b"}return new RegExp("^(("+d.join(")|(")+"))"+e)}var Q="\\\\[0-7]{1,3}";var P="\\\\x[A-Fa-f0-9]{1,2}";var F="\\\\[abefnrtv0%?'\"\\\\]";var U="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])";var a=R.operators||M(["\\.?[\\\\%*+\\-<>!=\\/^]=?","\\.?[|&\\u00F7\\u2260\\u2264\\u2265]","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2229","\\u222A","\\u2286","\\u2288","\\u228A","\\u22c5","\\?","~",":","\\$","\\.[<>]","<<=?",">>>?=?","\\.[<>=]=","->?","\\/\\/","=>","<:","\\bin\\b(?!\\()"],"");var N=R.delimiters||/^[;,()[\]{}]/;var E=R.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var Y=M([Q,P,F,U],"'");var I=M(["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"]);var b=M(["end","else","elseif","catch","finally"]);var C=M(["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"]);var O=M(["true","false","nothing","NaN","Inf"]);var D=/^@[_A-Za-z][\w]*/;var X=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var L=/^(`|"{3}|([_A-Za-z\u00A1-\uFFFF]*"))/;function H(d){return S(d,"[")}function S(g,e){var f=V(g),d=V(g,1);if(typeof(e)==="undefined"){e="("}if(f===e||(d===e&&f==="for")){return true}return false}function V(e,d){if(typeof(d)==="undefined"){d=0}if(e.scopes.length<=d){return null}return e.scopes[e.scopes.length-(d+1)]}function J(j,g){if(j.match(/^#=/,false)){g.tokenize=W;return g.tokenize(j,g)}var i=g.leavingExpr;if(j.sol()){i=false}g.leavingExpr=false;if(i){if(j.match(/^'+/)){return"operator"}}if(j.match(/^\.{2,3}/)){return"operator"}if(j.eatSpace()){return null}var f=j.peek();if(f==="#"){j.skipToEnd();return"comment"}if(f==="["){g.scopes.push("[")}if(f==="("){g.scopes.push("(")}var e=V(g);if(H(g)&&f==="]"){if(e==="for"){g.scopes.pop()}g.scopes.pop();g.leavingExpr=true}if(S(g)&&f===")"){if(e==="for"){g.scopes.pop()}g.scopes.pop();g.leavingExpr=true}var l;if(l=j.match(I,false)){g.scopes.push(l[0])}if(j.match(b,false)){g.scopes.pop()}if(H(g)){if(g.lastToken=="end"&&j.match(/^:/)){return"operator"}if(j.match(/^end/)){return"number"}}if(j.match(/^::(?![:\$])/)){g.tokenize=K;return g.tokenize(j,g)}if(!i&&j.match(X)||j.match(/:\./)){return"builtin"}if(j.match(/^{[^}]*}(?=\()/)){return"builtin"}if(j.match(a)){return"operator"}if(j.match(/^[0-9\.]/,false)){var h=RegExp(/^im\b/);var k=false;if(j.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)){k=true}if(j.match(/^\d+\.(?!\.)\d*/)){k=true}if(j.match(/^\.\d+/)){k=true}if(j.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)){k=true}if(j.match(/^0x[0-9a-f]+/i)){k=true}if(j.match(/^0b[01]+/i)){k=true}if(j.match(/^0o[0-7]+/i)){k=true}if(j.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){k=true}if(j.match(/^0(?![\dx])/i)){k=true}if(k){j.match(h);g.leavingExpr=true;return"number"}}if(j.match(/^'/)){g.tokenize=B;return g.tokenize(j,g)}if(j.match(L)){g.tokenize=c(j.current());return g.tokenize(j,g)}if(j.match(D)){return"meta"}if(j.match(N)){return null}if(j.match(C)){return"keyword"}if(j.match(O)){return"builtin"}var d=g.isDefinition||g.lastToken=="function"||g.lastToken=="macro"||g.lastToken=="type"||g.lastToken=="immutable";if(j.match(E)){if(d){if(j.peek()==="."){g.isDefinition=true;return"variable"}g.isDefinition=false;return"def"}if(j.match(/^({[^}]*})*\(/,false)){return T(j,g)}g.leavingExpr=true;return"variable"}j.next();return"error"}function T(g,f){var e=g.match(/^(\(\s*)/);if(e){if(f.firstParenPos<0){f.firstParenPos=f.scopes.length}f.scopes.push("(");f.charsAdvanced+=e[1].length}if(V(f)=="("&&g.match(/^\)/)){f.scopes.pop();f.charsAdvanced+=1;if(f.scopes.length<=f.firstParenPos){var d=g.match(/^\s*?=(?!=)/,false);g.backUp(f.charsAdvanced);f.firstParenPos=-1;f.charsAdvanced=0;if(d){return"def"}return"builtin"}}if(g.match(/^$/g,false)){g.backUp(f.charsAdvanced);while(f.scopes.length>f.firstParenPos){f.scopes.pop()}f.firstParenPos=-1;f.charsAdvanced=0;return"builtin"}f.charsAdvanced+=g.match(/^([^()]*)/)[1].length;return T(g,f)}function K(e,d){e.match(/.*?(?=,|;|{|}|\(|\)|=|$|\s)/);if(e.match(/^{/)){d.nestedLevels++}else{if(e.match(/^}/)){d.nestedLevels--}}if(d.nestedLevels>0){e.match(/.*?(?={|})/)}else{if(d.nestedLevels==0){d.tokenize=J}}return"builtin"}function W(e,d){if(e.match(/^#=/)){d.nestedLevels++}if(!e.match(/.*?(?=(#=|=#))/)){e.skipToEnd()}if(e.match(/^=#/)){d.nestedLevels--;if(d.nestedLevels==0){d.tokenize=J}}return"comment"}function B(h,g){var f=false,e;if(h.match(Y)){f=true}else{if(e=h.match(/\\u([a-f0-9]{1,4})(?=')/i)){var d=parseInt(e[1],16);if(d<=55295||d>=57344){f=true;h.next()}}else{if(e=h.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var d=parseInt(e[1],16);if(d<=1114111){f=true;h.next()}}}}if(f){g.leavingExpr=true;g.tokenize=J;return"string"}if(!h.match(/^[^']+(?=')/)){h.skipToEnd()}if(h.match(/^'/)){g.tokenize=J}return"error"}function c(e){e=(e==="`"||e==='"""')?e:'"';function d(g,f){if(g.eat("\\")){g.next()}else{if(g.match(e)){f.tokenize=J;f.leavingExpr=true;return"string"}else{g.eat(/[`"]/)}}g.eatWhile(/[^\\`"]/);return"string"}return d}var G={startState:function(){return{tokenize:J,scopes:[],lastToken:null,leavingExpr:false,isDefinition:false,nestedLevels:0,charsAdvanced:0,firstParenPos:-1}},token:function(g,f){var d=f.tokenize(g,f);var e=g.current();if(e&&d){f.lastToken=e}if(e==="."){d=g.match(E,false)||g.match(D,false)||g.match(/\(/,false)?"operator":"error"}return d},indent:function(f,e){var d=0;if(e==="]"||e===")"||e==="end"||e==="else"||e==="catch"||e==="elseif"||e==="finally"){d=-1}return(f.scopes.length+d)*Z.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",fold:"indent"};return G});A.defineMIME("text/x-julia","julia")});