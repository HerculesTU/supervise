(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(G){function C(H){return new RegExp("^(("+H.join(")|(")+"))\\b")}var E=C(["and","or","not","is"]);var D=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"];var F=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];G.registerHelper("hintWords","python",D.concat(F));function B(H){return H.scopes[H.scopes.length-1]}G.defineMode("python",function(X,R){var c="error";var K=R.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/;var J=R.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/;var H=R.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/;var T=R.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/;var d=R.hangingIndent||X.indentUnit;var Q=D,P=F;if(R.extra_keywords!=undefined){Q=Q.concat(R.extra_keywords)}if(R.extra_builtins!=undefined){P=P.concat(R.extra_builtins)}var a=!(R.version&&Number(R.version)<3);if(a){var Y=R.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/;var Z=R.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;Q=Q.concat(["nonlocal","False","True","None","async","await"]);P=P.concat(["ascii","bytes","exec","print"]);var O=new RegExp("^(([rbuf]|(br))?('{3}|\"{3}|['\"]))","i")}else{var Y=R.singleOperators||/^[\+\-\*\/%&|\^~<>!]/;var Z=R.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;Q=Q.concat(["exec","print"]);P=P.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var O=new RegExp("^(([rubf]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var I=C(Q);var M=C(P);function N(j,h){if(j.sol()){h.indent=j.indentation()}if(j.sol()&&B(h).type=="py"){var f=B(h).offset;if(j.eatSpace()){var i=j.indentation();if(i>f){b(h)}else{if(i<f&&W(j,h)&&j.peek()!="#"){h.errorToken=true}}return null}else{var g=U(j,h);if(f>0&&W(j,h)){g+=" "+c}return g}}return U(j,h)}function U(j,i){if(j.eatSpace()){return null}var h=j.peek();if(h=="#"){j.skipToEnd();return"comment"}if(j.match(/^[0-9\.]/,false)){var f=false;if(j.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)){f=true}if(j.match(/^[\d_]+\.\d*/)){f=true}if(j.match(/^\.\d+/)){f=true}if(f){j.eat(/J/i);return"number"}var g=false;if(j.match(/^0x[0-9a-f_]+/i)){g=true}if(j.match(/^0b[01_]+/i)){g=true}if(j.match(/^0o[0-7_]+/i)){g=true}if(j.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)){j.eat(/J/i);g=true}if(j.match(/^0(?![\dx])/i)){g=true}if(g){j.eat(/L/i);return"number"}}if(j.match(O)){i.tokenize=e(j.current());return i.tokenize(j,i)}if(j.match(T)||j.match(H)){return"punctuation"}if(j.match(J)||j.match(Y)){return"operator"}if(j.match(K)){return"punctuation"}if(i.lastToken=="."&&j.match(Z)){return"property"}if(j.match(I)||j.match(E)){return"keyword"}if(j.match(M)){return"builtin"}if(j.match(/^(self|cls)\b/)){return"variable-2"}if(j.match(Z)){if(i.lastToken=="def"||i.lastToken=="class"){return"def"}return"variable"}j.next();return c}function e(i){while("rubf".indexOf(i.charAt(0).toLowerCase())>=0){i=i.substr(1)}var f=i.length==1;var g="string";function h(k,j){while(!k.eol()){k.eatWhile(/[^'"\\]/);if(k.eat("\\")){k.next();if(f&&k.eol()){return g}}else{if(k.match(i)){j.tokenize=N;return g}else{k.eat(/['"]/)}}}if(f){if(R.singleLineStringErrors){return c}else{j.tokenize=N}}return g}h.isString=true;return h}function b(f){while(B(f).type!="py"){f.scopes.pop()}f.scopes.push({offset:B(f).offset+X.indentUnit,type:"py",align:null})}function S(i,h,f){var g=i.match(/^([\s\[\{\(]|#.*)*$/,false)?null:i.column()+1;h.scopes.push({offset:h.indent+d,type:f,align:g})}function W(h,g){var f=h.indentation();while(g.scopes.length>1&&B(g).offset>f){if(B(g).type!="py"){return true}g.scopes.pop()}return B(g).offset!=f}function V(j,h){if(j.sol()){h.beginningOfLine=true}var f=h.tokenize(j,h);var g=j.current();if(h.beginningOfLine&&g=="@"){return j.match(Z,false)?"meta":a?"operator":c}if(/\S/.test(g)){h.beginningOfLine=false}if((f=="variable"||f=="builtin")&&h.lastToken=="meta"){f="meta"}if(g=="pass"||g=="return"){h.dedent+=1}if(g=="lambda"){h.lambda=true}if(g==":"&&!h.lambda&&B(h).type=="py"){b(h)}var i=g.length==1?"[({".indexOf(g):-1;if(i!=-1){S(j,h,"])}".slice(i,i+1))}i="])}".indexOf(g);if(i!=-1){if(B(h).type==g){h.indent=h.scopes.pop().offset-d}else{return c}}if(h.dedent>0&&j.eol()&&B(h).type=="py"){if(h.scopes.length>1){h.scopes.pop()}h.dedent-=1}return f}var L={startState:function(f){return{tokenize:N,scopes:[{offset:f||0,type:"py",align:null}],indent:f||0,lastToken:null,lambda:false,dedent:0}},token:function(i,h){var f=h.errorToken;if(f){h.errorToken=false}var g=V(i,h);if(g&&g!="comment"){h.lastToken=(g=="keyword"||g=="punctuation")?i.current():g}if(g=="punctuation"){g=null}if(i.eol()&&h.lambda){h.lambda=false}return f?g+" "+c:g},indent:function(i,g){if(i.tokenize!=N){return i.tokenize.isString?G.Pass:0}var h=B(i),f=h.type==g.charAt(0);if(h.align!=null){return h.align-(f?1:0)}else{return h.offset-(f?d:0)}},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return L});G.defineMIME("text/x-python","python");var A=function(H){return H.split(" ")};G.defineMIME("text/x-cython",{name:"python",extra_keywords:A("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})});