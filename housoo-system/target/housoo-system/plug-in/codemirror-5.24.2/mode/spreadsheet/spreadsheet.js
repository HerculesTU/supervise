(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("spreadsheet",function(){return{startState:function(){return{stringType:null,stack:[]}},token:function(D,C){if(!D){return}if(C.stack.length===0){if((D.peek()=='"')||(D.peek()=="'")){C.stringType=D.peek();D.next();C.stack.unshift("string")}}switch(C.stack[0]){case"string":while(C.stack[0]==="string"&&!D.eol()){if(D.peek()===C.stringType){D.next();C.stack.shift()}else{if(D.peek()==="\\"){D.next();D.next()}else{D.match(/^.[^\\\"\']*/)}}}return"string";case"characterClass":while(C.stack[0]==="characterClass"&&!D.eol()){if(!(D.match(/^[^\]\\]+/)||D.match(/^\\./))){C.stack.shift()}}return"operator"}var B=D.peek();switch(B){case"[":D.next();C.stack.unshift("characterClass");return"bracket";case":":D.next();return"operator";case"\\":if(D.match(/\\[a-z]+/)){return"string-2"}else{D.next();return"atom"}case".":case",":case";":case"*":case"-":case"+":case"^":case"<":case"/":case"=":D.next();return"atom";case"$":D.next();return"builtin"}if(D.match(/\d+/)){if(D.match(/^\w+/)){return"error"}return"number"}else{if(D.match(/^[a-zA-Z_]\w*/)){if(D.match(/(?=[\(.])/,false)){return"keyword"}return"variable-2"}else{if(["[","]","(",")","{","}"].indexOf(B)!=-1){D.next();return"bracket"}else{if(!D.eatSpace()){D.next()}}}}return null}}});A.defineMIME("text/x-spreadsheet","spreadsheet")});