function splitLines(A){return A.split(/\r\n?|\n/)}var countColumn=function(B,A,E,G,D){if(A==null){A=B.search(/[^\s\u00a0]/);if(A==-1){A=B.length}}for(var F=G||0,C=D||0;;){var H=B.indexOf("\t",F);if(H<0||H>=A){return C+(A-F)}C+=H-F;C+=E-(C%E);F=H+1}};function StringStream(B,A){this.pos=this.start=0;this.string=B;this.tabSize=A||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(B){var C=this.string.charAt(this.pos);if(typeof B=="string"){var A=C==B}else{var A=C&&(B.test?B.test(C):B(C))}if(A){++this.pos;return C}},eatWhile:function(A){var B=this.pos;while(this.eat(A)){}return this.pos>B},eatSpace:function(){var A=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>A},skipToEnd:function(){this.pos=this.string.length},skipTo:function(A){var B=this.string.indexOf(A,this.pos);if(B>-1){this.pos=B;return true}},backUp:function(A){this.pos-=A},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},match:function(E,D,A){if(typeof E=="string"){var F=function(G){return A?G.toLowerCase():G};var C=this.string.substr(this.pos,E.length);if(F(C)==F(E)){if(D!==false){this.pos+=E.length}return true}}else{var B=this.string.slice(this.pos).match(E);if(B&&B.index>0){return null}if(B&&D!==false){this.pos+=B[0].length}return B}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(A,B){this.lineStart+=A;try{return B()}finally{this.lineStart-=A}}};exports.StringStream=StringStream;exports.startState=function(B,A,C){return B.startState?B.startState(A,C):true};var modes=exports.modes={},mimeModes=exports.mimeModes={};exports.defineMode=function(B,A){if(arguments.length>2){A.dependencies=Array.prototype.slice.call(arguments,2)}modes[B]=A};exports.defineMIME=function(A,B){mimeModes[A]=B};exports.defineMode("null",function(){return{token:function(A){A.skipToEnd()}}});exports.defineMIME("text/plain","null");exports.resolveMode=function(A){if(typeof A=="string"&&mimeModes.hasOwnProperty(A)){A=mimeModes[A]}else{if(A&&typeof A.name=="string"&&mimeModes.hasOwnProperty(A.name)){A=mimeModes[A.name]}}if(typeof A=="string"){return{name:A}}else{return A||{name:"null"}}};function copyObj(A,D,B){if(!D){D={}}for(var C in A){if(A.hasOwnProperty(C)&&(B!==false||!D.hasOwnProperty(C))){D[C]=A[C]}}return D}var modeExtensions=exports.modeExtensions={};exports.extendMode=function(A,B){var C=modeExtensions.hasOwnProperty(A)?modeExtensions[A]:(modeExtensions[A]={});copyObj(B,C)};exports.getMode=function(C,E){var E=exports.resolveMode(E);var B=modes[E.name];if(!B){return exports.getMode(C,"text/plain")}var A=B(C,E);if(modeExtensions.hasOwnProperty(E.name)){var F=modeExtensions[E.name];for(var D in F){if(!F.hasOwnProperty(D)){continue}if(A.hasOwnProperty(D)){A["_"+D]=A[D]}A[D]=F[D]}}A.name=E.name;if(E.helperType){A.helperType=E.helperType}if(E.modeProps){for(var D in E.modeProps){A[D]=E.modeProps[D]}}return A};exports.registerHelper=exports.registerGlobalHelper=Math.min;exports.runMode=function(E,A,B,I){var K=exports.getMode({indentUnit:2},A);var D=splitLines(E),G=(I&&I.state)||exports.startState(K);for(var J=0,C=D.length;J<C;++J){if(J){B("\n")}var F=new exports.StringStream(D[J]);if(!F.string&&K.blankLine){K.blankLine(G)}while(!F.eol()){var H=K.token(F,G);B(F.current(),H,J,F.start,G);F.start=F.pos}}};require.cache[require.resolve("../../lib/codemirror")]=require.cache[require.resolve("./runmode.node")];require.cache[require.resolve("../../addon/runmode/runmode")]=require.cache[require.resolve("./runmode.node")];