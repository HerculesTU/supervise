(function(R){var G=function(X,Y,Z,V,b,W,a){if(typeof Z.isHidden=="string"){Z.isHidden=E.eqs(Z.isHidden,"true")}Z.isHidden=!!Z.isHidden;Q.initHideForExCheck(X,Z)},H=function(W,X,V){},K=function(W,X){X.showNodes=function(Z,Y){O.showNodes(W,Z,Y)};X.showNode=function(Y,Z){if(!Y){return}O.showNodes(W,[Y],Z)};X.hideNodes=function(Z,Y){O.hideNodes(W,Z,Y)};X.hideNode=function(Y,Z){if(!Y){return}O.hideNodes(W,[Y],Z)};var V=X.checkNode;if(V){X.checkNode=function(Z,a,b,Y){if(!!Z&&!!Z.isHidden){return}V.apply(X,arguments)}}},C={initHideForExCheck:function(V,W){if(W.isHidden&&V.check&&V.check.enable){if(typeof W._nocheck=="undefined"){W._nocheck=!!W.nocheck;W.nocheck=true}W.check_Child_State=-1;if(O.repairParentChkClassWithSelf){O.repairParentChkClassWithSelf(V,W)}}},initShowForExCheck:function(W,X){if(!X.isHidden&&W.check&&W.check.enable){if(typeof X._nocheck!="undefined"){X.nocheck=X._nocheck;delete X._nocheck}if(O.setChkClass){var V=T(X,U.id.CHECK,W);O.setChkClass(W,V,X)}if(O.repairParentChkClassWithSelf){O.repairParentChkClassWithSelf(W,X)}}}},M={clearOldFirstNode:function(V,X){var W=X.getNextNode();while(!!W){if(W.isFirstNode){W.isFirstNode=false;O.setNodeLineIcos(V,W);break}if(W.isLastNode){break}W=W.getNextNode()}},clearOldLastNode:function(V,X,Y){var W=X.getPreNode();while(!!W){if(W.isLastNode){W.isLastNode=false;if(Y){O.setNodeLineIcos(V,W)}break}if(W.isFirstNode){break}W=W.getPreNode()}},makeDOMNodeMainBefore:function(V,W,X){V.push("<li ",(X.isHidden?"style='display:none;' ":""),"id='",X.tId,"' class='",U.className.LEVEL,X.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(V,W,X){W.isHidden=false;Q.initShowForExCheck(V,W);T(W,V).show()},showNodes:function(X,e,b){if(!e||e.length==0){return}var Y={},Z,W;for(Z=0,W=e.length;Z<W;Z++){var a=e[Z];if(!Y[a.parentTId]){var d=a.getParentNode();Y[a.parentTId]=(d===null)?Q.getRoot(X):a.getParentNode()}O.showNode(X,a,b)}for(var c in Y){var V=Y[c][X.data.key.children];O.setFirstNodeForShow(X,V);O.setLastNodeForShow(X,V)}},hideNode:function(V,W,X){W.isHidden=true;W.isFirstNode=false;W.isLastNode=false;Q.initHideForExCheck(V,W);O.cancelPreSelectedNode(V,W);T(W,V).hide()},hideNodes:function(X,e,b){if(!e||e.length==0){return}var Y={},Z,W;for(Z=0,W=e.length;Z<W;Z++){var a=e[Z];if((a.isFirstNode||a.isLastNode)&&!Y[a.parentTId]){var d=a.getParentNode();Y[a.parentTId]=(d===null)?Q.getRoot(X):a.getParentNode()}O.hideNode(X,a,b)}for(var c in Y){var V=Y[c][X.data.key.children];O.setFirstNodeForHide(X,V);O.setLastNodeForHide(X,V)}},setFirstNode:function(W,V){var Y=W.data.key.children,X=V[Y].length;if(X>0&&!V[Y][0].isHidden){V[Y][0].isFirstNode=true}else{if(X>0){O.setFirstNodeForHide(W,V[Y])}}},setLastNode:function(W,V){var Y=W.data.key.children,X=V[Y].length;if(X>0&&!V[Y][0].isHidden){V[Y][X-1].isLastNode=true}else{if(X>0){O.setLastNodeForHide(W,V[Y])}}},setFirstNodeForHide:function(W,Y){var X,V,Z;for(V=0,Z=Y.length;V<Z;V++){X=Y[V];if(X.isFirstNode){break}if(!X.isHidden&&!X.isFirstNode){X.isFirstNode=true;O.setNodeLineIcos(W,X);break}else{X=null}}return X},setFirstNodeForShow:function(W,Z){var X,V,b,a,Y;for(V=0,b=Z.length;V<b;V++){X=Z[V];if(!a&&!X.isHidden&&X.isFirstNode){a=X;break}else{if(!a&&!X.isHidden&&!X.isFirstNode){X.isFirstNode=true;a=X;O.setNodeLineIcos(W,X)}else{if(a&&X.isFirstNode){X.isFirstNode=false;Y=X;O.setNodeLineIcos(W,X);break}else{X=null}}}}return{"new":a,"old":Y}},setLastNodeForHide:function(W,Y){var X,V;for(V=Y.length-1;V>=0;V--){X=Y[V];if(X.isLastNode){break}if(!X.isHidden&&!X.isLastNode){X.isLastNode=true;O.setNodeLineIcos(W,X);break}else{X=null}}return X},setLastNodeForShow:function(W,Z){var X,V,b,a,Y;for(V=Z.length-1;V>=0;V--){X=Z[V];if(!a&&!X.isHidden&&X.isLastNode){a=X;break}else{if(!a&&!X.isHidden&&!X.isLastNode){X.isLastNode=true;a=X;O.setNodeLineIcos(W,X)}else{if(a&&X.isLastNode){X.isLastNode=false;Y=X;O.setNodeLineIcos(W,X);break}else{X=null}}}}return{"new":a,"old":Y}}},D={view:M,data:C};R.extend(true,R.fn.zTree._z,D);var L=R.fn.zTree,E=L._z.tools,U=L.consts,O=L._z.view,Q=L._z.data,N=L._z.event,T=E.$;Q.addInitNode(G);Q.addBeforeA(H);Q.addZTreeTools(K);var F=Q.initNode;Q.initNode=function(X,Y,a,Z,c,d,b){var V=(Z)?Z:Q.getRoot(X),W=V[X.data.key.children];Q.tmpHideFirstNode=O.setFirstNodeForHide(X,W);Q.tmpHideLastNode=O.setLastNodeForHide(X,W);if(b){O.setNodeLineIcos(X,Q.tmpHideFirstNode);O.setNodeLineIcos(X,Q.tmpHideLastNode)}c=(Q.tmpHideFirstNode===a);d=(Q.tmpHideLastNode===a);if(F){F.apply(Q,arguments)}if(b&&d){O.clearOldLastNode(X,a,b)}};var P=Q.makeChkFlag;if(!!P){Q.makeChkFlag=function(V,W){if(!!W&&!!W.isHidden){return}P.apply(Q,arguments)}}var B=Q.getTreeCheckedNodes;if(!!B){Q.getTreeCheckedNodes=function(V,X,Y,Z){if(!!X&&X.length>0){var W=X[0].getParentNode();if(!!W&&!!W.isHidden){return[]}}return B.apply(Q,arguments)}}var J=Q.getTreeChangeCheckedNodes;if(!!J){Q.getTreeChangeCheckedNodes=function(V,X,Y){if(!!X&&X.length>0){var W=X[0].getParentNode();if(!!W&&!!W.isHidden){return[]}}return J.apply(Q,arguments)}}var S=O.expandCollapseSonNode;if(!!S){O.expandCollapseSonNode=function(W,X,V,Y,Z){if(!!X&&!!X.isHidden){return}S.apply(O,arguments)}}var I=O.setSonNodeCheckBox;if(!!I){O.setSonNodeCheckBox=function(V,W,X,Y){if(!!W&&!!W.isHidden){return}I.apply(O,arguments)}}var A=O.repairParentChkClassWithSelf;if(!!A){O.repairParentChkClassWithSelf=function(V,W){if(!!W&&!!W.isHidden){return}A.apply(O,arguments)}}})(jQuery);