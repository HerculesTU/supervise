/*
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(K,J,R,T){var N=R("html"),L=R(K),P=R(J),O=R.fancybox=function(){O.open.apply(this,arguments)},M=navigator.userAgent.match(/msie/i),C=null,E=J.createTouch!==T,I=function(D){return D&&D.hasOwnProperty&&D instanceof R},B=function(D){return D&&R.type(D)==="string"},Q=function(D){return B(D)&&D.indexOf("%")>0},A=function(D){return(D&&!(D.style.overflow&&D.style.overflow==="hidden")&&((D.clientWidth&&D.scrollWidth>D.clientWidth)||(D.clientHeight&&D.scrollHeight>D.clientHeight)))},S=function(F,H){var D=parseInt(F,10)||0;if(H&&Q(F)){D=O.getViewport()[H]/100*D}return Math.ceil(D)},G=function(F,D){return S(F,D)+"px"};R.extend(O,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!E,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(M?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:R.noop,beforeLoad:R.noop,afterLoad:R.noop,beforeShow:R.noop,afterShow:R.noop,beforeChange:R.noop,beforeClose:R.noop,afterClose:R.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(D,F){if(!D){return}if(!R.isPlainObject(F)){F={}}if(false===O.close(true)){return}if(!R.isArray(D)){D=I(D)?R(D).get():[D]}R.each(D,function(W,H){var a={},c,X,b,Z,V,U,Y;if(R.type(H)==="object"){if(H.nodeType){H=R(H)}if(I(H)){a={href:H.data("fancybox-href")||H.attr("href"),title:H.data("fancybox-title")||H.attr("title"),isDom:true,element:H};if(R.metadata){R.extend(true,a,H.metadata())}}else{a=H}}c=F.href||a.href||(B(H)?H:null);X=F.title!==T?F.title:a.title||"";b=F.content||a.content;Z=b?"html":(F.type||a.type);if(!Z&&a.isDom){Z=H.data("fancybox-type");if(!Z){V=H.prop("class").match(/fancybox\.(\w+)/);Z=V?V[1]:null}}if(B(c)){if(!Z){if(O.isImage(c)){Z="image"}else{if(O.isSWF(c)){Z="swf"}else{if(c.charAt(0)==="#"){Z="inline"}else{if(B(H)){Z="html";b=H}}}}}if(Z==="ajax"){U=c.split(/\s+/,2);c=U.shift();Y=U.shift()}}if(!b){if(Z==="inline"){if(c){b=R(B(c)?c.replace(/.*(?=#[^\s]+$)/,""):c)}else{if(a.isDom){b=H}}}else{if(Z==="html"){b=c}else{if(!Z&&!c&&a.isDom){Z="inline";b=H}}}}R.extend(a,{href:c,type:Z,content:b,title:X,selector:Y});D[W]=a});O.opts=R.extend(true,{},O.defaults,F);if(F.keys!==T){O.opts.keys=F.keys?R.extend({},O.defaults.keys,F.keys):false}O.group=D;return O._start(O.opts.index)},cancel:function(){var D=O.coming;if(!D||false===O.trigger("onCancel")){return}O.hideLoading();if(O.ajaxLoad){O.ajaxLoad.abort()}O.ajaxLoad=null;if(O.imgPreload){O.imgPreload.onload=O.imgPreload.onerror=null}if(D.wrap){D.wrap.stop(true,true).trigger("onReset").remove()}O.coming=null;if(!O.current){O._afterZoomOut(D)}},close:function(D){O.cancel();if(false===O.trigger("beforeClose")){return}O.unbindEvents();if(!O.isActive){return}if(!O.isOpen||D===true){R(".fancybox-wrap").stop(true).trigger("onReset").remove();O._afterZoomOut()}else{O.isOpen=O.isOpened=false;O.isClosing=true;R(".fancybox-item, .fancybox-nav").remove();O.wrap.stop(true,true).removeClass("fancybox-opened");O.transitions[O.current.closeMethod]()}},play:function(D){var H=function(){clearTimeout(O.player.timer)},V=function(){H();if(O.current&&O.player.isActive){O.player.timer=setTimeout(O.next,O.current.playSpeed)}},F=function(){H();P.unbind(".player");O.player.isActive=false;O.trigger("onPlayEnd")},U=function(){if(O.current&&(O.current.loop||O.current.index<O.group.length-1)){O.player.isActive=true;P.bind({"onCancel.player beforeClose.player":F,"onUpdate.player":V,"beforeLoad.player":H});V();O.trigger("onPlayStart")}};if(D===true||(!O.player.isActive&&D!==false)){U()}else{F()}},next:function(F){var D=O.current;if(D){if(!B(F)){F=D.direction.next}O.jumpto(D.index+1,F,"next")}},prev:function(F){var D=O.current;if(D){if(!B(F)){F=D.direction.prev}O.jumpto(D.index-1,F,"prev")}},jumpto:function(F,H,U){var D=O.current;if(!D){return}F=S(F);O.direction=H||D.direction[(F>=D.index?"next":"prev")];O.router=U||"jumpto";if(D.loop){if(F<0){F=D.group.length+(F%D.group.length)}F=F%D.group.length}if(D.group[F]!==T){O.cancel();O._start(F)}},reposition:function(D,U){var H=O.current,F=H?H.wrap:null,V;if(F){V=O._getPosition(U);if(D&&D.type==="scroll"){delete V.position;F.stop(true,true).animate(V,200)}else{F.css(V);H.pos=R.extend({},H.dim,V)}}},update:function(F){var D=(F&&F.type),H=!D||D==="orientationchange";if(H){clearTimeout(C);C=null}if(!O.isOpen||C){return}C=setTimeout(function(){var U=O.current;if(!U||O.isClosing){return}O.wrap.removeClass("fancybox-tmp");if(H||D==="load"||(D==="resize"&&U.autoResize)){O._setDimension()}if(!(D==="scroll"&&U.canShrink)){O.reposition(F)}O.trigger("onUpdate");C=null},(H&&!E?0:300))},toggle:function(D){if(O.isOpen){O.current.fitToView=R.type(D)==="boolean"?D:!O.current.fitToView;if(E){O.wrap.removeAttr("style").addClass("fancybox-tmp");O.trigger("onUpdate")}O.update()}},hideLoading:function(){P.unbind(".loading");R("#fancybox-loading").remove()},showLoading:function(){var D,F;O.hideLoading();D=R('<div id="fancybox-loading"><div></div></div>').click(O.cancel).appendTo("body");P.bind("keydown.loading",function(H){if((H.which||H.keyCode)===27){H.preventDefault();O.cancel()}});if(!O.defaults.fixed){F=O.getViewport();D.css({position:"absolute",top:(F.h*0.5)+F.y,left:(F.w*0.5)+F.x})}},getViewport:function(){var F=(O.current&&O.current.locked)||false,D={x:L.scrollLeft(),y:L.scrollTop()};if(F){D.w=F[0].clientWidth;D.h=F[0].clientHeight}else{D.w=E&&K.innerWidth?K.innerWidth:L.width();D.h=E&&K.innerHeight?K.innerHeight:L.height()}return D},unbindEvents:function(){if(O.wrap&&I(O.wrap)){O.wrap.unbind(".fb")}P.unbind(".fb");L.unbind(".fb")},bindEvents:function(){var D=O.current,F;if(!D){return}L.bind("orientationchange.fb"+(E?"":" resize.fb")+(D.autoCenter&&!D.locked?" scroll.fb":""),O.update);F=D.keys;if(F){P.bind("keydown.fb",function(H){var U=H.which||H.keyCode,V=H.target||H.srcElement;if(U===27&&O.coming){return false}if(!H.ctrlKey&&!H.altKey&&!H.shiftKey&&!H.metaKey&&!(V&&(V.type||R(V).is("[contenteditable]")))){R.each(F,function(W,X){if(D.group.length>1&&X[U]!==T){O[W](X[U]);H.preventDefault();return false}if(R.inArray(U,X)>-1){O[W]();H.preventDefault();return false}})}})}if(R.fn.mousewheel&&D.mouseWheel){O.wrap.bind("mousewheel.fb",function(U,H,X,V){var Y=U.target||null,Z=R(Y),W=false;while(Z.length){if(W||Z.is(".fancybox-skin")||Z.is(".fancybox-wrap")){break}W=A(Z[0]);Z=R(Z).parent()}if(H!==0&&!W){if(O.group.length>1&&!D.canShrink){if(V>0||X>0){O.prev(V>0?"down":"left")}else{if(V<0||X<0){O.next(V<0?"up":"right")}}U.preventDefault()}}})}},trigger:function(H,F){var U,D=F||O.coming||O.current;if(!D){return}if(R.isFunction(D[H])){U=D[H].apply(D,Array.prototype.slice.call(arguments,1))}if(U===false){return false}if(D.helpers){R.each(D.helpers,function(W,V){if(V&&O.helpers[W]&&R.isFunction(O.helpers[W][H])){O.helpers[W][H](R.extend(true,{},O.helpers[W].defaults,V),D)}})}P.trigger(H)},isImage:function(D){return B(D)&&D.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(D){return B(D)&&D.match(/\.(swf)((\?|#).*)?$/i)},_start:function(V){var X={},H,D,W,F,U;V=S(V);H=O.group[V]||null;if(!H){return false}X=R.extend(true,{},O.opts,H);F=X.margin;U=X.padding;if(R.type(F)==="number"){X.margin=[F,F,F,F]}if(R.type(U)==="number"){X.padding=[U,U,U,U]}if(X.modal){R.extend(true,X,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(X.autoSize){X.autoWidth=X.autoHeight=true}if(X.width==="auto"){X.autoWidth=true}if(X.height==="auto"){X.autoHeight=true}X.group=O.group;X.index=V;O.coming=X;if(false===O.trigger("beforeLoad")){O.coming=null;return}W=X.type;D=X.href;if(!W){O.coming=null;if(O.current&&O.router&&O.router!=="jumpto"){O.current.index=V;return O[O.router](O.direction)}return false}O.isActive=true;if(W==="image"||W==="swf"){X.autoHeight=X.autoWidth=false;X.scrolling="visible"}if(W==="image"){X.aspectRatio=true}if(W==="iframe"&&E){X.scrolling="scroll"}X.wrap=R(X.tpl.wrap).addClass("fancybox-"+(E?"mobile":"desktop")+" fancybox-type-"+W+" fancybox-tmp "+X.wrapCSS).appendTo(X.parent||"body");R.extend(X,{skin:R(".fancybox-skin",X.wrap),outer:R(".fancybox-outer",X.wrap),inner:R(".fancybox-inner",X.wrap)});R.each(["Top","Right","Bottom","Left"],function(Y,Z){X.skin.css("padding"+Z,G(X.padding[Y]))});O.trigger("onReady");if(W==="inline"||W==="html"){if(!X.content||!X.content.length){return O._error("content")}}else{if(!D){return O._error("href")}}if(W==="image"){O._loadImage()}else{if(W==="ajax"){O._loadAjax()}else{if(W==="iframe"){O._loadIframe()}else{O._afterLoad()}}}},_error:function(D){R.extend(O.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:D,content:O.coming.tpl.error});O._afterLoad()},_loadImage:function(){var D=O.imgPreload=new Image();D.onload=function(){this.onload=this.onerror=null;O.coming.width=this.width/O.opts.pixelRatio;O.coming.height=this.height/O.opts.pixelRatio;O._afterLoad()};D.onerror=function(){this.onload=this.onerror=null;O._error("image")};D.src=O.coming.href;if(D.complete!==true){O.showLoading()}},_loadAjax:function(){var D=O.coming;O.showLoading();O.ajaxLoad=R.ajax(R.extend({},D.ajax,{url:D.href,error:function(F,H){if(O.coming&&H!=="abort"){O._error("ajax",F)}else{O.hideLoading()}},success:function(H,F){if(F==="success"){D.content=H;O._afterLoad()}}}))},_loadIframe:function(){var F=O.coming,D=R(F.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",E?"auto":F.iframe.scrolling).attr("src",F.href);R(F.wrap).bind("onReset",function(){try{R(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(H){}});if(F.iframe.preload){O.showLoading();D.one("load",function(){R(this).data("ready",1);if(!E){R(this).bind("load.fb",O.update)}R(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();O._afterLoad()})}F.content=D.appendTo(F.inner);if(!F.iframe.preload){O._afterLoad()}},_preloadImages:function(){var D=O.group,V=O.current,W=D.length,H=V.preload?Math.min(V.preload,W-1):0,U,F;for(F=1;F<=H;F+=1){U=D[(V.index+F)%W];if(U.type==="image"&&U.href){new Image().src=U.href}}},_afterLoad:function(){var H=O.coming,X=O.current,D="fancybox-placeholder",V,Y,U,W,Z,F;O.hideLoading();if(!H||O.isActive===false){return}if(false===O.trigger("afterLoad",H,X)){H.wrap.stop(true).trigger("onReset").remove();O.coming=null;return}if(X){O.trigger("beforeChange",X);X.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}O.unbindEvents();V=H;Y=H.content;U=H.type;W=H.scrolling;R.extend(O,{wrap:V.wrap,skin:V.skin,outer:V.outer,inner:V.inner,current:V,previous:X});Z=V.href;switch(U){case"inline":case"ajax":case"html":if(V.selector){Y=R("<div>").html(Y).find(V.selector)}else{if(I(Y)){if(!Y.data(D)){Y.data(D,R('<div class="'+D+'"></div>').insertAfter(Y).hide())}Y=Y.show().detach();V.wrap.bind("onReset",function(){if(R(this).find(Y).length){Y.hide().replaceAll(Y.data(D)).data(D,false)}})}}break;case"image":Y=V.tpl.image.replace("{href}",Z);break;case"swf":Y='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+Z+'"></param>';F="";R.each(V.swf,function(a,b){Y+='<param name="'+a+'" value="'+b+'"></param>';F+=" "+a+'="'+b+'"'});Y+='<embed src="'+Z+'" type="application/x-shockwave-flash" width="100%" height="100%"'+F+"></embed></object>";break}if(!(I(Y)&&Y.parent().is(V.inner))){V.inner.append(Y)}O.trigger("beforeShow");V.inner.css("overflow",W==="yes"?"scroll":(W==="no"?"hidden":W));O._setDimension();O.reposition();O.isOpen=false;O.coming=null;O.bindEvents();if(!O.isOpened){R(".fancybox-wrap").not(V.wrap).stop(true).trigger("onReset").remove()}else{if(X.prevMethod){O.transitions[X.prevMethod]()}}O.transitions[O.isOpened?V.nextMethod:V.openMethod]();O._preloadImages()},_setDimension:function(){var h=O.getViewport(),r=0,g=false,t=false,m=O.wrap,c=O.skin,H=O.inner,d=O.current,Z=d.width,f=d.height,l=d.minWidth,j=d.minHeight,a=d.maxWidth,x=d.maxHeight,u=d.scrolling,Aa=d.scrollOutside?d.scrollbarWidth:0,k=d.margin,q=S(k[1]+k[3]),b=S(k[0]+k[2]),n,W,Y,i,F,p,X,z,v,y,s,o,V,U,w;m.add(c).add(H).width("auto").height("auto").removeClass("fancybox-tmp");n=S(c.outerWidth(true)-c.width());W=S(c.outerHeight(true)-c.height());Y=q+n;i=b+W;F=Q(Z)?(h.w-Y)*S(Z)/100:Z;p=Q(f)?(h.h-i)*S(f)/100:f;if(d.type==="iframe"){U=d.content;if(d.autoHeight&&U.data("ready")===1){try{if(U[0].contentWindow.document.location){H.width(F).height(9999);w=U.contents().find("body");if(Aa){w.css("overflow-x","hidden")}p=w.outerHeight(true)}}catch(D){}}}else{if(d.autoWidth||d.autoHeight){H.addClass("fancybox-tmp");if(!d.autoWidth){H.width(F)}if(!d.autoHeight){H.height(p)}if(d.autoWidth){F=H.width()}if(d.autoHeight){p=H.height()}H.removeClass("fancybox-tmp")}}Z=S(F);f=S(p);v=F/p;l=S(Q(l)?S(l,"w")-Y:l);a=S(Q(a)?S(a,"w")-Y:a);j=S(Q(j)?S(j,"h")-i:j);x=S(Q(x)?S(x,"h")-i:x);X=a;z=x;if(d.fitToView){a=Math.min(h.w-Y,a);x=Math.min(h.h-i,x)}o=h.w-q;V=h.h-b;if(d.aspectRatio){if(Z>a){Z=a;f=S(Z/v)}if(f>x){f=x;Z=S(f*v)}if(Z<l){Z=l;f=S(Z/v)}if(f<j){f=j;Z=S(f*v)}}else{Z=Math.max(l,Math.min(Z,a));if(d.autoHeight&&d.type!=="iframe"){H.width(Z);f=H.height()}f=Math.max(j,Math.min(f,x))}if(d.fitToView){H.width(Z).height(f);m.width(Z+n);y=m.width();s=m.height();if(d.aspectRatio){while((y>o||s>V)&&Z>l&&f>j){if(r++>19){break}f=Math.max(j,Math.min(x,f-10));Z=S(f*v);if(Z<l){Z=l;f=S(Z/v)}if(Z>a){Z=a;f=S(Z/v)}H.width(Z).height(f);m.width(Z+n);y=m.width();s=m.height()}}else{Z=Math.max(l,Math.min(Z,Z-(y-o)));f=Math.max(j,Math.min(f,f-(s-V)))}}if(Aa&&u==="auto"&&f<p&&(Z+n+Aa)<o){Z+=Aa}H.width(Z).height(f);m.width(Z+n);y=m.width();s=m.height();g=(y>o||s>V)&&Z>l&&f>j;t=d.aspectRatio?(Z<X&&f<z&&Z<F&&f<p):((Z<X||f<z)&&(Z<F||f<p));R.extend(d,{dim:{width:G(y),height:G(s)},origWidth:F,origHeight:p,canShrink:g,canExpand:t,wPadding:n,hPadding:W,wrapSpace:s-c.outerHeight(true),skinSpace:c.height()-f});if(!U&&d.autoHeight&&f>j&&f<x&&!t){H.height("auto")}},_getPosition:function(X){var V=O.current,H=O.getViewport(),D=V.margin,U=O.wrap.width()+D[1]+D[3],F=O.wrap.height()+D[0]+D[2],W={position:"absolute",top:D[0],left:D[3]};if(V.autoCenter&&V.fixed&&!X&&F<=H.h&&U<=H.w){W.position="fixed"}else{if(!V.locked){W.top+=H.y;W.left+=H.x}}W.top=G(Math.max(W.top,W.top+((H.h-F)*V.topRatio)));W.left=G(Math.max(W.left,W.left+((H.w-U)*V.leftRatio)));return W},_afterZoomIn:function(){var D=O.current;if(!D){return}O.isOpen=O.isOpened=true;O.wrap.css("overflow","visible").addClass("fancybox-opened");O.update();if(D.closeClick||(D.nextClick&&O.group.length>1)){O.inner.css("cursor","pointer").bind("click.fb",function(F){if(!R(F.target).is("a")&&!R(F.target).parent().is("a")){F.preventDefault();O[D.closeClick?"close":"next"]()}})}if(D.closeBtn){R(D.tpl.closeBtn).appendTo(O.skin).bind("click.fb",function(F){F.preventDefault();O.close()})}if(D.arrows&&O.group.length>1){if(D.loop||D.index>0){R(D.tpl.prev).appendTo(O.outer).bind("click.fb",O.prev)}if(D.loop||D.index<O.group.length-1){R(D.tpl.next).appendTo(O.outer).bind("click.fb",O.next)}}O.trigger("afterShow");if(!D.loop&&D.index===D.group.length-1){O.play(false)}else{if(O.opts.autoPlay&&!O.player.isActive){O.opts.autoPlay=false;O.play()}}},_afterZoomOut:function(D){D=D||O.current;R(".fancybox-wrap").trigger("onReset").remove();R.extend(O,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});O.trigger("afterClose",D)}});O.transitions={getOrigPosition:function(){var H=O.current,D=H.element,Z=H.orig,V={},W=50,X=50,F=H.hPadding,Y=H.wPadding,U=O.getViewport();if(!Z&&H.isDom&&D.is(":visible")){Z=D.find("img:first");if(!Z.length){Z=D}}if(I(Z)){V=Z.offset();if(Z.is("img")){W=Z.outerWidth();X=Z.outerHeight()}}else{V.top=U.y+(U.h-X)*H.topRatio;V.left=U.x+(U.w-W)*H.leftRatio}if(O.wrap.css("position")==="fixed"||H.locked){V.top-=U.y;V.left-=U.x}V={top:G(V.top-F*H.topRatio),left:G(V.left-Y*H.leftRatio),width:G(W+Y),height:G(X+F)};return V},step:function(D,Y){var F,H,X,V=Y.prop,U=O.current,Z=U.wrapSpace,W=U.skinSpace;if(V==="width"||V==="height"){F=Y.end===Y.start?1:(D-Y.start)/(Y.end-Y.start);if(O.isClosing){F=1-F}H=V==="width"?U.wPadding:U.hPadding;X=D-H;O.skin[V](S(V==="width"?X:X-(Z*F)));O.inner[V](S(V==="width"?X:X-(Z*F)-(W*F)))}},zoomIn:function(){var U=O.current,V=U.pos,D=U.openEffect,F=D==="elastic",H=R.extend({opacity:1},V);delete H.position;if(F){V=this.getOrigPosition();if(U.openOpacity){V.opacity=0.1}}else{if(D==="fade"){V.opacity=0.1}}O.wrap.css(V).animate(H,{duration:D==="none"?0:U.openSpeed,easing:U.openEasing,step:F?this.step:null,complete:O._afterZoomIn})},zoomOut:function(){var U=O.current,D=U.closeEffect,F=D==="elastic",H={opacity:0.1};if(F){H=this.getOrigPosition();if(U.closeOpacity){H.opacity=0.1}}O.wrap.animate(H,{duration:D==="none"?0:U.closeSpeed,easing:U.closeEasing,step:F?this.step:null,complete:O._afterZoomOut})},changeIn:function(){var H=O.current,D=H.nextEffect,V=H.pos,F={opacity:1},W=O.direction,X=200,U;V.opacity=0.1;if(D==="elastic"){U=W==="down"||W==="up"?"top":"left";if(W==="down"||W==="right"){V[U]=G(S(V[U])-X);F[U]="+="+X+"px"}else{V[U]=G(S(V[U])+X);F[U]="-="+X+"px"}}if(D==="none"){O._afterZoomIn()}else{O.wrap.css(V).animate(F,{duration:H.nextSpeed,easing:H.nextEasing,complete:O._afterZoomIn})}},changeOut:function(){var H=O.previous,D=H.prevEffect,F={opacity:0.1},U=O.direction,V=200;if(D==="elastic"){F[U==="down"||U==="up"?"top":"left"]=(U==="up"||U==="left"?"-":"+")+"="+V+"px"}H.wrap.animate(F,{duration:D==="none"?0:H.prevSpeed,easing:H.prevEasing,complete:function(){R(this).trigger("onReset").remove()}})}};O.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!E,fixed:true},overlay:null,fixed:false,el:R("html"),create:function(D){D=R.extend({},this.defaults,D);if(this.overlay){this.close()}this.overlay=R('<div class="fancybox-overlay"></div>').appendTo(O.coming?O.coming.parent:D.parent);this.fixed=false;if(D.fixed&&O.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(D){var F=this;D=R.extend({},this.defaults,D);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(D)}if(!this.fixed){L.bind("resize.overlay",R.proxy(this.update,this));this.update()}if(D.closeClick){this.overlay.bind("click.overlay",function(H){if(R(H.target).hasClass("fancybox-overlay")){if(O.isActive){O.close()}else{F.close()}return false}})}this.overlay.css(D.css).show()},close:function(){var F,D;L.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){R(".fancybox-margin").removeClass("fancybox-margin");F=L.scrollTop();D=L.scrollLeft();this.el.removeClass("fancybox-lock");L.scrollTop(F).scrollLeft(D)}R(".fancybox-overlay").remove().hide();R.extend(this,{overlay:null,fixed:false})},update:function(){var F="100%",D;this.overlay.width(F).height("100%");if(M){D=Math.max(J.documentElement.offsetWidth,J.body.offsetWidth);if(P.width()>D){F=P.width()}}else{if(P.width()>L.width()){F=P.width()}}this.overlay.width(F).height(P.height())},onReady:function(D,F){var H=this.overlay;R(".fancybox-overlay").stop(true,true);if(!H){this.create(D)}if(D.locked&&this.fixed&&F.fixed){if(!H){this.margin=P.height()>L.height()?R("html").css("margin-right").replace("px",""):false}F.locked=this.overlay.append(F.wrap);F.fixed=false}if(D.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(D,F){var U,H;if(F.locked){if(this.margin!==false){R("*").filter(function(){return(R(this).css("position")==="fixed"&&!R(this).hasClass("fancybox-overlay")&&!R(this).hasClass("fancybox-wrap"))}).addClass("fancybox-margin");this.el.addClass("fancybox-margin")}U=L.scrollTop();H=L.scrollLeft();this.el.addClass("fancybox-lock");L.scrollTop(U).scrollLeft(H)}this.open(D)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(D){if(this.overlay&&!O.coming){this.overlay.fadeOut(D.speedOut,R.proxy(this.close,this))}}};O.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(F){var U=O.current,H=U.title,D=F.type,W,V;if(R.isFunction(H)){H=H.call(U.element,U)}if(!B(H)||R.trim(H)===""){return}W=R('<div class="fancybox-title fancybox-title-'+D+'-wrap">'+H+"</div>");switch(D){case"inside":V=O.skin;break;case"outside":V=O.wrap;break;case"over":V=O.inner;break;default:V=O.skin;W.appendTo("body");if(M){W.width(W.width())}W.wrapInner('<span class="child"></span>');O.current.margin[2]+=Math.abs(S(W.css("margin-bottom")));break}W[(F.position==="top"?"prependTo":"appendTo")](V)}};R.fn.fancybox=function(H){var U,D=R(this),F=this.selector||"",V=function(X){var Z=R(this).blur(),Y=U,W,a;if(!(X.ctrlKey||X.altKey||X.shiftKey||X.metaKey)&&!Z.is(".fancybox-wrap")){W=H.groupAttr||"data-fancybox-group";a=Z.attr(W);if(!a){W="rel";a=Z.get(0)[W]}if(a&&a!==""&&a!=="nofollow"){Z=F.length?R(F):D;Z=Z.filter("["+W+'="'+a+'"]');Y=Z.index(this)}H.index=Y;if(O.open(Z,H)!==false){X.preventDefault()}}};H=H||{};U=H.index||0;if(!F||H.live===false){D.unbind("click.fb-start").bind("click.fb-start",V)}else{P.undelegate(F,"click.fb-start").delegate(F+":not('.fancybox-item, .fancybox-nav')","click.fb-start",V)}this.filter("[data-fancybox-start=1]").trigger("click");return this};P.ready(function(){var F,D;if(R.scrollbarWidth===T){R.scrollbarWidth=function(){var V=R('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),H=V.children(),U=H.innerWidth()-H.height(99).innerWidth();V.remove();return U}}if(R.support.fixedPosition===T){R.support.fixedPosition=(function(){var H=R('<div style="position:fixed;top:20px;"></div>').appendTo("body"),U=(H[0].offsetTop===20||H[0].offsetTop===15);H.remove();return U}())}R.extend(O.defaults,{scrollbarWidth:R.scrollbarWidth(),fixed:R.support.fixedPosition,parent:R("body")});F=R(K).width();N.addClass("fancybox-lock-test");D=R(K).width();N.removeClass("fancybox-lock-test");R("<style type='text/css'>.fancybox-margin{margin-right:"+(D-F)+"px;}</style>").appendTo("head")})}(window,document,jQuery));