(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(J){var F=["From","Sender","Reply-To","To","Cc","Bcc","Message-ID","In-Reply-To","References","Resent-From","Resent-Sender","Resent-To","Resent-Cc","Resent-Bcc","Resent-Message-ID","Return-Path","Received"];var N=["Date","Subject","Comments","Keywords","Resent-Date"];J.registerHelper("hintWords","mbox",F.concat(N));var B=/^[ \t]/;var H=/^From /;var G=new RegExp("^("+F.join("|")+"): ");var A=new RegExp("^("+N.join("|")+"): ");var L=/^[^:]+:/;var I=/^[^ ]+@[^ ]+/;var M=/^.*?(?=[^ ]+?@[^ ]+)/;var K=/^<.*?>/;var D=/^.*?(?=<.*>)/;function E(O){if(O==="Subject"){return"header"}return"string"}function C(S,R){if(S.sol()){R.inSeparator=false;if(R.inHeader&&S.match(B)){return null}else{R.inHeader=false;R.header=null}if(S.match(H)){R.inHeaders=true;R.inSeparator=true;return"atom"}var O;var Q=false;if((O=S.match(A))||(Q=true)&&(O=S.match(G))){R.inHeaders=true;R.inHeader=true;R.emailPermitted=Q;R.header=O[1];return"atom"}if(R.inHeaders&&(O=S.match(L))){R.inHeader=true;R.emailPermitted=true;R.header=O[1];return"atom"}R.inHeaders=false;S.skipToEnd();return null}if(R.inSeparator){if(S.match(I)){return"link"}if(S.match(M)){return"atom"}S.skipToEnd();return"atom"}if(R.inHeader){var P=E(R.header);if(R.emailPermitted){if(S.match(K)){return P+" link"}if(S.match(D)){return P}}S.skipToEnd();return P}S.skipToEnd();return null}J.defineMode("mbox",function(){return{startState:function(){return{inSeparator:false,inHeader:false,emailPermitted:false,header:null,inHeaders:false}},token:C,blankLine:function(O){O.inHeaders=O.inSeparator=O.inHeader=false}}});J.defineMIME("application/mbox","mbox")});