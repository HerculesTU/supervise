(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],A)}else{A(CodeMirror)}}})(function(F){var B={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function D(N,K,L){var J=N.current(),M=J.search(K);if(M>-1){N.backUp(J.length-M)}else{if(J.match(/<\/?$/)){N.backUp(J.length);if(!N.match(K,false)){N.match(J)}}}return L}var I={};function E(K){var J=I[K];if(J){return J}return I[K]=new RegExp("\\s+"+K+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function C(K,L){var J=K.match(E(L));return J?/^\s*(.*?)\s*$/.exec(J[2])[1]:""}function G(J,K){return new RegExp((K?"^":"")+"</s*"+J+"s*>","i")}function A(K,M){for(var J in K){var L=M[J]||(M[J]=[]);var N=K[J];for(var O=N.length-1;O>=0;O--){L.unshift(N[O])}}}function H(M,L){for(var J=0;J<M.length;J++){var K=M[J];if(!K[0]||K[1].test(C(L,K[0]))){return K[2]}}}F.defineMode("htmlmixed",function(J,M){var L=F.getMode(J,{name:"xml",htmlMode:true,multilineTagIndentFactor:M.multilineTagIndentFactor,multilineTagIndentPastTag:M.multilineTagIndentPastTag});var Q={};var O=M&&M.tags,N=M&&M.scriptTypes;A(B,Q);if(O){A(O,Q)}if(N){for(var K=N.length-1;K>=0;K--){Q.script.unshift(["type",N[K].matches,N[K].mode])}}function P(W,U){var V=L.token(W,U.htmlState),T=/\btag\b/.test(V),a;if(T&&!/[<>\s\/]/.test(W.current())&&(a=U.htmlState.tagName&&U.htmlState.tagName.toLowerCase())&&Q.hasOwnProperty(a)){U.inTag=a+" "}else{if(U.inTag&&T&&/>$/.test(W.current())){var S=/^([\S]+) (.*)/.exec(U.inTag);U.inTag=null;var Z=W.current()==">"&&H(Q[S[1]],S[2]);var X=F.getMode(J,Z);var R=G(S[1],true),Y=G(S[1],false);U.token=function(c,b){if(c.match(R,false)){b.token=P;b.localState=b.localMode=null;return null}return D(c,Y,b.localMode.token(c,b.localState))};U.localMode=X;U.localState=F.startState(X,L.indent(U.htmlState,""))}else{if(U.inTag){U.inTag+=W.current();if(W.eol()){U.inTag+=" "}}}}return V}return{startState:function(){var R=F.startState(L);return{token:P,inTag:null,localMode:null,localState:null,htmlState:R}},copyState:function(S){var R;if(S.localState){R=F.copyState(S.localMode,S.localState)}return{token:S.token,inTag:S.inTag,localMode:S.localMode,localState:R,htmlState:F.copyState(L,S.htmlState)}},token:function(S,R){return R.token(S,R)},indent:function(S,R){if(!S.localMode||/^\s*<\//.test(R)){return L.indent(S.htmlState,R)}else{if(S.localMode.indent){return S.localMode.indent(S.localState,R)}else{return F.Pass}}},innerMode:function(R){return{state:R.localState||R.htmlState,mode:R.localMode||L}}}},"xml","javascript","css");F.defineMIME("text/html","htmlmixed")});