(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("q",function(D){var C=D.indentUnit,B,G=M(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),K=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;function M(E){return new RegExp("^("+E.join("|")+")$")}function H(S,P){var E=S.sol(),R=S.next();B=null;if(E){if(R=="/"){return(P.tokenize=I)(S,P)}else{if(R=="\\"){if(S.eol()||/\s/.test(S.peek())){return S.skipToEnd(),/^\\\s*$/.test(S.current())?(P.tokenize=O)(S,P):P.tokenize=H,"comment"}else{return P.tokenize=H,"builtin"}}}}if(/\s/.test(R)){return S.peek()=="/"?(S.skipToEnd(),"comment"):"whitespace"}if(R=='"'){return(P.tokenize=N)(S,P)}if(R=="`"){return S.eatWhile(/[A-Z|a-z|\d|_|:|\/|\.]/),"symbol"}if(("."==R&&/\d/.test(S.peek()))||/\d/.test(R)){var Q=null;S.backUp(1);if(S.match(/^\d{4}\.\d{2}(m|\.\d{2}([D|T](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||S.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||S.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||S.match(/^\d+[ptuv]{1}/)){Q="temporal"}else{if(S.match(/^0[NwW]{1}/)||S.match(/^0x[\d|a-f|A-F]*/)||S.match(/^[0|1]+[b]{1}/)||S.match(/^\d+[chijn]{1}/)||S.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/)){Q="number"}}return(Q&&(!(R=S.peek())||K.test(R)))?Q:(S.next(),"error")}if(/[A-Z|a-z]|\./.test(R)){return S.eatWhile(/[A-Z|a-z|\.|_|\d]/),G.test(S.current())?"keyword":"variable"}if(/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(R)){return null}if(/[{}\(\[\]\)]/.test(R)){return null}return"error"}function I(P,E){return P.skipToEnd(),/\/\s*$/.test(P.current())?(E.tokenize=F)(P,E):(E.tokenize=H),"comment"}function F(Q,P){var E=Q.sol()&&Q.peek()=="\\";Q.skipToEnd();if(E&&/^\\\s*$/.test(Q.current())){P.tokenize=H}return"comment"}function O(E){return E.skipToEnd(),"comment"}function N(S,Q){var P=false,R,E=false;while((R=S.next())){if(R=='"'&&!P){E=true;break}P=!P&&R=="\\"}if(E){Q.tokenize=H}return"string"}function L(Q,E,P){Q.context={prev:Q.context,indent:Q.indent,col:P,type:E}}function J(E){E.indent=E.context.indent;E.context=E.context.prev}return{startState:function(){return{tokenize:H,context:null,indent:0,col:0}},token:function(Q,P){if(Q.sol()){if(P.context&&P.context.align==null){P.context.align=false}P.indent=Q.indentation()}var E=P.tokenize(Q,P);if(E!="comment"&&P.context&&P.context.align==null&&P.context.type!="pattern"){P.context.align=true}if(B=="("){L(P,")",Q.column())}else{if(B=="["){L(P,"]",Q.column())}else{if(B=="{"){L(P,"}",Q.column())}else{if(/[\]\}\)]/.test(B)){while(P.context&&P.context.type=="pattern"){J(P)}if(P.context&&B==P.context.type){J(P)}}else{if(B=="."&&P.context&&P.context.type=="pattern"){J(P)}else{if(/atom|string|variable/.test(E)&&P.context){if(/[\}\]]/.test(P.context.type)){L(P,"pattern",Q.column())}else{if(P.context.type=="pattern"&&!P.context.align){P.context.align=true;P.context.col=Q.column()}}}}}}}}return E},indent:function(S,P){var R=P&&P.charAt(0);var E=S.context;if(/[\]\}]/.test(R)){while(E&&E.type=="pattern"){E=E.prev}}var Q=E&&R==E.type;if(!E){return 0}else{if(E.type=="pattern"){return E.col}else{if(E.align){return E.col+(Q?0:1)}else{return E.indent+(Q?0:C)}}}}}});A.defineMIME("text/x-q","q")});