(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/overlay"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/overlay"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("tornado:inner",function(){var C=["and","as","assert","autoescape","block","break","class","comment","context","continue","datetime","def","del","elif","else","end","escape","except","exec","extends","false","finally","for","from","global","if","import","in","include","is","json_encode","lambda","length","linkify","load","module","none","not","or","pass","print","put","raise","raw","return","self","set","squeeze","super","true","try","url_escape","while","with","without","xhtml_escape","yield"];C=new RegExp("^(("+C.join(")|(")+"))\\b");function B(G,F){G.eatWhile(/[^\{]/);var E=G.next();if(E=="{"){if(E=G.eat(/\{|%|#/)){F.tokenize=D(E);return"tag"}}}function D(E){if(E=="{"){E="}"}return function(H,G){var F=H.next();if((F==E)&&H.eat("}")){G.tokenize=B;return"tag"}if(H.match(C)){return"keyword"}return E=="#"?"comment":"string"}}return{startState:function(){return{tokenize:B}},token:function(F,E){return E.tokenize(F,E)}}});A.defineMode("tornado",function(C){var B=A.getMode(C,"text/html");var D=A.getMode(C,"tornado:inner");return A.overlayMode(B,D)});A.defineMIME("text/x-tornado","tornado")});