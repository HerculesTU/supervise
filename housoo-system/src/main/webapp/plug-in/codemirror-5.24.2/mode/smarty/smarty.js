(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("smarty",function(C,J){var M=J.rightDelimiter||"}";var D=J.leftDelimiter||"{";var H=J.version||2;var K=A.getMode(C,J.baseMode||"null");var N=["debug","extends","function","include","literal"];var F={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};var P;function Q(R,S){P=S;return R}function L(T,R,S){R.tokenize=S;return S(T,R)}function E(S,R){if(R==null){R=S.pos}return H===3&&D=="{"&&(R==S.string.length||/\s/.test(S.string.charAt(R)))}function G(W,V){var U=W.string;for(var R=W.pos;;){var S=U.indexOf(D,R);R=S+D.length;if(S==-1||!E(W,S+D.length)){break}}if(S==W.pos){W.match(D);if(W.eat("*")){return L(W,V,B("comment","*"+M))}else{V.depth++;V.tokenize=I;P="startTag";return"tag"}}if(S>-1){W.string=U.slice(0,S)}var T=K.token(W,V.base);if(S>-1){W.string=U}return T}function I(X,V){if(X.match(M,true)){if(H===3){V.depth--;if(V.depth<=0){V.tokenize=G}}else{V.tokenize=G}return Q("tag",null)}if(X.match(D,true)){V.depth++;return Q("tag","startTag")}var U=X.next();if(U=="$"){X.eatWhile(F.validIdentifier);return Q("variable-2","variable")}else{if(U=="|"){return Q("operator","pipe")}else{if(U=="."){return Q("operator","property")}else{if(F.stringChar.test(U)){V.tokenize=O(U);return Q("string","string")}else{if(F.operatorChars.test(U)){X.eatWhile(F.operatorChars);return Q("operator","operator")}else{if(U=="["||U=="]"){return Q("bracket","bracket")}else{if(U=="("||U==")"){return Q("bracket","operator")}else{if(/\d/.test(U)){X.eatWhile(/\d/);return Q("number","number")}else{if(V.last=="variable"){if(U=="@"){X.eatWhile(F.validIdentifier);return Q("property","property")}else{if(U=="|"){X.eatWhile(F.validIdentifier);return Q("qualifier","modifier")}}}else{if(V.last=="pipe"){X.eatWhile(F.validIdentifier);return Q("qualifier","modifier")}else{if(V.last=="whitespace"){X.eatWhile(F.validIdentifier);return Q("attribute","modifier")}}}if(V.last=="property"){X.eatWhile(F.validIdentifier);return Q("property",null)}else{if(/\s/.test(U)){P="whitespace";return null}}var T="";if(U!="/"){T+=U}var W=null;while(W=X.eat(F.validIdentifier)){T+=W}for(var S=0,R=N.length;S<R;S++){if(N[S]==T){return Q("keyword","keyword")}}if(/\s/.test(U)){return null}return Q("tag","tag")}}}}}}}}}function O(R){return function(V,T){var S=null;var U=null;while(!V.eol()){U=V.peek();if(V.next()==R&&S!=="\\"){T.tokenize=I;break}S=U}return"string"}}function B(S,R){return function(U,T){while(!U.eol()){if(U.match(R)){T.tokenize=G;break}U.next()}return S}}return{startState:function(){return{base:A.startState(K),tokenize:G,last:null,depth:0}},copyState:function(R){return{base:A.copyState(K,R.base),tokenize:R.tokenize,last:R.last,depth:R.depth}},innerMode:function(R){if(R.tokenize==G){return{mode:K,state:R.base}}},token:function(T,S){var R=S.tokenize(T,S);S.last=P;return R},indent:function(S,R){if(S.tokenize==G&&K.indent){return K.indent(S.base,R)}else{return A.Pass}},blockCommentStart:D+"*",blockCommentEnd:"*"+M}});A.defineMIME("text/x-smarty","smarty")});