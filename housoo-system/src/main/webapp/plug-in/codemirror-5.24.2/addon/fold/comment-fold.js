(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.registerGlobalHelper("fold","comment",function(B){return B.blockCommentStart&&B.blockCommentEnd},function(Q,U){var E=Q.getModeAt(U),M=E.blockCommentStart,I=E.blockCommentEnd;if(!M||!I){return}var P=U.line,C=Q.getLine(P);var B;for(var D=U.ch,S=0;;){var N=D<=0?-1:C.lastIndexOf(M,D-1);if(N==-1){if(S==1){return}S=1;D=C.length;continue}if(S==1&&N<U.ch){return}if(/comment/.test(Q.getTokenTypeAt(A.Pos(P,N+1)))&&(N==0||C.slice(N-I.length,N)==I||!/comment/.test(Q.getTokenTypeAt(A.Pos(P,N))))){B=N+M.length;break}D=N-1}var K=1,O=Q.lastLine(),J,G;outer:for(var F=P;F<=O;++F){var L=Q.getLine(F),T=F==P?B:0;for(;;){var R=L.indexOf(M,T),H=L.indexOf(I,T);if(R<0){R=L.length}if(H<0){H=L.length}T=Math.min(R,H);if(T==L.length){break}if(T==R){++K}else{if(!--K){J=F;G=T;break outer}}++T}}if(J==null||P==J&&G==B){return}return{from:A.Pos(P,B),to:A.Pos(J,G)}})});