(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.registerHelper("fold","brace",function(P,R){var O=R.line,C=P.getLine(O);var F;function S(U){for(var V=R.ch,W=0;;){var T=V<=0?-1:C.lastIndexOf(U,V-1);if(T==-1){if(W==1){break}W=1;V=C.length;continue}if(W==1&&T<R.ch){break}F=P.getTokenTypeAt(A.Pos(O,T+1));if(!/^(comment|string)/.test(F)){return T+1}V=T-1}}var M="{",K="}",I=S("{");if(I==null){M="[",K="]";I=S("[")}if(I==null){return}var D=1,N=P.lastLine(),J,G;outer:for(var E=O;E<=N;++E){var L=P.getLine(E),Q=E==O?I:0;for(;;){var B=L.indexOf(M,Q),H=L.indexOf(K,Q);if(B<0){B=L.length}if(H<0){H=L.length}Q=Math.min(B,H);if(Q==L.length){break}if(P.getTokenTypeAt(A.Pos(E,Q+1))==F){if(Q==B){++D}else{if(!--D){J=E;G=Q;break outer}}}++Q}}if(J==null||O==J&&G==I){return}return{from:A.Pos(O,I),to:A.Pos(J,G)}});A.registerHelper("fold","import",function(E,C){function B(N){if(N<E.firstLine()||N>E.lastLine()){return null}var O=E.getTokenAt(A.Pos(N,1));if(!/\S/.test(O.string)){O=E.getTokenAt(A.Pos(N,O.end+1))}if(O.type!="keyword"||O.string!="import"){return null}for(var J=N,K=Math.min(E.lastLine(),N+10);J<=K;++J){var M=E.getLine(J),L=M.indexOf(";");if(L!=-1){return{startCh:O.end,end:A.Pos(J,L)}}}}var I=C.line,F=B(I),G;if(!F||B(I-1)||((G=B(I-2))&&G.end.line==I-1)){return null}for(var D=F.end;;){var H=B(D.line+1);if(H==null){break}D=H.end}return{from:E.clipPos(A.Pos(I,F.startCh+1)),to:D}});A.registerHelper("fold","include",function(G,H){function D(I){if(I<G.firstLine()||I>G.lastLine()){return null}var J=G.getTokenAt(A.Pos(I,1));if(!/\S/.test(J.string)){J=G.getTokenAt(A.Pos(I,J.end+1))}if(J.type=="meta"&&J.string.slice(0,8)=="#include"){return J.start+8}}var F=H.line,E=D(F);if(E==null||D(F-1)!=null){return null}for(var B=F;;){var C=D(B+1);if(C==null){break}++B}return{from:A.Pos(F,E+1),to:G.clipPos(A.Pos(B))}})});