(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(D){var A=["clike","css","javascript"];for(var B=0;B<A.length;++B){D.extendMode(A[B],{blockCommentContinue:" * "})}function E(J){if(J.getOption("disableInput")){return D.Pass}var I=J.listSelections(),P,S=[];for(var M=0;M<I.length;M++){var O=I[M].head,L=J.getTokenAt(O);if(L.type!="comment"){return D.Pass}var G=D.innerMode(J.getMode(),L.state).mode;if(!P){P=G}else{if(P!=G){return D.Pass}}var N=null;if(P.blockCommentStart&&P.blockCommentContinue){var F=L.string.indexOf(P.blockCommentEnd);var R=J.getRange(D.Pos(O.line,0),D.Pos(O.line,L.end)),H;if(F!=-1&&F==L.string.length-P.blockCommentEnd.length&&O.ch>=F){}else{if(L.string.indexOf(P.blockCommentStart)==0){N=R.slice(0,L.start);if(!/^\s*$/.test(N)){N="";for(var K=0;K<L.start;++K){N+=" "}}}else{if((H=R.indexOf(P.blockCommentContinue))!=-1&&H+P.blockCommentContinue.length>L.start&&/^\s*$/.test(R.slice(0,H))){N=R.slice(0,H)}}}if(N!=null){N+=P.blockCommentContinue}}if(N==null&&P.lineComment&&C(J)){var Q=J.getLine(O.line),H=Q.indexOf(P.lineComment);if(H>-1){N=Q.slice(0,H);if(/\S/.test(N)){N=null}else{N+=P.lineComment+Q.slice(H+P.lineComment.length).match(/^\s*/)[0]}}}if(N==null){return D.Pass}S[M]="\n"+N}J.operation(function(){for(var T=I.length-1;T>=0;T--){J.replaceRange(S[T],I[T].from(),I[T].to(),"+insert")}})}function C(G){var F=G.getOption("continueComments");if(F&&typeof F=="object"){return F.continueLineComment!==false}return true}D.defineOption("continueComments",null,function(J,I,H){if(H&&H!=D.Init){J.removeKeyMap("continueComment")}if(I){var G="Enter";if(typeof I=="string"){G=I}else{if(typeof I=="object"&&I.key){G=I.key}}var F={name:"continueComment"};F[G]=E;J.addKeyMap(F)}})});