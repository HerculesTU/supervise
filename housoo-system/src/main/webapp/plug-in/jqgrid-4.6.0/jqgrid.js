(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{version:"4.6.0",htmlDecode:function(b){return b&&("&nbsp;"===b||"&#160;"===b||1===b.length&&160===b.charCodeAt(0))?"":b?String(b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):b},htmlEncode:function(b){return b?String(b).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):b},format:function(e){var f=b.makeArray(arguments).slice(1);null==e&&(e="");return e.replace(/\{(\d+)\}/g,function(b,d){return f[d]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var b=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b},getCellIndex:function(e){e=b(e);if(e.is("tr")){return -1}e=(e.is("td")||e.is("th")?e:e.closest("td,th"))[0];return b.jgrid.msie?b.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(b){b=String(b);var f=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return b?(b=b.replace(f,""))&&"&nbsp;"!==b&&"&#160;"!==b?b.replace(/\"/g,"'"):"":b},stripPref:function(e,f){var c=b.type(e);if("string"===c||"number"===c){e=String(e),f=""!==e?String(f).replace(String(e),""):f}return f},parse:function(e){"while(1);"===e.substr(0,9)&&(e=e.substr(9));"/*"===e.substr(0,2)&&(e=e.substr(2,e.length-4));e||(e="{}");return !0===b.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(e):eval("("+e+")")},parseDate:function(e,f,c,d){var a=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,l="string"===typeof f?f.match(a):null,a=function(a,b){a=String(a);for(b=parseInt(b,10)||2;a.length<b;){a="0"+a}return a},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h=0,k,n,h=function(a,b){0===a?12===b&&(b=0):12!==b&&(b+=12);return b};void 0===d&&(d=b.jgrid.formatter.date);void 0===d.parseRe&&(d.parseRe=/[#%\\\/:_;.,\t\s-]/);d.masks.hasOwnProperty(e)&&(e=d.masks[e]);if(f&&null!=f){if(isNaN(f-0)||"u"!==String(e).toLowerCase()){if(f.constructor===Date){h=f}else{if(null!==l){if(h=new Date(parseInt(l[1],10)),l[3]){var m=60*Number(l[5])+Number(l[6]),m=m*("-"===l[4]?1:-1),m=m-h.getTimezoneOffset();h.setTime(Number(Number(h)+60000*m))}}else{m=0;"ISO8601Long"===d.srcformat&&"Z"===f.charAt(f.length-1)&&(m-=(new Date).getTimezoneOffset());f=String(f).replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe);e=e.replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe);k=0;for(n=e.length;k<n;k++){"M"===e[k]&&(l=b.inArray(f[k],d.monthNames),-1!==l&&12>l&&(f[k]=l+1,g.m=f[k])),"F"===e[k]&&(l=b.inArray(f[k],d.monthNames,12),-1!==l&&11<l&&(f[k]=l+1-12,g.m=f[k])),"a"===e[k]&&(l=b.inArray(f[k],d.AmPm),-1!==l&&2>l&&f[k]===d.AmPm[l]&&(f[k]=l,g.h=h(f[k],g.h))),"A"===e[k]&&(l=b.inArray(f[k],d.AmPm),-1!==l&&1<l&&f[k]===d.AmPm[l]&&(f[k]=l-2,g.h=h(f[k],g.h))),"g"===e[k]&&(g.h=parseInt(f[k],10)),void 0!==f[k]&&(g[e[k].toLowerCase()]=parseInt(f[k],10))}g.f&&(g.m=g.f);if(0===g.m&&0===g.y&&0===g.d){return"&#160;"}g.m=parseInt(g.m,10)-1;h=g.y;70<=h&&99>=h?g.y=1900+g.y:0<=h&&69>=h&&(g.y=2000+g.y);h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u);0<m&&h.setTime(Number(Number(h)+60000*m))}}}else{h=new Date(1000*parseFloat(f))}}else{h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}if(void 0===c){return h}d.masks.hasOwnProperty(c)?c=d.masks[c]:c||(c="Y-m-d");e=h.getHours();f=h.getMinutes();g=h.getDate();m=h.getMonth()+1;l=h.getTimezoneOffset();k=h.getSeconds();n=h.getMilliseconds();var r=h.getDay(),p=h.getFullYear(),q=(r+6)%7+1,x=(new Date(p,m-1,g)-new Date(p,0,1))/86400000,G={d:a(g),D:d.dayNames[r],j:g,l:d.dayNames[r+7],N:q,S:d.S(g),w:r,z:x,W:5>q?Math.floor((x+q-1)/7)+1:Math.floor((x+q-1)/7)||(4>((new Date(p-1,0,1)).getDay()+6)%7?53:52),F:d.monthNames[m-1+12],m:a(m),M:d.monthNames[m-1],n:m,t:"?",L:"?",o:"?",Y:p,y:String(p).substring(2),a:12>e?d.AmPm[0]:d.AmPm[1],A:12>e?d.AmPm[2]:d.AmPm[3],B:"?",g:e%12||12,G:e,h:a(e%12||12),H:a(e),i:a(f),s:a(k),u:n,e:"?",I:"?",O:(0<l?"-":"+")+a(100*Math.floor(Math.abs(l)/60)+Math.abs(l)%60,4),P:"?",T:(String(h).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(h/1000)};return c.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return G.hasOwnProperty(a)?G[a]:a.substring(1)})},jqID:function(b){return String(b).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(b,f){var c,d,a=[],l;if("function"===typeof f){return f(b)}c=b[f];if(void 0===c){try{if("string"===typeof f&&(a=f.split(".")),l=a.length){for(c=b;c&&l--;){d=a.shift(),c=c[d]}}}catch(g){}}return c},getXmlData:function(e,f,c){var d="string"===typeof f?f.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof f){return f(e)}if(d&&d[2]){return d[1]?b(d[1],e).attr(d[2]):b(e).attr(d[2])}e=b(f,e);return c?e:0<e.length?b(e).text():void 0},cellWidth:function(){var e=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),f=e.appendTo("body").find("td").width();e.remove();return 0.1<Math.abs(f-5)},cell_width:!0,ajaxOptions:{},from:function(e){return new function(e,c){"string"===typeof e&&(e=b.data(e));var d=this,a=e,l=!0,g=!1,h=c,k=/[\$,%]/g,n=null,m=null,r=0,p=!1,q="",x=[],G=!0;if("object"===typeof e&&e.push){0<e.length&&(G="object"!==typeof e[0]?!1:!0)}else{throw"data provides is not an array"}this._hasData=function(){return null===a?!1:0===a.length?!1:!0};this._getStr=function(a){var b=[];g&&b.push("jQuery.trim(");b.push("String("+a+")");g&&b.push(")");l||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(a){g&&(a=b.trim(a));a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return l?a:a.toLowerCase()};this._funcLoop=function(d){var l=[];b.each(a,function(a,b){l.push(d(b))});return l};this._append=function(a){var b;h=null===h?"":h+(""===q?" && ":q);for(b=0;b<r;b++){h+="("}p&&(h+="!");h+="("+a+")";p=!1;q="";r=0};this._setCommand=function(a,b){n=a;m=b};this._resetNegate=function(){p=!1};this._repeatCommand=function(a,b){return null===n?d:null!==a&&null!==b?n(a,b):null!==m&&G?n(m,a):n(a)};this._equals=function(a,b){return 0===d._compare(a,b,1)};this._compare=function(a,b,d){var e=Object.prototype.toString;void 0===d&&(d=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b){return 0}if(null===a&&null!==b){return 1}if(null!==a&&null===b){return -1}if("[object Date]"===e.call(a)&&"[object Date]"===e.call(b)){return a<b?-d:a>b?d:0}l||"number"===typeof a||"number"===typeof b||(a=String(a),b=String(b));return a<b?-d:a>b?d:0};this._performSort=function(){0!==x.length&&(a=d._doSort(a,0))};this._doSort=function(a,b){var l=x[b].by,e=x[b].dir,g=x[b].type,c=x[b].datefmt,f=x[b].sfunc;if(b===x.length-1){return d._getOrder(a,l,e,g,c,f)}b++;l=d._getGroup(a,l,e,g,c);e=[];for(g=0;g<l.length;g++){for(f=d._doSort(l[g].items,b),c=0;c<f.length;c++){e.push(f[c])}}return e};this._getOrder=function(a,e,g,c,f,h){var m=[],n=[],r="a"===g?1:-1,p,x;void 0===c&&(c="text");x="float"===c||"number"===c||"currency"===c||"numeric"===c?function(a){a=parseFloat(String(a).replace(k,""));return isNaN(a)?0:a}:"int"===c||"integer"===c?function(a){return a?parseFloat(String(a).replace(k,"")):0}:"date"===c||"datetime"===c?function(a){return b.jgrid.parseDate(f,a).getTime()}:b.isFunction(c)?c:function(a){a=a?b.trim(String(a)):"";return l?a:a.toLowerCase()};b.each(a,function(a,d){p=""!==e?b.jgrid.getAccessor(d,e):d;void 0===p&&(p="");p=x(p,d);n.push({vSort:p,index:a})});b.isFunction(h)?n.sort(function(a,b){a=a.vSort;b=b.vSort;return h.call(this,a,b,r)}):n.sort(function(a,b){a=a.vSort;b=b.vSort;return d._compare(a,b,r)});c=0;for(var q=a.length;c<q;){g=n[c].index,m.push(a[g]),c++}return m};this._getGroup=function(a,c,e,l,g){var f=[],h=null,k=null,m;b.each(d._getOrder(a,c,e,l,g),function(a,e){m=b.jgrid.getAccessor(e,c);null==m&&(m="");d._equals(k,m)||(k=m,null!==h&&f.push(h),h=d._group(c,m));h.items.push(e)});null!==h&&f.push(h);return f};this.ignoreCase=function(){l=!1;return d};this.useCase=function(){l=!0;return d};this.trim=function(){g=!0;return d};this.noTrim=function(){g=!1;return d};this.execute=function(){var c=h,e=[];if(null===c){return d}b.each(a,function(){eval(c)&&e.push(this)});a=e;return d};this.data=function(){return a};this.select=function(c){d._performSort();if(!d._hasData()){return[]}d.execute();if(b.isFunction(c)){var e=[];b.each(a,function(a,b){e.push(c(b))});return e}return a};this.hasMatch=function(){if(!d._hasData()){return !1}d.execute();return 0<a.length};this.andNot=function(a,b,c){p=!p;return d.and(a,b,c)};this.orNot=function(a,b,c){p=!p;return d.or(a,b,c)};this.not=function(a,b,c){return d.andNot(a,b,c)};this.and=function(a,b,c){q=" && ";return void 0===a?d:d._repeatCommand(a,b,c)};this.or=function(a,b,c){q=" || ";return void 0===a?d:d._repeatCommand(a,b,c)};this.orBegin=function(){r++;return d};this.orEnd=function(){null!==h&&(h+=")");return d};this.isNot=function(a){p=!p;return d.is(a)};this.is=function(a){d._append("this."+a);d._resetNegate();return d};this._compareValues=function(a,c,e,l,g){var f;f=G?"jQuery.jgrid.getAccessor(this,'"+c+"')":"this";void 0===e&&(e=null);var h=e,m=void 0===g.stype?"text":g.stype;if(null!==e){switch(m){case"int":case"integer":h=isNaN(Number(h))||""===h?"0":h;f="parseInt("+f+",10)";h="parseInt("+h+",10)";break;case"float":case"number":case"numeric":h=String(h).replace(k,"");h=isNaN(Number(h))||""===h?"0":h;f="parseFloat("+f+")";h="parseFloat("+h+")";break;case"date":case"datetime":h=String(b.jgrid.parseDate(g.newfmt||"Y-m-d",h).getTime());f='jQuery.jgrid.parseDate("'+g.srcfmt+'",'+f+").getTime()";break;default:f=d._getStr(f),h=d._getStr('"'+d._toStr(h)+'"')}}d._append(f+" "+l+" "+h);d._setCommand(a,c);d._resetNegate();return d};this.equals=function(a,b,c){return d._compareValues(d.equals,a,b,"==",c)};this.notEquals=function(a,b,c){return d._compareValues(d.equals,a,b,"!==",c)};this.isNull=function(a,b,c){return d._compareValues(d.equals,a,null,"===",c)};this.greater=function(a,b,c){return d._compareValues(d.greater,a,b,">",c)};this.less=function(a,b,c){return d._compareValues(d.less,a,b,"<",c)};this.greaterOrEquals=function(a,b,c){return d._compareValues(d.greaterOrEquals,a,b,">=",c)};this.lessOrEquals=function(a,b,c){return d._compareValues(d.lessOrEquals,a,b,"<=",c)};this.startsWith=function(a,c){var e=null==c?a:c,e=g?b.trim(e.toString()).length:e.toString().length;G?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+e+") == "+d._getStr('"'+d._toStr(c)+'"')):(null!=c&&(e=g?b.trim(c.toString()).length:c.toString().length),d._append(d._getStr("this")+".substr(0,"+e+") == "+d._getStr('"'+d._toStr(a)+'"')));d._setCommand(d.startsWith,a);d._resetNegate();return d};this.endsWith=function(a,c){var e=null==c?a:c,e=g?b.trim(e.toString()).length:e.toString().length;G?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+e+","+e+') == "'+d._toStr(c)+'"'):d._append(d._getStr("this")+".substr("+d._getStr("this")+'.length-"'+d._toStr(a)+'".length,"'+d._toStr(a)+'".length) == "'+d._toStr(a)+'"');d._setCommand(d.endsWith,a);d._resetNegate();return d};this.contains=function(a,b){G?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+d._toStr(b)+'",0) > -1'):d._append(d._getStr("this")+'.indexOf("'+d._toStr(a)+'",0) > -1');d._setCommand(d.contains,a);d._resetNegate();return d};this.groupBy=function(b,c,e,l){return d._hasData()?d._getGroup(a,b,c,e,l):null};this.orderBy=function(a,c,e,l,g){c=null==c?"a":b.trim(c.toString().toLowerCase());null==e&&(e="text");null==l&&(l="Y-m-d");null==g&&(g=!1);if("desc"===c||"descending"===c){c="d"}if("asc"===c||"ascending"===c){c="a"}x.push({by:a,dir:c,type:e,datefmt:l,sfunc:g});return d};return d}(e,null)},getMethod:function(e){return this.getAccessor(b.fn.jqGrid,e)},extend:function(e){b.extend(b.fn.jqGrid,e);this.no_legacy_api||b.fn.extend(e)}});b.fn.jqGrid=function(e){if("string"===typeof e){var f=b.jgrid.getMethod(e);if(!f){throw"jqGrid - No such method: "+e}var c=b.makeArray(arguments).slice(1);return f.apply(this,c)}return this.each(function(){if(!this.grid){var d=b.extend(!0,{unwritten:true,costtime:"000.1",url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:30,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},b.jgrid.defaults,e||{}),a=this,c={headers:[],cols:[],footers:[],dragStart:function(c,e,g){var f=b(this.bDiv).offset().left;this.resizing={idx:c,startX:e.clientX,sOL:e.clientX-f};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+b.jgrid.jqID(d.id),"#gbox_"+b.jgrid.jqID(d.id));this.curGbox.css({display:"block",left:e.clientX-f,top:g[1],height:g[2]});b(a).triggerHandler("jqGridResizeStart",[e,c]);b.isFunction(d.resizeStart)&&d.resizeStart.call(a,e,c);document.onselectstart=function(){return !1}},dragMove:function(a){if(this.resizing){var b=a.clientX-this.resizing.startX;a=this.headers[this.resizing.idx];var c="ltr"===d.direction?a.width+b:a.width-b,e;33<c&&(this.curGbox.css({left:this.resizing.sOL+b}),!0===d.forceFit?(e=this.headers[this.resizing.idx+d.nv],b="ltr"===d.direction?e.width-b:e.width+b,33<b&&(a.newWidth=c,e.newWidth=b)):(this.newWidth="ltr"===d.direction?d.tblwidth+b:d.tblwidth-b,a.newWidth=c))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var c=this.resizing.idx,e=this.headers[c].newWidth||this.headers[c].width,e=parseInt(e,10);this.resizing=!1;b("#rs_m"+b.jgrid.jqID(d.id)).css("display","none");d.colModel[c].width=e;this.headers[c].width=e;this.headers[c].el.style.width=e+"px";this.cols[c].style.width=e+"px";0<this.footers.length&&(this.footers[c].style.width=e+"px");!0===d.forceFit?(e=this.headers[c+d.nv].newWidth||this.headers[c+d.nv].width,this.headers[c+d.nv].width=e,this.headers[c+d.nv].el.style.width=e+"px",this.cols[c+d.nv].style.width=e+"px",0<this.footers.length&&(this.footers[c+d.nv].style.width=e+"px"),d.colModel[c+d.nv].width=e):(d.tblwidth=this.newWidth||d.tblwidth,b("table:first",this.bDiv).css("width",d.tblwidth+"px"),b("table:first",this.hDiv).css("width",d.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,d.footerrow&&(b("table:first",this.sDiv).css("width",d.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));b(a).triggerHandler("jqGridResizeStop",[e,c]);b.isFunction(d.resizeStop)&&d.resizeStop.call(a,e,c)}this.curGbox=null;document.onselectstart=function(){return !0}},populateVisible:function(){c.timer&&clearTimeout(c.timer);c.timer=null;var a=b(c.bDiv).height();if(a){var e=b("table:first",c.bDiv),g,f;if(e[0].rows.length){try{f=(g=e[0].rows[1])?b(g).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(pa){f=c.prevRowHeight}}if(f){c.prevRowHeight=f;var h=d.rowNum;g=c.scrollTop=c.bDiv.scrollTop;var k=Math.round(e.position().top)-g,m=k+e.height();f*=h;var E,n,C;m<a&&0>=k&&(void 0===d.lastpage||parseInt((m+g+f-1)/f,10)<=d.lastpage)&&(n=parseInt((a-m+f-1)/f,10),0<=m||2>n||!0===d.scroll?(E=Math.round((m+g)/f)+1,k=-1):k=1);0<k&&(E=parseInt(g/f,10)+1,n=parseInt((g+a)/f,10)+2-E,C=!0);!n||d.lastpage&&(E>d.lastpage||1===d.lastpage||E===d.page&&E===d.lastpage)||(c.hDiv.loading?c.timer=setTimeout(c.populateVisible,d.scrollTimeout):(d.page=E,C&&(c.selectionPreserver(e[0]),c.emptyRows.call(e[0],!1,!1)),c.populate(n)))}}},scrollGrid:function(a){if(d.scroll){var b=c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0);b!==c.scrollTop&&(c.scrollTop=b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,d.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft;d.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft);a&&a.stopPropagation()},selectionPreserver:function(a){var c=a.p,d=c.selrow,e=c.selarrrow?b.makeArray(c.selarrrow):null,f=a.grid.bDiv.scrollLeft,g=function(){var h;c.selrow=null;c.selarrrow=[];if(c.multiselect&&e&&0<e.length){for(h=0;h<e.length;h++){e[h]!==d&&b(a).jqGrid("setSelection",e[h],!1,null)}}d&&b(a).jqGrid("setSelection",d,!1,null);a.grid.bDiv.scrollLeft=f;b(a).unbind(".selectionPreserver",g)};b(a).bind("jqGridGridComplete.selectionPreserver",g)}};if("TABLE"!==this.tagName.toUpperCase()){alert("Element is not a table")}else{if(void 0!==document.documentMode&&5>=document.documentMode){alert("Grid can not be used in this ('quirks') mode!")}else{b(this).empty().attr("tabindex","0");this.p=d;this.p.useProp=!!b.fn.prop;var g,f;if(0===this.p.colNames.length){for(g=0;g<this.p.colModel.length;g++){this.p.colNames[g]=this.p.colModel[g].label||this.p.colModel[g].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(b.jgrid.errors.model)}else{var k=b("<div class='ui-jqgrid-view'></div>"),n=b.jgrid.msie;a.p.direction=b.trim(a.p.direction.toLowerCase());-1===b.inArray(a.p.direction,["ltr","rtl"])&&(a.p.direction="ltr");f=a.p.direction;b(k).insertBefore(this);b(this).removeClass("scroll").appendTo(k);var m=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(m).attr({id:"gbox_"+this.id,dir:f}).insertBefore(k);b(k).attr("id","gview_"+this.id).appendTo(m);b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(k);b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(k);b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var r=function(a,b){a=parseInt(a,10);return isNaN(a)?b||0:a},p=function(d,e,f,g,i,h){var k=a.p.colModel[d],m=k.align,E='style="',n=k.classes,C=k.name,A=[];m&&(E+="text-align:"+m+";");!0===k.hidden&&(E+="display:none;");if(0===e){E+="width: "+c.headers[d].width+"px;"}else{if(k.cellattr&&b.isFunction(k.cellattr)&&(d=k.cellattr.call(a,i,f,g,k,h))&&"string"===typeof d){if(d=d.replace(/style/i,"style").replace(/title/i,"title"),-1<d.indexOf("title")&&(k.title=!1),-1<d.indexOf("class")&&(n=void 0),A=d.replace("-style","-sti").split(/style/),2===A.length){A[1]=b.trim(A[1].replace("-sti","-style").replace("=",""));if(0===A[1].indexOf("'")||0===A[1].indexOf('"')){A[1]=A[1].substring(1)}E+=A[1].replace(/'/gi,'"')}else{E+='"'}}}A.length||(A[0]="",E+='"');E+=(void 0!==n?' class="'+n+'"':"")+(k.title&&f?' title="'+b.jgrid.stripHtml(f)+'"':"");E+=' aria-describedby="'+a.p.id+"_"+C+'"';return E+A[0]},q=function(c){return null==c||""===c?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(c):String(c)},x=function(c,d,e,f,g){var h=a.p.colModel[e];void 0!==h.formatter?(c=""!==String(a.p.idPrefix)?b.jgrid.stripPref(a.p.idPrefix,c):c,c={rowId:c,colModel:h,gid:a.p.id,pos:e},d=b.isFunction(h.formatter)?h.formatter.call(a,d,c,f,g):b.fmatter?b.fn.fmatter.call(a,h.formatter,d,c,f,g):q(d)):d=q(d);return d},G=function(a,b,c,d,e,f){b=x(a,b,c,e,"add");return'<td role="gridcell" '+p(c,d,b,e,a,f)+">"+b+"</td>"},U=function(b,c,d,e){e='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+b+'" class="cbox" name="jqg_'+a.p.id+"_"+b+'"'+(e?'checked="checked"':"")+"/>";return'<td role="gridcell" '+p(c,d,"",null,b,!0)+">"+e+"</td>"},M=function(a,b,c,d){c=(parseInt(c,10)-1)*parseInt(d,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p(a,b,c,null,b,!0)+">"+c+"</td>"},ea=function(b){var c,d=[],e=0,f;for(f=0;f<a.p.colModel.length;f++){c=a.p.colModel[f],"cb"!==c.name&&"subgrid"!==c.name&&"rn"!==c.name&&(d[e]="local"===b?c.name:"xml"===b||"xmlstring"===b?c.xmlmap||c.name:c.jsonmap||c.name,!1!==a.p.keyIndex&&!0===c.key&&(a.p.keyName=d[e]),e++)}return d},W=function(c){var d=a.p.remapColumns;d&&d.length||(d=b.map(a.p.colModel,function(a,b){return b}));c&&(d=b.map(d,function(a){return a<c?null:a-c}));return d},X=function(a,c){var d;this.p.deepempty?b(this.rows).slice(1).remove():(d=0<this.rows.length?this.rows[0]:null,b(this.firstChild).empty().append(d));a&&this.p.scroll&&(b(this.grid.bDiv.firstChild).css({height:"auto"}),b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0));!0===c&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},O=function(){var c=a.p.data.length,d,e,f;d=!0===a.p.rownumbers?1:0;e=!0===a.p.multiselect?1:0;f=!0===a.p.subGrid?1:0;d=!1===a.p.keyIndex||!0===a.p.loadonce?a.p.localReader.id:a.p.colModel[a.p.keyIndex+e+f+d].name;for(e=0;e<c;e++){f=b.jgrid.getAccessor(a.p.data[e],d),void 0===f&&(f=String(e+1)),a.p._index[f]=e}},$=function(c,d,e,f,g,h){var l="-1",k="",m;d=d?"display:none;":"";e="ui-widget-content jqgrow ui-row-"+a.p.direction+(e?" "+e:"")+(h?" ui-state-highlight":"");h=b(a).triggerHandler("jqGridRowAttr",[f,g,c]);"object"!==typeof h&&(h=b.isFunction(a.p.rowattr)?a.p.rowattr.call(a,f,g,c):{});if(!b.isEmptyObject(h)){h.hasOwnProperty("id")&&(c=h.id,delete h.id);h.hasOwnProperty("tabindex")&&(l=h.tabindex,delete h.tabindex);h.hasOwnProperty("style")&&(d+=h.style,delete h.style);h.hasOwnProperty("class")&&(e+=" "+h["class"],delete h["class"]);try{delete h.role}catch(n){}for(m in h){h.hasOwnProperty(m)&&(k+=" "+m+"="+h[m])}}return'<tr role="row" id="'+c+'" tabindex="'+l+'" class="'+e+'"'+(""===d?"":' style="'+d+'"')+k+">"},K=function(c,d,e,f,g){var h=new Date,l="local"!==a.p.datatype&&a.p.loadonce||"xmlstring"===a.p.datatype,k=a.p.xmlReader,m="local"===a.p.datatype?"local":"xml";l&&(a.p.data=[],a.p._index={},a.p.localReader.id="_id_");a.p.reccount=0;if(b.isXMLDoc(c)){-1!==a.p.treeANode||a.p.scroll?e=1<e?e:1:(X.call(a,!1,!0),e=1);var n=b(a),C,A,R=0,p,u=!0===a.p.multiselect?1:0,z=0,x,q=!0===a.p.rownumbers?1:0,t,Z=[],aa,v={},w,H,s=[],L=!0===a.p.altRows?a.p.altclass:"",ia;!0===a.p.subGrid&&(z=1,x=b.jgrid.getMethod("addSubGridCell"));k.repeatitems||(Z=ea(m));t=!1===a.p.keyIndex?b.isFunction(k.id)?k.id.call(a,c):k.id:a.p.keyIndex;0<Z.length&&!isNaN(t)&&(t=a.p.keyName);m=-1===String(t).indexOf("[")?Z.length?function(a,c){return b(t,a).text()||c}:function(a,c){return b(k.cell,a).eq(t).text()||c}:function(a,b){return a.getAttribute(t.replace(/[\[\]]/g,""))||b};a.p.userData={};a.p.page=r(b.jgrid.getXmlData(c,k.page),a.p.page);a.p.lastpage=r(b.jgrid.getXmlData(c,k.total),1);a.p.records=r(b.jgrid.getXmlData(c,k.records));b.isFunction(k.userdata)?a.p.userData=k.userdata.call(a,c)||{}:b.jgrid.getXmlData(c,k.userdata,!0).each(function(){a.p.userData[this.getAttribute("name")]=b(this).text()});c=b.jgrid.getXmlData(c,k.root,!0);(c=b.jgrid.getXmlData(c,k.row,!0))||(c=[]);var S=c.length,I=0,y=[],D=parseInt(a.p.rowNum,10),B=a.p.scroll?b.jgrid.randId():1;0<S&&0>=a.p.page&&(a.p.page=1);if(c&&S){g&&(D*=g+1);g=b.isFunction(a.p.afterInsertRow);var F=!1,J;a.p.grouping&&(F=!0===a.p.groupingView.groupCollapse,J=b.jgrid.getMethod("groupingPrepare"));for(;I<S;){w=c[I];H=m(w,B+I);H=a.p.idPrefix+H;C=0===e?0:e+1;ia=1===(C+I)%2?L:"";var K=s.length;s.push("");q&&s.push(M(0,I,a.p.page,a.p.rowNum));u&&s.push(U(H,q,I,!1));z&&s.push(x.call(n,u+q,I+e));if(k.repeatitems){aa||(aa=W(u+z+q));var N=b.jgrid.getXmlData(w,k.cell,!0);b.each(aa,function(b){var c=N[this];if(!c){return !1}p=c.textContent||c.text;v[a.p.colModel[b+u+z+q].name]=p;s.push(G(H,p,b+u+z+q,I+e,w,v))})}else{for(C=0;C<Z.length;C++){p=b.jgrid.getXmlData(w,Z[C]),v[a.p.colModel[C+u+z+q].name]=p,s.push(G(H,p,C+u+z+q,I+e,w,v))}}s[K]=$(H,F,ia,v,w,!1);s.push("</tr>");a.p.grouping&&(y.push(s),a.p.groupingView._locgr||J.call(n,v,I),s=[]);if(l||!0===a.p.treeGrid){v._id_=b.jgrid.stripPref(a.p.idPrefix,H),a.p.data.push(v),a.p._index[v._id_]=a.p.data.length-1}!1===a.p.gridview&&(b("tbody:first",d).append(s.join("")),n.triggerHandler("jqGridAfterInsertRow",[H,v,w]),g&&a.p.afterInsertRow.call(a,H,v,w),s=[]);v={};R++;I++;if(R===D){break}}}!0===a.p.gridview&&(A=-1<a.p.treeANode?a.p.treeANode:0,a.p.grouping?(l||n.jqGrid("groupingRender",y,a.p.colModel.length,a.p.page,D),y=null):!0===a.p.treeGrid&&0<A?b(a.rows[A]).after(s.join("")):b("tbody:first",d).append(s.join("")));if(!0===a.p.subGrid){try{n.jqGrid("addSubGrid",u+q)}catch(Q){}}a.p.totaltime=new Date-h;0<R&&0===a.p.records&&(a.p.records=S);s=null;if(!0===a.p.treeGrid){try{n.jqGrid("setTreeNode",A+1,R+A+1)}catch(O){}}a.p.treeGrid||a.p.scroll||(a.grid.bDiv.scrollTop=0);a.p.reccount=R;a.p.treeANode=-1;a.p.userDataOnFooter&&n.jqGrid("footerData","set",a.p.userData,!0);l&&(a.p.records=S,a.p.lastpage=Math.ceil(S/D));f||a.updatepager(!1,!0);if(l){for(;R<S;){w=c[R];H=m(w,R+B);H=a.p.idPrefix+H;if(k.repeatitems){aa||(aa=W(u+z+q));var P=b.jgrid.getXmlData(w,k.cell,!0);b.each(aa,function(b){var c=P[this];if(!c){return !1}p=c.textContent||c.text;v[a.p.colModel[b+u+z+q].name]=p})}else{for(C=0;C<Z.length;C++){p=b.jgrid.getXmlData(w,Z[C]),v[a.p.colModel[C+u+z+q].name]=p}}v._id_=b.jgrid.stripPref(a.p.idPrefix,H);a.p.grouping&&J.call(n,v,R);a.p.data.push(v);a.p._index[v._id_]=a.p.data.length-1;v={};R++}a.p.grouping&&(a.p.groupingView._locgr=!0,n.jqGrid("groupingRender",y,a.p.colModel.length,a.p.page,D),y=null)}}},Y=function(c,d,e,f,g){var h=new Date;if(c){-1!==a.p.treeANode||a.p.scroll?e=1<e?e:1:(X.call(a,!1,!0),e=1);var k,l="local"!==a.p.datatype&&a.p.loadonce||"jsonstring"===a.p.datatype;l&&(a.p.data=[],a.p._index={},a.p.localReader.id="_id_");a.p.reccount=0;"local"===a.p.datatype?(d=a.p.localReader,k="local"):(d=a.p.jsonReader,k="json");var m=b(a),n=0,C,A,p,q=[],u=a.p.multiselect?1:0,z=!0===a.p.subGrid?1:0,x,t=!0===a.p.rownumbers?1:0,D=W(u+z+t);k=ea(k);var y,B,v,w={},H,s,L=[],ia=!0===a.p.altRows?a.p.altclass:"",S;a.p.page=r(b.jgrid.getAccessor(c,d.page),a.p.page);a.p.lastpage=r(b.jgrid.getAccessor(c,d.total),1);a.p.records=r(b.jgrid.getAccessor(c,d.records));a.p.userData=b.jgrid.getAccessor(c,d.userdata)||{};z&&(x=b.jgrid.getMethod("addSubGridCell"));v=!1===a.p.keyIndex?b.isFunction(d.id)?d.id.call(a,c):d.id:a.p.keyIndex;d.repeatitems||(q=k,0<q.length&&!isNaN(v)&&(v=a.p.keyName));B=b.jgrid.getAccessor(c,d.root);null==B&&b.isArray(c)&&(B=c);B||(B=[]);c=B.length;A=0;0<c&&0>=a.p.page&&(a.p.page=1);var I=parseInt(a.p.rowNum,10),F=a.p.scroll?b.jgrid.randId():1,J=!1,K;g&&(I*=g+1);"local"!==a.p.datatype||a.p.deselectAfterSort||(J=!0);var N=b.isFunction(a.p.afterInsertRow),P=[],Q=!1,O;a.p.grouping&&(Q=!0===a.p.groupingView.groupCollapse,O=b.jgrid.getMethod("groupingPrepare"));for(;A<c;){g=B[A];s=b.jgrid.getAccessor(g,v);void 0===s&&("number"===typeof v&&null!=a.p.colModel[v+u+z+t]&&(s=b.jgrid.getAccessor(g,a.p.colModel[v+u+z+t].name)),void 0===s&&(s=F+A,0===q.length&&d.cell&&(C=b.jgrid.getAccessor(g,d.cell)||g,s=null!=C&&void 0!==C[v]?C[v]:s)));s=a.p.idPrefix+s;C=1===e?0:e;S=1===(C+A)%2?ia:"";J&&(K=a.p.multiselect?-1!==b.inArray(s,a.p.selarrrow):s===a.p.selrow);var T=L.length;L.push("");t&&L.push(M(0,A,a.p.page,a.p.rowNum));u&&L.push(U(s,t,A,K));z&&L.push(x.call(m,u+t,A+e));y=k;d.repeatitems&&(d.cell&&(g=b.jgrid.getAccessor(g,d.cell)||g),b.isArray(g)&&(y=D));for(p=0;p<y.length;p++){C=b.jgrid.getAccessor(g,y[p]),w[a.p.colModel[p+u+z+t].name]=C,L.push(G(s,C,p+u+z+t,A+e,g,w))}L[T]=$(s,Q,S,w,g,K);L.push("</tr>");a.p.grouping&&(P.push(L),a.p.groupingView._locgr||O.call(m,w,A),L=[]);if(l||!0===a.p.treeGrid){w._id_=b.jgrid.stripPref(a.p.idPrefix,s),a.p.data.push(w),a.p._index[w._id_]=a.p.data.length-1}!1===a.p.gridview&&(b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(L.join("")),m.triggerHandler("jqGridAfterInsertRow",[s,w,g]),N&&a.p.afterInsertRow.call(a,s,w,g),L=[]);w={};n++;A++;if(n===I){break}}!0===a.p.gridview&&(H=-1<a.p.treeANode?a.p.treeANode:0,a.p.grouping?l||(m.jqGrid("groupingRender",P,a.p.colModel.length,a.p.page,I),P=null):!0===a.p.treeGrid&&0<H?b(a.rows[H]).after(L.join("")):b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(L.join("")));if(!0===a.p.subGrid){try{m.jqGrid("addSubGrid",u+t)}catch(V){}}a.p.totaltime=new Date-h;0<n&&0===a.p.records&&(a.p.records=c);if(!0===a.p.treeGrid){try{m.jqGrid("setTreeNode",H+1,n+H+1)}catch(Y){}}a.p.treeGrid||a.p.scroll||(a.grid.bDiv.scrollTop=0);a.p.reccount=n;a.p.treeANode=-1;a.p.userDataOnFooter&&m.jqGrid("footerData","set",a.p.userData,!0);l&&(a.p.records=c,a.p.lastpage=Math.ceil(c/I));f||a.updatepager(!1,!0);if(l){for(;n<c&&B[n];){g=B[n];s=b.jgrid.getAccessor(g,v);void 0===s&&("number"===typeof v&&null!=a.p.colModel[v+u+z+t]&&(s=b.jgrid.getAccessor(g,a.p.colModel[v+u+z+t].name)),void 0===s&&(s=F+n,0===q.length&&d.cell&&(e=b.jgrid.getAccessor(g,d.cell)||g,s=null!=e&&void 0!==e[v]?e[v]:s)));if(g){s=a.p.idPrefix+s;y=k;d.repeatitems&&(d.cell&&(g=b.jgrid.getAccessor(g,d.cell)||g),b.isArray(g)&&(y=D));for(p=0;p<y.length;p++){w[a.p.colModel[p+u+z+t].name]=b.jgrid.getAccessor(g,y[p])}w._id_=b.jgrid.stripPref(a.p.idPrefix,s);a.p.grouping&&O.call(m,w,n);a.p.data.push(w);a.p._index[w._id_]=a.p.data.length-1;w={}}n++}a.p.grouping&&(a.p.groupingView._locgr=!0,m.jqGrid("groupingRender",P,a.p.colModel.length,a.p.page,I))}}},oa=function(){function c(a){var b=0,d,e,g,h,k;if(null!=a.groups){(e=a.groups.length&&"OR"===a.groupOp.toString().toUpperCase())&&u.orBegin();for(d=0;d<a.groups.length;d++){0<b&&e&&u.or();try{c(a.groups[d])}catch(l){alert(l)}b++}e&&u.orEnd()}if(null!=a.rules){try{(g=a.rules.length&&"OR"===a.groupOp.toString().toUpperCase())&&u.orBegin();for(d=0;d<a.rules.length;d++){k=a.rules[d],h=a.groupOp.toString().toUpperCase(),q[k.op]&&k.field&&(0<b&&h&&"OR"===h&&(u=u.or()),u=q[k.op](u,h)(k.field,k.data,f[k.field])),b++}g&&u.orEnd()}catch(m){alert(m)}}}var d=a.p.multiSort?[]:"",e=[],g=!1,f={},h=[],k=[],l,m,n;if(b.isArray(a.p.data)){var p=a.p.grouping?a.p.groupingView:!1,A,r;b.each(a.p.colModel,function(){m=this.sorttype||"text";"date"===m||"datetime"===m?(this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?(l=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat,n=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat):l=n=this.datefmt||"Y-m-d",f[this.name]={stype:m,srcfmt:l,newfmt:n,sfunc:this.sortfunc||null}):f[this.name]={stype:m,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null};if(a.p.grouping){for(r=0,A=p.groupField.length;r<A;r++){if(this.name===p.groupField[r]){var c=this.name;this.index&&(c=this.index);h[r]=f[c];k[r]=c}}}a.p.multiSort?this.lso&&(d.push(this.name),c=this.lso.split("-"),e.push(c[c.length-1])):g||this.index!==a.p.sortname&&this.name!==a.p.sortname||(d=this.name,g=!0)});if(a.p.treeGrid){b(a).jqGrid("SortTree",d,a.p.sortorder,f[d].stype||"text",f[d].srcfmt||"")}else{var q={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},u=b.jgrid.from(a.p.data);a.p.ignoreCase&&(u=u.ignoreCase());if(!0===a.p.search){var z=a.p.postData.filters;if(z){"string"===typeof z&&(z=b.jgrid.parse(z)),c(z)}else{try{u=q[a.p.postData.searchOper](u)(a.p.postData.searchField,a.p.postData.searchString,f[a.p.postData.searchField])}catch(t){}}}if(a.p.grouping){for(r=0;r<A;r++){u.orderBy(k[r],p.groupOrder[r],h[r].stype,h[r].srcfmt)}}a.p.multiSort?b.each(d,function(a){u.orderBy(this,e[a],f[this].stype,f[this].srcfmt,f[this].sfunc)}):d&&a.p.sortorder&&g&&("DESC"===a.p.sortorder.toUpperCase()?u.orderBy(a.p.sortname,"d",f[d].stype,f[d].srcfmt,f[d].sfunc):u.orderBy(a.p.sortname,"a",f[d].stype,f[d].srcfmt,f[d].sfunc));var z=u.select(),x=parseInt(a.p.rowNum,10),y=z.length,B=parseInt(a.p.page,10),D=Math.ceil(y/x),v={};if((a.p.search||a.p.resetsearch)&&a.p.grouping&&a.p.groupingView._locgr){a.p.groupingView.groups=[];var w,G=b.jgrid.getMethod("groupingPrepare"),s,F;if(a.p.footerrow&&a.p.userDataOnFooter){for(s in a.p.userData){a.p.userData.hasOwnProperty(s)&&(a.p.userData[s]=0)}F=!0}for(w=0;w<y;w++){if(F){for(s in a.p.userData){a.p.userData[s]+=parseFloat(z[w][s]||0)}}G.call(b(a),z[w],w,x)}}z=z.slice((B-1)*x,B*x);f=u=null;v[a.p.localReader.total]=D;v[a.p.localReader.page]=B;v[a.p.localReader.records]=y;v[a.p.localReader.root]=z;v[a.p.localReader.userdata]=a.p.userData;z=null;return v}}},P=function(){a.grid.hDiv.loading=!0;if(!a.p.hiddengrid){switch(a.p.loadui){case"enable":window.setTimeout(function(){top.$("#loading_manage").attr("isTableLoading","true")},0);b("#load_"+b.jgrid.jqID(a.p.id)).next().find(".ui-jqgrid-bdiv").find("span").remove();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).show(),b("#load_"+b.jgrid.jqID(a.p.id)).show()}}},T=function(){a.grid.hDiv.loading=!1;switch(a.p.loadui){case"enable":window.setTimeout(function(){top.$("#loading_manage").removeAttr("isTableLoading")},100);if(a.p.unwritten){var c=b.jgrid.jqID(a.p.id);b("#load_"+c).next().find(".ui-jqgrid-bdiv").find(".unwritten").remove();var d=b("#load_"+c).next().find(".ui-jqgrid-bdiv").find("table tr").length;if(d==1){b("#load_"+c).next().find(".ui-jqgrid-bdiv").append('<div class="unwritten" style="color:red;padding:4px;border-bottom:#ccc 1px solid;">没有找到您要的相关数据!</div>')}}break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).hide(),b("#load_"+b.jgrid.jqID(a.p.id)).hide()}},Q=function(c){if(!a.grid.hDiv.loading){var d=a.p.scroll&&!1===c,e={},g,f=a.p.prmNames;0>=a.p.page&&(a.p.page=Math.min(1,a.p.lastpage));null!==f.search&&(e[f.search]=a.p.search);null!==f.nd&&(e[f.nd]=(new Date).getTime());null!==f.rows&&(e[f.rows]=a.p.rowNum);null!==f.page&&(e[f.page]=a.p.page);null!==f.sort&&(e[f.sort]=a.p.sortname);null!==f.order&&(e[f.order]=a.p.sortorder);null!==a.p.rowTotal&&null!==f.totalrows&&(e[f.totalrows]=a.p.rowTotal);var h=b.isFunction(a.p.loadComplete),k=h?a.p.loadComplete:null,l=0;c=c||1;1<c?null!==f.npage?(e[f.npage]=c,l=c-1,c=1):k=function(b){a.p.page++;a.grid.hDiv.loading=!1;h&&a.p.loadComplete.call(a,b);Q(c-1)}:null!==f.npage&&delete a.p.postData[f.npage];if(a.p.grouping){b(a).jqGrid("groupingSetup");var m=a.p.groupingView,n,p="";for(n=0;n<m.groupField.length;n++){var r=m.groupField[n];b.each(a.p.colModel,function(a,b){b.name===r&&b.index&&(r=b.index)});p+=r+" "+m.groupOrder[n]+", "}e[f.sort]=p+e[f.sort]}b.extend(a.p.postData,e);var q=a.p.scroll?a.rows.length-1:1,e=b(a).triggerHandler("jqGridBeforeRequest");if(!1!==e&&"stop"!==e){if(b.isFunction(a.p.datatype)){a.p.datatype.call(a,a.p.postData,"load_"+a.p.id,q,c,l)}else{if(b.isFunction(a.p.beforeRequest)&&(e=a.p.beforeRequest.call(a),void 0===e&&(e=!0),!1===e)){return}g=a.p.datatype.toLowerCase();switch(g){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:g,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(e,f,h){if(e!=null&&e.costtime!=null){a.p.costtime=e.costtime}if(b.isFunction(a.p.beforeProcessing)&&!1===a.p.beforeProcessing.call(a,e,f,h)){T()}else{"xml"===g?K(e,a.grid.bDiv,q,1<c,l):Y(e,a.grid.bDiv,q,1<c,l);b(a).triggerHandler("jqGridLoadComplete",[e]);k&&k.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);d&&a.grid.populateVisible();if(a.p.loadonce||a.p.treeGrid){a.p.datatype="local"}1===c&&T()}},error:function(d,e,f){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,d,e,f);1===c&&T()},beforeSend:function(c,d){var e=!0;b.isFunction(a.p.loadBeforeSend)&&(e=a.p.loadBeforeSend.call(a,c,d));void 0===e&&(e=!0);if(!1===e){return !1}P()}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));break;case"xmlstring":P();e="string"!==typeof a.p.datastr?a.p.datastr:b.parseXML(a.p.datastr);K(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;T();break;case"jsonstring":P();e="string"===typeof a.p.datastr?b.jgrid.parse(a.p.datastr):a.p.datastr;Y(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;T();break;case"local":case"clientside":P(),a.p.datatype="local",e=oa(),Y(e,a.grid.bDiv,q,1<c,l),b(a).triggerHandler("jqGridLoadComplete",[e]),k&&k.call(a,e),b(a).triggerHandler("jqGridAfterLoadComplete",[e]),d&&a.grid.populateVisible(),T()}}}}},ha=function(c){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",c);if(a.p.frozenColumns&&a.p.id+"_frozen"){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.fhDiv)[a.p.useProp?"prop":"attr"]("checked",c)}},qa=function(c,e){var d="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",k="",l,m,n,p,q=function(c){var e;b.isFunction(a.p.onPaging)&&(e=a.p.onPaging.call(a,c));if("stop"===e){return !1}a.p.selrow=null;a.p.multiselect&&(a.p.selarrrow=[],ha(!1));a.p.savedRow=[];return !0};c=c.substr(1);e+="_"+c;l="pg_"+c;m=c+"_left";n=c+"_center";p=c+"_right";b("#"+b.jgrid.jqID(c)).append("<div id='"+l+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+n+"' align='left' style='white-space:pre;'></td><td id='"+p+"' align='right'></td><td id='"+m+"' align='left' style='display:none'></td></tr></tbody></table></div>").attr("dir","ltr");if(0<a.p.rowList.length){k="<td dir='"+f+"'>";k+="<select class='ui-pg-selbox' role='listbox'>";for(m=0;m<a.p.rowList.length;m++){k+='<option role="option" value="'+a.p.rowList[m]+'"'+(a.p.rowNum===a.p.rowList[m]?' selected="selected"':"")+">"+a.p.rowList[m]+"</option>"}k+="</select></td>"}"rtl"===f&&(g+=k);!0===a.p.pginput&&(d="<td dir='"+f+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(c)+"'></span>")+"</td>");!0===a.p.pgbuttons?(m=["first"+e,"prev"+e,"next"+e,"last"+e],"rtl"===f&&m.reverse(),g+="<td id='"+m[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon-seek-first'><i class=\"fa fa-fast-backward\"></i></span></td>",g+="<td id='"+m[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon-seek-prev'><i class=\"fa fa-backward\"></i></span></td>",g=g+(""!==d?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+d+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+m[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon-seek-next'><i class=\"fa fa-forward\"></i></span></td>"),g+="<td id='"+m[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon-seek-end'><i class=\"fa fa-fast-forward\"></i></span></td>"):""!==d&&(g+=d);"ltr"===f&&(g+=k);g+="</tr></tbody></table>";!0===a.p.viewrecords&&b("td#"+c+"_"+a.p.recordpos,"#"+l).append("<div dir='"+f+"' style='text-align:left' class='ui-paging-info'></div>");b("td#"+c+"_"+a.p.pagerpos,"#"+l).append(g);k=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ></div>");g=b(g).clone().appendTo("#testpg").width();b("#testpg").remove();0<g&&(""!==d&&(g+=50),b("td#"+c+"_"+a.p.pagerpos,"#"+l).width(g-25));a.p._nvtd=[];a.p._nvtd[0]=g?Math.floor((a.p.width-g)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;g=null;b(".ui-pg-selbox","#"+l).bind("change",function(){if(!q("records")){return !1}a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;a.p.pager&&b(".ui-pg-selbox",a.p.pager).val(this.value);a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value);Q();return !1});!0===a.p.pgbuttons&&(b(".ui-pg-button","#"+l).hover(function(){b(this).hasClass("ui-state-disabled")?this.style.cursor="default":(b(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){b(this).hasClass("ui-state-disabled")||(b(this).removeClass("ui-state-hover"),this.style.cursor="default")}),b("#first"+b.jgrid.jqID(e)+", #prev"+b.jgrid.jqID(e)+", #next"+b.jgrid.jqID(e)+", #last"+b.jgrid.jqID(e)).click(function(){if(b(this).hasClass("ui-state-disabled")){return !1}var c=r(a.p.page,1),d=r(a.p.lastpage,1),g=!1,f=!0,h=!0,k=!0,l=!0;0===d||1===d?l=k=h=f=!1:1<d&&1<=c?1===c?h=f=!1:c===d&&(l=k=!1):1<d&&0===c&&(l=k=!1,c=d-1);if(!q(this.id)){return !1}this.id==="first"+e&&f&&(a.p.page=1,g=!0);this.id==="prev"+e&&h&&(a.p.page=c-1,g=!0);this.id==="next"+e&&k&&(a.p.page=c+1,g=!0);this.id==="last"+e&&l&&(a.p.page=d,g=!0);g&&Q();return !1}));!0===a.p.pginput&&b("input.ui-pg-input","#"+l).keypress(function(c){if(13===(c.charCode||c.keyCode||0)){if(!q("user")){return !1}b(this).val(r(b(this).val(),1));a.p.page=0<b(this).val()?b(this).val():a.p.page;Q();return !1}return this})},wa=function(c,e){var d,g="",f=a.p.colModel,h=!1,k;k=a.p.frozenColumns?e:a.grid.headers[c].el;var l="";b("span.ui-grid-ico-sort",k).addClass("ui-state-disabled");b(k).attr("aria-selected","false");if(f[c].lso){if("asc"===f[c].lso){f[c].lso+="-desc",l="desc"}else{if("desc"===f[c].lso){f[c].lso+="-asc",l="asc"}else{if("asc-desc"===f[c].lso||"desc-asc"===f[c].lso){f[c].lso=""}}}}else{f[c].lso=l=f[c].firstsortorder||"asc"}l?(b("span.s-ico",k).show(),b("span.ui-icon-"+l,k).removeClass("ui-state-disabled"),b(k).attr("aria-selected","true")):a.p.viewsortcols[0]||b("span.s-ico",k).hide();a.p.sortorder="";b.each(f,function(b){this.lso&&(0<b&&h&&(g+=", "),d=this.lso.split("-"),g+=f[b].index||f[b].name,g+=" "+d[d.length-1],h=!0,a.p.sortorder=d[d.length-1])});k=g.lastIndexOf(a.p.sortorder);g=g.substring(0,k);a.p.sortname=g},ra=function(c,d,e,g,f){if(a.p.colModel[d].sortable&&!(0<a.p.savedRow.length)){e||(a.p.lastsort===d?"asc"===a.p.sortorder?a.p.sortorder="desc":"desc"===a.p.sortorder&&(a.p.sortorder="asc"):a.p.sortorder=a.p.colModel[d].firstsortorder||"asc",a.p.page=1);if(a.p.multiSort){wa(d,f)}else{if(g){if(a.p.lastsort===d&&a.p.sortorder===g&&!e){return}a.p.sortorder=g}e=a.grid.headers[a.p.lastsort].el;f=a.p.frozenColumns?f:a.grid.headers[d].el;b("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");b(e).attr("aria-selected","false");a.p.frozenColumns&&(a.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),a.grid.fhDiv.find("th").attr("aria-selected","false"));b("span.ui-icon-"+a.p.sortorder,f).removeClass("ui-state-disabled");b(f).attr("aria-selected","true");a.p.viewsortcols[0]||a.p.lastsort===d||(a.p.frozenColumns&&a.grid.fhDiv.find("span.s-ico").hide(),b("span.s-ico",e).hide(),b("span.s-ico",f).show());c=c.substring(5+a.p.id.length+1);a.p.sortname=a.p.colModel[d].index||c}"stop"===b(a).triggerHandler("jqGridSortCol",[a.p.sortname,d,a.p.sortorder])?a.p.lastsort=d:b.isFunction(a.p.onSortCol)&&"stop"===a.p.onSortCol.call(a,a.p.sortname,d,a.p.sortorder)?a.p.lastsort=d:("local"===a.p.datatype?a.p.deselectAfterSort&&b(a).jqGrid("resetSelection"):(a.p.selrow=null,a.p.multiselect&&ha(!1),a.p.selarrrow=[],a.p.savedRow=[]),a.p.scroll&&(f=a.grid.bDiv.scrollLeft,X.call(a,!0,!1),a.grid.hDiv.scrollLeft=f),a.p.subGrid&&"local"===a.p.datatype&&b("td.sgexpanded","#"+b.jgrid.jqID(a.p.id)).each(function(){b(this).trigger("click")}),Q(),a.p.lastsort=d,a.p.sortname!==c&&d&&(a.p.lastsort=d))}},xa=function(c){c=b(a.grid.headers[c].el);c=[c.position().left+c.outerWidth()];"rtl"===a.p.direction&&(c[0]=a.p.width-c[0]);c[0]-=a.grid.bDiv.scrollLeft;c.push(b(a.grid.hDiv).position().top);c.push(b(a.grid.bDiv).offset().top-b(a.grid.hDiv).offset().top+b(a.grid.bDiv).height());return c},sa=function(c){var d,e=a.grid.headers,g=b.jgrid.getCellIndex(c);for(d=0;d<e.length;d++){if(c===e[d].el){g=d;break}}return g};this.p.id=this.id;-1===b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])&&(a.p.multikey=!1);a.p.keyIndex=!1;a.p.keyName=!1;for(g=0;g<a.p.colModel.length;g++){a.p.colModel[g]=b.extend(!0,{},a.p.cmTemplate,a.p.colModel[g].template||{},a.p.colModel[g]),!1===a.p.keyIndex&&!0===a.p.colModel[g].key&&(a.p.keyIndex=g)}a.p.sortorder=a.p.sortorder.toLowerCase();b.jgrid.cell_width=b.jgrid.cellWidth();!0===a.p.grouping&&(a.p.scroll=!1,a.p.rownumbers=!1,a.p.treeGrid=!1,a.p.gridview=!0);if(!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(za){}"local"!==a.p.datatype&&(a.p.localReader={id:"_id_"})}if(this.p.subGrid){try{b(a).jqGrid("setSubGrid")}catch(Aa){}}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cell_width?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));a.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.jsonReader);a.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.localReader);a.p.scroll&&(a.p.pgbuttons=!1,a.p.pginput=!1,a.p.rowList=[]);a.p.data.length&&O();var D="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",ta,F,ja,fa,ka,y,t,ba,ua=ba="",ga=[],va=[];F=[];if(!0===a.p.shrinkToFit&&!0===a.p.forceFit){for(g=a.p.colModel.length-1;0<=g;g--){if(!a.p.colModel[g].hidden){a.p.colModel[g].resizable=!1;break}}}"horizontal"===a.p.viewsortcols[1]&&(ba=" ui-i-asc",ua=" ui-i-desc");ta=n?"class='ui-th-div-ie'":"";ba="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+ba+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+f+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ua+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+f+"'></span></span>");if(a.p.multiSort){for(ga=a.p.sortname.split(","),g=0;g<ga.length;g++){F=b.trim(ga[g]).split(" "),ga[g]=b.trim(F[0]),va[g]=F[1]?b.trim(F[1]):a.p.sortorder||"asc"}}var j=0;var o=0;for(g=0;g<this.p.colNames.length;g++){var bb=a.p.colModel[g].hidden;if(a.p.colModel[g].autowidth==true){o=g;break}if(bb==undefined){o=g}}for(g=0;g<this.p.colNames.length;g++){var bb=a.p.colModel[g].hidden;var bc=a.p.colModel[g].width;if(bb!=undefined){bc=0}else{j+=bc}if(g==o){if(b("#gview_"+a.p.id).width()>j){if(a.p.colModel[g].autowidth==true||a.p.colModel[g].autowidth==undefined){bc=bc+b("#gview_"+a.p.id).width()-j-20}}}F=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[g])+'"':"",D+="<th id='"+a.p.id+"_"+a.p.colModel[g].name+"' style='text-align:"+a.p.colModel[g].align+";' role='columnheader' class='ui-state-default ui-th-column ui-th-"+f+"'"+F+">",F=a.p.colModel[g].index||a.p.colModel[g].name,D+="<div id='jqgh_"+a.p.id+"_"+a.p.colModel[g].name+"' "+ta+">"+a.p.colNames[g],a.p.colModel[g].width=bc?parseInt(bc,10):150,"boolean"!==typeof a.p.colModel[g].title&&(a.p.colModel[g].title=!0),a.p.colModel[g].lso="",F===a.p.sortname&&(a.p.lastsort=g),a.p.multiSort&&(F=b.inArray(F,ga),-1!==F&&(a.p.colModel[g].lso=va[F])),D+=ba+"</div></th>"}D+="</tr></thead>";ba=null;b(this).append(D);function widthCount(a,b){return a}b("thead tr:first th",this).hover(function(){},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var bd=[],ca;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){a.p.selarrrow=[];var c=!0===a.p.frozenColumns?a.p.id+"_frozen":"";this.checked?(b(a.rows).each(function(d){0<d&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",!0),b(this).addClass("ui-state-highlight").attr("aria-selected","true"),a.p.selarrrow.push(this.id),a.p.selrow=this.id,c&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",!0),b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).addClass("ui-state-highlight")))}),ca=!0,bd=[]):(b(a.rows).each(function(d){0<d&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",!1),b(this).removeClass("ui-state-highlight").attr("aria-selected","false"),bd.push(this.id),c&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",!1),b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).removeClass("ui-state-highlight")))}),a.p.selrow=null,ca=!1);b(a).triggerHandler("jqGridSelectAll",[ca?a.p.selarrrow:bd,ca]);b.isFunction(a.p.onSelectAll)&&a.p.onSelectAll.call(a,ca?a.p.selarrrow:bd,ca)})}!0===a.p.autowidth&&(D=b(m).innerWidth(),a.p.width=0<D?D:"nw");(function(){var d=0,e=b.jgrid.cell_width?0:r(a.p.cellLayout,0),g=0,f,h=r(a.p.scrollOffset,0),k,m=!1,n,p=0,q;b.each(a.p.colModel,function(){void 0===this.hidden&&(this.hidden=!1);if(a.p.grouping&&a.p.autowidth){var c=b.inArray(this.name,a.p.groupingView.groupField);0<=c&&a.p.groupingView.groupColumnShow.length>c&&(this.hidden=!a.p.groupingView.groupColumnShow[c])}this.widthOrg=k=r(this.width,0);!1===this.hidden&&(d+=k+e,this.fixed?p+=k+e:g++)});isNaN(a.p.width)&&(a.p.width=d+(!1!==a.p.shrinkToFit||isNaN(a.p.height)?0:h));c.width=a.p.width;a.p.tblwidth=d;!1===a.p.shrinkToFit&&!0===a.p.forceFit&&(a.p.forceFit=!1);!0===a.p.shrinkToFit&&0<g&&(n=c.width-e*g-p,isNaN(a.p.height)||(n-=h,m=!0),d=0,b.each(a.p.colModel,function(b){!1!==this.hidden||this.fixed||(this.width=k=Math.round(n*this.width/(a.p.tblwidth-e*g-p)),d+=k,f=b)}),q=0,m?c.width-p-(d+e*g)!==h&&(q=c.width-p-(d+e*g)-h):m||1===Math.abs(c.width-p-(d+e*g))||(q=c.width-p-(d+e*g)),a.p.colModel[f].width+=q,a.p.tblwidth=d+q+e*g+p,a.p.tblwidth>a.p.width&&(a.p.colModel[f].width-=a.p.tblwidth-parseInt(a.p.width,10),a.p.tblwidth=a.p.width))})();b(m).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(k).css("width",c.width+"px");var D=b("thead:first",a).get(0),V="";a.p.footerrow&&(V+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+f+"'>");var k=b("tr:first",D),be="<tr class='jqgfirstrow' role='row' style='height:auto'>";a.p.disableClick=!1;b("th",k).each(function(d){ja=a.p.colModel[d].width;void 0===a.p.colModel[d].resizable&&(a.p.colModel[d].resizable=!0);a.p.colModel[d].resizable?(fa=document.createElement("span"),b(fa).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+f).css("cursor","col-resize"),b(this).addClass(a.p.resizeclass)):fa="";b(this).css("width",ja+"px").prepend(fa);fa=null;var e="";a.p.colModel[d].hidden&&(b(this).css("display","none"),e="display:none;");be+="<td role='gridcell' style='height:0px;width:"+ja+"px;"+e+"'></td>";c.headers[d]={width:ja,el:this};ka=a.p.colModel[d].sortable;"boolean"!==typeof ka&&(ka=a.p.colModel[d].sortable=!0);e=a.p.colModel[d].name;"cb"!==e&&"subgrid"!==e&&"rn"!==e&&a.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable");ka&&(a.p.multiSort?a.p.viewsortcols[0]?(b("div span.s-ico",this).show(),a.p.colModel[d].lso&&b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")):a.p.colModel[d].lso&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")):a.p.viewsortcols[0]?(b("div span.s-ico",this).show(),d===a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")):d===a.p.lastsort&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")));a.p.footerrow&&(V+="<td role='gridcell' "+p(d,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(d){if(1===b(d.target).closest("th>span.ui-jqgrid-resize").length){var e=sa(this);if(!0===a.p.forceFit){var g=a.p,f=e,h;for(h=e+1;h<a.p.colModel.length;h++){if(!0!==a.p.colModel[h].hidden){f=h;break}}g.nv=f-e}c.dragStart(e,d,xa(e));return !1}}).click(function(c){if(a.p.disableClick){return a.p.disableClick=!1}var d="th>div.ui-jqgrid-sortable",e,g;a.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort");c=b(c.target).closest(d);if(1===c.length){var f;if(a.p.frozenColumns){var h=b(this)[0].id.substring(a.p.id.length+1);b(a.p.colModel).each(function(a){if(this.name===h){return f=a,!1}})}else{f=sa(this)}a.p.viewsortcols[2]||(e=!0,g=c.attr("sort"));null!=f&&ra(b("div",this)[0].id,f,e,g,this);return !1}});if(a.p.sortable&&b.fn.sortable){try{b(a).jqGrid("sortableColumns",k)}catch(Ba){}}a.p.footerrow&&(V+="</tr></tbody></table>");be+="</tr>";k=document.createElement("tbody");this.appendChild(k);b(this).addClass("ui-jqgrid-btable").append(be);var be=null,k=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(D),J=a.p.caption&&!0===a.p.hiddengrid?!0:!1;g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'><div class='edit_items' title='编辑显示字段'>...</div></div>");D=null;c.hDiv=document.createElement("div");b(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(g);b(g).append(k);k=null;J&&b(c.hDiv).hide();a.p.pager&&("string"===typeof a.p.pager?"#"!==a.p.pager.substr(0,1)&&(a.p.pager="#"+a.p.pager):a.p.pager="#"+b(a.p.pager).attr("id"),b(a.p.pager).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(m),J&&b(a.p.pager).hide(),qa(a.p.pager,""));!1===a.p.cellEdit&&!0===a.p.hoverrows&&b(a).bind("mouseover",function(a){t=b(a.target).closest("tr.jqgrow");"ui-subgrid"!==b(t).attr("class")&&b(t).addClass("ui-state-hover")}).bind("mouseout",function(a){t=b(a.target).closest("tr.jqgrow");b(t).removeClass("ui-state-hover")});var B,N,ma;b(a).before(c.hDiv).click(function(c){y=c.target;t=b(y,a.rows).closest("tr.jqgrow");if(0===b(t).length||-1<t[0].className.indexOf("ui-state-disabled")||(b(y,a).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==a.id){return this}var d=b(y).hasClass("cbox"),e=b(a).triggerHandler("jqGridBeforeSelectRow",[t[0].id,c]);(e=!1===e||"stop"===e?!1:!0)&&b.isFunction(a.p.beforeSelectRow)&&(e=a.p.beforeSelectRow.call(a,t[0].id,c));if("A"!==y.tagName&&("INPUT"!==y.tagName&&"TEXTAREA"!==y.tagName&&"OPTION"!==y.tagName&&"SELECT"!==y.tagName||d)&&!0===e){if(B=t[0].id,N=b.jgrid.getCellIndex(y),ma=b(y).closest("td,th").html(),b(a).triggerHandler("jqGridCellSelect",[B,N,ma,c]),b.isFunction(a.p.onCellSelect)&&a.p.onCellSelect.call(a,B,N,ma,c),!0===a.p.cellEdit){if(a.p.multiselect&&d){b(a).jqGrid("setSelection",B,!0,c)}else{B=t[0].rowIndex;try{b(a).jqGrid("editCell",B,N,!0)}catch(g){}}}else{if(a.p.multikey){c[a.p.multikey]?b(a).jqGrid("setSelection",B,!0,c):a.p.multiselect&&d&&(d=b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+B).is(":checked"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+B)[a.p.useProp?"prop":"attr"]("checked",d))}else{if(a.p.multiselect&&a.p.multiboxonly&&!d){var f=a.p.frozenColumns?a.p.id+"_frozen":"";b(a.p.selarrrow).each(function(c,d){var e=b(a).jqGrid("getGridRowById",d);b(e).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d))[a.p.useProp?"prop":"attr"]("checked",!1);f&&(b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f))[a.p.useProp?"prop":"attr"]("checked",!1))});a.p.selarrrow=[]}b(a).jqGrid("setSelection",B,!0,c)}}}}).bind("reloadGrid",function(c,d){!0===a.p.treeGrid&&(a.p.datatype=a.p.treedatatype);d&&d.current&&a.grid.selectionPreserver(a);"local"===a.p.datatype?(b(a).jqGrid("resetSelection"),a.p.data.length&&O()):a.p.treeGrid||(a.p.selrow=null,a.p.multiselect&&(a.p.selarrrow=[],ha(!1)),a.p.savedRow=[]);a.p.scroll&&X.call(a,!0,!1);if(d&&d.page){var e=d.page;e>a.p.lastpage&&(e=a.p.lastpage);1>e&&(e=1);a.p.page=e;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(e-1)*a.grid.prevRowHeight*a.p.rowNum:0}a.grid.prevRowHeight&&a.p.scroll?(delete a.p.lastpage,a.grid.populateVisible()):a.grid.populate();!0===a.p._inlinenav&&b(a).jqGrid("showAddEditButtons");return !1}).dblclick(function(c){y=c.target;t=b(y,a.rows).closest("tr.jqgrow");0!==b(t).length&&(B=t[0].rowIndex,N=b.jgrid.getCellIndex(y),b(a).triggerHandler("jqGridDblClickRow",[b(t).attr("id"),B,N,c]),b.isFunction(a.p.ondblClickRow)&&a.p.ondblClickRow.call(a,b(t).attr("id"),B,N,c))}).bind("contextmenu",function(c){});c.bDiv=document.createElement("div");n&&"auto"===String(a.p.height).toLowerCase()&&(a.p.height="100%");b(c.bDiv).append(b('<div style="position:relative;'+(n&&8>b.jgrid.msiever()?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid);b("table:first",c.bDiv).css({width:a.p.tblwidth+"px"});b.support.tbody||2===b("tbody",this).length&&b("tbody:gt(0)",this).remove();a.p.multikey&&(b.jgrid.msie?b(c.bDiv).bind("selectstart",function(){return !1}):b(c.bDiv).bind("mousedown",function(){return !1}));J&&b(c.bDiv).hide();c.cDiv=document.createElement("div");var bf=!0===a.p.hidegrid?b("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' />").hover(function(){bf.addClass("ui-state-hover")},function(){bf.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===f?"left":"right","0px"):"";b(c.cDiv).append(bf).append("<span class='ui-jqgrid-title'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===f?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");b(c.cDiv).insertBefore(c.hDiv);a.p.toolbar[0]&&(c.uDiv=document.createElement("div"),"top"===a.p.toolbar[1]?b(c.uDiv).insertBefore(c.hDiv):"bottom"===a.p.toolbar[1]&&b(c.uDiv).insertAfter(c.hDiv),"both"===a.p.toolbar[1]?(c.ubDiv=document.createElement("div"),b(c.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(c.hDiv),b(c.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(c.hDiv),J&&b(c.ubDiv).hide()):b(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),J&&b(c.uDiv).hide());a.p.toppager&&(a.p.toppager=b.jgrid.jqID(a.p.id)+"_toppager",c.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0],a.p.toppager="#"+a.p.toppager,b(c.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width).insertBefore(c.hDiv),qa(a.p.toppager,"_t"));a.p.footerrow&&(c.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>"),b(c.sDiv).append(g).width(c.width).insertAfter(c.hDiv),b(g).append(V),c.footers=b(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,a.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),J&&b(c.sDiv).hide());g=null;if(a.p.caption){var bg=a.p.datatype;!0===a.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",c.cDiv).click(function(d){var e=b.isFunction(a.p.onHeaderClick),g=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,h=this;!0===a.p.toolbar[0]&&("both"===a.p.toolbar[1]&&(g+=", #"+b(c.ubDiv).attr("id")),g+=", #"+b(c.uDiv).attr("id"));f=b(g,"#gview_"+b.jgrid.jqID(a.p.id)).length;"visible"===a.p.gridstate?b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideUp("fast",function(){f--;0===f&&(b("span",h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),a.p.gridstate="hidden",b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).hide(),b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]),e&&(J||a.p.onHeaderClick.call(a,a.p.gridstate,d)))}):"hidden"===a.p.gridstate&&b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideDown("fast",function(){f--;0===f&&(b("span",h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),J&&(a.p.datatype=bg,Q(),J=!1),a.p.gridstate="visible",b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).show(),b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]),e&&(J||a.p.onHeaderClick.call(a,a.p.gridstate,d)))});return !1}),J&&(a.p.datatype="local",b(".ui-jqgrid-titlebar-close",c.cDiv).trigger("click")))}else{b(c.cDiv).hide()}b(c.hDiv).after(c.bDiv).mousemove(function(a){if(c.resizing){return c.dragMove(a),!1}});b(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return !1});b(document).bind("mouseup.jqGrid"+a.p.id,function(){return c.resizing?(c.dragEnd(),!1):!0});a.formatCol=p;a.sortData=ra;a.updatepager=function(c,d){var e,g,f,h,k,l,m,n="",p=a.p.pager?"_"+b.jgrid.jqID(a.p.pager.substr(1)):"",q=a.p.toppager?"_"+a.p.toppager.substr(1):"";f=parseInt(a.p.page,10)-1;0>f&&(f=0);f*=parseInt(a.p.rowNum,10);k=f+a.p.reccount;if(a.p.scroll){e=b("tbody:first > tr:gt(0)",a.grid.bDiv);f=k-e.length;a.p.reccount=e.length;if(e=e.outerHeight()||a.grid.prevRowHeight){g=f*e,m=parseInt(a.p.records,10)*e,b(">div:first",a.grid.bDiv).css({height:m}).children("div:first").css({height:g,display:g?"":"none"}),0==a.grid.bDiv.scrollTop&&1<a.p.page&&(a.grid.bDiv.scrollTop=a.p.rowNum*(a.p.page-1)*e)}a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft}n=a.p.pager||"";if(n+=a.p.toppager?n?","+a.p.toppager:a.p.toppager:""){m=b.jgrid.formatter.integer||{},e=r(a.p.page),g=r(a.p.lastpage),b(".selbox",n)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===a.p.pginput&&(b(".ui-pg-input",n).val(a.p.page),h=a.p.toppager?"#sp_1"+p+",#sp_1"+q:"#sp_1"+p,b(h).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,m):a.p.lastpage)),a.p.viewrecords&&(0===a.p.reccount?b(".ui-paging-info",n).html(a.p.emptyrecords):(h=f+1,l=a.p.records,b.fmatter&&(h=b.fmatter.util.NumberFormat(h,m),k=b.fmatter.util.NumberFormat(k,m),l=b.fmatter.util.NumberFormat(l,m)),b(".ui-paging-info",n).html(b.jgrid.format(a.p.recordtext,h.replace(/ /g,""),k.replace(/ /g,""),l.replace(/ /g,""),(Number(a.p.totaltime)+Number(a.p.costtime)))))),!0===a.p.pgbuttons&&(0>=e&&(e=g=0),1===e||0===e?(b("#first"+p+", #prev"+p).addClass("ui-state-disabled").removeClass("ui-state-hover"),a.p.toppager&&b("#first_t"+q+", #prev_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#first"+p+", #prev"+p).removeClass("ui-state-disabled"),a.p.toppager&&b("#first_t"+q+", #prev_t"+q).removeClass("ui-state-disabled")),e===g||0===e?(b("#next"+p+", #last"+p).addClass("ui-state-disabled").removeClass("ui-state-hover"),a.p.toppager&&b("#next_t"+q+", #last_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#next"+p+", #last"+p).removeClass("ui-state-disabled"),a.p.toppager&&b("#next_t"+q+", #last_t"+q).removeClass("ui-state-disabled")))}!0===c&&!0===a.p.rownumbers&&b(">td.jqgrid-rownum",a.rows).each(function(a){b(this).html(f+1+a)});d&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");b(a).triggerHandler("jqGridGridComplete");b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a);b(a).triggerHandler("jqGridAfterGridComplete")};a.refreshIndex=O;a.setHeadCheckBox=ha;a.constructTr=$;a.formatter=function(a,b,c,d,e){return x(a,b,c,d,e)};b.extend(c,{populate:Q,emptyRows:X,beginReq:P,endReq:T});this.grid=c;a.addXmlData=function(b){K(b,a.grid.bDiv)};a.addJSONData=function(b){Y(b,a.grid.bDiv)};this.grid.cols=this.rows[0].cells;b(a).triggerHandler("jqGridInitGrid");b.isFunction(a.p.onInitGrid)&&a.p.onInitGrid.call(a);Q();a.p.hiddengrid=!1}}}}})};b.jgrid.extend({getGridParam:function(b){var f=this[0];if(f&&f.grid){return b?void 0!==f.p[b]?f.p[b]:null:f.p}},setGridParam:function(e){return this.each(function(){this.grid&&"object"===typeof e&&b.extend(!0,this.p,e)})},getGridRowById:function(e){var f;this.each(function(){try{for(var c=this.rows.length;c--;){if(e.toString()===this.rows[c].id){f=this.rows[c];break}}}catch(d){f=b(this.grid.bDiv).find("#"+b.jgrid.jqID(e))}});return f},getDataIDs:function(){var e=[],f=0,c,d=0;this.each(function(){if((c=this.rows.length)&&0<c){for(;f<c;){b(this.rows[f]).hasClass("jqgrow")&&(e[d]=this.rows[f].id,d++),f++}}});return e},setSelection:function(e,f,c){return this.each(function(){var d,a,l,g,h,k;void 0!==e&&(f=!1===f?!1:!0,!(a=b(this).jqGrid("getGridRowById",e))||!a.className||-1<a.className.indexOf("ui-state-disabled")||(!0===this.p.scrollrows&&(l=b(this).jqGrid("getGridRowById",e).rowIndex,0<=l&&(d=b(this.grid.bDiv)[0].clientHeight,g=b(this.grid.bDiv)[0].scrollTop,h=b(this.rows[l]).position().top,l=this.rows[l].clientHeight,h+l>=d+g?b(this.grid.bDiv)[0].scrollTop=h-(d+g)+l+g:h<d+g&&h<g&&(b(this.grid.bDiv)[0].scrollTop=h))),!0===this.p.frozenColumns&&(k=this.p.id+"_frozen"),this.p.multiselect?(this.setHeadCheckBox(!1),this.p.selrow=a.id,g=b.inArray(this.p.selrow,this.p.selarrrow),-1===g?("ui-subgrid"!==a.className&&b(a).addClass("ui-state-highlight").attr("aria-selected","true"),d=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==a.className&&b(a).removeClass("ui-state-highlight").attr("aria-selected","false"),d=!1,this.p.selarrrow.splice(g,1),h=this.p.selarrrow[0],this.p.selrow=void 0===h?null:h),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a.id))[this.p.useProp?"prop":"attr"]("checked",d),k&&(-1===g?b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k))[this.p.useProp?"prop":"attr"]("checked",d)),f&&(b(this).triggerHandler("jqGridSelectRow",[a.id,d,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,d,c))):"ui-subgrid"!==a.className&&(this.p.selrow!==a.id?(b(b(this).jqGrid("getGridRowById",this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(a).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),k&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(k)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k)).addClass("ui-state-highlight")),d=!0):d=!1,this.p.selrow=a.id,f&&(b(this).triggerHandler("jqGridSelectRow",[a.id,d,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,d,c)))))})},resetSelection:function(e){return this.each(function(){var f=this,c,d;!0===f.p.frozenColumns&&(d=f.p.id+"_frozen");if(void 0!==e){c=e===f.p.selrow?f.p.selrow:e;b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(c)).removeClass("ui-state-highlight").attr("aria-selected","false");d&&b("#"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight");if(f.p.multiselect){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(f.p.id))[f.p.useProp?"prop":"attr"]("checked",!1);if(d){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d))[f.p.useProp?"prop":"attr"]("checked",!1)}f.setHeadCheckBox(!1)}c=null}else{f.p.multiselect?(b(f.p.selarrrow).each(function(a,c){b(b(f).jqGrid("getGridRowById",c)).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c))[f.p.useProp?"prop":"attr"]("checked",!1);d&&(b("#"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d))[f.p.useProp?"prop":"attr"]("checked",!1))}),f.setHeadCheckBox(!1),f.p.selarrrow=[],f.p.selrow=null):f.p.selrow&&(b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(f.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),d&&b("#"+b.jgrid.jqID(f.p.selrow),"#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight"),f.p.selrow=null)}!0===f.p.cellEdit&&0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(b("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover"));f.p.savedRow=[]})},getRowData:function(e){var f={},c,d=!1,a,l=0;this.each(function(){var g=this,h,k;if(void 0===e){d=!0,c=[],a=g.rows.length}else{k=b(g).jqGrid("getGridRowById",e);if(!k){return f}a=2}for(;l<a;){d&&(k=g.rows[l]),b(k).hasClass("jqgrow")&&(b('td[role="gridcell"]',k).each(function(a){h=g.p.colModel[a].name;if("cb"!==h&&"subgrid"!==h&&"rn"!==h){if(!0===g.p.treeGrid&&h===g.p.ExpandColumn){f[h]=b.jgrid.htmlDecode(b("span:first",this).html())}else{try{f[h]=b.unformat.call(g,this,{rowId:k.id,colModel:g.p.colModel[a]},a)}catch(c){f[h]=b.jgrid.htmlDecode(b(this).html())}}}}),d&&(c.push(f),f={})),l++}});return c||f},delRowData:function(e){var f=!1,c,d;this.each(function(){c=b(this).jqGrid("getGridRowById",e);if(!c){return !1}b(c).remove();this.p.records--;this.p.reccount--;this.updatepager(!0,!1);f=!0;this.p.multiselect&&(d=b.inArray(e,this.p.selarrrow),-1!==d&&this.p.selarrrow.splice(d,1));this.p.selrow=this.p.multiselect&&0<this.p.selarrrow.length?this.p.selarrrow[this.p.selarrrow.length-1]:null;if("local"===this.p.datatype){var a=b.jgrid.stripPref(this.p.idPrefix,e),a=this.p._index[a];void 0!==a&&(this.p.data.splice(a,1),this.refreshIndex())}if(!0===this.p.altRows&&f){var l=this.p.altclass;b(this.rows).each(function(a){1===a%2?b(this).addClass(l):b(this).removeClass(l)})}});return f},setRowData:function(e,f,c){var d,a=!0,l;this.each(function(){if(!this.grid){return !1}var g=this,h,k,n=typeof c,m={};k=b(this).jqGrid("getGridRowById",e);if(!k){return !1}if(f){try{if(b(this.p.colModel).each(function(a){d=this.name;var c=b.jgrid.getAccessor(f,d);void 0!==c&&(m[d]=this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?b.unformat.date.call(g,c,this):c,h=g.formatter(e,c,a,f,"edit"),l=this.title?{title:b.jgrid.stripHtml(h)}:{},!0===g.p.treeGrid&&d===g.p.ExpandColumn?b("td[role='gridcell']:eq("+a+") > span:first",k).html(h).attr(l):b("td[role='gridcell']:eq("+a+")",k).html(h).attr(l))}),"local"===g.p.datatype){var r=b.jgrid.stripPref(g.p.idPrefix,e),p=g.p._index[r],q;if(g.p.treeGrid){for(q in g.p.treeReader){g.p.treeReader.hasOwnProperty(q)&&delete m[g.p.treeReader[q]]}}void 0!==p&&(g.p.data[p]=b.extend(!0,g.p.data[p],m));m=null}}catch(x){a=!1}}a&&("string"===n?b(k).addClass(c):null!==c&&"object"===n&&b(k).css(c),b(g).triggerHandler("jqGridAfterGridComplete"))});return a},addRowData:function(e,f,c,d){c||(c="last");var a=!1,l,g,h,k,n,m,r,p,q="",x,G,U,M,ea,W;f&&(b.isArray(f)?(x=!0,c="last",G=e):(f=[f],x=!1),this.each(function(){var X=f.length;n=!0===this.p.rownumbers?1:0;h=!0===this.p.multiselect?1:0;k=!0===this.p.subGrid?1:0;x||(void 0!==e?e=String(e):(e=b.jgrid.randId(),!1!==this.p.keyIndex&&(G=this.p.colModel[this.p.keyIndex+h+k+n].name,void 0!==f[0][G]&&(e=f[0][G]))));U=this.p.altclass;for(var O=0,$="",K={},Y=b.isFunction(this.p.afterInsertRow)?!0:!1;O<X;){M=f[O];g=[];if(x){try{e=M[G],void 0===e&&(e=b.jgrid.randId())}catch(oa){e=b.jgrid.randId()}$=!0===this.p.altRows?0===(this.rows.length-1)%2?U:"":""}W=e;e=this.p.idPrefix+e;n&&(q=this.formatCol(0,1,"",null,e,!0),g[g.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+q+">0</td>");h&&(p='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+e+'" class="cbox"/>',q=this.formatCol(n,1,"",null,e,!0),g[g.length]='<td role="gridcell" '+q+">"+p+"</td>");k&&(g[g.length]=b(this).jqGrid("addSubGridCell",h+n,1));for(r=h+k+n;r<this.p.colModel.length;r++){ea=this.p.colModel[r],l=ea.name,K[l]=M[l],p=this.formatter(e,b.jgrid.getAccessor(M,l),r,M),q=this.formatCol(r,1,p,M,e,K),g[g.length]='<td role="gridcell" '+q+">"+p+"</td>"}g.unshift(this.constructTr(e,!1,$,K,M,!1));g[g.length]="</tr>";if(0===this.rows.length){b("table:first",this.grid.bDiv).append(g.join(""))}else{switch(c){case"last":b(this.rows[this.rows.length-1]).after(g.join(""));m=this.rows.length-1;break;case"first":b(this.rows[0]).after(g.join(""));m=1;break;case"after":if(m=b(this).jqGrid("getGridRowById",d)){b(this.rows[m.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[m.rowIndex+1]).after(g):b(m).after(g.join("")),m=m.rowIndex+1}break;case"before":if(m=b(this).jqGrid("getGridRowById",d)){b(m).before(g.join("")),m=m.rowIndex-1}}}!0===this.p.subGrid&&b(this).jqGrid("addSubGrid",h+n,m);this.p.records++;this.p.reccount++;b(this).triggerHandler("jqGridAfterInsertRow",[e,M,M]);Y&&this.p.afterInsertRow.call(this,e,M,M);O++;"local"===this.p.datatype&&(K[this.p.localReader.id]=W,this.p._index[W]=this.p.data.length,this.p.data.push(K),K={})}!0!==this.p.altRows||x||("last"===c?1===(this.rows.length-1)%2&&b(this.rows[this.rows.length-1]).addClass(U):b(this.rows).each(function(a){1===a%2?b(this).addClass(U):b(this).removeClass(U)}));this.updatepager(!0,!0);a=!0}));return a},footerData:function(e,f,c){function d(a){for(var b in a){if(a.hasOwnProperty(b)){return !1}}return !0}var a,l=!1,g={},h;void 0==e&&(e="get");"boolean"!==typeof c&&(c=!0);e=e.toLowerCase();this.each(function(){var k=this,n;if(!k.grid||!k.p.footerrow||"set"===e&&d(f)){return !1}l=!0;b(this.p.colModel).each(function(d){a=this.name;"set"===e?void 0!==f[a]&&(n=c?k.formatter("",f[a],d,f,"edit"):f[a],h=this.title?{title:b.jgrid.stripHtml(n)}:{},b("tr.footrow td:eq("+d+")",k.grid.sDiv).html(n).attr(h),l=!0):"get"===e&&(g[a]=b("tr.footrow td:eq("+d+")",k.grid.sDiv).html())})});return"get"===e?g:l},showHideCol:function(e,f){return this.each(function(){var c=this,d=!1,a=b.jgrid.cell_width?0:c.p.cellLayout,l;if(c.grid){"string"===typeof e&&(e=[e]);f="none"!==f?"":"none";var g=""===f?!0:!1,h=c.p.groupHeader&&("object"===typeof c.p.groupHeader||b.isFunction(c.p.groupHeader));h&&b(c).jqGrid("destroyGroupHeader",!1);b(this.p.colModel).each(function(h){if(-1!==b.inArray(this.name,e)&&this.hidden===g){if(!0===c.p.frozenColumns&&!0===this.frozen){return !0}b("tr[role=rowheader]",c.grid.hDiv).each(function(){b(this.cells[h]).css("display",f)});b(c.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[h]).css("display",f)});c.p.footerrow&&b("tr.footrow td:eq("+h+")",c.grid.sDiv).css("display",f);l=parseInt(this.width,10);c.p.tblwidth="none"===f?c.p.tblwidth-(l+a):c.p.tblwidth+(l+a);this.hidden=!g;d=!0;b(c).triggerHandler("jqGridShowHideCol",[g,this.name,h])}});!0===d&&(!0!==c.p.shrinkToFit||isNaN(c.p.height)||(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),b(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width));h&&b(c).jqGrid("setGroupHeaders",c.p.groupHeader)}})},hideCol:function(e){return this.each(function(){b(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){b(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,f,c){function d(a){var c;c=a.length?b.makeArray(a):b.extend({},a);b.each(e,function(b){a[b]=c[this]})}function a(a,c){b(">tr"+(c||""),a).each(function(){var a=this,c=b.makeArray(a.cells);b.each(e,function(){var b=c[this];b&&a.appendChild(b)})})}var l=this.get(0);d(l.p.colModel);d(l.p.colNames);d(l.grid.headers);a(b("thead:first",l.grid.hDiv),c&&":not(.ui-jqgrid-labels)");f&&a(b("#"+b.jgrid.jqID(l.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");l.p.footerrow&&a(b("tbody:first",l.grid.sDiv));l.p.remapColumns&&(l.p.remapColumns.length?d(l.p.remapColumns):l.p.remapColumns=b.makeArray(e));l.p.lastsort=b.inArray(l.p.lastsort,e);l.p.treeGrid&&(l.p.expColInd=b.inArray(l.p.expColInd,e));b(l).triggerHandler("jqGridRemapColumns",[e,f,c])},setGridWidth:function(e,f){return this.each(function(){if(this.grid){var c=this,d,a=0,l=b.jgrid.cell_width?0:c.p.cellLayout,g,h=0,k=!1,n=c.p.scrollOffset,m,r=0,p;"boolean"!==typeof f&&(f=c.p.shrinkToFit);if(!isNaN(e)){e=parseInt(e,10);c.grid.width=c.p.width=e;b("#gbox_"+b.jgrid.jqID(c.p.id)).css("width",e+"px");b("#gview_"+b.jgrid.jqID(c.p.id)).css("width",e+"px");b(c.grid.bDiv).css("width",e+"px");b(c.grid.hDiv).css("width",e+"px");c.p.pager&&b(c.p.pager).css("width",e+"px");c.p.toppager&&b(c.p.toppager).css("width",e+"px");!0===c.p.toolbar[0]&&(b(c.grid.uDiv).css("width",e+"px"),"both"===c.p.toolbar[1]&&b(c.grid.ubDiv).css("width",e+"px"));c.p.footerrow&&b(c.grid.sDiv).css("width",e+"px");!1===f&&!0===c.p.forceFit&&(c.p.forceFit=!1);if(!0===f){b.each(c.p.colModel,function(){!1===this.hidden&&(d=this.widthOrg,a+=d+l,this.fixed?r+=d+l:h++)});if(0===h){return}c.p.tblwidth=a;m=e-l*h-r;!isNaN(c.p.height)&&(b(c.grid.bDiv)[0].clientHeight<b(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)&&(k=!0,m-=n);var a=0,q=0<c.grid.cols.length;b.each(c.p.colModel,function(b){!1!==this.hidden||this.fixed||(d=this.widthOrg,d=Math.round(m*d/(c.p.tblwidth-l*h-r)),0>d||(this.width=d,a+=d,c.grid.headers[b].width=d,c.grid.headers[b].el.style.width=d+"px",c.p.footerrow&&(c.grid.footers[b].style.width=d+"px"),q&&(c.grid.cols[b].style.width=d+"px"),g=b))});if(!g){return}p=0;k?e-r-(a+l*h)!==n&&(p=e-r-(a+l*h)-n):1!==Math.abs(e-r-(a+l*h))&&(p=e-r-(a+l*h));c.p.colModel[g].width+=p;c.p.tblwidth=a+p+l*h+r;c.p.tblwidth>e?(k=c.p.tblwidth-parseInt(e,10),c.p.tblwidth=e,d=c.p.colModel[g].width-=k):d=c.p.colModel[g].width;c.grid.headers[g].width=d;c.grid.headers[g].el.style.width=d+"px";q&&(c.grid.cols[g].style.width=d+"px");c.p.footerrow&&(c.grid.footers[g].style.width=d+"px")}c.p.tblwidth&&(b("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),b("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&b("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){if(this.grid){var f=b(this.grid.bDiv);f.css({height:e+(isNaN(e)?"":"px")});!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(f.height()-16);this.p.height=e;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e);b(this.grid.cDiv).show()})},setLabel:function(e,f,c,d){return this.each(function(){var a=-1;if(this.grid&&void 0!==e&&(b(this.p.colModel).each(function(b){if(this.name===e){return a=b,!1}}),0<=a)){var l=b("tr.ui-jqgrid-labels th:eq("+a+")",this.grid.hDiv);if(f){var g=b(".s-ico",l);b("[id^=jqgh_]",l).empty().html(f).append(g);this.p.colNames[a]=f}c&&("string"===typeof c?b(l).addClass(c):b(l).css(c));"object"===typeof d&&b(l).attr(d)}})},setCell:function(e,f,c,d,a,l){return this.each(function(){var g=-1,h,k;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return g=a,!1}}):g=parseInt(f,10),0<=g&&(h=b(this).jqGrid("getGridRowById",e)))){var n=b("td:eq("+g+")",h);if(""!==c||!0===l){h=this.formatter(e,c,g,h,"edit"),k=this.p.colModel[g].title?{title:b.jgrid.stripHtml(h)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(n)).length?b("span",b(n)).html(h).attr(k):b(n).html(h).attr(k),"local"===this.p.datatype&&(h=this.p.colModel[g],c=h.formatter&&"string"===typeof h.formatter&&"date"===h.formatter?b.unformat.date.call(this,c,h):c,k=this.p._index[b.jgrid.stripPref(this.p.idPrefix,e)],void 0!==k&&(this.p.data[k][h.name]=c))}"string"===typeof d?b(n).addClass(d):d&&b(n).css(d);"object"===typeof a&&b(n).attr(a)}})},getCell:function(e,f){var c=!1;this.each(function(){var d=-1;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return d=a,!1}}):d=parseInt(f,10),0<=d)){var a=b(this).jqGrid("getGridRowById",e);if(a){try{c=b.unformat.call(this,b("td:eq("+d+")",a),{rowId:a.id,colModel:this.p.colModel[d]},d)}catch(l){c=b.jgrid.htmlDecode(b("td:eq("+d+")",a).html())}}}});return c},getCol:function(e,f,c){var d=[],a,l=0,g,h,k;f="boolean"!==typeof f?!1:f;void 0===c&&(c=!1);this.each(function(){var n=-1;if(this.grid&&(isNaN(e)?b(this.p.colModel).each(function(a){if(this.name===e){return n=a,!1}}):n=parseInt(e,10),0<=n)){var m=this.rows.length,r=0,p=0;if(m&&0<m){for(;r<m;){if(b(this.rows[r]).hasClass("jqgrow")){try{a=b.unformat.call(this,b(this.rows[r].cells[n]),{rowId:this.rows[r].id,colModel:this.p.colModel[n]},n)}catch(q){a=b.jgrid.htmlDecode(this.rows[r].cells[n].innerHTML)}c?(k=parseFloat(a),isNaN(k)||(l+=k,void 0===h&&(h=g=k),g=Math.min(g,k),h=Math.max(h,k),p++)):f?d.push({id:this.rows[r].id,value:a}):d.push(a)}r++}if(c){switch(c.toLowerCase()){case"sum":d=l;break;case"avg":d=l/p;break;case"count":d=m-1;break;case"min":d=g;break;case"max":d=h}}}}});return d},clearGridData:function(e){return this.each(function(){if(this.grid){"boolean"!==typeof e&&(e=!1);if(this.p.deepempty){b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove()}else{var f=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(f)}this.p.footerrow&&e&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(e,f){var c=!1,d;this.each(function(){(d=b(this).jqGrid("getGridRowById",e))&&(c=!0===f?d:d.rowIndex)});return c},bindKeys:function(e){var f=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var c=this;b("body").is("[role]")||b("body").attr("role","application");c.p.scrollrows=f.scrollingRows;b(c).keydown(function(d){var a=b(c).find("tr[tabindex=0]")[0],e,g,h,k=c.p.treeReader.expanded_field;if(a){if(h=c.p._index[b.jgrid.stripPref(c.p.idPrefix,a.id)],37===d.keyCode||38===d.keyCode||39===d.keyCode||40===d.keyCode){if(38===d.keyCode){g=a.previousSibling;e="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.previousSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){e=g.id;break}}}else{e=g.id}}b(c).jqGrid("setSelection",e,!0,d);d.preventDefault()}if(40===d.keyCode){g=a.nextSibling;e="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.nextSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){e=g.id;break}}}else{e=g.id}}b(c).jqGrid("setSelection",e,!0,d);d.preventDefault()}37===d.keyCode&&(c.p.treeGrid&&c.p.data[h][k]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyLeft",[c.p.selrow]),b.isFunction(f.onLeftKey)&&f.onLeftKey.call(c,c.p.selrow));39===d.keyCode&&(c.p.treeGrid&&!c.p.data[h][k]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyRight",[c.p.selrow]),b.isFunction(f.onRightKey)&&f.onRightKey.call(c,c.p.selrow))}else{13===d.keyCode?(b(c).triggerHandler("jqGridKeyEnter",[c.p.selrow]),b.isFunction(f.onEnter)&&f.onEnter.call(c,c.p.selrow)):32===d.keyCode&&(b(c).triggerHandler("jqGridKeySpace",[c.p.selrow]),b.isFunction(f.onSpace)&&f.onSpace.call(c,c.p.selrow))}}})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(e){var f=!1,c;this.each(function(){void 0!==e&&(c=this.p._index[b.jgrid.stripPref(this.p.idPrefix,e)],0<=c&&(f=this.p.data[c]))});return f}})})(jQuery);(function(A){A.fmatter={};A.extend(A.fmatter,{isBoolean:function(B){return"boolean"===typeof B},isObject:function(B){return B&&("object"===typeof B||A.isFunction(B))||!1},isString:function(B){return"string"===typeof B},isNumber:function(B){return"number"===typeof B&&isFinite(B)},isValue:function(B){return this.isObject(B)||this.isString(B)||this.isNumber(B)||this.isBoolean(B)},isEmpty:function(B){if(!this.isString(B)&&this.isValue(B)){return !1}if(!this.isValue(B)){return !0}B=A.trim(B).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===B}});A.fn.fmatter=function(G,F,C,D,H){var B=F;C=A.extend({},A.jgrid.formatter,C);try{B=A.fn.fmatter[G].call(this,F,C,D,H)}catch(E){}return B};A.fmatter.util={NumberFormat:function(G,F){A.fmatter.isNumber(G)||(G*=1);if(A.fmatter.isNumber(G)){var J=0>G,B=String(G),H=F.decimalSeparator||".",I;if(A.fmatter.isNumber(F.decimalPlaces)){var D=F.decimalPlaces,B=Math.pow(10,D),B=String(Math.round(G*B)/B);I=B.lastIndexOf(".");if(0<D){for(0>I?(B+=H,I=B.length-1):"."!==H&&(B=B.replace(".",H));B.length-1-I<D;){B+="0"}}}if(F.thousandsSeparator){D=F.thousandsSeparator;I=B.lastIndexOf(H);I=-1<I?I:B.length;var H=B.substring(I),E=-1,C;for(C=I;0<C;C--){E++,0===E%3&&C!==I&&(!J||1<C)&&(H=D+H),H=B.charAt(C-1)+H}B=H}B=F.prefix?F.prefix+B:B;return B=F.suffix?B+F.suffix:B}return G}};A.fn.fmatter.defaultFormat=function(C,B){return A.fmatter.isValue(C)&&""!==C?C:B.defaultValue||"&#160;"};A.fn.fmatter.email=function(C,B){return A.fmatter.isEmpty(C)?A.fn.fmatter.defaultFormat(C,B):'<a href="mailto:'+C+'">'+C+"</a>"};A.fn.fmatter.checkbox=function(E,D){var B=A.extend({},D.checkbox),C;void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));C=!0===B.disabled?'disabled="disabled"':"";if(A.fmatter.isEmpty(E)||void 0===E){E=A.fn.fmatter.defaultFormat(E,B)}E=String(E);E=(E+"").toLowerCase();return'<input type="checkbox" '+(0>E.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+E+'" offval="no" '+C+"/>"};A.fn.fmatter.link=function(E,D){var B={target:D.target},C="";void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));B.target&&(C="target="+B.target);return A.fmatter.isEmpty(E)?A.fn.fmatter.defaultFormat(E,D):"<a "+C+' href="'+E+'">'+E+"</a>"};A.fn.fmatter.showlink=function(E,D){var B={baseLinkUrl:D.baseLinkUrl,showAction:D.showAction,addParam:D.addParam||"",target:D.target,idName:D.idName},C="";void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));B.target&&(C="target="+B.target);B=B.baseLinkUrl+B.showAction+"?"+B.idName+"="+D.rowId+B.addParam;return A.fmatter.isString(E)||A.fmatter.isNumber(E)?"<a "+C+' href="'+B+'">'+E+"</a>":A.fn.fmatter.defaultFormat(E,D)};A.fn.fmatter.integer=function(D,C){var B=A.extend({},C.integer);void 0!==C.colModel&&void 0!==C.colModel.formatoptions&&(B=A.extend({},B,C.colModel.formatoptions));return A.fmatter.isEmpty(D)?B.defaultValue:A.fmatter.util.NumberFormat(D,B)};A.fn.fmatter.number=function(D,C){var B=A.extend({},C.number);void 0!==C.colModel&&void 0!==C.colModel.formatoptions&&(B=A.extend({},B,C.colModel.formatoptions));return A.fmatter.isEmpty(D)?B.defaultValue:A.fmatter.util.NumberFormat(D,B)};A.fn.fmatter.currency=function(D,C){var B=A.extend({},C.currency);void 0!==C.colModel&&void 0!==C.colModel.formatoptions&&(B=A.extend({},B,C.colModel.formatoptions));return A.fmatter.isEmpty(D)?B.defaultValue:A.fmatter.util.NumberFormat(D,B)};A.fn.fmatter.date=function(E,D,B,C){B=A.extend({},D.date);void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));return B.reformatAfterEdit||"edit"!==C?A.fmatter.isEmpty(E)?A.fn.fmatter.defaultFormat(E,D):A.jgrid.parseDate(B.srcformat,E,B.newformat,B):A.fn.fmatter.defaultFormat(E,D)};A.fn.fmatter.select=function(I,H){I=String(I);var L=!1,B=[],J,K;void 0!==H.colModel.formatoptions?(L=H.colModel.formatoptions.value,J=void 0===H.colModel.formatoptions.separator?":":H.colModel.formatoptions.separator,K=void 0===H.colModel.formatoptions.delimiter?";":H.colModel.formatoptions.delimiter):void 0!==H.colModel.editoptions&&(L=H.colModel.editoptions.value,J=void 0===H.colModel.editoptions.separator?":":H.colModel.editoptions.separator,K=void 0===H.colModel.editoptions.delimiter?";":H.colModel.editoptions.delimiter);if(L){var D=!0===H.colModel.editoptions.multiple?!0:!1,F=[];D&&(F=I.split(","),F=A.map(F,function(M){return A.trim(M)}));if(A.fmatter.isString(L)){var C=L.split(K),G=0,E;for(E=0;E<C.length;E++){if(K=C[E].split(J),2<K.length&&(K[1]=A.map(K,function(N,M){if(0<M){return N}}).join(J)),D){-1<A.inArray(K[0],F)&&(B[G]=K[1],G++)}else{if(A.trim(K[0])===A.trim(I)){B[0]=K[1];break}}}}else{A.fmatter.isObject(L)&&(D?B=A.map(F,function(M){return L[M]}):B[0]=L[I]||"")}}I=B.join(", ");return""===I?A.fn.fmatter.defaultFormat(I,H):I};A.fn.fmatter.rowactions=function(H){var G=A(this).closest("tr.jqgrow"),K=G.attr("id"),B=A(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),B=A("#"+B),I=B[0],J=I.p,D=J.colModel[A.jgrid.getCellIndex(this)],E=D.frozen?A("tr#"+K+" td:eq("+A.jgrid.getCellIndex(this)+") > div",B):A(this).parent(),C={extraparam:{}},F=function(L){A.isFunction(C.afterRestore)&&C.afterRestore.call(I,L);E.find("div.ui-inline-edit,div.ui-inline-del").show();E.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==D.formatoptions&&(C=A.extend(C,D.formatoptions));void 0!==J.editOptions&&(C.editOptions=J.editOptions);void 0!==J.delOptions&&(C.delOptions=J.delOptions);G.hasClass("jqgrid-new-row")&&(C.extraparam[J.prmNames.oper]=J.prmNames.addoper);G={keys:C.keys,oneditfunc:C.onEdit,successfunc:C.onSuccess,url:C.url,extraparam:C.extraparam,aftersavefunc:function(L,M){A.isFunction(C.afterSave)&&C.afterSave.call(I,L,M);E.find("div.ui-inline-edit,div.ui-inline-del").show();E.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:C.onError,afterrestorefunc:F,restoreAfterError:C.restoreAfterError,mtype:C.mtype};switch(H){case"edit":B.jqGrid("editRow",K,G);E.find("div.ui-inline-edit,div.ui-inline-del").hide();E.find("div.ui-inline-save,div.ui-inline-cancel").show();B.triggerHandler("jqGridAfterGridComplete");break;case"save":B.jqGrid("saveRow",K,G)&&(E.find("div.ui-inline-edit,div.ui-inline-del").show(),E.find("div.ui-inline-save,div.ui-inline-cancel").hide(),B.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":B.jqGrid("restoreRow",K,F);E.find("div.ui-inline-edit,div.ui-inline-del").show();E.find("div.ui-inline-save,div.ui-inline-cancel").hide();B.triggerHandler("jqGridAfterGridComplete");break;case"del":B.jqGrid("delGridRow",K,C.delOptions);break;case"formedit":B.jqGrid("setSelection",K),B.jqGrid("editGridRow",K,C.editOptions)}};A.fn.fmatter.actions=function(E,D){var B={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},C=D.rowId,F="";void 0!==D.colModel.formatoptions&&(B=A.extend(B,D.colModel.formatoptions));if(void 0===C||A.fmatter.isEmpty(C)){return""}B.editformbutton?F+="<div title='"+A.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-pencil'></span></div>":B.editbutton&&(F+="<div title='"+A.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ")+"><span class='ui-icon ui-icon-pencil'></span></div>");B.delbutton&&(F+="<div title='"+A.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+("id='jDeleteButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-trash'></span></div>");F+="<div title='"+A.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+("id='jSaveButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-disk'></span></div>";F+="<div title='"+A.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+("id='jCancelButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+F+"</div>"};A.unformat=function(G,F,J,B){var H,I=F.colModel.formatter,D=F.colModel.formatoptions||{},E=/([\.\*\_\'\(\)\{\}\+\?\\])/g,C=F.colModel.unformat||A.fn.fmatter[I]&&A.fn.fmatter[I].unformat;if(void 0!==C&&A.isFunction(C)){H=C.call(this,A(G).text(),F,G)}else{if(void 0!==I&&A.fmatter.isString(I)){switch(H=A.jgrid.formatter||{},I){case"integer":D=A.extend({},H.integer,D);F=D.thousandsSeparator.replace(E,"\\$1");F=RegExp(F,"g");H=A(G).text().replace(F,"");break;case"number":D=A.extend({},H.number,D);F=D.thousandsSeparator.replace(E,"\\$1");F=RegExp(F,"g");H=A(G).text().replace(F,"").replace(D.decimalSeparator,".");break;case"currency":D=A.extend({},H.currency,D);F=D.thousandsSeparator.replace(E,"\\$1");F=RegExp(F,"g");H=A(G).text();D.prefix&&D.prefix.length&&(H=H.substr(D.prefix.length));D.suffix&&D.suffix.length&&(H=H.substr(0,H.length-D.suffix.length));H=H.replace(F,"").replace(D.decimalSeparator,".");break;case"checkbox":D=F.colModel.editoptions?F.colModel.editoptions.value.split(":"):["Yes","No"];H=A("input",G).is(":checked")?D[0]:D[1];break;case"select":H=A.unformat.select(G,F,J,B);break;case"actions":return"";default:H=A(G).text()}}}return void 0!==H?H:!0===B?A(G).text():A.jgrid.htmlDecode(A(G).html())};A.unformat.select=function(H,G,K,B){K=[];H=A(H).text();if(!0===B){return H}B=A.extend({},void 0!==G.colModel.formatoptions?G.colModel.formatoptions:G.colModel.editoptions);G=void 0===B.separator?":":B.separator;var I=void 0===B.delimiter?";":B.delimiter;if(B.value){var J=B.value;B=!0===B.multiple?!0:!1;var D=[];B&&(D=H.split(","),D=A.map(D,function(L){return A.trim(L)}));if(A.fmatter.isString(J)){var E=J.split(I),C=0,F;for(F=0;F<E.length;F++){if(I=E[F].split(G),2<I.length&&(I[1]=A.map(I,function(M,L){if(0<L){return M}}).join(G)),B){-1<A.inArray(I[1],D)&&(K[C]=I[0],C++)}else{if(A.trim(I[1])===A.trim(H)){K[0]=I[0];break}}}}else{if(A.fmatter.isObject(J)||A.isArray(J)){B||(D[0]=H),K=A.map(D,function(L){var M;A.each(J,function(O,N){if(N===L){return M=O,!1}});if(void 0!==M){return M}})}}return K.join(", ")}return H||""};A.unformat.date=function(D,C){var B=A.jgrid.formatter.date||{};void 0!==C.formatoptions&&(B=A.extend({},B,C.formatoptions));return A.fmatter.isEmpty(D)?A.fn.fmatter.defaultFormat(D,C):A.jgrid.parseDate(B.newformat,D,B.srcformat,B)}})(jQuery);(function(A){A.jgrid.extend({getColProp:function(E){var D={},C=this[0];if(!C.grid){return !1}var C=C.p.colModel,B;for(B=0;B<C.length;B++){if(C[B].name===E){D=C[B];break}}return D},setColProp:function(B,C){return this.each(function(){if(this.grid&&C){var E=this.p.colModel,D;for(D=0;D<E.length;D++){if(E[D].name===B){A.extend(!0,this.p.colModel[D],C);break}}}})},sortGrid:function(D,C,B){return this.each(function(){var E=-1,G,F=!1;if(this.grid){D||(D=this.p.sortname);for(G=0;G<this.p.colModel.length;G++){if(this.p.colModel[G].index===D||this.p.colModel[G].name===D){E=G;!0===this.p.frozenColumns&&!0===this.p.colModel[G].frozen&&(F=this.grid.fhDiv.find("#"+this.p.id+"_"+D));break}}-1!==E&&(G=this.p.colModel[E].sortable,F||(F=this.grid.headers[E].el),"boolean"!==typeof G&&(G=!0),"boolean"!==typeof C&&(C=!1),G&&this.sortData("jqgh_"+this.p.id+"_"+D,E,C,B,F))}})},clearBeforeUnload:function(){return this.each(function(){var C=this.grid;A.isFunction(C.emptyRows)&&C.emptyRows.call(this,!0,!0);A(document).unbind("mouseup.jqGrid"+this.p.id);A(C.hDiv).unbind("mousemove");A(this).unbind();C.dragEnd=null;C.dragMove=null;C.dragStart=null;C.emptyRows=null;C.populate=null;C.populateVisible=null;C.scrollGrid=null;C.selectionPreserver=null;C.bDiv=null;C.cDiv=null;C.hDiv=null;C.cols=null;var D,B=C.headers.length;for(D=0;D<B;D++){C.headers[D].el=null}this.grid=this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&A(this.p.pager).remove();try{A(this).jqGrid("clearBeforeUnload"),A("#gbox_"+A.jgrid.jqID(this.id)).remove()}catch(B){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var C=A(this).attr("id"),D=A(this).attr("class");this.p.pager&&A(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var B=document.createElement("table");A(B).attr({id:C});B.className=D;C=A.jgrid.jqID(this.id);A(B).removeClass("ui-jqgrid-btable");1===A(this.p.pager).parents("#gbox_"+C).length?(A(B).insertBefore("#gbox_"+C).show(),A(this.p.pager).insertBefore("#gbox_"+C)):A(B).insertBefore("#gbox_"+C).show();A(this).jqGrid("clearBeforeUnload");A("#gbox_"+C).remove()}})},setGridState:function(B){return this.each(function(){this.grid&&("hidden"===B?(A(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+A.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&A(this.p.pager).slideUp("fast"),this.p.toppager&&A(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&A(this.grid.ubDiv).slideUp("fast"),A(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&A(".ui-jqgrid-sdiv","#gbox_"+A.jgrid.jqID(this.p.id)).slideUp("fast"),A(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===B&&(A(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+A.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&A(this.p.pager).slideDown("fast"),this.p.toppager&&A(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&A(this.grid.ubDiv).slideDown("fast"),A(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&A(".ui-jqgrid-sdiv","#gbox_"+A.jgrid.jqID(this.p.id)).slideDown("fast"),A(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(B){B=A.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},A.jgrid.search,B||{});return this.each(function(){var F=this;if(!this.ftoolbar){var D=function(){var R={},P=0,Q,O,H={},I;A.each(F.p.colModel,function(){var S=A("#gs_"+A.jgrid.jqID(this.name),!0===this.frozen&&!0===F.p.frozenColumns?F.grid.fhDiv:F.grid.hDiv);O=this.index||this.name;I=B.searchOperators?S.parent().prev().children("a").attr("soper")||B.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":B.defaultSearch;if((Q="custom"===this.stype&&A.isFunction(this.searchoptions.custom_value)&&0<S.length&&"SPAN"===S[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(F,S.children(".customelement:first"),"get"):S.val())||"nu"===I||"nn"===I){R[O]=Q,H[O]=I,P++}else{try{delete F.p.postData[O]}catch(T){}}});var K=0<P?!0:!1;if(!0===B.stringResult||"local"===F.p.datatype){var N='{"groupOp":"'+B.groupOp+'","rules":[',M=0;A.each(R,function(T,S){0<M&&(N+=",");N+='{"field":"'+T+'",';N+='"op":"'+H[T]+'",';N+='"data":"'+(S+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';M++});N+="]}";A.extend(F.p.postData,{filters:N});A.each(["searchField","searchString","searchOper"],function(T,S){F.p.postData.hasOwnProperty(S)&&delete F.p.postData[S]})}else{A.extend(F.p.postData,R)}var J;F.p.searchurl&&(J=F.p.url,A(F).jqGrid("setGridParam",{url:F.p.searchurl}));var L="stop"===A(F).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!L&&A.isFunction(B.beforeSearch)&&(L=B.beforeSearch.call(F));L||A(F).jqGrid("setGridParam",{search:K}).trigger("reloadGrid",[{page:1}]);J&&A(F).jqGrid("setGridParam",{url:J});A(F).triggerHandler("jqGridToolbarAfterSearch");A.isFunction(B.afterSearch)&&B.afterSearch.call(F)},C=function(H,N,O){A("#sopt_menu").remove();N=parseInt(N,10);O=parseInt(O,10)+18;N='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+(A(".ui-jqgrid-view").css("font-size")||"11px")+";left:"+N+"px;top:"+O+'px;">';O=A(H).attr("soper");var K,L=[],J,I=0,M=A(H).attr("colname");for(K=F.p.colModel.length;I<K&&F.p.colModel[I].name!==M;){I++}I=F.p.colModel[I];M=A.extend({},I.searchoptions);M.sopt||(M.sopt=[],M.sopt[0]="select"===I.stype?"eq":B.defaultSearch);A.each(B.odata,function(){L.push(this.oper)});for(I=0;I<M.sopt.length;I++){J=A.inArray(M.sopt[I],L),-1!==J&&(K=O===B.odata[J].oper?"ui-state-highlight":"",N+='<li class="ui-menu-item '+K+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+B.odata[J].oper+'" oper="'+B.operands[B.odata[J].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+B.operands[B.odata[J].oper]+"</td><td>"+B.odata[J].text+"</td></tr></table></a></li>")}N+="</ul>";A("body").append(N);A("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");A("#sopt_menu > li > a").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")}).click(function(Q){Q=A(this).attr("value");var P=A(this).attr("oper");A(F).triggerHandler("jqGridToolbarSelectOper",[Q,P,H]);A("#sopt_menu").hide();A(H).text(P).attr("soper",Q);!0===B.autosearch&&(P=A(H).parent().next().children()[0],(A(P).val()||"nu"===Q||"nn"===Q)&&D())})},G=A("<tr class='ui-search-toolbar' role='rowheader'></tr>"),E;A.each(F.p.colModel,function(O){var U=this,V,R;R="";var S="=",J,I=A("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+F.p.direction+"'></th>"),Q=A("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'></div>"),P=A("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear'></td></tr></table>");!0===this.hidden&&A(I).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");V=A.extend({},this.searchoptions||{});if(this.search){if(B.searchOperators){R=V.sopt?V.sopt[0]:"select"===U.stype?"eq":B.defaultSearch;for(J=0;J<B.odata.length;J++){if(B.odata[J].oper===R){S=B.operands[R]||"";break}}R="<a title='"+(null!=V.searchtitle?V.searchtitle:B.operandTitle)+"' style='padding-right: 0.5em;' soper='"+R+"' class='soptclass' colname='"+this.name+"'>"+S+"</a>"}A("td:eq(0)",P).attr("colindex",O).append(R);void 0===V.clearSearch&&(V.clearSearch=!0);V.clearSearch?(R=B.resetTitle||"Clear Search Value",A("td:eq(2)",P).append("<a title='"+R+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+B.resetIcon+"</a>")):A("td:eq(2)",P).hide();switch(this.stype){case"select":if(R=this.surl||V.dataUrl){A(Q).append(P),A.ajax(A.extend({url:R,dataType:"html",success:function(W){void 0!==V.buildSelect?(W=V.buildSelect(W))&&A("td:eq(1)",P).append(W):A("td:eq(1)",P).append(W);void 0!==V.defaultValue&&A("select",Q).val(V.defaultValue);A("select",Q).attr({name:U.index||U.name,id:"gs_"+U.name});V.attr&&A("select",Q).attr(V.attr);A("select",Q).css({width:"100%"});A.jgrid.bindEv.call(F,A("select",Q)[0],V);!0===B.autosearch&&A("select",Q).change(function(){D();return !1});W=null}},A.jgrid.ajaxOptions,F.p.ajaxSelectOptions||{}))}else{var H,L,N;U.searchoptions?(H=void 0===U.searchoptions.value?"":U.searchoptions.value,L=void 0===U.searchoptions.separator?":":U.searchoptions.separator,N=void 0===U.searchoptions.delimiter?";":U.searchoptions.delimiter):U.editoptions&&(H=void 0===U.editoptions.value?"":U.editoptions.value,L=void 0===U.editoptions.separator?":":U.editoptions.separator,N=void 0===U.editoptions.delimiter?";":U.editoptions.delimiter);if(H){var M=document.createElement("select");M.style.width="100%";A(M).attr({name:U.index||U.name,id:"gs_"+U.name});var K;if("string"===typeof H){for(R=H.split(N),K=0;K<R.length;K++){H=R[K].split(L),N=document.createElement("option"),N.value=H[0],N.innerHTML=H[1],M.appendChild(N)}}else{if("object"===typeof H){for(K in H){H.hasOwnProperty(K)&&(N=document.createElement("option"),N.value=K,N.innerHTML=H[K],M.appendChild(N))}}}void 0!==V.defaultValue&&A(M).val(V.defaultValue);V.attr&&A(M).attr(V.attr);A(Q).append(P);A.jgrid.bindEv.call(F,M,V);A("td:eq(1)",P).append(M);!0===B.autosearch&&A(M).change(function(){D();return !1})}}break;case"text":L=void 0!==V.defaultValue?V.defaultValue:"";A("td:eq(1)",P).append("<input type='text' style='width:100%;padding:0px;' name='"+(U.index||U.name)+"' id='gs_"+U.name+"' value='"+L+"'/>");A(Q).append(P);V.attr&&A("input",Q).attr(V.attr);A.jgrid.bindEv.call(F,A("input",Q)[0],V);!0===B.autosearch&&(B.searchOnEnter?A("input",Q).keypress(function(W){return 13===(W.charCode||W.keyCode||0)?(D(),!1):this}):A("input",Q).keydown(function(W){switch(W.which){case 13:return !1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:E&&clearTimeout(E),E=setTimeout(function(){D()},500)}}));break;case"custom":A("td:eq(1)",P).append("<span style='width:95%;padding:0px;' name='"+(U.index||U.name)+"' id='gs_"+U.name+"'/>");A(Q).append(P);try{if(A.isFunction(V.custom_element)){if(M=V.custom_element.call(F,void 0!==V.defaultValue?V.defaultValue:"",V)){M=A(M).addClass("customelement"),A(Q).find(">span").append(M)}else{throw"e2"}}else{throw"e1"}}catch(T){"e1"===T&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===T?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,"string"===typeof T?T:T.message,A.jgrid.edit.bClose)}}}A(I).append(Q);A(G).append(I);B.searchOperators||A("td:eq(0)",P).hide()});A("table thead",F.grid.hDiv).append(G);B.searchOperators&&(A(".soptclass",G).click(function(H){var I=A(this).offset();C(this,I.left,I.top);H.stopPropagation()}),A("body").on("click",function(H){"soptclass"!==H.target.className&&A("#sopt_menu").hide()}));A(".clearsearchclass",G).click(function(I){I=A(this).parents("tr:first");var J=parseInt(A("td.ui-search-oper",I).attr("colindex"),10),H=A.extend({},F.p.colModel[J].searchoptions||{}),H=H.defaultValue?H.defaultValue:"";"select"===F.p.colModel[J].stype?H?A("td.ui-search-input select",I).val(H):A("td.ui-search-input select",I)[0].selectedIndex=0:A("td.ui-search-input input",I).val(H);!0===B.autosearch&&D()});this.ftoolbar=!0;this.triggerToolbar=D;this.clearToolbar=function(P){var N={},O=0,H;P="boolean"!==typeof P?!0:P;A.each(F.p.colModel,function(){var S,R=A("#gs_"+A.jgrid.jqID(this.name),!0===this.frozen&&!0===F.p.frozenColumns?F.grid.fhDiv:F.grid.hDiv);this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(S=this.searchoptions.defaultValue);H=this.index||this.name;switch(this.stype){case"select":R.find("option").each(function(U){0===U&&(this.selected=!0);if(A(this).val()===S){return this.selected=!0,!1}});if(void 0!==S){N[H]=S,O++}else{try{delete F.p.postData[H]}catch(Q){}}break;case"text":R.val(S||"");if(void 0!==S){N[H]=S,O++}else{try{delete F.p.postData[H]}catch(T){}}break;case"custom":A.isFunction(this.searchoptions.custom_value)&&0<R.length&&"SPAN"===R[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(F,R.children(".customelement:first"),"set",S||"")}});var J=0<O?!0:!1;F.p.resetsearch=!0;if(!0===B.stringResult||"local"===F.p.datatype){var K='{"groupOp":"'+B.groupOp+'","rules":[',I=0;A.each(N,function(R,Q){0<I&&(K+=",");K+='{"field":"'+R+'",';K+='"op":"eq",';K+='"data":"'+(Q+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';I++});K+="]}";A.extend(F.p.postData,{filters:K});A.each(["searchField","searchString","searchOper"],function(R,Q){F.p.postData.hasOwnProperty(Q)&&delete F.p.postData[Q]})}else{A.extend(F.p.postData,N)}var M;F.p.searchurl&&(M=F.p.url,A(F).jqGrid("setGridParam",{url:F.p.searchurl}));var L="stop"===A(F).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!L&&A.isFunction(B.beforeClear)&&(L=B.beforeClear.call(F));L||P&&A(F).jqGrid("setGridParam",{search:J}).trigger("reloadGrid",[{page:1}]);M&&A(F).jqGrid("setGridParam",{url:M});A(F).triggerHandler("jqGridToolbarAfterClear");A.isFunction(B.afterClear)&&B.afterClear()};this.toggleToolbar=function(){var I=A("tr.ui-search-toolbar",F.grid.hDiv),H=!0===F.p.frozenColumns?A("tr.ui-search-toolbar",F.grid.fhDiv):!1;"none"===I.css("display")?(I.show(),H&&H.show()):(I.hide(),H&&H.hide())}}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,A(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(B){void 0===B&&(B=!0);return this.each(function(){var H,K,F,E,C,D;K=this.grid;var I=A("table.ui-jqgrid-htable thead",K.hDiv),J=this.p.colModel;if(K){A(this).unbind(".setGroupHeaders");H=A("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");E=K.headers;K=0;for(F=E.length;K<F;K++){C=J[K].hidden?"none":"";C=A(E[K].el).width(E[K].width).css("display",C);try{C.removeAttr("rowSpan")}catch(G){C.attr("rowSpan",1)}H.append(C);D=C.children("span.ui-jqgrid-resize");0<D.length&&(D[0].style.height="");C.children("div")[0].style.top=""}A(I).children("tr.ui-jqgrid-labels").remove();A(I).prepend(H);!0===B&&A(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(B){B=A.extend({useColSpanStyle:!1,groupHeaders:[]},B||{});return this.each(function(){this.p.groupHeader=B;var N,R,J=0,I,C,D,P,Q,M=this.p.colModel,F=M.length,H=this.grid.headers,E=A("table.ui-jqgrid-htable",this.grid.hDiv),L=E.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");I=E.children("thead");var K=E.find(".jqg-first-row-header");void 0===K[0]?K=A("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):K.empty();var O,G=function(V,T){var U=T.length,S;for(S=0;S<U;S++){if(T[S].startColumnName===V){return S}}return -1};A(this).prepend(I);I=A("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(N=0;N<F;N++){if(D=H[N].el,P=A(D),R=M[N],C={height:"0px",width:H[N].width+"px",display:R.hidden?"none":""},A("<th>",{role:"gridcell"}).css(C).addClass("ui-first-th-"+this.p.direction).appendTo(K),D.style.width="",C=G(R.name,B.groupHeaders),0<=C){C=B.groupHeaders[C];J=C.numberOfColumns;Q=C.titleText;for(C=R=0;C<J&&N+C<F;C++){M[N+C].hidden||R++}C=A("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"28px","border-top":"0 none"}).html(Q);0<R&&C.attr("colspan",String(R));this.p.headertitles&&C.attr("title",C.text());0===R&&C.hide();P.before(C);I.append(D);J-=1}else{0===J?B.useColSpanStyle?P.attr("rowspan","2"):(A("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:R.hidden?"none":"","border-top":"0 none"}).insertBefore(P),I.append(D)):(I.append(D),J--)}}M=A(this).children("thead");M.prepend(K);I.insertAfter(L);E.append(M);B.useColSpanStyle&&(E.find("span.ui-jqgrid-resize").each(function(){var S=A(this).parent();S.is(":visible")&&(this.style.cssText="height: "+S.height()+"px !important; cursor: col-resize;")}),E.find("div.ui-jqgrid-sortable").each(function(){var S=A(this),T=S.parent();T.is(":visible")&&T.is(":has(span.ui-jqgrid-resize)")&&S.css("top",(T.height()-S.outerHeight())/2-2+"px")}));O=M.find("tr.jqg-first-row-header");A(this).bind("jqGridResizeStop.setGroupHeaders",function(U,S,T){O.find("th").eq(T).width(S)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var G=this,H=G.p.colModel,K=0,E=H.length,D=-1,B=!1;if(!0!==G.p.subGrid&&!0!==G.p.treeGrid&&!0!==G.p.cellEdit&&!G.p.sortable&&!G.p.scroll){G.p.rownumbers&&K++;for(G.p.multiselect&&K++;K<E;){if(!0===H[K].frozen){B=!0,D=K}else{break}K++}if(0<=D&&B){H=G.p.caption?A(G.grid.cDiv).outerHeight():0;K=A(".ui-jqgrid-htable","#gview_"+A.jgrid.jqID(G.p.id)).height();G.p.toppager&&(H+=A(G.grid.topDiv).outerHeight());!0===G.p.toolbar[0]&&"bottom"!==G.p.toolbar[1]&&(H+=A(G.grid.uDiv).outerHeight());G.grid.fhDiv=A('<div style="position:absolute;left:0px;top:'+H+"px;height:"+K+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');G.grid.fbDiv=A('<div style="position:absolute;left:0px;top:'+(parseInt(H,10)+parseInt(K,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');A("#gview_"+A.jgrid.jqID(G.p.id)).append(G.grid.fhDiv);H=A(".ui-jqgrid-htable","#gview_"+A.jgrid.jqID(G.p.id)).clone(!0);if(G.p.groupHeader){A("tr.jqg-first-row-header, tr.jqg-third-row-header",H).each(function(){A("th:gt("+D+")",this).remove()});var C=-1,I=-1,J,F;A("tr.jqg-second-row-header th",H).each(function(){J=parseInt(A(this).attr("colspan"),10);if(F=parseInt(A(this).attr("rowspan"),10)){C++,I++}J&&(C+=J,I++);if(C===D){return !1}});C!==D&&(I=D);A("tr.jqg-second-row-header",H).each(function(){A("th:gt("+I+")",this).remove()})}else{A("tr",H).each(function(){A("th:gt("+D+")",this).remove()})}A(H).width(1);A(G.grid.fhDiv).append(H).mousemove(function(L){if(G.grid.resizing){return G.grid.dragMove(L),!1}});A(G).bind("jqGridResizeStop.setFrozenColumns",function(N,L,M){N=A(".ui-jqgrid-htable",G.grid.fhDiv);A("th:eq("+M+")",N).width(L);N=A(".ui-jqgrid-btable",G.grid.fbDiv);A("tr:first td:eq("+M+")",N).width(L)});A(G).bind("jqGridSortCol.setFrozenColumns",function(N,L,M){N=A("tr.ui-jqgrid-labels:last th:eq("+G.p.lastsort+")",G.grid.fhDiv);L=A("tr.ui-jqgrid-labels:last th:eq("+M+")",G.grid.fhDiv);A("span.ui-grid-ico-sort",N).addClass("ui-state-disabled");A(N).attr("aria-selected","false");A("span.ui-icon-"+G.p.sortorder,L).removeClass("ui-state-disabled");A(L).attr("aria-selected","true");G.p.viewsortcols[0]||G.p.lastsort===M||(A("span.s-ico",N).hide(),A("span.s-ico",L).show())});A("#gview_"+A.jgrid.jqID(G.p.id)).append(G.grid.fbDiv);A(G.grid.bDiv).scroll(function(){A(G.grid.fbDiv).scrollTop(A(this).scrollTop())});!0===G.p.hoverrows&&A("#"+A.jgrid.jqID(G.p.id)).unbind("mouseover").unbind("mouseout");A(G).bind("jqGridAfterGridComplete.setFrozenColumns",function(){A("#"+A.jgrid.jqID(G.p.id)+"_frozen").remove();A(G.grid.fbDiv).height(A(G.grid.bDiv).height()-16);var L=A("#"+A.jgrid.jqID(G.p.id)).clone(!0);A("tr[role=row]",L).each(function(){A("td[role=gridcell]:gt("+D+")",this).remove()});A(L).width(1).attr("id",G.p.id+"_frozen");A(G.grid.fbDiv).append(L);!0===G.p.hoverrows&&(A("tr.jqgrow",L).hover(function(){A(this).addClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)).removeClass("ui-state-hover")}),A("tr.jqgrow","#"+A.jgrid.jqID(G.p.id)).hover(function(){A(this).addClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)+"_frozen").addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)+"_frozen").removeClass("ui-state-hover")}));L=null});G.grid.hDiv.loading||A(G).triggerHandler("jqGridAfterGridComplete");G.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){A(this.grid.fhDiv).remove();A(this.grid.fbDiv).remove();this.grid.fhDiv=null;this.grid.fbDiv=null;A(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var B;A("#"+A.jgrid.jqID(this.p.id)).bind("mouseover",function(C){B=A(C.target).closest("tr.jqgrow");"ui-subgrid"!==A(B).attr("class")&&A(B).addClass("ui-state-hover")}).bind("mouseout",function(C){B=A(C.target).closest("tr.jqgrow");A(B).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})})(jQuery);(function(A){A.extend(A.jgrid,{showModal:function(B){B.w.show()},closeModal:function(B){B.w.hide().attr("aria-hidden","true");B.o&&B.o.remove()},hideModal:function(C,D){D=A.extend({jqm:!0,gb:""},D||{});if(D.onClose){var E=D.gb&&"string"===typeof D.gb&&"#gbox_"===D.gb.substr(0,6)?D.onClose.call(A("#"+D.gb.substr(6))[0],C):D.onClose(C);if("boolean"===typeof E&&!E){return}}if(A.fn.jqm&&!0===D.jqm){A(C).attr("aria-hidden","true").jqmHide()}else{if(""!==D.gb){try{A(".jqgrid-overlay:first",D.gb).hide()}catch(B){}}A(C).hide().attr("aria-hidden","true")}},findPos:function(D){var B=0,C=0;if(D.offsetParent){do{B+=D.offsetLeft,C+=D.offsetTop}while(D=D.offsetParent)}return[B,C]},createModal:function(P,L,M,O,B,H,N){M=A.extend(!0,{},A.jgrid.jqModal||{},M);var G=document.createElement("div"),J,K=this;N=A.extend({},N||{});J="rtl"===A(M.gbox).attr("dir")?!0:!1;G.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";G.id=P.themodal;var I=document.createElement("div");I.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";I.id=P.modalhead;A(I).append("<span class='ui-jqdialog-title'>"+M.caption+"</span>");var E=A("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){E.addClass("ui-state-hover")},function(){E.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");A(I).append(E);J?(G.dir="rtl",A(".ui-jqdialog-title",I).css("float","right"),A(".ui-jqdialog-titlebar-close",I).css("left","0.3em")):(G.dir="ltr",A(".ui-jqdialog-title",I).css("float","left"),A(".ui-jqdialog-titlebar-close",I).css("right","0.3em"));var D=document.createElement("div");A(D).addClass("ui-jqdialog-content ui-widget-content").attr("id",P.modalcontent);A(D).append(L);G.appendChild(D);A(G).prepend(I);!0===H?A("body").append(G):"string"===typeof H?A(H).append(G):A(G).insertBefore(O);A(G).css(N);void 0===M.jqModal&&(M.jqModal=!0);L={};if(A.fn.jqm&&!0===M.jqModal){0===M.left&&0===M.top&&M.overlay&&(N=[],N=A.jgrid.findPos(B),M.left=N[0]+4,M.top=N[1]+4),L.top=M.top+"px",L.left=M.left}else{if(0!==M.left||0!==M.top){L.left=M.left,L.top=M.top+"px"}}A("a.ui-jqdialog-titlebar-close",I).click(function(){var R=A("#"+A.jgrid.jqID(P.themodal)).data("onClose")||M.onClose,Q=A("#"+A.jgrid.jqID(P.themodal)).data("gbox")||M.gbox;K.hideModal("#"+A.jgrid.jqID(P.themodal),{gb:Q,jqm:M.jqModal,onClose:R});return !1});0!==M.width&&M.width||(M.width=300);0!==M.height&&M.height||(M.height=200);M.zIndex||(O=A(O).parents("*[role=dialog]").filter(":first").css("z-index"),M.zIndex=O?parseInt(O,10)+2:950);O=0;J&&L.left&&!H&&(O=A(M.gbox).width()-(isNaN(M.width)?0:parseInt(M.width,10))-8,L.left=parseInt(L.left,10)+parseInt(O,10));L.left&&(L.left+="px");A(G).css(A.extend({width:isNaN(M.width)?"auto":M.width+"px",height:isNaN(M.height)?"auto":M.height+"px",zIndex:M.zIndex,overflow:"hidden"},L)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":P.modalhead,"aria-hidden":"true"});void 0===M.drag&&(M.drag=!0);void 0===M.resize&&(M.resize=!0);if(M.drag){if(A(I).css("cursor","move"),A.fn.jqDrag){A(G).jqDrag(I)}else{try{A(G).draggable({handle:A("#"+A.jgrid.jqID(I.id))})}catch(F){}}}if(M.resize){if(A.fn.jqResize){A(G).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),A("#"+A.jgrid.jqID(P.themodal)).jqResize(".jqResize",P.scrollelm?"#"+A.jgrid.jqID(P.scrollelm):!1)}else{try{A(G).resizable({handles:"se, sw",alsoResize:P.scrollelm?"#"+A.jgrid.jqID(P.scrollelm):!1})}catch(C){}}}!0===M.closeOnEscape&&A(G).keydown(function(Q){27==Q.which&&(Q=A("#"+A.jgrid.jqID(P.themodal)).data("onClose")||M.onClose,K.hideModal("#"+A.jgrid.jqID(P.themodal),{gb:M.gbox,jqm:M.jqModal,onClose:Q}))})},viewModal:function(B,C){C=A.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:A.jgrid.showModal,onHide:A.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},C||{});if(A.fn.jqm&&!0===C.jqm){C.jqM?A(B).attr("aria-hidden","false").jqm(C).jqmShow():A(B).attr("aria-hidden","false").jqmShow()}else{""!==C.gbox&&(A(".jqgrid-overlay:first",C.gbox).show(),A(B).data("gbox",C.gbox));A(B).show().attr("aria-hidden","false");try{A(":input:visible",B)[0].focus()}catch(D){}}},info_dialog:function(J,F,G,I){var B={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1000,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};A.extend(!0,B,A.jgrid.jqModal||{},{caption:"<b>"+J+"</b>"},I||{});var D=B.jqModal,H=this;A.fn.jqm&&!D&&(D=!1);J="";if(0<B.buttons.length){for(I=0;I<B.buttons.length;I++){void 0===B.buttons[I].id&&(B.buttons[I].id="info_button_"+I),J+="<a id='"+B.buttons[I].id+"' class='fm-button ui-state-default ui-corner-all'>"+B.buttons[I].text+"</a>"}}I=isNaN(B.dataheight)?B.dataheight:B.dataheight+"px";F="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+I+";"+("text-align:"+B.align+";")+"'>"+F+"</div>");F+=G?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+B.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+G+"</a>"+J+"</div>":""!==J?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+B.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+J+"</div>":"";F+="</div>";try{"false"===A("#info_dialog").attr("aria-hidden")&&A.jgrid.hideModal("#info_dialog",{jqm:D}),A("#info_dialog").remove()}catch(C){}A.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},F,B,"","",!0);J&&A.each(B.buttons,function(K){A("#"+A.jgrid.jqID(this.id),"#info_id").bind("click",function(){B.buttons[K].onClick.call(A("#info_dialog"));return !1})});A("#closedialog","#info_id").click(function(){H.hideModal("#info_dialog",{jqm:D,onClose:A("#info_dialog").data("onClose")||B.onClose,gb:A("#info_dialog").data("gbox")||B.gbox});return !1});A(".fm-button","#info_dialog").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});A.isFunction(B.beforeOpen)&&B.beforeOpen();A.jgrid.viewModal("#info_dialog",{onHide:function(K){K.w.hide().remove();K.o&&K.o.remove()},modal:B.modal,jqm:D});A.isFunction(B.afterOpen)&&B.afterOpen();try{A("#info_dialog").focus()}catch(E){}},bindEv:function(B,C){A.isFunction(C.dataInit)&&C.dataInit.call(this,B,C);C.dataEvents&&A.each(C.dataEvents,function(){void 0!==this.data?A(B).bind(this.type,this.data,this.fn):A(B).bind(this.type,this.fn)})},createEl:function(O,K,L,N,B){function G(R,P,S){var Q="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr custom_element custom_value".split(" ");void 0!==S&&A.isArray(S)&&A.merge(Q,S);A.each(P,function(T,U){-1===A.inArray(T,Q)&&A(R).attr(T,U)});P.hasOwnProperty("id")||A(R).attr("id",A.jgrid.randId())}var M="",F=this;switch(O){case"textarea":M=document.createElement("textarea");N?K.cols||A(M).css({width:"100%"}):K.cols||(K.cols=20);K.rows||(K.rows=2);if("&nbsp;"===L||"&#160;"===L||1===L.length&&160===L.charCodeAt(0)){L=""}M.value=L;G(M,K);A(M).attr({role:"textbox",multiline:"true"});break;case"checkbox":M=document.createElement("input");M.type="checkbox";K.value?(O=K.value.split(":"),L===O[0]&&(M.checked=!0,M.defaultChecked=!0),M.value=O[0],A(M).attr("offval",O[1])):(O=(L+"").toLowerCase(),0>O.search(/(false|f|0|no|n|off|undefined)/i)&&""!==O?(M.checked=!0,M.defaultChecked=!0,M.value=L):M.value="on",A(M).attr("offval","off"));G(M,K,["value"]);A(M).attr("role","checkbox");break;case"select":M=document.createElement("select");M.setAttribute("role","select");N=[];!0===K.multiple?(O=!0,M.multiple="multiple",A(M).attr("aria-multiselectable","true")):O=!1;if(void 0!==K.dataUrl){O=K.name?String(K.id).substring(0,String(K.id).length-String(K.name).length-1):String(K.id);var I=K.postData||B.postData;F.p&&F.p.idPrefix&&(O=A.jgrid.stripPref(F.p.idPrefix,O));A.ajax(A.extend({url:A.isFunction(K.dataUrl)?K.dataUrl.call(F,O,L,String(K.name)):K.dataUrl,type:"GET",dataType:"html",data:A.isFunction(I)?I.call(F,O,L,String(K.name)):I,context:{elem:M,options:K,vl:L},success:function(S){var Q=[],T=this.elem,R=this.vl,U=A.extend({},this.options),P=!0===U.multiple;S=A.isFunction(U.buildSelect)?U.buildSelect.call(F,S):S;"string"===typeof S&&(S=A(A.trim(S)).html());S&&(A(T).append(S),G(T,U,I?["postData"]:void 0),void 0===U.size&&(U.size=P?3:1),P?(Q=R.split(","),Q=A.map(Q,function(V){return A.trim(V)})):Q[0]=A.trim(R),setTimeout(function(){A("option",T).each(function(V){0===V&&T.multiple&&(this.selected=!1);A(this).attr("role","option");if(-1<A.inArray(A.trim(A(this).text()),Q)||-1<A.inArray(A.trim(A(this).val()),Q)){this.selected="selected"}})},0))}},B||{}))}else{if(K.value){var J;void 0===K.size&&(K.size=O?3:1);O&&(N=L.split(","),N=A.map(N,function(P){return A.trim(P)}));"function"===typeof K.value&&(K.value=K.value());var H,D,C=void 0===K.separator?":":K.separator;B=void 0===K.delimiter?";":K.delimiter;if("string"===typeof K.value){for(H=K.value.split(B),J=0;J<H.length;J++){D=H[J].split(C),2<D.length&&(D[1]=A.map(D,function(Q,P){if(0<P){return Q}}).join(C)),B=document.createElement("option"),B.setAttribute("role","option"),B.value=D[0],B.innerHTML=D[1],M.appendChild(B),O||A.trim(D[0])!==A.trim(L)&&A.trim(D[1])!==A.trim(L)||(B.selected="selected"),O&&(-1<A.inArray(A.trim(D[1]),N)||-1<A.inArray(A.trim(D[0]),N))&&(B.selected="selected")}}else{if("object"===typeof K.value){for(J in C=K.value,C){C.hasOwnProperty(J)&&(B=document.createElement("option"),B.setAttribute("role","option"),B.value=J,B.innerHTML=C[J],M.appendChild(B),O||A.trim(J)!==A.trim(L)&&A.trim(C[J])!==A.trim(L)||(B.selected="selected"),O&&(-1<A.inArray(A.trim(C[J]),N)||-1<A.inArray(A.trim(J),N))&&(B.selected="selected"))}}}G(M,K,["value"])}}break;case"text":case"password":case"button":J="button"===O?"button":"textbox";M=document.createElement("input");M.type=O;M.value=L;G(M,K);"button"!==O&&(N?K.size||A(M).css({width:"100%"}):K.size||(K.size=20));A(M).attr("role",J);break;case"image":case"file":M=document.createElement("input");M.type=O;G(M,K);break;case"custom":M=document.createElement("span");try{if(A.isFunction(K.custom_element)){if(C=K.custom_element.call(F,L,K)){C=A(C).addClass("customelement").attr({id:K.id,name:K.name}),A(M).empty().append(C)}else{throw"e2"}}else{throw"e1"}}catch(E){"e1"===E&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===E?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,"string"===typeof E?E:E.message,A.jgrid.edit.bClose)}}return M},checkDate:function(H,F){var G={},J;H=H.toLowerCase();J=-1!==H.indexOf("/")?"/":-1!==H.indexOf("-")?"-":-1!==H.indexOf(".")?".":"/";H=H.split(J);F=F.split(J);if(3!==F.length){return !1}var B=-1,D,I=J=-1,C;for(C=0;C<H.length;C++){D=isNaN(F[C])?0:parseInt(F[C],10),G[H[C]]=D,D=H[C],-1!==D.indexOf("y")&&(B=C),-1!==D.indexOf("m")&&(I=C),-1!==D.indexOf("d")&&(J=C)}D="y"===H[B]||"yyyy"===H[B]?4:"yy"===H[B]?2:-1;C=[0,31,29,31,30,31,30,31,31,30,31,30,31];var E;if(-1===B){return !1}E=G[H[B]].toString();2===D&&1===E.length&&(D=1);if(E.length!==D||0===G[H[B]]&&"00"!==F[B]||-1===I){return !1}E=G[H[I]].toString();if(1>E.length||1>G[H[I]]||12<G[H[I]]||-1===J){return !1}E=G[H[J]].toString();if(!(D=1>E.length)&&!(D=1>G[H[J]])&&!(D=31<G[H[J]])){if(D=2===G[H[I]]){B=G[H[B]],D=G[H[J]]>(0!==B%4||0===B%100&&0!==B%400?28:29)}D=D||G[H[J]]>C[G[H[I]]]}return D?!1:!0},isEmpty:function(B){return B.match(/^\s+$/)||""===B?!0:!1},checkTime:function(B){var C=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!A.jgrid.isEmpty(B)){if(B=B.match(C)){if(B[3]){if(1>B[1]||12<B[1]){return !1}}else{if(23<B[1]){return !1}}if(59<B[2]){return !1}}else{return !1}}return !0},checkValues:function(C,F,G,B){var D,E,H;H=this.p.colModel;if(void 0===G){if("string"===typeof F){for(G=0,B=H.length;G<B;G++){if(H[G].name===F){D=H[G].editrules;F=G;null!=H[G].formoptions&&(E=H[G].formoptions.label);break}}}else{0<=F&&(D=H[F].editrules)}}else{D=G,E=void 0===B?"_":B}if(D){E||(E=null!=this.p.colNames?this.p.colNames[F]:H[F].label);if(!0===D.required&&A.jgrid.isEmpty(C)){return[!1,E+": "+A.jgrid.edit.msg.required,""]}G=!1===D.required?!1:!0;if(!0===D.number&&(!1!==G||!A.jgrid.isEmpty(C))&&isNaN(C)){return[!1,E+": "+A.jgrid.edit.msg.number,""]}if(void 0!==D.minValue&&!isNaN(D.minValue)&&parseFloat(C)<parseFloat(D.minValue)){return[!1,E+": "+A.jgrid.edit.msg.minValue+" "+D.minValue,""]}if(void 0!==D.maxValue&&!isNaN(D.maxValue)&&parseFloat(C)>parseFloat(D.maxValue)){return[!1,E+": "+A.jgrid.edit.msg.maxValue+" "+D.maxValue,""]}if(!(!0!==D.email||!1===G&&A.jgrid.isEmpty(C)||(B=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,B.test(C)))){return[!1,E+": "+A.jgrid.edit.msg.email,""]}if(!(!0!==D.integer||!1===G&&A.jgrid.isEmpty(C)||!isNaN(C)&&0===C%1&&-1===C.indexOf("."))){return[!1,E+": "+A.jgrid.edit.msg.integer,""]}if(!(!0!==D.date||!1===G&&A.jgrid.isEmpty(C)||(H[F].formatoptions&&H[F].formatoptions.newformat?(H=H[F].formatoptions.newformat,A.jgrid.formatter.date.masks.hasOwnProperty(H)&&(H=A.jgrid.formatter.date.masks[H])):H=H[F].datefmt||"Y-m-d",A.jgrid.checkDate(H,C)))){return[!1,E+": "+A.jgrid.edit.msg.date+" - "+H,""]}if(!0===D.time&&!(!1===G&&A.jgrid.isEmpty(C)||A.jgrid.checkTime(C))){return[!1,E+": "+A.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}if(!(!0!==D.url||!1===G&&A.jgrid.isEmpty(C)||(B=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,B.test(C)))){return[!1,E+": "+A.jgrid.edit.msg.url,""]}if(!0===D.custom&&(!1!==G||!A.jgrid.isEmpty(C))){return A.isFunction(D.custom_func)?(C=D.custom_func.call(this,C,E,F),A.isArray(C)?C:[!1,A.jgrid.edit.msg.customarray,""]):[!1,A.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})})(jQuery);(function(B){var A={};B.jgrid.extend({searchGrid:function(C){C=B.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},B.jgrid.search,C||{});return this.each(function(){function P(D){J=B(T).triggerHandler("jqGridFilterBeforeShow",[D]);void 0===J&&(J=!0);J&&B.isFunction(C.beforeShowSearch)&&(J=C.beforeShowSearch.call(T,D));J&&(B.jgrid.viewModal("#"+B.jgrid.jqID(F.themodal),{gbox:"#gbox_"+B.jgrid.jqID(N),jqm:C.jqModal,modal:C.modal,overlay:C.overlay,toTop:C.toTop}),B(T).triggerHandler("jqGridFilterAfterShow",[D]),B.isFunction(C.afterShowSearch)&&C.afterShowSearch.call(T,D))}var T=this;if(T.grid){var N="fbox_"+T.p.id,J=!0,K=!0,F={themodal:"searchmod"+N,modalhead:"searchhd"+N,modalcontent:"searchcnt"+N,scrollelm:N},E=T.p.postData[C.sFilter];"string"===typeof E&&(E=B.jgrid.parse(E));!0===C.recreateFilter&&B("#"+B.jgrid.jqID(F.themodal)).remove();if(void 0!==B("#"+B.jgrid.jqID(F.themodal))[0]){P(B("#fbox_"+B.jgrid.jqID(+T.p.id)))}else{var Q=B("<div><div id='"+N+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+B.jgrid.jqID(T.p.id)),M="left",L="";"rtl"===T.p.direction&&(M="right",L=" style='text-align:left'",Q.attr("dir","rtl"));var V=B.extend([],T.p.colModel),S="<a id='"+N+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+C.Find+"</a>",I="<a id='"+N+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+C.Reset+"</a>",R="",O="",G,H=!1,W=-1;C.showQuery&&(R="<a id='"+N+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>");C.columns.length?(V=C.columns,W=0,G=V[0].index||V[0].name):B.each(V,function(Z,X){X.label||(X.label=T.p.colNames[Z]);if(!H){var Y=void 0===X.search?!0:X.search,D=!0===X.hidden;if(X.searchoptions&&!0===X.searchoptions.searchhidden&&Y||Y&&!D){H=!0,G=X.index||X.name,W=Z}}});if(!E&&G||!1===C.multipleSearch){var U="eq";0<=W&&V[W].searchoptions&&V[W].searchoptions.sopt?U=V[W].searchoptions.sopt[0]:C.sopt&&C.sopt.length&&(U=C.sopt[0]);E={groupOp:"AND",rules:[{field:G,op:U,data:""}]}}H=!1;C.tmplNames&&C.tmplNames.length&&(H=!0,O=C.tmplLabel,O+="<select class='ui-template'>",O+="<option value='default'>Default</option>",B.each(C.tmplNames,function(X,D){O+="<option value='"+X+"'>"+D+"</option>"}),O+="</select>");M="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+N+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+M+"'>"+I+O+"</td><td class='EditButton' "+L+">"+R+S+"</td></tr></tbody></table>";N=B.jgrid.jqID(N);B("#"+N).jqFilter({columns:V,filter:C.loadDefaults?E:null,showQuery:C.showQuery,errorcheck:C.errorcheck,sopt:C.sopt,groupButton:C.multipleGroup,ruleButtons:C.multipleSearch,afterRedraw:C.afterRedraw,ops:C.odata,operands:C.operands,ajaxSelectOptions:T.p.ajaxSelectOptions,groupOps:C.groupOps,onChange:function(){this.p.showQuery&&B(".query",this).html(this.toUserFriendlyString());B.isFunction(C.afterChange)&&C.afterChange.call(T,B("#"+N),C)},direction:T.p.direction,id:T.p.id});Q.append(M);H&&C.tmplFilters&&C.tmplFilters.length&&B(".ui-template",Q).bind("change",function(){var D=B(this).val();"default"===D?B("#"+N).jqFilter("addFilter",E):B("#"+N).jqFilter("addFilter",C.tmplFilters[parseInt(D,10)]);return !1});!0===C.multipleGroup&&(C.multipleSearch=!0);B(T).triggerHandler("jqGridFilterInitialize",[B("#"+N)]);B.isFunction(C.onInitializeSearch)&&C.onInitializeSearch.call(T,B("#"+N));C.gbox="#gbox_"+N;C.layer?B.jgrid.createModal(F,Q,C,"#gview_"+B.jgrid.jqID(T.p.id),B("#gbox_"+B.jgrid.jqID(T.p.id))[0],"#"+B.jgrid.jqID(C.layer),{position:"relative"}):B.jgrid.createModal(F,Q,C,"#gview_"+B.jgrid.jqID(T.p.id),B("#gbox_"+B.jgrid.jqID(T.p.id))[0]);(C.searchOnEnter||C.closeOnEscape)&&B("#"+B.jgrid.jqID(F.themodal)).keydown(function(X){var D=B(X.target);if(C.searchOnEnter&&13===X.which&&!(D.hasClass("add-group")||D.hasClass("add-rule")||D.hasClass("delete-group")||D.hasClass("delete-rule")||D.hasClass("fm-button")&&D.is("[id$=_query]"))){return B("#"+N+"_search").click(),!1}if(C.closeOnEscape&&27===X.which){return B("#"+B.jgrid.jqID(F.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1}});R&&B("#"+N+"_query").bind("click",function(){B(".queryresult",Q).toggle();return !1});void 0===C.stringResult&&(C.stringResult=C.multipleSearch);B("#"+N+"_search").bind("click",function(){var a=B("#"+N),X={},Y,D;a.find(".input-elm:focus").change();D=a.jqFilter("filterData");if(C.errorcheck&&(a[0].hideError(),C.showQuery||a.jqFilter("toSQLString"),a[0].p.error)){return a[0].showError(),!1}if(C.stringResult){try{Y=xmlJsonClass.toJson(D,"","",!1)}catch(b){try{Y=JSON.stringify(D)}catch(Z){}}"string"===typeof Y&&(X[C.sFilter]=Y,B.each([C.sField,C.sValue,C.sOper],function(){X[this]=""}))}else{C.multipleSearch?(X[C.sFilter]=D,B.each([C.sField,C.sValue,C.sOper],function(){X[this]=""})):(X[C.sField]=D.rules[0].field,X[C.sValue]=D.rules[0].data,X[C.sOper]=D.rules[0].op,X[C.sFilter]="")}T.p.search=!0;B.extend(T.p.postData,X);K=B(T).triggerHandler("jqGridFilterSearch");void 0===K&&(K=!0);K&&B.isFunction(C.onSearch)&&(K=C.onSearch.call(T,T.p.filters));!1!==K&&B(T).trigger("reloadGrid",[{page:1}]);C.closeAfterSearch&&B.jgrid.hideModal("#"+B.jgrid.jqID(F.themodal),{gb:"#gbox_"+B.jgrid.jqID(T.p.id),jqm:C.jqModal,onClose:C.onClose});return !1});B("#"+N+"_reset").bind("click",function(){var X={},D=B("#"+N);T.p.search=!1;T.p.resetsearch=!0;!1===C.multipleSearch?X[C.sField]=X[C.sValue]=X[C.sOper]="":X[C.sFilter]="";D[0].resetFilter();H&&B(".ui-template",Q).val("default");B.extend(T.p.postData,X);K=B(T).triggerHandler("jqGridFilterReset");void 0===K&&(K=!0);K&&B.isFunction(C.onReset)&&(K=C.onReset.call(T));!1!==K&&B(T).trigger("reloadGrid",[{page:1}]);C.closeAfterReset&&B.jgrid.hideModal("#"+B.jgrid.jqID(F.themodal),{gb:"#gbox_"+B.jgrid.jqID(T.p.id),jqm:C.jqModal,onClose:C.onClose});return !1});P(B("#"+N));B(".fm-button:not(.ui-state-disabled)",Q).hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")})}}})},editGridRow:function(C,D){D=B.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},B.jgrid.edit,D||{});A[B(this)[0].p.id]=D;return this.each(function(){function P(){B(Ac+" > tbody > tr > td > .FormElement").each(function(){var E=B(".customelement",this);if(E.length){var F=B(E[0]).attr("name");B.each(Ap.p.colModel,function(){if(this.name===F&&this.editoptions&&B.isFunction(this.editoptions.custom_value)){try{if(Al[F]=this.editoptions.custom_value.call(Ap,B("#"+B.jgrid.jqID(F),Ac),"get"),void 0===Al[F]){throw"e1"}}catch(G){"e1"===G?B.jgrid.info_dialog(B.jgrid.errors.errcap,"function 'custom_value' "+B.jgrid.edit.msg.novalue,B.jgrid.edit.bClose):B.jgrid.info_dialog(B.jgrid.errors.errcap,G.message,B.jgrid.edit.bClose)}return !0}})}else{switch(B(this).get(0).type){case"checkbox":B(this).is(":checked")?Al[this.name]=B(this).val():(E=B(this).attr("offval"),Al[this.name]=E);break;case"select-one":Al[this.name]=B("option:selected",this).val();break;case"select-multiple":Al[this.name]=B(this).val();Al[this.name]=Al[this.name]?Al[this.name].join(","):"";B("option:selected",this).each(function(G,H){B(H).text()});break;case"password":case"text":case"textarea":case"button":Al[this.name]=B(this).val()}Ap.p.autoencode&&(Al[this.name]=B.jgrid.htmlEncode(Al[this.name]))}});return !0}function Aj(d,E,M,s){var K,N,F,L=0,G,O,H,J=[],I=!1,g="",v;for(v=1;v<=s;v++){g+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>"}"_empty"!==d&&(I=B(E).jqGrid("getInd",d));B(E.p.colModel).each(function(k){K=this.name;O=(N=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==K&&"subgrid"!==K&&!0===this.editable&&"rn"!==K){if(!1===I){G=""}else{if(K===E.p.ExpandColumn&&!0===E.p.treeGrid){G=B("td[role='gridcell']:eq("+k+")",E.rows[I]).text()}else{try{G=B.unformat.call(E,B("td[role='gridcell']:eq("+k+")",E.rows[I]),{rowId:d,colModel:this},k)}catch(h){G=this.edittype&&"textarea"===this.edittype?B("td[role='gridcell']:eq("+k+")",E.rows[I]).text():B("td[role='gridcell']:eq("+k+")",E.rows[I]).html()}if(!G||"&nbsp;"===G||"&#160;"===G||1===G.length&&160===G.charCodeAt(0)){G=""}}}var e=B.extend({},this.editoptions||{},{id:K,name:K}),l=B.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),f=parseInt(l.rowpos,10)||L+1,n=parseInt(2*(parseInt(l.colpos,10)||1),10);"_empty"===d&&e.defaultValue&&(G=B.isFunction(e.defaultValue)?e.defaultValue.call(Ap):e.defaultValue);this.edittype||(this.edittype="text");Ap.p.autoencode&&(G=B.jgrid.htmlDecode(G));H=B.jgrid.createEl.call(Ap,this.edittype,e,G,!1,B.extend({},B.jgrid.ajaxOptions,E.p.ajaxSelectOptions||{}));if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData[K]=G}B(H).addClass("FormElement");-1<B.inArray(this.edittype,["text","textarea","password","select"])&&B(H).addClass("ui-widget-content ui-corner-all");F=B(M).find("tr[rowpos="+f+"]");if(l.rowabove){var m=B("<tr><td class='contentinfo' colspan='"+2*s+"'>"+l.rowcontent+"</td></tr>");B(M).append(m);m[0].rp=f}0===F.length&&(F=B("<tr "+O+" rowpos='"+f+"'></tr>").addClass("FormData").attr("id","tr_"+K),B(F).append(g),B(M).append(F),F[0].rp=f);B("td:eq("+(n-2)+")",F[0]).html(void 0===l.label?E.p.colNames[k]:l.label);B("td:eq("+(n-1)+")",F[0]).append(l.elmprefix).append(H).append(l.elmsuffix);"custom"===this.edittype&&B.isFunction(e.custom_value)&&e.custom_value.call(Ap,B("#"+K,"#"+Ao),"set",G);B.jgrid.bindEv.call(Ap,H,e);J[L]=k;L++}});0<L&&(v=B("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+E.p.id+"_id' value='"+d+"'/></td></tr>"),v[0].rp=L+999,B(M).append(v),A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate)&&(A[Ap.p.id]._savedData[E.p.id+"_id"]=d);return J}function Af(M,E,J){var d,H=0,O,K,F,I,G;if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData={},A[Ap.p.id]._savedData[E.p.id+"_id"]=M}var L=E.p.colModel;if("_empty"===M){B(L).each(function(){d=this.name;F=B.extend({},this.editoptions||{});(K=B("#"+B.jgrid.jqID(d),"#"+J))&&K.length&&null!==K[0]&&(I="","custom"===this.edittype&&B.isFunction(F.custom_value)?F.custom_value.call(Ap,B("#"+d,"#"+J),"set",I):F.defaultValue?(I=B.isFunction(F.defaultValue)?F.defaultValue.call(Ap):F.defaultValue,"checkbox"===K[0].type?(G=I.toLowerCase(),0>G.search(/(false|f|0|no|n|off|undefined)/i)&&""!==G?(K[0].checked=!0,K[0].defaultChecked=!0,K[0].value=I):(K[0].checked=!1,K[0].defaultChecked=!1)):K.val(I)):"checkbox"===K[0].type?(K[0].checked=!1,K[0].defaultChecked=!1,I=B(K).attr("offval")):K[0].type&&"select"===K[0].type.substr(0,6)?K[0].selectedIndex=0:K.val(I),!0===A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate)&&(A[Ap.p.id]._savedData[d]=I)}),B("#id_g","#"+J).val(M)}else{var N=B(E).jqGrid("getInd",M,!0);N&&(B('td[role="gridcell"]',N).each(function(g){d=L[g].name;if("cb"!==d&&"subgrid"!==d&&"rn"!==d&&!0===L[g].editable){if(d===E.p.ExpandColumn&&!0===E.p.treeGrid){O=B(this).text()}else{try{O=B.unformat.call(E,B(this),{rowId:M,colModel:L[g]},g)}catch(k){O="textarea"===L[g].edittype?B(this).text():B(this).html()}}Ap.p.autoencode&&(O=B.jgrid.htmlDecode(O));if(!0===A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData[d]=O}d=B.jgrid.jqID(d);switch(L[g].edittype){case"password":case"text":case"button":case"image":case"textarea":if("&nbsp;"===O||"&#160;"===O||1===O.length&&160===O.charCodeAt(0)){O=""}B("#"+d,"#"+J).val(O);break;case"select":var e=O.split(","),e=B.map(e,function(h){return B.trim(h)});B("#"+d+" option","#"+J).each(function(){L[g].editoptions.multiple||B.trim(O)!==B.trim(B(this).text())&&e[0]!==B.trim(B(this).text())&&e[0]!==B.trim(B(this).val())?L[g].editoptions.multiple?-1<B.inArray(B.trim(B(this).text()),e)||-1<B.inArray(B.trim(B(this).val()),e)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case"checkbox":O=String(O);if(L[g].editoptions&&L[g].editoptions.value){if(L[g].editoptions.value.split(":")[0]===O){B("#"+d,"#"+J)[Ap.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0})}else{B("#"+d,"#"+J)[Ap.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}}else{O=O.toLowerCase(),0>O.search(/(false|f|0|no|n|off|undefined)/i)&&""!==O?(B("#"+d,"#"+J)[Ap.p.useProp?"prop":"attr"]("checked",!0),B("#"+d,"#"+J)[Ap.p.useProp?"prop":"attr"]("defaultChecked",!0)):(B("#"+d,"#"+J)[Ap.p.useProp?"prop":"attr"]("checked",!1),B("#"+d,"#"+J)[Ap.p.useProp?"prop":"attr"]("defaultChecked",!1))}break;case"custom":try{if(L[g].editoptions&&B.isFunction(L[g].editoptions.custom_value)){L[g].editoptions.custom_value.call(Ap,B("#"+d,"#"+J),"set",O)}else{throw"e1"}}catch(f){"e1"===f?B.jgrid.info_dialog(B.jgrid.errors.errcap,"function 'custom_value' "+B.jgrid.edit.msg.nodefined,B.jgrid.edit.bClose):B.jgrid.info_dialog(B.jgrid.errors.errcap,f.message,B.jgrid.edit.bClose)}}H++}}),0<H&&B("#id_g",Ac).val(M))}}function Ag(){B.each(Ap.p.colModel,function(F,E){E.editoptions&&!0===E.editoptions.NullIfEmpty&&Al.hasOwnProperty(E.name)&&""===Al[E.name]&&(Al[E.name]="null")})}function Ab(){var G,L=[!0,"",""],N={},J=Ap.p.prmNames,K,M,E,H,F,I=B(Ap).triggerHandler("jqGridAddEditBeforeCheckValues",[B("#"+Ao),Y]);I&&"object"===typeof I&&(Al=I);B.isFunction(A[Ap.p.id].beforeCheckValues)&&(I=A[Ap.p.id].beforeCheckValues.call(Ap,Al,B("#"+Ao),Y))&&"object"===typeof I&&(Al=I);for(E in Al){if(Al.hasOwnProperty(E)&&(L=B.jgrid.checkValues.call(Ap,Al[E],E),!1===L[0])){break}}Ag();L[0]&&(N=B(Ap).triggerHandler("jqGridAddEditClickSubmit",[A[Ap.p.id],Al,Y]),void 0===N&&B.isFunction(A[Ap.p.id].onclickSubmit)&&(N=A[Ap.p.id].onclickSubmit.call(Ap,A[Ap.p.id],Al,Y)||{}),L=B(Ap).triggerHandler("jqGridAddEditBeforeSubmit",[Al,B("#"+Ao),Y]),void 0===L&&(L=[!0,"",""]),L[0]&&B.isFunction(A[Ap.p.id].beforeSubmit)&&(L=A[Ap.p.id].beforeSubmit.call(Ap,Al,B("#"+Ao),Y)));if(L[0]&&!A[Ap.p.id].processing){A[Ap.p.id].processing=!0;B("#sData",Ac+"_2").addClass("ui-state-active");M=J.oper;K=J.id;Al[M]="_empty"===B.trim(Al[Ap.p.id+"_id"])?J.addoper:J.editoper;Al[M]!==J.addoper?Al[K]=Al[Ap.p.id+"_id"]:void 0===Al[K]&&(Al[K]=Al[Ap.p.id+"_id"]);delete Al[Ap.p.id+"_id"];Al=B.extend(Al,A[Ap.p.id].editData,N);if(!0===Ap.p.treeGrid){for(F in Al[M]===J.addoper&&(H=B(Ap).jqGrid("getGridParam","selrow"),Al["adjacency"===Ap.p.treeGridModel?Ap.p.treeReader.parent_id_field:"parent_id"]=H),Ap.p.treeReader){Ap.p.treeReader.hasOwnProperty(F)&&(N=Ap.p.treeReader[F],!Al.hasOwnProperty(N)||Al[M]===J.addoper&&"parent_id_field"===F||delete Al[N])}}Al[K]=B.jgrid.stripPref(Ap.p.idPrefix,Al[K]);F=B.extend({url:A[Ap.p.id].url||B(Ap).jqGrid("getGridParam","editurl"),type:A[Ap.p.id].mtype,data:B.isFunction(A[Ap.p.id].serializeEditData)?A[Ap.p.id].serializeEditData.call(Ap,Al):Al,complete:function(g,O){var d;Al[K]=Ap.p.idPrefix+Al[K];300<=g.status&&304!==g.status?(L[0]=!1,L[1]=B(Ap).triggerHandler("jqGridAddEditErrorTextFormat",[g,Y]),B.isFunction(A[Ap.p.id].errorTextFormat)?L[1]=A[Ap.p.id].errorTextFormat.call(Ap,g,Y):L[1]=O+" Status: '"+g.statusText+"'. Error code: "+g.status):(L=B(Ap).triggerHandler("jqGridAddEditAfterSubmit",[g,Al,Y]),void 0===L&&(L=[!0,"",""]),L[0]&&B.isFunction(A[Ap.p.id].afterSubmit)&&(L=A[Ap.p.id].afterSubmit.call(Ap,g,Al,Y)));if(!1===L[0]){B("#FormError>td",Ac).html(L[1]),B("#FormError",Ac).show()}else{if(Ap.p.autoencode&&B.each(Al,function(f,h){Al[f]=B.jgrid.htmlDecode(h)}),Al[M]===J.addoper?(L[2]||(L[2]=B.jgrid.randId()),Al[K]=L[2],A[Ap.p.id].reloadAfterSubmit?B(Ap).trigger("reloadGrid"):!0===Ap.p.treeGrid?B(Ap).jqGrid("addChildNode",L[2],H,Al):B(Ap).jqGrid("addRowData",L[2],Al,D.addedrow),A[Ap.p.id].closeAfterAdd?(!0!==Ap.p.treeGrid&&B(Ap).jqGrid("setSelection",L[2]),B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose})):A[Ap.p.id].clearAfterAdd&&Af("_empty",Ap,Ao)):(A[Ap.p.id].reloadAfterSubmit?(B(Ap).trigger("reloadGrid"),A[Ap.p.id].closeAfterEdit||setTimeout(function(){B(Ap).jqGrid("setSelection",Al[K])},1000)):!0===Ap.p.treeGrid?B(Ap).jqGrid("setTreeRow",Al[K],Al):B(Ap).jqGrid("setRowData",Al[K],Al),A[Ap.p.id].closeAfterEdit&&B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose})),B.isFunction(A[Ap.p.id].afterComplete)&&(G=g,setTimeout(function(){B(Ap).triggerHandler("jqGridAddEditAfterComplete",[G,Al,B("#"+Ao),Y]);A[Ap.p.id].afterComplete.call(Ap,G,Al,B("#"+Ao),Y);G=null},500)),A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){if(B("#"+Ao).data("disabled",!1),"_empty"!==A[Ap.p.id]._savedData[Ap.p.id+"_id"]){for(d in A[Ap.p.id]._savedData){A[Ap.p.id]._savedData.hasOwnProperty(d)&&Al[d]&&(A[Ap.p.id]._savedData[d]=Al[d])}}}}A[Ap.p.id].processing=!1;B("#sData",Ac+"_2").removeClass("ui-state-active");try{B(":input:visible","#"+Ao)[0].focus()}catch(e){}}},B.jgrid.ajaxOptions,A[Ap.p.id].ajaxEditOptions);F.url||A[Ap.p.id].useDataProxy||(B.isFunction(Ap.p.dataProxy)?A[Ap.p.id].useDataProxy=!0:(L[0]=!1,L[1]+=" "+B.jgrid.errors.nourl));L[0]&&(A[Ap.p.id].useDataProxy?(N=Ap.p.dataProxy.call(Ap,F,"set_"+Ap.p.id),void 0===N&&(N=[!0,""]),!1===N[0]?(L[0]=!1,L[1]=N[1]||"Error deleting the selected row!"):(F.data.oper===J.addoper&&A[Ap.p.id].closeAfterAdd&&B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose}),F.data.oper===J.editoper&&A[Ap.p.id].closeAfterEdit&&B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose}))):B.ajax(F))}!1===L[0]&&(B("#FormError>td",Ac).html(L[1]),B("#FormError",Ac).show())}function Aa(H,F){var G=!1,E;for(E in H){if(H.hasOwnProperty(E)&&H[E]!=F[E]){G=!0;break}}return G}function An(){var E=!0;B("#FormError",Ac).hide();A[Ap.p.id].checkOnUpdate&&(Al={},P(),X=Aa(Al,A[Ap.p.id]._savedData))&&(B("#"+Ao).data("disabled",!0),B(".confirm","#"+Ad.themodal).show(),E=!1);return E}function Ai(){var E;if("_empty"!==C&&void 0!==Ap.p.savedRow&&0<Ap.p.savedRow.length&&B.isFunction(B.fn.jqGrid.restoreRow)){for(E=0;E<Ap.p.savedRow.length;E++){if(Ap.p.savedRow[E].id==C){B(Ap).jqGrid("restoreRow",C);break}}}}function Ah(F,G){var E=G[1].length-1;0===F?B("#pData",Ac+"_2").addClass("ui-state-disabled"):void 0!==G[1][F-1]&&B("#"+B.jgrid.jqID(G[1][F-1])).hasClass("ui-state-disabled")?B("#pData",Ac+"_2").addClass("ui-state-disabled"):B("#pData",Ac+"_2").removeClass("ui-state-disabled");F===E?B("#nData",Ac+"_2").addClass("ui-state-disabled"):void 0!==G[1][F+1]&&B("#"+B.jgrid.jqID(G[1][F+1])).hasClass("ui-state-disabled")?B("#nData",Ac+"_2").addClass("ui-state-disabled"):B("#nData",Ac+"_2").removeClass("ui-state-disabled")}function o(){var E=B(Ap).jqGrid("getDataIDs"),F=B("#id_g",Ac).val();return[B.inArray(F,E),E]}var Ap=this;if(Ap.grid&&C){var Ae=Ap.p.id,Ao="FrmGrid_"+Ae,Am="TblGrid_"+Ae,Ac="#"+B.jgrid.jqID(Am),Ad={themodal:"editmod"+Ae,modalhead:"edithd"+Ae,modalcontent:"editcnt"+Ae,scrollelm:Ao},z=B.isFunction(A[Ap.p.id].beforeShowForm)?A[Ap.p.id].beforeShowForm:!1,i=B.isFunction(A[Ap.p.id].afterShowForm)?A[Ap.p.id].afterShowForm:!1,a=B.isFunction(A[Ap.p.id].beforeInitData)?A[Ap.p.id].beforeInitData:!1,j=B.isFunction(A[Ap.p.id].onInitializeForm)?A[Ap.p.id].onInitializeForm:!1,Ak=!0,Z=1,T=0,Al,X,Y,Ao=B.jgrid.jqID(Ao);"new"===C?(C="_empty",Y="add",D.caption=A[Ap.p.id].addCaption):(D.caption=A[Ap.p.id].editCaption,Y="edit");D.recreateForm||B(Ap).data("formProp")&&B.extend(A[B(this)[0].p.id],B(Ap).data("formProp"));var U=!0;D.checkOnUpdate&&D.jqModal&&!D.modal&&(U=!1);var S=isNaN(A[B(this)[0].p.id].dataheight)?A[B(this)[0].p.id].dataheight:A[B(this)[0].p.id].dataheight+"px",Ak=isNaN(A[B(this)[0].p.id].datawidth)?A[B(this)[0].p.id].datawidth:A[B(this)[0].p.id].datawidth+"px",S=B("<form name='FormPost' id='"+Ao+"' class='FormGrid' onSubmit='return false;' style='width:"+Ak+";overflow:auto;position:relative;height:"+S+";'></form>").data("disabled",!1),b=B("<table id='"+Am+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),Ak=B(Ap).triggerHandler("jqGridAddEditBeforeInitData",[B("#"+Ao),Y]);void 0===Ak&&(Ak=!0);Ak&&a&&(Ak=a.call(Ap,B("#"+Ao),Y));if(!1!==Ak){Ai();B(Ap.p.colModel).each(function(){var E=this.formoptions;Z=Math.max(Z,E?E.colpos||0:0);T=Math.max(T,E?E.rowpos||0:0)});B(S).append(b);a=B("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*Z+"'></td></tr>");a[0].rp=0;B(b).append(a);a=B("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*Z+"'>"+A[Ap.p.id].topinfo+"</td></tr>");a[0].rp=0;B(b).append(a);var Ak=(a="rtl"===Ap.p.direction?!0:!1)?"nData":"pData",c=a?"pData":"nData";Aj(C,Ap,b,Z);var Ak="<a id='"+Ak+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",c="<a id='"+c+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",Q="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+D.bSubmit+"</a>",R="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+D.bCancel+"</a>",Am="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+Am+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(a?c+Ak:Ak+c)+"</td><td class='EditButton'>"+Q+R+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+A[Ap.p.id].bottominfo+"</td></tr>"),Am=Am+"</tbody></table>";if(0<T){var W=[];B.each(B(b)[0].rows,function(F,E){W[F]=E});W.sort(function(F,E){return F.rp>E.rp?1:F.rp<E.rp?-1:0});B.each(W,function(E,F){B("tbody",b).append(F)})}D.gbox="#gbox_"+B.jgrid.jqID(Ae);var V=!1;!0===D.closeOnEscape&&(D.closeOnEscape=!1,V=!0);Am=B("<div></div>").append(S).append(Am);B.jgrid.createModal(Ad,Am,A[B(this)[0].p.id],"#gview_"+B.jgrid.jqID(Ap.p.id),B("#gbox_"+B.jgrid.jqID(Ap.p.id))[0]);a&&(B("#pData, #nData",Ac+"_2").css("float","right"),B(".EditButton",Ac+"_2").css("text-align","left"));A[Ap.p.id].topinfo&&B(".tinfo",Ac).show();A[Ap.p.id].bottominfo&&B(".binfo",Ac+"_2").show();Am=Am=null;B("#"+B.jgrid.jqID(Ad.themodal)).keydown(function(E){var F=E.target;if(!0===B("#"+Ao).data("disabled")){return !1}if(!0===A[Ap.p.id].savekey[0]&&E.which===A[Ap.p.id].savekey[1]&&"TEXTAREA"!==F.tagName){return B("#sData",Ac+"_2").trigger("click"),!1}if(27===E.which){if(!An()){return !1}V&&B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return !1}if(!0===A[Ap.p.id].navkeys[0]){if("_empty"===B("#id_g",Ac).val()){return !0}if(E.which===A[Ap.p.id].navkeys[1]){return B("#pData",Ac+"_2").trigger("click"),!1}if(E.which===A[Ap.p.id].navkeys[2]){return B("#nData",Ac+"_2").trigger("click"),!1}}});D.checkOnUpdate&&(B("a.ui-jqdialog-titlebar-close span","#"+B.jgrid.jqID(Ad.themodal)).removeClass("jqmClose"),B("a.ui-jqdialog-titlebar-close","#"+B.jgrid.jqID(Ad.themodal)).unbind("click").click(function(){if(!An()){return !1}B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return !1}));D.saveicon=B.extend([!0,"left","ui-icon-disk"],D.saveicon);D.closeicon=B.extend([!0,"left","ui-icon-close"],D.closeicon);!0===D.saveicon[0]&&B("#sData",Ac+"_2").addClass("right"===D.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.saveicon[2]+"'></span>");!0===D.closeicon[0]&&B("#cData",Ac+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.closeicon[2]+"'></span>");if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){Q="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+D.bYes+"</a>",c="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+D.bNo+"</a>",R="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+D.bExit+"</a>",Am=D.zIndex||999,Am++,B("<div class='"+D.overlayClass+" jqgrid-overlay confirm' style='z-index:"+Am+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(Am+1)+"'>"+D.saveData+"<br/><br/>"+Q+c+R+"</div>").insertAfter("#"+Ao),B("#sNew","#"+B.jgrid.jqID(Ad.themodal)).click(function(){Ab();B("#"+Ao).data("disabled",!1);B(".confirm","#"+B.jgrid.jqID(Ad.themodal)).hide();return !1}),B("#nNew","#"+B.jgrid.jqID(Ad.themodal)).click(function(){B(".confirm","#"+B.jgrid.jqID(Ad.themodal)).hide();B("#"+Ao).data("disabled",!1);setTimeout(function(){B(":input:visible","#"+Ao)[0].focus()},0);return !1}),B("#cNew","#"+B.jgrid.jqID(Ad.themodal)).click(function(){B(".confirm","#"+B.jgrid.jqID(Ad.themodal)).hide();B("#"+Ao).data("disabled",!1);B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return !1})}B(Ap).triggerHandler("jqGridAddEditInitializeForm",[B("#"+Ao),Y]);j&&j.call(Ap,B("#"+Ao),Y);"_empty"!==C&&A[Ap.p.id].viewPagerButtons?B("#pData,#nData",Ac+"_2").show():B("#pData,#nData",Ac+"_2").hide();B(Ap).triggerHandler("jqGridAddEditBeforeShowForm",[B("#"+Ao),Y]);z&&z.call(Ap,B("#"+Ao),Y);B("#"+B.jgrid.jqID(Ad.themodal)).data("onClose",A[Ap.p.id].onClose);B.jgrid.viewModal("#"+B.jgrid.jqID(Ad.themodal),{gbox:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,overlay:D.overlay,modal:D.modal,overlayClass:D.overlayClass,onHide:function(E){B(Ap).data("formProp",{top:parseFloat(B(E.w).css("top")),left:parseFloat(B(E.w).css("left")),width:B(E.w).width(),height:B(E.w).height(),dataheight:B("#"+Ao).height(),datawidth:B("#"+Ao).width()});E.w.remove();E.o&&E.o.remove()}});U||B("."+B.jgrid.jqID(D.overlayClass)).click(function(){if(!An()){return !1}B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return !1});B(".fm-button","#"+B.jgrid.jqID(Ad.themodal)).hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")});B("#sData",Ac+"_2").click(function(){Al={};B("#FormError",Ac).hide();P();"_empty"===Al[Ap.p.id+"_id"]?Ab():!0===D.checkOnSubmit?(X=Aa(Al,A[Ap.p.id]._savedData))?(B("#"+Ao).data("disabled",!0),B(".confirm","#"+B.jgrid.jqID(Ad.themodal)).show()):Ab():Ab();return !1});B("#cData",Ac+"_2").click(function(){if(!An()){return !1}B.jgrid.hideModal("#"+B.jgrid.jqID(Ad.themodal),{gb:"#gbox_"+B.jgrid.jqID(Ae),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return !1});B("#nData",Ac+"_2").click(function(){if(!An()){return !1}B("#FormError",Ac).hide();var F=o();F[0]=parseInt(F[0],10);if(-1!==F[0]&&F[1][F[0]+1]){B(Ap).triggerHandler("jqGridAddEditClickPgButtons",["next",B("#"+Ao),F[1][F[0]]]);var E;if(B.isFunction(D.onclickPgButtons)&&(E=D.onclickPgButtons.call(Ap,"next",B("#"+Ao),F[1][F[0]]),void 0!==E&&!1===E)||B("#"+B.jgrid.jqID(F[1][F[0]+1])).hasClass("ui-state-disabled")){return !1}Af(F[1][F[0]+1],Ap,Ao);B(Ap).jqGrid("setSelection",F[1][F[0]+1]);B(Ap).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",B("#"+Ao),F[1][F[0]]]);B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(Ap,"next",B("#"+Ao),F[1][F[0]+1]);Ah(F[0]+1,F)}return !1});B("#pData",Ac+"_2").click(function(){if(!An()){return !1}B("#FormError",Ac).hide();var F=o();if(-1!==F[0]&&F[1][F[0]-1]){B(Ap).triggerHandler("jqGridAddEditClickPgButtons",["prev",B("#"+Ao),F[1][F[0]]]);var E;if(B.isFunction(D.onclickPgButtons)&&(E=D.onclickPgButtons.call(Ap,"prev",B("#"+Ao),F[1][F[0]]),void 0!==E&&!1===E)||B("#"+B.jgrid.jqID(F[1][F[0]-1])).hasClass("ui-state-disabled")){return !1}Af(F[1][F[0]-1],Ap,Ao);B(Ap).jqGrid("setSelection",F[1][F[0]-1]);B(Ap).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",B("#"+Ao),F[1][F[0]]]);B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(Ap,"prev",B("#"+Ao),F[1][F[0]-1]);Ah(F[0]-1,F)}return !1});B(Ap).triggerHandler("jqGridAddEditAfterShowForm",[B("#"+Ao),Y]);i&&i.call(Ap,B("#"+Ao),Y);z=o();Ah(z[0],z)}}})},viewGridRow:function(C,D){D=B.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},B.jgrid.view,D||{});A[B(this)[0].p.id]=D;return this.each(function(){function T(){!0!==A[F.p.id].closeOnEscape&&!0!==A[F.p.id].navkeys[0]||setTimeout(function(){B(".ui-jqdialog-titlebar-close","#"+B.jgrid.jqID(J.modalhead)).focus()},0)}function O(Ac,Af,Ag,Ad){var Ae,o,Aa,c=0,Ab,a,E=[],Z=!1,l,n="<td class='CaptionTD form-view-label ui-widget-content' width='"+D.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",Al="",Aj=["integer","number","currency"],i=0,j=0,Ah,Ak,Ai;for(l=1;l<=Ad;l++){Al+=1===l?n:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>"}B(Af.p.colModel).each(function(){(o=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==B.inArray(this.formatter,Aj)?i=Math.max(i,parseInt(this.width,10)):j=Math.max(j,parseInt(this.width,10)))});Ah=0!==i?i:0!==j?j:0;Z=B(Af).jqGrid("getInd",Ac);B(Af.p.colModel).each(function(e){Ae=this.name;Ak=!1;a=(o=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";Ai="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==Ae&&"subgrid"!==Ae&&"rn"!==Ae&&Ai){Ab=!1===Z?"":Ae===Af.p.ExpandColumn&&!0===Af.p.treeGrid?B("td:eq("+e+")",Af.rows[Z]).text():B("td:eq("+e+")",Af.rows[Z]).html();Ak="right"===this.align&&0!==Ah?!0:!1;var f=B.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(f.rowpos,10)||c+1,g=parseInt(2*(parseInt(f.colpos,10)||1),10);if(f.rowabove){var h=B("<tr><td class='contentinfo' colspan='"+2*Ad+"'>"+f.rowcontent+"</td></tr>");B(Ag).append(h);h[0].rp=d}Aa=B(Ag).find("tr[rowpos="+d+"]");0===Aa.length&&(Aa=B("<tr "+a+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","trv_"+Ae),B(Aa).append(Al),B(Ag).append(Aa),Aa[0].rp=d);B("td:eq("+(g-2)+")",Aa[0]).html("<b>"+(void 0===f.label?Af.p.colNames[e]:f.label)+"</b>");B("td:eq("+(g-1)+")",Aa[0]).append("<span>"+Ab+"</span>").attr("id","v_"+Ae);Ak&&B("td:eq("+(g-1)+") span",Aa[0]).css({"text-align":"right",width:Ah+"px"});E[c]=e;c++}});0<c&&(Ac=B("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*Ad-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+Ac+"'/></td></tr>"),Ac[0].rp=c+99,B(Ag).append(Ac));return E}function K(i,j){var Z,a,l=0,E,h;if(h=B(j).jqGrid("getInd",i,!0)){B("td",h).each(function(c){Z=j.p.colModel[c].name;a=j.p.colModel[c].editrules&&!0===j.p.colModel[c].editrules.edithidden?!1:!0===j.p.colModel[c].hidden?!0:!1;"cb"!==Z&&"subgrid"!==Z&&"rn"!==Z&&(E=Z===j.p.ExpandColumn&&!0===j.p.treeGrid?B(this).text():B(this).html(),Z=B.jgrid.jqID("v_"+Z),B("#"+Z+" span","#"+M).html(E),a&&B("#"+Z,"#"+M).parents("tr:first").hide(),l++)}),0<l&&B("#id_g","#"+M).val(i)}}function L(Z,a){var E=a[1].length-1;0===Z?B("#pData","#"+M+"_2").addClass("ui-state-disabled"):void 0!==a[1][Z-1]&&B("#"+B.jgrid.jqID(a[1][Z-1])).hasClass("ui-state-disabled")?B("#pData",M+"_2").addClass("ui-state-disabled"):B("#pData","#"+M+"_2").removeClass("ui-state-disabled");Z===E?B("#nData","#"+M+"_2").addClass("ui-state-disabled"):void 0!==a[1][Z+1]&&B("#"+B.jgrid.jqID(a[1][Z+1])).hasClass("ui-state-disabled")?B("#nData",M+"_2").addClass("ui-state-disabled"):B("#nData","#"+M+"_2").removeClass("ui-state-disabled")}function G(){var E=B(F).jqGrid("getDataIDs"),Z=B("#id_g","#"+M).val();return[B.inArray(Z,E),E]}var F=this;if(F.grid&&C){var Q=F.p.id,N="ViewGrid_"+B.jgrid.jqID(Q),M="ViewTbl_"+B.jgrid.jqID(Q),X="ViewGrid_"+Q,S="ViewTbl_"+Q,J={themodal:"viewmod"+Q,modalhead:"viewhd"+Q,modalcontent:"viewcnt"+Q,scrollelm:N},R=B.isFunction(A[F.p.id].beforeInitData)?A[F.p.id].beforeInitData:!1,P=!0,H=1,I=0;D.recreateForm||B(F).data("viewProp")&&B.extend(A[B(this)[0].p.id],B(F).data("viewProp"));var Y=isNaN(A[B(this)[0].p.id].dataheight)?A[B(this)[0].p.id].dataheight:A[B(this)[0].p.id].dataheight+"px",V=isNaN(A[B(this)[0].p.id].datawidth)?A[B(this)[0].p.id].datawidth:A[B(this)[0].p.id].datawidth+"px",X=B("<form name='FormPost' id='"+X+"' class='FormGrid' style='width:"+V+";overflow:auto;position:relative;height:"+Y+";'></form>"),U=B("<table id='"+S+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");R&&(P=R.call(F,B("#"+N)),void 0===P&&(P=!0));if(!1!==P){B(F.p.colModel).each(function(){var E=this.formoptions;H=Math.max(H,E?E.colpos||0:0);I=Math.max(I,E?E.rowpos||0:0)});B(X).append(U);O(C,F,U,H);S="rtl"===F.p.direction?!0:!1;R="<a id='"+(S?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";P="<a id='"+(S?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>";Y="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+D.bClose+"</a>";if(0<I){var W=[];B.each(B(U)[0].rows,function(Z,E){W[Z]=E});W.sort(function(Z,E){return Z.rp>E.rp?1:Z.rp<E.rp?-1:0});B.each(W,function(E,Z){B("tbody",U).append(Z)})}D.gbox="#gbox_"+B.jgrid.jqID(Q);X=B("<div></div>").append(X).append("<table border='0' class='EditTable' id='"+M+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+D.labelswidth+"'>"+(S?P+R:R+P)+"</td><td class='EditButton'>"+Y+"</td></tr></tbody></table>");B.jgrid.createModal(J,X,D,"#gview_"+B.jgrid.jqID(F.p.id),B("#gview_"+B.jgrid.jqID(F.p.id))[0]);S&&(B("#pData, #nData","#"+M+"_2").css("float","right"),B(".EditButton","#"+M+"_2").css("text-align","left"));D.viewPagerButtons||B("#pData, #nData","#"+M+"_2").hide();X=null;B("#"+J.themodal).keydown(function(E){if(27===E.which){return A[F.p.id].closeOnEscape&&B.jgrid.hideModal("#"+B.jgrid.jqID(J.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:D.onClose}),!1}if(!0===D.navkeys[0]){if(E.which===D.navkeys[1]){return B("#pData","#"+M+"_2").trigger("click"),!1}if(E.which===D.navkeys[2]){return B("#nData","#"+M+"_2").trigger("click"),!1}}});D.closeicon=B.extend([!0,"left","ui-icon-close"],D.closeicon);!0===D.closeicon[0]&&B("#cData","#"+M+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.closeicon[2]+"'></span>");B.isFunction(D.beforeShowForm)&&D.beforeShowForm.call(F,B("#"+N));B.jgrid.viewModal("#"+B.jgrid.jqID(J.themodal),{gbox:"#gbox_"+B.jgrid.jqID(Q),jqm:D.jqModal,overlay:D.overlay,modal:D.modal,onHide:function(E){B(F).data("viewProp",{top:parseFloat(B(E.w).css("top")),left:parseFloat(B(E.w).css("left")),width:B(E.w).width(),height:B(E.w).height(),dataheight:B("#"+N).height(),datawidth:B("#"+N).width()});E.w.remove();E.o&&E.o.remove()}});B(".fm-button:not(.ui-state-disabled)","#"+M+"_2").hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")});T();B("#cData","#"+M+"_2").click(function(){B.jgrid.hideModal("#"+B.jgrid.jqID(J.themodal),{gb:"#gbox_"+B.jgrid.jqID(Q),jqm:D.jqModal,onClose:D.onClose});return !1});B("#nData","#"+M+"_2").click(function(){B("#FormError","#"+M).hide();var E=G();E[0]=parseInt(E[0],10);-1!==E[0]&&E[1][E[0]+1]&&(B.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(F,"next",B("#"+N),E[1][E[0]]),K(E[1][E[0]+1],F),B(F).jqGrid("setSelection",E[1][E[0]+1]),B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(F,"next",B("#"+N),E[1][E[0]+1]),L(E[0]+1,E));T();return !1});B("#pData","#"+M+"_2").click(function(){B("#FormError","#"+M).hide();var E=G();-1!==E[0]&&E[1][E[0]-1]&&(B.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(F,"prev",B("#"+N),E[1][E[0]]),K(E[1][E[0]-1],F),B(F).jqGrid("setSelection",E[1][E[0]-1]),B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(F,"prev",B("#"+N),E[1][E[0]-1]),L(E[0]-1,E));T();return !1});X=G();L(X[0],X)}}})},delGridRow:function(C,D){D=B.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},B.jgrid.del,D||{});A[B(this)[0].p.id]=D;return this.each(function(){var E=this;if(E.grid&&C){var N=B.isFunction(A[E.p.id].beforeShowForm),J=B.isFunction(A[E.p.id].afterShowForm),K=B.isFunction(A[E.p.id].beforeInitData)?A[E.p.id].beforeInitData:!1,F=E.p.id,H={},R=!0,M="DelTbl_"+B.jgrid.jqID(F),L,Q,T,I,S="DelTbl_"+F,P={themodal:"delmod"+F,modalhead:"delhd"+F,modalcontent:"delcnt"+F,scrollelm:M};B.isArray(C)&&(C=C.join());if(void 0!==B("#"+B.jgrid.jqID(P.themodal))[0]){K&&(R=K.call(E,B("#"+M)),void 0===R&&(R=!0));if(!1===R){return}B("#DelData>td","#"+M).text(C);B("#DelError","#"+M).hide();!0===A[E.p.id].processing&&(A[E.p.id].processing=!1,B("#dData","#"+M).removeClass("ui-state-active"));N&&A[E.p.id].beforeShowForm.call(E,B("#"+M));B.jgrid.viewModal("#"+B.jgrid.jqID(P.themodal),{gbox:"#gbox_"+B.jgrid.jqID(F),jqm:A[E.p.id].jqModal,jqM:!1,overlay:A[E.p.id].overlay,modal:A[E.p.id].modal})}else{var G=isNaN(A[E.p.id].dataheight)?A[E.p.id].dataheight:A[E.p.id].dataheight+"px",O=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",S="<div id='"+S+"' class='formdata' style='width:"+O+";overflow:auto;position:relative;height:"+G+";'><table class='DelTable'><tbody>",S=S+"<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",S=S+("<tr id='DelData' style='display:none'><td >"+C+"</td></tr>"),S=S+('<tr><td class="delmsg" style="white-space:pre;">'+A[E.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),S=S+"</tbody></table></div>",S=S+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+M+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+D.bSubmit+"</a>")+"&#160;"+("<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+D.bCancel+"</a>")+"</td></tr></tbody></table>");D.gbox="#gbox_"+B.jgrid.jqID(F);B.jgrid.createModal(P,S,D,"#gview_"+B.jgrid.jqID(E.p.id),B("#gview_"+B.jgrid.jqID(E.p.id))[0]);K&&(R=K.call(E,B("#"+M)),void 0===R&&(R=!0));if(!1===R){return}B(".fm-button","#"+M+"_2").hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")});D.delicon=B.extend([!0,"left","ui-icon-scissors"],A[E.p.id].delicon);D.cancelicon=B.extend([!0,"left","ui-icon-cancel"],A[E.p.id].cancelicon);!0===D.delicon[0]&&B("#dData","#"+M+"_2").addClass("right"===D.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.delicon[2]+"'></span>");!0===D.cancelicon[0]&&B("#eData","#"+M+"_2").addClass("right"===D.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.cancelicon[2]+"'></span>");B("#dData","#"+M+"_2").click(function(){var W=[!0,""],U,V=B("#DelData>td","#"+M).text();H={};B.isFunction(A[E.p.id].onclickSubmit)&&(H=A[E.p.id].onclickSubmit.call(E,A[E.p.id],V)||{});B.isFunction(A[E.p.id].beforeSubmit)&&(W=A[E.p.id].beforeSubmit.call(E,V));if(W[0]&&!A[E.p.id].processing){A[E.p.id].processing=!0;T=E.p.prmNames;L=B.extend({},A[E.p.id].delData,H);I=T.oper;L[I]=T.deloper;Q=T.id;V=String(V).split(",");if(!V.length){return !1}for(U in V){V.hasOwnProperty(U)&&(V[U]=B.jgrid.stripPref(E.p.idPrefix,V[U]))}L[Q]=V.join();B(this).addClass("ui-state-active");U=B.extend({url:A[E.p.id].url||B(E).jqGrid("getGridParam","editurl"),type:A[E.p.id].mtype,data:B.isFunction(A[E.p.id].serializeDelData)?A[E.p.id].serializeDelData.call(E,L):L,complete:function(Y,X){var a;300<=Y.status&&304!==Y.status?(W[0]=!1,B.isFunction(A[E.p.id].errorTextFormat)?W[1]=A[E.p.id].errorTextFormat.call(E,Y):W[1]=X+" Status: '"+Y.statusText+"'. Error code: "+Y.status):B.isFunction(A[E.p.id].afterSubmit)&&(W=A[E.p.id].afterSubmit.call(E,Y,L));if(!1===W[0]){B("#DelError>td","#"+M).html(W[1]),B("#DelError","#"+M).show()}else{if(A[E.p.id].reloadAfterSubmit&&"local"!==E.p.datatype){B(E).trigger("reloadGrid")}else{if(!0===E.p.treeGrid){try{B(E).jqGrid("delTreeNode",E.p.idPrefix+V[0])}catch(Z){}}else{for(a=0;a<V.length;a++){B(E).jqGrid("delRowData",E.p.idPrefix+V[a])}}E.p.selrow=null;E.p.selarrrow=[]}B.isFunction(A[E.p.id].afterComplete)&&setTimeout(function(){A[E.p.id].afterComplete.call(E,Y,V)},500)}A[E.p.id].processing=!1;B("#dData","#"+M+"_2").removeClass("ui-state-active");W[0]&&B.jgrid.hideModal("#"+B.jgrid.jqID(P.themodal),{gb:"#gbox_"+B.jgrid.jqID(F),jqm:D.jqModal,onClose:A[E.p.id].onClose})}},B.jgrid.ajaxOptions,A[E.p.id].ajaxDelOptions);U.url||A[E.p.id].useDataProxy||(B.isFunction(E.p.dataProxy)?A[E.p.id].useDataProxy=!0:(W[0]=!1,W[1]+=" "+B.jgrid.errors.nourl));W[0]&&(A[E.p.id].useDataProxy?(U=E.p.dataProxy.call(E,U,"del_"+E.p.id),void 0===U&&(U=[!0,""]),!1===U[0]?(W[0]=!1,W[1]=U[1]||"Error deleting the selected row!"):B.jgrid.hideModal("#"+B.jgrid.jqID(P.themodal),{gb:"#gbox_"+B.jgrid.jqID(F),jqm:D.jqModal,onClose:A[E.p.id].onClose})):B.ajax(U))}!1===W[0]&&(B("#DelError>td","#"+M).html(W[1]),B("#DelError","#"+M).show());return !1});B("#eData","#"+M+"_2").click(function(){B.jgrid.hideModal("#"+B.jgrid.jqID(P.themodal),{gb:"#gbox_"+B.jgrid.jqID(F),jqm:A[E.p.id].jqModal,onClose:A[E.p.id].onClose});return !1});N&&A[E.p.id].beforeShowForm.call(E,B("#"+M));B.jgrid.viewModal("#"+B.jgrid.jqID(P.themodal),{gbox:"#gbox_"+B.jgrid.jqID(F),jqm:A[E.p.id].jqModal,overlay:A[E.p.id].overlay,modal:A[E.p.id].modal})}J&&A[E.p.id].afterShowForm.call(E,B("#"+M));!0===A[E.p.id].closeOnEscape&&setTimeout(function(){B(".ui-jqdialog-titlebar-close","#"+B.jgrid.jqID(P.modalhead)).focus()},0)}})},navGrid:function(F,G,D,C,H,I,E){G=B.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},B.jgrid.nav,G||{});return this.each(function(){if(!this.nav){var J={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},Q=this,N;if(Q.grid&&"string"===typeof F){void 0===B("#"+J.themodal)[0]&&(G.alerttop||G.alertleft||(void 0!==window.innerWidth?(G.alertleft=window.innerWidth,G.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(G.alertleft=document.documentElement.clientWidth,G.alerttop=document.documentElement.clientHeight):(G.alertleft=1024,G.alerttop=768),G.alertleft=G.alertleft/2-parseInt(G.alertwidth,10)/2,G.alerttop=G.alerttop/2-25),B.jgrid.createModal(J,"<div>"+G.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+B.jgrid.jqID(Q.p.id),jqModal:!0,drag:!0,resize:!0,caption:G.alertcap,top:G.alerttop,left:G.alertleft,width:G.alertwidth,height:G.alertheight,closeOnEscape:G.closeOnEscape,zIndex:G.alertzIndex},"#gview_"+B.jgrid.jqID(Q.p.id),B("#gbox_"+B.jgrid.jqID(Q.p.id))[0],!0));var M=1,P,S=function(){B(this).hasClass("ui-state-disabled")||B(this).addClass("ui-state-hover")},L=function(){B(this).removeClass("ui-state-hover")};G.cloneToTop&&Q.p.toppager&&(M=2);for(P=0;P<M;P++){var R=B("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),O,K;0===P?(O=F,K=Q.p.id,O===Q.p.toppager&&(K+="_top",M=1)):(O=Q.p.toppager,K=Q.p.id+"_top");"rtl"===Q.p.direction&&B(R).attr("dir","rtl").css("float","right");G.add&&(C=C||{},N=B("<td class='ui-pg-button ui-corner-all'></td>"),B(N).append("<div class='ui-pg-div'><span class='ui-icon "+G.addicon+"'></span>"+G.addtext+"</div>"),B("tr",R).append(N),B(N,R).attr({title:G.addtitle||"",id:C.id||"add_"+K}).click(function(){B(this).hasClass("ui-state-disabled")||(B.isFunction(G.addfunc)?G.addfunc.call(Q):B(Q).jqGrid("editGridRow","new",C));return !1}).hover(S,L),N=null);G.edit&&(N=B("<td class='ui-pg-button ui-corner-all'></td>"),D=D||{},B(N).append("<div class='ui-pg-div'><span class='ui-icon "+G.editicon+"'></span>"+G.edittext+"</div>"),B("tr",R).append(N),B(N,R).attr({title:G.edittitle||"",id:D.id||"edit_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){var T=Q.p.selrow;T?B.isFunction(G.editfunc)?G.editfunc.call(Q,T):B(Q).jqGrid("editGridRow",T,D):(B.jgrid.viewModal("#"+J.themodal,{gbox:"#gbox_"+B.jgrid.jqID(Q.p.id),jqm:!0}),B("#jqg_alrt").focus())}return !1}).hover(S,L),N=null);G.view&&(N=B("<td class='ui-pg-button ui-corner-all'></td>"),E=E||{},B(N).append("<div class='ui-pg-div'><span class='ui-icon "+G.viewicon+"'></span>"+G.viewtext+"</div>"),B("tr",R).append(N),B(N,R).attr({title:G.viewtitle||"",id:E.id||"view_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){var T=Q.p.selrow;T?B.isFunction(G.viewfunc)?G.viewfunc.call(Q,T):B(Q).jqGrid("viewGridRow",T,E):(B.jgrid.viewModal("#"+J.themodal,{gbox:"#gbox_"+B.jgrid.jqID(Q.p.id),jqm:!0}),B("#jqg_alrt").focus())}return !1}).hover(S,L),N=null);G.del&&(N=B("<td class='ui-pg-button ui-corner-all'></td>"),H=H||{},B(N).append("<div class='ui-pg-div'><span class='ui-icon "+G.delicon+"'></span>"+G.deltext+"</div>"),B("tr",R).append(N),B(N,R).attr({title:G.deltitle||"",id:H.id||"del_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){var T;Q.p.multiselect?(T=Q.p.selarrrow,0===T.length&&(T=null)):T=Q.p.selrow;T?B.isFunction(G.delfunc)?G.delfunc.call(Q,T):B(Q).jqGrid("delGridRow",T,H):(B.jgrid.viewModal("#"+J.themodal,{gbox:"#gbox_"+B.jgrid.jqID(Q.p.id),jqm:!0}),B("#jqg_alrt").focus())}return !1}).hover(S,L),N=null);(G.add||G.edit||G.del||G.view)&&B("tr",R).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");G.search&&(N=B("<td class='ui-pg-button ui-corner-all'></td>"),I=I||{},B(N).append("<div class='ui-pg-div'><span class='ui-icon "+G.searchicon+"'></span>"+G.searchtext+"</div>"),B("tr",R).append(N),B(N,R).attr({title:G.searchtitle||"",id:I.id||"search_"+K}).click(function(){B(this).hasClass("ui-state-disabled")||(B.isFunction(G.searchfunc)?G.searchfunc.call(Q,I):B(Q).jqGrid("searchGrid",I));return !1}).hover(S,L),I.showOnLoad&&!0===I.showOnLoad&&B(N,R).click(),N=null);G.refresh&&(N=B("<td class='ui-pg-button ui-corner-all'></td>"),B(N).append("<div class='ui-pg-div'><span class='ui-icon "+G.refreshicon+"'></span>"+G.refreshtext+"</div>"),B("tr",R).append(N),B(N,R).attr({title:G.refreshtitle||"",id:"refresh_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){B.isFunction(G.beforeRefresh)&&G.beforeRefresh.call(Q);Q.p.search=!1;Q.p.resetsearch=!0;try{var V=Q.p.id;Q.p.postData.filters="";try{B("#fbox_"+B.jgrid.jqID(V)).jqFilter("resetFilter")}catch(T){}B.isFunction(Q.clearToolbar)&&Q.clearToolbar.call(Q,!1)}catch(U){}switch(G.refreshstate){case"firstpage":B(Q).trigger("reloadGrid",[{page:1}]);break;case"current":B(Q).trigger("reloadGrid",[{current:!0}])}B.isFunction(G.afterRefresh)&&G.afterRefresh.call(Q)}return !1}).hover(S,L),N=null);N=B(".ui-jqgrid").css("font-size")||"11px";B("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+N+";visibility:hidden;' ></div>");N=B(R).clone().appendTo("#testpg2").width();B("#testpg2").remove();B(O+"_"+G.position,O).append(R);Q.p._nvtd&&(N>Q.p._nvtd[0]&&(B(O+"_"+G.position,O).width(N),Q.p._nvtd[0]=N),Q.p._nvtd[1]=N);R=N=N=null;this.nav=!0}}}})},navButtonAdd:function(C,D){D=B.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},D||{});return this.each(function(){if(this.grid){"string"===typeof C&&0!==C.indexOf("#")&&(C="#"+B.jgrid.jqID(C));var F=B(".navtable",C)[0],E=this;if(F&&(!D.id||void 0===B("#"+B.jgrid.jqID(D.id),F)[0])){var G=B("<td></td>");"NONE"===D.buttonicon.toString().toUpperCase()?B(G).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+D.caption+"</div>"):B(G).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+D.buttonicon+"'></span>"+D.caption+"</div>");D.id&&B(G).attr("id",D.id);"first"===D.position?0===F.rows[0].cells.length?B("tr",F).append(G):B("tr td:eq(0)",F).before(G):B("tr",F).append(G);B(G,F).attr("title",D.title||"").click(function(H){B(this).hasClass("ui-state-disabled")||B.isFunction(D.onClickButton)&&D.onClickButton.call(E,H);return !1}).hover(function(){B(this).hasClass("ui-state-disabled")||B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(C,D){D=B.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},D||{});return this.each(function(){if(this.grid){"string"===typeof C&&0!==C.indexOf("#")&&(C="#"+B.jgrid.jqID(C));var F=B(".navtable",C)[0];if(F){var E="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+D.sepclass+"'></span>"+D.sepcontent+"</td>";"first"===D.position?0===F.rows[0].cells.length?B("tr",F).append(E):B("tr td:eq(0)",F).before(E):B("tr",F).append(E)}}})},GridToForm:function(C,D){return this.each(function(){var F=this,E;if(F.grid){var G=B(F).jqGrid("getRowData",C);if(G){for(E in G){G.hasOwnProperty(E)&&(B("[name="+B.jgrid.jqID(E)+"]",D).is("input:radio")||B("[name="+B.jgrid.jqID(E)+"]",D).is("input:checkbox")?B("[name="+B.jgrid.jqID(E)+"]",D).each(function(){if(B(this).val()==G[E]){B(this)[F.p.useProp?"prop":"attr"]("checked",!0)}else{B(this)[F.p.useProp?"prop":"attr"]("checked",!1)}}):B("[name="+B.jgrid.jqID(E)+"]",D).val(G[E]))}}}})},FormToGrid:function(E,F,D,C){return this.each(function(){if(this.grid){D||(D="set");C||(C="first");var G=B(F).serializeArray(),H={};B.each(G,function(J,I){H[I.name]=I.value});"add"===D?B(this).jqGrid("addRowData",E,H,C):"set"===D&&B(this).jqGrid("setRowData",E,H)}})}})})(jQuery);(function(A){A.fn.jqFilter=function(B){if("string"===typeof B){var D=A.fn.jqFilter[B];if(!D){throw"jqFilter - No such method: "+B}var E=A.makeArray(arguments).slice(1);return D.apply(this,E)}var C=A.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},A.jgrid.filter,B||{});return this.each(function(){if(!this.filter){this.p=C;if(null===this.p.filter||void 0===this.p.filter){this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}}var F,G=this.p.columns.length,J,H=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=A.extend(!0,{},this.p.filter);if(G){for(F=0;F<G;F++){J=this.p.columns[F],J.stype?J.inputtype=J.stype:J.inputtype||(J.inputtype="text"),J.sorttype?J.searchtype=J.sorttype:J.searchtype||(J.searchtype="string"),void 0===J.hidden&&(J.hidden=!1),J.label||(J.label=J.name),J.index&&(J.name=J.index),J.hasOwnProperty("searchoptions")||(J.searchoptions={}),J.hasOwnProperty("searchrules")||(J.searchrules={})}this.p.showQuery&&A(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var I=function(K,L){var N=[!0,""],O=A("#"+A.jgrid.jqID(C.id))[0]||null;if(A.isFunction(L.searchrules)){N=L.searchrules.call(O,K,L)}else{if(A.jgrid&&A.jgrid.checkValues){try{N=A.jgrid.checkValues.call(O,K,-1,L.searchrules,L.label)}catch(M){}}}N&&N.length&&!1===N[0]&&(C.error=!N[0],C.errmsg=N[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return A.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){A("table.group:first",this).remove();var K=this.createTableForGroup(C.filter,null);A(this).append(K);A.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(S,N){var P=this,Q,O=A("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),K="left";"rtl"===this.p.direction&&(K="right",O.attr("dir","rtl"));null===N&&O.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+K+"'></th></tr>");var M=A("<tr></tr>");O.append(M);K=A("<th colspan='5' align='"+K+"'></th>");M.append(K);if(!0===this.p.ruleButtons){var T=A("<select class='opsel'></select>");K.append(T);var M="",L;for(Q=0;Q<C.groupOps.length;Q++){L=S.groupOp===P.p.groupOps[Q].op?" selected='selected'":"",M+="<option value='"+P.p.groupOps[Q].op+"'"+L+">"+P.p.groupOps[Q].text+"</option>"}T.append(M).bind("change",function(){S.groupOp=A(T).val();P.onchange()})}M="<span></span>";this.p.groupButton&&(M=A("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),M.bind("click",function(){void 0===S.groups&&(S.groups=[]);S.groups.push({groupOp:C.groupOps[0].op,rules:[],groups:[]});P.reDraw();P.onchange();return !1}));K.append(M);if(!0===this.p.ruleButtons){var M=A("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),R;M.bind("click",function(){void 0===S.rules&&(S.rules=[]);for(Q=0;Q<P.p.columns.length;Q++){var U=void 0===P.p.columns[Q].search?!0:P.p.columns[Q].search,V=!0===P.p.columns[Q].hidden;if(!0===P.p.columns[Q].searchoptions.searchhidden&&U||U&&!V){R=P.p.columns[Q];break}}U=R.searchoptions.sopt?R.searchoptions.sopt:P.p.sopt?P.p.sopt:-1!==A.inArray(R.searchtype,P.p.strarr)?P.p.stropts:P.p.numopts;S.rules.push({field:R.name,op:U[0],data:""});P.reDraw();return !1});K.append(M)}null!==N&&(M=A("<input type='button' value='-' title='Delete group' class='delete-group'/>"),K.append(M),M.bind("click",function(){for(Q=0;Q<N.groups.length;Q++){if(N.groups[Q]===S){N.groups.splice(Q,1);break}}P.reDraw();P.onchange();return !1}));if(void 0!==S.groups){for(Q=0;Q<S.groups.length;Q++){K=A("<tr></tr>"),O.append(K),M=A("<td class='first'></td>"),K.append(M),M=A("<td colspan='4'></td>"),M.append(this.createTableForGroup(S.groups[Q],S)),K.append(M)}}void 0===S.groupOp&&(S.groupOp=P.p.groupOps[0].op);if(void 0!==S.rules){for(Q=0;Q<S.rules.length;Q++){O.append(this.createTableRowForRule(S.rules[Q],S))}}return O};this.createTableRowForRule=function(Y,T){var V=this,W=A("#"+A.jgrid.jqID(C.id))[0]||null,U=A("<tr></tr>"),a,S,X,R,Z="",L;U.append("<td class='first'></td>");var M=A("<td class='columns'></td>");U.append(M);var N=A("<select></select>"),K,P=[];M.append(N);N.bind("change",function(){Y.field=A(N).val();X=A(this).parents("tr:first");for(a=0;a<V.p.columns.length;a++){if(V.p.columns[a].name===Y.field){R=V.p.columns[a];break}}if(R){R.searchoptions.id=A.jgrid.randId();H&&"text"===R.inputtype&&!R.searchoptions.size&&(R.searchoptions.size=10);var b=A.jgrid.createEl.call(W,R.inputtype,R.searchoptions,"",!0,V.p.ajaxSelectOptions||{},!0);A(b).addClass("input-elm");S=R.searchoptions.sopt?R.searchoptions.sopt:V.p.sopt?V.p.sopt:-1!==A.inArray(R.searchtype,V.p.strarr)?V.p.stropts:V.p.numopts;var c="",e=0;P=[];A.each(V.p.ops,function(){P.push(this.oper)});for(a=0;a<S.length;a++){K=A.inArray(S[a],P),-1!==K&&(0===e&&(Y.op=V.p.ops[K].oper),c+="<option value='"+V.p.ops[K].oper+"'>"+V.p.ops[K].text+"</option>",e++)}A(".selectopts",X).empty().append(c);A(".selectopts",X)[0].selectedIndex=0;A.jgrid.msie&&9>A.jgrid.msiever()&&(c=parseInt(A("select.selectopts",X)[0].offsetWidth,10)+1,A(".selectopts",X).width(c),A(".selectopts",X).css("width","auto"));A(".data",X).empty().append(b);A.jgrid.bindEv.call(W,b,R.searchoptions);A(".input-elm",X).bind("change",function(d){d=d.target;Y.data="SPAN"===d.nodeName.toUpperCase()&&R.searchoptions&&A.isFunction(R.searchoptions.custom_value)?R.searchoptions.custom_value.call(W,A(d).children(".customelement:first"),"get"):d.value;V.onchange()});setTimeout(function(){Y.data=A(b).val();V.onchange()},0)}});for(a=M=0;a<V.p.columns.length;a++){L=void 0===V.p.columns[a].search?!0:V.p.columns[a].search;var Q=!0===V.p.columns[a].hidden;if(!0===V.p.columns[a].searchoptions.searchhidden&&L||L&&!Q){L="",Y.field===V.p.columns[a].name&&(L=" selected='selected'",M=a),Z+="<option value='"+V.p.columns[a].name+"'"+L+">"+V.p.columns[a].label+"</option>"}}N.append(Z);Z=A("<td class='operators'></td>");U.append(Z);R=C.columns[M];R.searchoptions.id=A.jgrid.randId();H&&"text"===R.inputtype&&!R.searchoptions.size&&(R.searchoptions.size=10);M=A.jgrid.createEl.call(W,R.inputtype,R.searchoptions,Y.data,!0,V.p.ajaxSelectOptions||{},!0);if("nu"===Y.op||"nn"===Y.op){A(M).attr("readonly","true"),A(M).attr("disabled","true")}var O=A("<select class='selectopts'></select>");Z.append(O);O.bind("change",function(){Y.op=A(O).val();X=A(this).parents("tr:first");var b=A(".input-elm",X)[0];"nu"===Y.op||"nn"===Y.op?(Y.data="","SELECT"!==b.tagName.toUpperCase()&&(b.value=""),b.setAttribute("readonly","true"),b.setAttribute("disabled","true")):("SELECT"===b.tagName.toUpperCase()&&(Y.data=b.value),b.removeAttribute("readonly"),b.removeAttribute("disabled"));V.onchange()});S=R.searchoptions.sopt?R.searchoptions.sopt:V.p.sopt?V.p.sopt:-1!==A.inArray(R.searchtype,V.p.strarr)?V.p.stropts:V.p.numopts;Z="";A.each(V.p.ops,function(){P.push(this.oper)});for(a=0;a<S.length;a++){K=A.inArray(S[a],P),-1!==K&&(L=Y.op===V.p.ops[K].oper?" selected='selected'":"",Z+="<option value='"+V.p.ops[K].oper+"'"+L+">"+V.p.ops[K].text+"</option>")}O.append(Z);Z=A("<td class='data'></td>");U.append(Z);Z.append(M);A.jgrid.bindEv.call(W,M,R.searchoptions);A(M).addClass("input-elm").bind("change",function(){Y.data="custom"===R.inputtype?R.searchoptions.custom_value.call(W,A(this).children(".customelement:first"),"get"):A(this).val();V.onchange()});Z=A("<td></td>");U.append(Z);!0===this.p.ruleButtons&&(M=A("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),Z.append(M),M.bind("click",function(){for(a=0;a<T.rules.length;a++){if(T.rules[a]===Y){T.rules.splice(a,1);break}}V.reDraw();V.onchange();return !1}));return U};this.getStringForGroup=function(N){var K="(",L;if(void 0!==N.groups){for(L=0;L<N.groups.length;L++){1<K.length&&(K+=" "+N.groupOp+" ");try{K+=this.getStringForGroup(N.groups[L])}catch(M){alert(M)}}}if(void 0!==N.rules){try{for(L=0;L<N.rules.length;L++){1<K.length&&(K+=" "+N.groupOp+" "),K+=this.getStringForRule(N.rules[L])}}catch(O){alert(O)}}K+=")";return"()"===K?"":K};this.getStringForRule=function(K){var O="",M="",N,L;for(N=0;N<this.p.ops.length;N++){if(this.p.ops[N].oper===K.op){O=this.p.operands.hasOwnProperty(K.op)?this.p.operands[K.op]:"";M=this.p.ops[N].oper;break}}for(N=0;N<this.p.columns.length;N++){if(this.p.columns[N].name===K.field){L=this.p.columns[N];break}}if(void 0==L){return""}N=K.data;if("bw"===M||"bn"===M){N+="%"}if("ew"===M||"en"===M){N="%"+N}if("cn"===M||"nc"===M){N="%"+N+"%"}if("in"===M||"ni"===M){N=" ("+N+")"}C.errorcheck&&I(K.data,L);return -1!==A.inArray(L.searchtype,["int","integer","float","number","currency"])||"nn"===M||"nu"===M?K.field+" "+O+" "+N:K.field+" "+O+' "'+N+'"'};this.resetFilter=function(){this.p.filter=A.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){A("th.ui-state-error",this).html("");A("tr.error",this).hide()};this.showError=function(){A("th.ui-state-error",this).html(this.p.errmsg);A("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(C.filter)};this.toString=function(){function L(P){var Q="(",R;if(void 0!==P.groups){for(R=0;R<P.groups.length;R++){1<Q.length&&(Q="OR"===P.groupOp?Q+" || ":Q+" && "),Q+=L(P.groups[R])}}if(void 0!==P.rules){for(R=0;R<P.rules.length;R++){1<Q.length&&(Q="OR"===P.groupOp?Q+" || ":Q+" && ");var N=P.rules[R];if(K.p.errorcheck){for(var M=void 0,O=void 0,M=0;M<K.p.columns.length;M++){if(K.p.columns[M].name===N.field){O=K.p.columns[M];break}}O&&I(N.data,O)}Q+=N.op+"(item."+N.field+",'"+N.data+"')"}}Q+=")";return"()"===Q?"":Q}var K=this;return L(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=!0}}})};A.extend(A.fn.jqFilter,{toSQLString:function(){var B="";this.each(function(){B=this.toUserFriendlyString()});return B},filterData:function(){var B;this.each(function(){B=this.p.filter});return B},getParameter:function(B){return void 0!==B&&this.p.hasOwnProperty(B)?this.p[B]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(B){"string"===typeof B&&(B=A.jgrid.parse(B));this.each(function(){this.p.filter=B;this.reDraw();this.onchange()})}})})(jQuery);(function(A){A.jgrid.inlineEdit=A.jgrid.inlineEdit||{};A.jgrid.extend({editRow:function(I,B,H,F,D,E,C,K,J){var G={},L=A.makeArray(arguments).slice(1);"object"===A.type(L[0])?G=L[0]:(void 0!==B&&(G.keys=B),A.isFunction(H)&&(G.oneditfunc=H),A.isFunction(F)&&(G.successfunc=F),void 0!==D&&(G.url=D),void 0!==E&&(G.extraparam=E),A.isFunction(C)&&(G.aftersavefunc=C),A.isFunction(K)&&(G.errorfunc=K),A.isFunction(J)&&(G.afterrestorefunc=J));G=A.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},A.jgrid.inlineEdit,G);return this.each(function(){var U=this,S,M,R,T=0,O=null,P={},Q,N;U.grid&&(Q=A(U).jqGrid("getInd",I,!0),!1!==Q&&(R=A.isFunction(G.beforeEditRow)?G.beforeEditRow.call(U,G,I):void 0,void 0===R&&(R=!0),R&&(R=A(Q).attr("editable")||"0","0"!==R||A(Q).hasClass("not-editable-row")||(N=U.p.colModel,A('td[role="gridcell"]',Q).each(function(Y){S=N[Y].name;var W=!0===U.p.treeGrid&&S===U.p.ExpandColumn;if(W){M=A("span:first",this).html()}else{try{M=A.unformat.call(U,this,{rowId:I,colModel:N[Y]},Y)}catch(X){M=N[Y].edittype&&"textarea"===N[Y].edittype?A(this).text():A(this).html()}}if("cb"!==S&&"subgrid"!==S&&"rn"!==S&&(U.p.autoencode&&(M=A.jgrid.htmlDecode(M)),P[S]=M,!0===N[Y].editable)){null===O&&(O=Y);W?A("span:first",this).html(""):A(this).html("");var V=A.extend({},N[Y].editoptions||{},{id:I+"_"+S,name:S});N[Y].edittype||(N[Y].edittype="text");if("&nbsp;"===M||"&#160;"===M||1===M.length&&160===M.charCodeAt(0)){M=""}var Z=A.jgrid.createEl.call(U,N[Y].edittype,V,M,!0,A.extend({},A.jgrid.ajaxOptions,U.p.ajaxSelectOptions||{}));A(Z).addClass("editable");W?A("span:first",this).append(Z):A(this).append(Z);A.jgrid.bindEv.call(U,Z,V);"select"===N[Y].edittype&&void 0!==N[Y].editoptions&&!0===N[Y].editoptions.multiple&&void 0===N[Y].editoptions.dataUrl&&A.jgrid.msie&&A(Z).width(A(Z).width());T++}}),0<T&&(P.id=I,U.p.savedRow.push(P),A(Q).attr("editable","1"),setTimeout(function(){A("td:eq("+O+") input",Q).focus()},0),!0===G.keys&&A(Q).bind("keydown",function(W){if(27===W.keyCode){A(U).jqGrid("restoreRow",I,G.afterrestorefunc);if(U.p._inlinenav){try{A(U).jqGrid("showAddEditButtons")}catch(X){}}return !1}if(13===W.keyCode){if("TEXTAREA"===W.target.tagName){return !0}if(A(U).jqGrid("saveRow",I,G)&&U.p._inlinenav){try{A(U).jqGrid("showAddEditButtons")}catch(V){}}return !1}}),A(U).triggerHandler("jqGridInlineEditRow",[I,G]),A.isFunction(G.oneditfunc)&&G.oneditfunc.call(U,I))))))})},saveRow:function(P,T,O,M,K,L,D){var R=A.makeArray(arguments).slice(1),Q={};"object"===A.type(R[0])?Q=R[0]:(A.isFunction(T)&&(Q.successfunc=T),void 0!==O&&(Q.url=O),void 0!==M&&(Q.extraparam=M),A.isFunction(K)&&(Q.aftersavefunc=K),A.isFunction(L)&&(Q.errorfunc=L),A.isFunction(D)&&(Q.afterrestorefunc=D));var Q=A.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},A.jgrid.inlineEdit,Q),N=!1,S=this[0],B,J={},W={},F={},G,V,I;if(!S.grid){return N}I=A(S).jqGrid("getInd",P,!0);if(!1===I){return N}R=A.isFunction(Q.beforeSaveRow)?Q.beforeSaveRow.call(S,Q,P):void 0;void 0===R&&(R=!0);if(R){R=A(I).attr("editable");Q.url=Q.url||S.p.editurl;if("1"===R){var H;A('td[role="gridcell"]',I).each(function(a){H=S.p.colModel[a];B=H.name;if("cb"!==B&&"subgrid"!==B&&!0===H.editable&&"rn"!==B&&!A(this).hasClass("not-editable-cell")){switch(H.edittype){case"checkbox":var Z=["Yes","No"];H.editoptions&&(Z=H.editoptions.value.split(":"));J[B]=A("input",this).is(":checked")?Z[0]:Z[1];break;case"text":case"password":case"textarea":case"button":J[B]=A("input, textarea",this).val();break;case"select":if(H.editoptions.multiple){var Z=A("select",this),Y=[];J[B]=A(Z).val();J[B]=J[B]?J[B].join(","):"";A("select option:selected",this).each(function(c,e){Y[c]=A(e).text()});W[B]=Y.join(",")}else{J[B]=A("select option:selected",this).val(),W[B]=A("select option:selected",this).text()}H.formatter&&"select"===H.formatter&&(W={});break;case"custom":try{if(H.editoptions&&A.isFunction(H.editoptions.custom_value)){if(J[B]=H.editoptions.custom_value.call(S,A(".customelement",this),"get"),void 0===J[B]){throw"e2"}}else{throw"e1"}}catch(X){"e1"===X&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===X?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,X.message,A.jgrid.edit.bClose)}}V=A.jgrid.checkValues.call(S,J[B],a);if(!1===V[0]){return !1}S.p.autoencode&&(J[B]=A.jgrid.htmlEncode(J[B]));"clientArray"!==Q.url&&H.editoptions&&!0===H.editoptions.NullIfEmpty&&""===J[B]&&(F[B]="null")}});if(!1===V[0]){try{var E=A(S).jqGrid("getGridRowById",P),C=A.jgrid.findPos(E);A.jgrid.info_dialog(A.jgrid.errors.errcap,V[1],A.jgrid.edit.bClose,{left:C[0],top:C[1]+A(E).outerHeight()})}catch(U){alert(V[1])}return N}R=S.p.prmNames;E=P;C=!1===S.p.keyIndex?R.id:S.p.colModel[S.p.keyIndex+(!0===S.p.rownumbers?1:0)+(!0===S.p.multiselect?1:0)+(!0===S.p.subGrid?1:0)].name;J&&(J[R.oper]=R.editoper,void 0===J[C]||""===J[C]?J[C]=P:I.id!==S.p.idPrefix+J[C]&&(R=A.jgrid.stripPref(S.p.idPrefix,P),void 0!==S.p._index[R]&&(S.p._index[J[C]]=S.p._index[R],delete S.p._index[R]),P=S.p.idPrefix+J[C],A(I).attr("id",P),S.p.selrow===E&&(S.p.selrow=P),A.isArray(S.p.selarrrow)&&(R=A.inArray(E,S.p.selarrrow),0<=R&&(S.p.selarrrow[R]=P)),S.p.multiselect&&(R="jqg_"+S.p.id+"_"+P,A("input.cbox",I).attr("id",R).attr("name",R))),void 0===S.p.inlineData&&(S.p.inlineData={}),J=A.extend({},J,S.p.inlineData,Q.extraparam));if("clientArray"===Q.url){J=A.extend({},J,W);S.p.autoencode&&A.each(J,function(X,Y){J[X]=A.jgrid.htmlDecode(Y)});R=A(S).jqGrid("setRowData",P,J);A(I).attr("editable","0");for(C=0;C<S.p.savedRow.length;C++){if(String(S.p.savedRow[C].id)===String(E)){G=C;break}}0<=G&&S.p.savedRow.splice(G,1);A(S).triggerHandler("jqGridInlineAfterSaveRow",[P,R,J,Q]);A.isFunction(Q.aftersavefunc)&&Q.aftersavefunc.call(S,P,R,Q);N=!0;A(I).removeClass("jqgrid-new-row").unbind("keydown")}else{A("#lui_"+A.jgrid.jqID(S.p.id)).show(),F=A.extend({},J,F),F[C]=A.jgrid.stripPref(S.p.idPrefix,F[C]),A.ajax(A.extend({url:Q.url,data:A.isFunction(S.p.serializeRowData)?S.p.serializeRowData.call(S,F):F,type:Q.mtype,async:!1,complete:function(a,Z){A("#lui_"+A.jgrid.jqID(S.p.id)).hide();if("success"===Z){var X=!0,Y;Y=A(S).triggerHandler("jqGridInlineSuccessSaveRow",[a,P,Q]);A.isArray(Y)||(Y=[!0,J]);Y[0]&&A.isFunction(Q.successfunc)&&(Y=Q.successfunc.call(S,a));A.isArray(Y)?(X=Y[0],J=Y[1]||J):X=Y;if(!0===X){S.p.autoencode&&A.each(J,function(e,c){J[e]=A.jgrid.htmlDecode(c)});J=A.extend({},J,W);A(S).jqGrid("setRowData",P,J);A(I).attr("editable","0");for(X=0;X<S.p.savedRow.length;X++){if(String(S.p.savedRow[X].id)===String(P)){G=X;break}}0<=G&&S.p.savedRow.splice(G,1);A(S).triggerHandler("jqGridInlineAfterSaveRow",[P,a,J,Q]);A.isFunction(Q.aftersavefunc)&&Q.aftersavefunc.call(S,P,a);N=!0;A(I).removeClass("jqgrid-new-row").unbind("keydown")}else{A(S).triggerHandler("jqGridInlineErrorSaveRow",[P,a,Z,null,Q]),A.isFunction(Q.errorfunc)&&Q.errorfunc.call(S,P,a,Z,null),!0===Q.restoreAfterError&&A(S).jqGrid("restoreRow",P,Q.afterrestorefunc)}}},error:function(a,Z,X){A("#lui_"+A.jgrid.jqID(S.p.id)).hide();A(S).triggerHandler("jqGridInlineErrorSaveRow",[P,a,Z,X,Q]);if(A.isFunction(Q.errorfunc)){Q.errorfunc.call(S,P,a,Z,X)}else{a=a.responseText||a.statusText;try{A.jgrid.info_dialog(A.jgrid.errors.errcap,'<div class="ui-state-error">'+a+"</div>",A.jgrid.edit.bClose,{buttonalign:"right"})}catch(Y){alert(a)}}!0===Q.restoreAfterError&&A(S).jqGrid("restoreRow",P,Q.afterrestorefunc)}},A.jgrid.ajaxOptions,S.p.ajaxRowOptions||{}))}}return N}},restoreRow:function(E,B){var D=A.makeArray(arguments).slice(1),C={};"object"===A.type(D[0])?C=D[0]:A.isFunction(B)&&(C.afterrestorefunc=B);C=A.extend(!0,{},A.jgrid.inlineEdit,C);return this.each(function(){var J=this,G=-1,H,F={},K;if(J.grid&&(H=A(J).jqGrid("getInd",E,!0),!1!==H&&(K=A.isFunction(C.beforeCancelRow)?C.beforeCancelRow.call(J,C,sr):void 0,void 0===K&&(K=!0),K))){for(K=0;K<J.p.savedRow.length;K++){if(String(J.p.savedRow[K].id)===String(E)){G=K;break}}if(0<=G){if(A.isFunction(A.fn.datepicker)){try{A("input.hasDatepicker","#"+A.jgrid.jqID(H.id)).datepicker("hide")}catch(I){}}A.each(J.p.colModel,function(){!0===this.editable&&J.p.savedRow[G].hasOwnProperty(this.name)&&(F[this.name]=J.p.savedRow[G][this.name])});A(J).jqGrid("setRowData",E,F);A(H).attr("editable","0").unbind("keydown");J.p.savedRow.splice(G,1);A("#"+A.jgrid.jqID(E),"#"+A.jgrid.jqID(J.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){A(J).jqGrid("delRowData",E);A(J).jqGrid("showAddEditButtons")},0)}A(J).triggerHandler("jqGridInlineAfterRestoreRow",[E]);A.isFunction(C.afterrestorefunc)&&C.afterrestorefunc.call(J,E)}})},addRow:function(B){B=A.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},B||{});return this.each(function(){if(this.grid){var C=this,D=A.isFunction(B.beforeAddRow)?B.beforeAddRow.call(C,B.addRowParams):void 0;void 0===D&&(D=!0);D&&(B.rowID=A.isFunction(B.rowID)?B.rowID.call(C,B):null!=B.rowID?B.rowID:A.jgrid.randId(),!0===B.useDefValues&&A(C.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var E=this.editoptions.defaultValue,E=A.isFunction(E)?E.call(C):E;B.initdata[this.name]=E}}),A(C).jqGrid("addRowData",B.rowID,B.initdata,B.position),B.rowID=C.p.idPrefix+B.rowID,A("#"+A.jgrid.jqID(B.rowID),"#"+A.jgrid.jqID(C.p.id)).addClass("jqgrid-new-row"),B.useFormatter?A("#"+A.jgrid.jqID(B.rowID)+" .ui-inline-edit","#"+A.jgrid.jqID(C.p.id)).click():(D=C.p.prmNames,B.addRowParams.extraparam[D.oper]=D.addoper,A(C).jqGrid("editRow",B.rowID,B.addRowParams),A(C).jqGrid("setSelection",B.rowID)))}})},inlineNav:function(C,B){B=A.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},A.jgrid.nav,B||{});return this.each(function(){if(this.grid){var H=this,G,D=A.jgrid.jqID(H.p.id);H.p._inlinenav=!0;if(!0===B.addParams.useFormatter){var E=H.p.colModel,F;for(F=0;F<E.length;F++){if(E[F].formatter&&"actions"===E[F].formatter){E[F].formatoptions&&(E=A.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},E[F].formatoptions),B.addParams.addRowParams={keys:E.keys,oneditfunc:E.onEdit,successfunc:E.onSuccess,url:E.url,extraparam:E.extraparam,aftersavefunc:E.afterSave,errorfunc:E.onError,afterrestorefunc:E.afterRestore});break}}}B.add&&A(H).jqGrid("navButtonAdd",C,{caption:B.addtext,title:B.addtitle,buttonicon:B.addicon,id:H.p.id+"_iladd",onClickButton:function(){A(H).jqGrid("addRow",B.addParams);B.addParams.useFormatter||(A("#"+D+"_ilsave").removeClass("ui-state-disabled"),A("#"+D+"_ilcancel").removeClass("ui-state-disabled"),A("#"+D+"_iladd").addClass("ui-state-disabled"),A("#"+D+"_iledit").addClass("ui-state-disabled"))}});B.edit&&A(H).jqGrid("navButtonAdd",C,{caption:B.edittext,title:B.edittitle,buttonicon:B.editicon,id:H.p.id+"_iledit",onClickButton:function(){var I=A(H).jqGrid("getGridParam","selrow");I?(A(H).jqGrid("editRow",I,B.editParams),A("#"+D+"_ilsave").removeClass("ui-state-disabled"),A("#"+D+"_ilcancel").removeClass("ui-state-disabled"),A("#"+D+"_iladd").addClass("ui-state-disabled"),A("#"+D+"_iledit").addClass("ui-state-disabled")):(A.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+D,jqm:!0}),A("#jqg_alrt").focus())}});B.save&&(A(H).jqGrid("navButtonAdd",C,{caption:B.savetext||"",title:B.savetitle||"Save row",buttonicon:B.saveicon,id:H.p.id+"_ilsave",onClickButton:function(){var K=H.p.savedRow[0].id;if(K){var L=H.p.prmNames,J=L.oper,I=B.editParams;A("#"+A.jgrid.jqID(K),"#"+D).hasClass("jqgrid-new-row")?(B.addParams.addRowParams.extraparam[J]=L.addoper,I=B.addParams.addRowParams):(B.editParams.extraparam||(B.editParams.extraparam={}),B.editParams.extraparam[J]=L.editoper);A(H).jqGrid("saveRow",K,I)&&A(H).jqGrid("showAddEditButtons")}else{A.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+D,jqm:!0}),A("#jqg_alrt").focus()}}}),A("#"+D+"_ilsave").addClass("ui-state-disabled"));B.cancel&&(A(H).jqGrid("navButtonAdd",C,{caption:B.canceltext||"",title:B.canceltitle||"Cancel row editing",buttonicon:B.cancelicon,id:H.p.id+"_ilcancel",onClickButton:function(){var I=H.p.savedRow[0].id,J=B.editParams;I?(A("#"+A.jgrid.jqID(I),"#"+D).hasClass("jqgrid-new-row")&&(J=B.addParams.addRowParams),A(H).jqGrid("restoreRow",I,J),A(H).jqGrid("showAddEditButtons")):(A.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+D,jqm:!0}),A("#jqg_alrt").focus())}}),A("#"+D+"_ilcancel").addClass("ui-state-disabled"));!0===B.restoreAfterSelect&&(G=A.isFunction(H.p.beforeSelectRow)?H.p.beforeSelectRow:!1,H.p.beforeSelectRow=function(J,K){var I=!0;0<H.p.savedRow.length&&!0===H.p._inlinenav&&J!==H.p.selrow&&null!==H.p.selrow&&(H.p.selrow===B.addParams.rowID?A(H).jqGrid("delRowData",H.p.selrow):A(H).jqGrid("restoreRow",H.p.selrow,B.editParams),A(H).jqGrid("showAddEditButtons"));G&&(I=G.call(H,J,K));return I})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var B=A.jgrid.jqID(this.p.id);A("#"+B+"_ilsave").addClass("ui-state-disabled");A("#"+B+"_ilcancel").addClass("ui-state-disabled");A("#"+B+"_iladd").removeClass("ui-state-disabled");A("#"+B+"_iledit").removeClass("ui-state-disabled")}})}})})(jQuery);(function(A){A.jgrid.extend({editCell:function(B,D,C){return this.each(function(){var K=this,L,E,H,G;if(K.grid&&!0===K.p.cellEdit){D=parseInt(D,10);K.p.selrow=K.rows[B].id;K.p.knv||A(K).jqGrid("GridNav");if(0<K.p.savedRow.length){if(!0===C&&B==K.p.iRow&&D==K.p.iCol){return}A(K).jqGrid("saveCell",K.p.savedRow[0].id,K.p.savedRow[0].ic)}else{window.setTimeout(function(){A("#"+A.jgrid.jqID(K.p.knv)).attr("tabindex","-1").focus()},0)}G=K.p.colModel[D];L=G.name;if("subgrid"!==L&&"cb"!==L&&"rn"!==L){H=A("td:eq("+D+")",K.rows[B]);if(!0!==G.editable||!0!==C||H.hasClass("not-editable-cell")){0<=parseInt(K.p.iCol,10)&&0<=parseInt(K.p.iRow,10)&&(A("td:eq("+K.p.iCol+")",K.rows[K.p.iRow]).removeClass("edit-cell ui-state-highlight"),A(K.rows[K.p.iRow]).removeClass("selected-row ui-state-hover")),H.addClass("edit-cell ui-state-highlight"),A(K.rows[B]).addClass("selected-row ui-state-hover"),E=H.html().replace(/\&#160\;/ig,""),A(K).triggerHandler("jqGridSelectCell",[K.rows[B].id,L,E,B,D]),A.isFunction(K.p.onSelectCell)&&K.p.onSelectCell.call(K,K.rows[B].id,L,E,B,D)}else{0<=parseInt(K.p.iCol,10)&&0<=parseInt(K.p.iRow,10)&&(A("td:eq("+K.p.iCol+")",K.rows[K.p.iRow]).removeClass("edit-cell ui-state-highlight"),A(K.rows[K.p.iRow]).removeClass("selected-row ui-state-hover"));A(H).addClass("edit-cell ui-state-highlight");A(K.rows[B]).addClass("selected-row ui-state-hover");try{E=A.unformat.call(K,H,{rowId:K.rows[B].id,colModel:G},D)}catch(J){E=G.edittype&&"textarea"===G.edittype?A(H).text():A(H).html()}K.p.autoencode&&(E=A.jgrid.htmlDecode(E));G.edittype||(G.edittype="text");K.p.savedRow.push({id:B,ic:D,name:L,v:E});if("&nbsp;"===E||"&#160;"===E||1===E.length&&160===E.charCodeAt(0)){E=""}if(A.isFunction(K.p.formatCell)){var I=K.p.formatCell.call(K,K.rows[B].id,L,E,B,D);void 0!==I&&(E=I)}A(K).triggerHandler("jqGridBeforeEditCell",[K.rows[B].id,L,E,B,D]);A.isFunction(K.p.beforeEditCell)&&K.p.beforeEditCell.call(K,K.rows[B].id,L,E,B,D);var I=A.extend({},G.editoptions||{},{id:B+"_"+L,name:L}),F=A.jgrid.createEl.call(K,G.edittype,I,E,!0,A.extend({},A.jgrid.ajaxOptions,K.p.ajaxSelectOptions||{}));A(H).html("").append(F).attr("tabindex","0");A.jgrid.bindEv.call(K,F,I);window.setTimeout(function(){A(F).focus()},0);A("input, select, textarea",H).bind("keydown",function(M){27===M.keyCode&&(0<A("input.hasDatepicker",H).length?A(".ui-datepicker").is(":hidden")?A(K).jqGrid("restoreCell",B,D):A("input.hasDatepicker",H).datepicker("hide"):A(K).jqGrid("restoreCell",B,D));if(13===M.keyCode){return A(K).jqGrid("saveCell",B,D),!1}if(9===M.keyCode){if(K.grid.hDiv.loading){return !1}M.shiftKey?A(K).jqGrid("prevCell",B,D):A(K).jqGrid("nextCell",B,D)}M.stopPropagation()});A(K).triggerHandler("jqGridAfterEditCell",[K.rows[B].id,L,E,B,D]);A.isFunction(K.p.afterEditCell)&&K.p.afterEditCell.call(K,K.rows[B].id,L,E,B,D)}K.p.iCol=D;K.p.iRow=B}}})},saveCell:function(B,C){return this.each(function(){var Q=this,O;if(Q.grid&&!0===Q.p.cellEdit){O=1<=Q.p.savedRow.length?0:null;if(null!==O){var R=A("td:eq("+C+")",Q.rows[B]),D,K,J=Q.p.colModel[C],N=J.name,M=A.jgrid.jqID(N);switch(J.edittype){case"select":if(J.editoptions.multiple){var M=A("#"+B+"_"+M,Q.rows[B]),G=[];(D=A(M).val())?D.join(","):D="";A("option:selected",M).each(function(T,S){G[T]=A(S).text()});K=G.join(",")}else{D=A("#"+B+"_"+M+" option:selected",Q.rows[B]).val(),K=A("#"+B+"_"+M+" option:selected",Q.rows[B]).text()}J.formatter&&(K=D);break;case"checkbox":var L=["Yes","No"];J.editoptions&&(L=J.editoptions.value.split(":"));K=D=A("#"+B+"_"+M,Q.rows[B]).is(":checked")?L[0]:L[1];break;case"password":case"text":case"textarea":case"button":K=D=A("#"+B+"_"+M,Q.rows[B]).val();break;case"custom":try{if(J.editoptions&&A.isFunction(J.editoptions.custom_value)){D=J.editoptions.custom_value.call(Q,A(".customelement",R),"get");if(void 0===D){throw"e2"}K=D}else{throw"e1"}}catch(H){"e1"===H&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===H?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,H.message,A.jgrid.edit.bClose)}}if(K!==Q.p.savedRow[O].v){if(O=A(Q).triggerHandler("jqGridBeforeSaveCell",[Q.rows[B].id,N,D,B,C])){K=D=O}A.isFunction(Q.p.beforeSaveCell)&&(O=Q.p.beforeSaveCell.call(Q,Q.rows[B].id,N,D,B,C))&&(K=D=O);var E=A.jgrid.checkValues.call(Q,D,C);if(!0===E[0]){O=A(Q).triggerHandler("jqGridBeforeSubmitCell",[Q.rows[B].id,N,D,B,C])||{};A.isFunction(Q.p.beforeSubmitCell)&&((O=Q.p.beforeSubmitCell.call(Q,Q.rows[B].id,N,D,B,C))||(O={}));0<A("input.hasDatepicker",R).length&&A("input.hasDatepicker",R).datepicker("hide");if("remote"===Q.p.cellsubmit){if(Q.p.cellurl){var F={};Q.p.autoencode&&(D=A.jgrid.htmlEncode(D));F[N]=D;L=Q.p.prmNames;J=L.id;M=L.oper;F[J]=A.jgrid.stripPref(Q.p.idPrefix,Q.rows[B].id);F[M]=L.editoper;F=A.extend(O,F);A("#lui_"+A.jgrid.jqID(Q.p.id)).show();Q.grid.hDiv.loading=!0;A.ajax(A.extend({url:Q.p.cellurl,data:A.isFunction(Q.p.serializeCellData)?Q.p.serializeCellData.call(Q,F):F,type:"POST",complete:function(T,U){A("#lui_"+Q.p.id).hide();Q.grid.hDiv.loading=!1;if("success"===U){var S=A(Q).triggerHandler("jqGridAfterSubmitCell",[Q,T,F.id,N,D,B,C])||[!0,""];!0===S[0]&&A.isFunction(Q.p.afterSubmitCell)&&(S=Q.p.afterSubmitCell.call(Q,T,F.id,N,D,B,C));!0===S[0]?(A(R).empty(),A(Q).jqGrid("setCell",Q.rows[B].id,C,K,!1,!1,!0),A(R).addClass("dirty-cell"),A(Q.rows[B]).addClass("edited"),A(Q).triggerHandler("jqGridAfterSaveCell",[Q.rows[B].id,N,D,B,C]),A.isFunction(Q.p.afterSaveCell)&&Q.p.afterSaveCell.call(Q,Q.rows[B].id,N,D,B,C),Q.p.savedRow.splice(0,1)):(A.jgrid.info_dialog(A.jgrid.errors.errcap,S[1],A.jgrid.edit.bClose),A(Q).jqGrid("restoreCell",B,C))}},error:function(U,T,S){A("#lui_"+A.jgrid.jqID(Q.p.id)).hide();Q.grid.hDiv.loading=!1;A(Q).triggerHandler("jqGridErrorCell",[U,T,S]);A.isFunction(Q.p.errorCell)?Q.p.errorCell.call(Q,U,T,S):A.jgrid.info_dialog(A.jgrid.errors.errcap,U.status+" : "+U.statusText+"<br/>"+T,A.jgrid.edit.bClose);A(Q).jqGrid("restoreCell",B,C)}},A.jgrid.ajaxOptions,Q.p.ajaxCellOptions||{}))}else{try{A.jgrid.info_dialog(A.jgrid.errors.errcap,A.jgrid.errors.nourl,A.jgrid.edit.bClose),A(Q).jqGrid("restoreCell",B,C)}catch(P){}}}"clientArray"===Q.p.cellsubmit&&(A(R).empty(),A(Q).jqGrid("setCell",Q.rows[B].id,C,K,!1,!1,!0),A(R).addClass("dirty-cell"),A(Q.rows[B]).addClass("edited"),A(Q).triggerHandler("jqGridAfterSaveCell",[Q.rows[B].id,N,D,B,C]),A.isFunction(Q.p.afterSaveCell)&&Q.p.afterSaveCell.call(Q,Q.rows[B].id,N,D,B,C),Q.p.savedRow.splice(0,1))}else{try{window.setTimeout(function(){A.jgrid.info_dialog(A.jgrid.errors.errcap,D+" "+E[1],A.jgrid.edit.bClose)},100),A(Q).jqGrid("restoreCell",B,C)}catch(I){}}}else{A(Q).jqGrid("restoreCell",B,C)}}window.setTimeout(function(){A("#"+A.jgrid.jqID(Q.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(B,C){return this.each(function(){var G=this,F;if(G.grid&&!0===G.p.cellEdit){F=1<=G.p.savedRow.length?0:null;if(null!==F){var D=A("td:eq("+C+")",G.rows[B]);if(A.isFunction(A.fn.datepicker)){try{A("input.hasDatepicker",D).datepicker("hide")}catch(E){}}A(D).empty().attr("tabindex","-1");A(G).jqGrid("setCell",G.rows[B].id,C,G.p.savedRow[F].v,!1,!1,!0);A(G).triggerHandler("jqGridAfterRestoreCell",[G.rows[B].id,G.p.savedRow[F].v,B,C]);A.isFunction(G.p.afterRestoreCell)&&G.p.afterRestoreCell.call(G,G.rows[B].id,G.p.savedRow[F].v,B,C);G.p.savedRow.splice(0,1)}window.setTimeout(function(){A("#"+G.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(B,C){return this.each(function(){var E=!1,D;if(this.grid&&!0===this.p.cellEdit){for(D=C+1;D<this.p.colModel.length;D++){if(!0===this.p.colModel[D].editable){E=D;break}}!1!==E?A(this).jqGrid("editCell",B,E,!0):0<this.p.savedRow.length&&A(this).jqGrid("saveCell",B,C)}})},prevCell:function(B,C){return this.each(function(){var E=!1,D;if(this.grid&&!0===this.p.cellEdit){for(D=C-1;0<=D;D--){if(!0===this.p.colModel[D].editable){E=D;break}}!1!==E?A(this).jqGrid("editCell",B,E,!0):0<this.p.savedRow.length&&A(this).jqGrid("saveCell",B,C)}})},GridNav:function(){return this.each(function(){function C(M,I,J){if("v"===J.substr(0,1)){var N=A(F.grid.bDiv)[0].clientHeight,H=A(F.grid.bDiv)[0].scrollTop,K=F.rows[M].offsetTop+F.rows[M].clientHeight,L=F.rows[M].offsetTop;"vd"===J&&K>=N&&(A(F.grid.bDiv)[0].scrollTop=A(F.grid.bDiv)[0].scrollTop+F.rows[M].clientHeight);"vu"===J&&L<H&&(A(F.grid.bDiv)[0].scrollTop=A(F.grid.bDiv)[0].scrollTop-F.rows[M].clientHeight)}"h"===J&&(J=A(F.grid.bDiv)[0].clientWidth,N=A(F.grid.bDiv)[0].scrollLeft,H=F.rows[M].cells[I].offsetLeft,F.rows[M].cells[I].offsetLeft+F.rows[M].cells[I].clientWidth>=J+parseInt(N,10)?A(F.grid.bDiv)[0].scrollLeft=A(F.grid.bDiv)[0].scrollLeft+F.rows[M].cells[I].clientWidth:H<N&&(A(F.grid.bDiv)[0].scrollLeft=A(F.grid.bDiv)[0].scrollLeft-F.rows[M].cells[I].clientWidth))}function G(J,K){var H,I;if("lft"===K){for(H=J+1,I=J;0<=I;I--){if(!0!==F.p.colModel[I].hidden){H=I;break}}}if("rgt"===K){for(H=J-1,I=J;I<F.p.colModel.length;I++){if(!0!==F.p.colModel[I].hidden){H=I;break}}}return H}var F=this;if(F.grid&&!0===F.p.cellEdit){F.p.knv=F.p.id+"_kn";var E=A("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+F.p.knv+"'></div></div>"),B,D;A(E).insertBefore(F.grid.cDiv);A("#"+F.p.knv).focus().keydown(function(H){D=H.keyCode;"rtl"===F.p.direction&&(37===D?D=39:39===D&&(D=37));switch(D){case 38:0<F.p.iRow-1&&(C(F.p.iRow-1,F.p.iCol,"vu"),A(F).jqGrid("editCell",F.p.iRow-1,F.p.iCol,!1));break;case 40:F.p.iRow+1<=F.rows.length-1&&(C(F.p.iRow+1,F.p.iCol,"vd"),A(F).jqGrid("editCell",F.p.iRow+1,F.p.iCol,!1));break;case 37:0<=F.p.iCol-1&&(B=G(F.p.iCol-1,"lft"),C(F.p.iRow,B,"h"),A(F).jqGrid("editCell",F.p.iRow,B,!1));break;case 39:F.p.iCol+1<=F.p.colModel.length-1&&(B=G(F.p.iCol+1,"rgt"),C(F.p.iRow,B,"h"),A(F).jqGrid("editCell",F.p.iRow,B,!1));break;case 13:0<=parseInt(F.p.iCol,10)&&0<=parseInt(F.p.iRow,10)&&A(F).jqGrid("editCell",F.p.iRow,F.p.iCol,!0);break;default:return !0}return !1})}})},getChangedCells:function(B){var C=[];B||(B="all");this.each(function(){var E=this,D;E.grid&&!0===E.p.cellEdit&&A(E.rows).each(function(F){var G={};A(this).hasClass("edited")&&(A("td",this).each(function(J){D=E.p.colModel[J].name;if("cb"!==D&&"subgrid"!==D){if("dirty"===B){if(A(this).hasClass("dirty-cell")){try{G[D]=A.unformat.call(E,this,{rowId:E.rows[F].id,colModel:E.p.colModel[J]},J)}catch(H){G[D]=A.jgrid.htmlDecode(A(this).html())}}}else{try{G[D]=A.unformat.call(E,this,{rowId:E.rows[F].id,colModel:E.p.colModel[J]},J)}catch(I){G[D]=A.jgrid.htmlDecode(A(this).html())}}}}),G.id=this.id,C.push(G))})});return C}})})(jQuery);(function(H){H.fn.jqm=function(J){var K={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:I,ajaxText:"",target:I,modal:I,toTop:I,onShow:I,onHide:I,onLoad:I};return this.each(function(){if(this._jqm){return F[this._jqm].c=H.extend({},F[this._jqm].c,J)}E++;this._jqm=E;F[E]={c:H.extend(K,H.jqm.params,J),a:I,w:H(this).addClass("jqmID"+E),s:E};K.trigger&&H(this).jqmAddTrigger(K.trigger)})};H.fn.jqmAddClose=function(J){return A(this,J,"jqmHide")};H.fn.jqmAddTrigger=function(J){return A(this,J,"jqmShow")};H.fn.jqmShow=function(J){return this.each(function(){H.jqm.open(this._jqm,J)})};H.fn.jqmHide=function(J){return this.each(function(){H.jqm.close(this._jqm,J)})};H.jqm={hash:{},open:function(O,P){var N=F[O],L=N.c,J="."+L.closeClass,K=parseInt(N.w.css("z-index")),K=0<K?K:3000,M=H("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":K-1,opacity:L.overlay/100});if(N.a){return I}N.t=P;N.a=!0;N.w.css("z-index",K);L.modal?(G[0]||setTimeout(function(){B("bind")},1),G.push(O)):0<L.overlay?L.closeoverlay&&N.w.jqmAddClose(M):M=I;N.o=M?M.addClass(L.overlayClass).prependTo("body"):I;L.ajax?(K=L.target||N.w,M=L.ajax,K="string"==typeof K?H(K,N.w):H(K),M="@"==M.substr(0,1)?H(P).attr(M.substring(1)):M,K.html(L.ajaxText).load(M,function(){L.onLoad&&L.onLoad.call(this,N);J&&N.w.jqmAddClose(H(J,N.w));C(N)})):J&&N.w.jqmAddClose(H(J,N.w));L.toTop&&N.o&&N.w.before('<span id="jqmP'+N.w[0]._jqm+'"></span>').insertAfter(N.o);L.onShow?L.onShow(N):N.w.show();C(N);return I},close:function(J){J=F[J];if(!J.a){return I}J.a=I;G[0]&&(G.pop(),G[0]||B("unbind"));J.c.toTop&&J.o&&H("#jqmP"+J.w[0]._jqm).after(J.w).remove();if(J.c.onHide){J.c.onHide(J)}else{J.w.hide(),J.o&&J.o.remove()}return I},params:{}};var E=0,F=H.jqm.hash,G=[],I=!1,C=function(K){try{H(":input:visible",K.w)[0].focus()}catch(J){}},B=function(J){H(document)[J]("keypress",D)[J]("keydown",D)[J]("mousedown",D)},D=function(L){var J=F[G[G.length-1]],K=!H(L.target).parents(".jqmID"+J.s)[0];K&&(H(".jqmID"+J.s).each(function(){var N=H(this),M=N.offset();if(M.top<=L.pageY&&L.pageY<=M.top+N.height()&&M.left<=L.pageX&&L.pageX<=M.left+N.width()){return K=!1}}),C(J));return !K},A=function(K,L,J){return K.each(function(){var M=this._jqm;H(L).each(function(){this[J]||(this[J]=[],H(this).click(function(){for(var O in {jqmShow:1,jqmHide:1}){for(var N in this[O]){if(F[this[O][N]]){F[this[O][N]].w[O](this)}}}return I}));this[J].push(M)})})}})(jQuery);(function(E){E.fn.jqDrag=function(J){return B(this,J,"d")};E.fn.jqResize=function(K,J){return B(this,K,"r",J)};E.jqDnR={dnr:{},e:0,drag:function(J){"d"==I.k?A.css({left:I.X+J.pageX-I.pX,top:I.Y+J.pageY-I.pY}):(A.css({width:Math.max(J.pageX-I.pX+I.W,0),height:Math.max(J.pageY-I.pY+I.H,0)}),G&&H.css({width:Math.max(J.pageX-G.pX+G.W,0),height:Math.max(J.pageY-G.pY+G.H,0)}));return !1},stop:function(){E(document).unbind("mousemove",F.drag).unbind("mouseup",F.stop)}};var F=E.jqDnR,I=F.dnr,A=F.e,H,G,B=function(M,L,J,K){return M.each(function(){L=L?E(L,M):M;L.bind("mousedown",{e:M,k:J},function(Q){var P=Q.data,R={};A=P.e;H=K?E(K):!1;if("relative"!=A.css("position")){try{A.position(R)}catch(N){}}I={X:R.left||C("left")||0,Y:R.top||C("top")||0,W:C("width")||A[0].scrollWidth||0,H:C("height")||A[0].scrollHeight||0,pX:Q.pageX,pY:Q.pageY,k:P.k};G=H&&"d"!=P.k?{X:R.left||D("left")||0,Y:R.top||D("top")||0,W:H[0].offsetWidth||D("width")||0,H:H[0].offsetHeight||D("height")||0,pX:Q.pageX,pY:Q.pageY,k:P.k}:!1;if(E("input.hasDatepicker",A[0])[0]){try{E("input.hasDatepicker",A[0]).datepicker("hide")}catch(O){}}E(document).mousemove(E.jqDnR.drag).mouseup(E.jqDnR.stop);return !1})})},C=function(J){return parseInt(A.css(J),10)||!1},D=function(J){return parseInt(H.css(J),10)||!1}})(jQuery);(function(A){A.jgrid.extend({setSubGrid:function(){return this.each(function(){var B,C;this.p.subGridOptions=A.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:A.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});B=this.p.subGridModel;if(B[0]){for(B[0].align=A.extend([],B[0].align||[]),C=0;C<B[0].name.length;C++){B[0].align[C]=B[0].align[C]||"left"}}})},addSubGridCell:function(D,E){var F="",C,B;this.each(function(){F=this.formatCol(D,E);B=this.p.id;C=this.p.subGridOptions.plusicon});return'<td role="gridcell" aria-describedby="'+B+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+F+"><a style='cursor:pointer;'><span class='ui-icon "+C+"'></span></a></td>"},addSubGrid:function(B,C){return this.each(function(){var O=this;if(O.grid){var F=function(S,R,Q){R=A("<td align='"+O.p.subGridModel[0].align[Q]+"'></td>").html(R);A(S).append(R)},L=function(V,R){var Q,W,S,U=A("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),T=A("<tr></tr>");for(W=0;W<O.p.subGridModel[0].name.length;W++){Q=A("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+O.p.direction+"'></th>"),A(Q).html(O.p.subGridModel[0].name[W]),A(Q).width(O.p.subGridModel[0].width[W]),A(T).append(Q)}A(U).append(T);V&&(S=O.p.xmlReader.subgrid,A(S.root+" "+S.row,V).each(function(){T=A("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===S.repeatitems){A(S.cell,this).each(function(Y){F(T,A(this).text()||"&#160;",Y)})}else{var X=O.p.subGridModel[0].mapping||O.p.subGridModel[0].name;if(X){for(W=0;W<X.length;W++){F(T,A(X[W],this).text()||"&#160;",W)}}}A(U).append(T)}));Q=A("table:first",O.grid.bDiv).attr("id")+"_";A("#"+A.jgrid.jqID(Q+R)).append(U);O.grid.hDiv.loading=!1;A("#load_"+A.jgrid.jqID(O.p.id)).hide();return !1},G=function(W,Z){var S,X,Q,Y,R,V=A("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),U=A("<tr></tr>");for(X=0;X<O.p.subGridModel[0].name.length;X++){S=A("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+O.p.direction+"'></th>"),A(S).html(O.p.subGridModel[0].name[X]),A(S).width(O.p.subGridModel[0].width[X]),A(U).append(S)}A(V).append(U);if(W&&(Y=O.p.jsonReader.subgrid,S=A.jgrid.getAccessor(W,Y.root),void 0!==S)){for(X=0;X<S.length;X++){Q=S[X];U=A("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===Y.repeatitems){for(Y.cell&&(Q=Q[Y.cell]),R=0;R<Q.length;R++){F(U,Q[R]||"&#160;",R)}}else{var T=O.p.subGridModel[0].mapping||O.p.subGridModel[0].name;if(T.length){for(R=0;R<T.length;R++){F(U,Q[T[R]]||"&#160;",R)}}}A(V).append(U)}}X=A("table:first",O.grid.bDiv).attr("id")+"_";A("#"+A.jgrid.jqID(X+Z)).append(V);O.grid.hDiv.loading=!1;A("#load_"+A.jgrid.jqID(O.p.id)).hide();return !1},H=function(T){var S,R,U,Q;S=A(T).attr("id");R={nd_:(new Date).getTime()};R[O.p.prmNames.subgridid]=S;if(!O.p.subGridModel[0]){return !1}if(O.p.subGridModel[0].params){for(Q=0;Q<O.p.subGridModel[0].params.length;Q++){for(U=0;U<O.p.colModel.length;U++){O.p.colModel[U].name===O.p.subGridModel[0].params[Q]&&(R[O.p.colModel[U].name]=A("td:eq("+U+")",T).text().replace(/\&#160\;/ig,""))}}}if(!O.grid.hDiv.loading){switch(O.grid.hDiv.loading=!0,A("#load_"+A.jgrid.jqID(O.p.id)).show(),O.p.subgridtype||(O.p.subgridtype=O.p.datatype),A.isFunction(O.p.subgridtype)?O.p.subgridtype.call(O,R):O.p.subgridtype=O.p.subgridtype.toLowerCase(),O.p.subgridtype){case"xml":case"json":A.ajax(A.extend({type:O.p.mtype,url:O.p.subGridUrl,dataType:O.p.subgridtype,data:A.isFunction(O.p.serializeSubGridData)?O.p.serializeSubGridData.call(O,R):R,complete:function(V){"xml"===O.p.subgridtype?L(V.responseXML,S):G(A.jgrid.parse(V.responseText),S)}},A.jgrid.ajaxOptions,O.p.ajaxSubgridOptions||{}))}}return !1},D,N,E,I=0,P,M;A.each(O.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||I++});var J=O.rows.length,K=1;void 0!==C&&0<C&&(K=C,J=C+1);for(;K<J;){A(O.rows[K]).hasClass("jqgrow")&&A(O.rows[K].cells[B]).bind("click",function(){var Q=A(this).parent("tr")[0];M=Q.nextSibling;if(A(this).hasClass("sgcollapsed")){N=O.p.id;D=Q.id;if(!0===O.p.subGridOptions.reloadOnExpand||!1===O.p.subGridOptions.reloadOnExpand&&!A(M).hasClass("ui-subgrid")){E=1<=B?"<td colspan='"+B+"'>&#160;</td>":"";P=A(O).triggerHandler("jqGridSubGridBeforeExpand",[N+"_"+D,D]);(P=!1===P||"stop"===P?!1:!0)&&A.isFunction(O.p.subGridBeforeExpand)&&(P=O.p.subGridBeforeExpand.call(O,N+"_"+D,D));if(!1===P){return !1}A(Q).after("<tr role='row' class='ui-subgrid'>"+E+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+O.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(O.p.colNames.length-1-I,10)+"' class='ui-widget-content subgrid-data'><div id="+N+"_"+D+" class='tablediv'></div></td></tr>");A(O).triggerHandler("jqGridSubGridRowExpanded",[N+"_"+D,D]);A.isFunction(O.p.subGridRowExpanded)?O.p.subGridRowExpanded.call(O,N+"_"+D,D):H(Q)}else{A(M).show()}A(this).html("<a style='cursor:pointer;'><span class='ui-icon "+O.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");O.p.subGridOptions.selectOnExpand&&A(O).jqGrid("setSelection",D)}else{if(A(this).hasClass("sgexpanded")){P=A(O).triggerHandler("jqGridSubGridRowColapsed",[N+"_"+D,D]);P=!1===P||"stop"===P?!1:!0;D=Q.id;P&&A.isFunction(O.p.subGridRowColapsed)&&(P=O.p.subGridRowColapsed.call(O,N+"_"+D,D));if(!1===P){return !1}!0===O.p.subGridOptions.reloadOnExpand?A(M).remove(".ui-subgrid"):A(M).hasClass("ui-subgrid")&&A(M).hide();A(this).html("<a style='cursor:pointer;'><span class='ui-icon "+O.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");O.p.subGridOptions.selectOnCollapse&&A(O).jqGrid("setSelection",D)}}return !1}),K++}!0===O.p.subGridOptions.expandOnLoad&&A(O.rows).filter(".jqgrow").each(function(R,Q){A(Q.cells[0]).click()});O.subGridXml=function(R,Q){L(R,Q)};O.subGridJson=function(R,Q){G(R,Q)}}})},expandSubGridRow:function(B){return this.each(function(){if((this.grid||B)&&!0===this.p.subGrid){var C=A(this).jqGrid("getInd",B,!0);C&&(C=A("td.sgcollapsed",C)[0])&&A(C).trigger("click")}})},collapseSubGridRow:function(B){return this.each(function(){if((this.grid||B)&&!0===this.p.subGrid){var C=A(this).jqGrid("getInd",B,!0);C&&(C=A("td.sgexpanded",C)[0])&&A(C).trigger("click")}})},toggleSubGridRow:function(B){return this.each(function(){if((this.grid||B)&&!0===this.p.subGrid){var C=A(this).jqGrid("getInd",B,!0);if(C){var D=A("td.sgcollapsed",C)[0];D?A(D).trigger("click"):(D=A("td.sgexpanded",C)[0])&&A(D).trigger("click")}}})}})})(jQuery);(function(A){A.extend(A.jgrid,{template:function(B){var E=A.makeArray(arguments).slice(1),D,C=E.length;null==B&&(B="");return B.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(H,G){if(!isNaN(parseInt(G,10))){return E[parseInt(G,10)]}for(D=0;D<C;D++){if(A.isArray(E[D])){for(var F=E[D],I=F.length;I--;){if(G===F[I].nm){return F[I].v}}}}})}});A.jgrid.extend({groupingSetup:function(){return this.each(function(){var B,E,D=this.p.colModel,C=this.p.groupingView;if(null===C||"object"!==typeof C&&!A.isFunction(C)){this.p.grouping=!1}else{if(C.groupField.length){void 0===C.visibiltyOnNextGrouping&&(C.visibiltyOnNextGrouping=[]);C.lastvalues=[];C._locgr||(C.groups=[]);C.counters=[];for(B=0;B<C.groupField.length;B++){C.groupOrder[B]||(C.groupOrder[B]="asc"),C.groupText[B]||(C.groupText[B]="{0}"),"boolean"!==typeof C.groupColumnShow[B]&&(C.groupColumnShow[B]=!0),"boolean"!==typeof C.groupSummary[B]&&(C.groupSummary[B]=!1),C.groupSummaryPos[B]||(C.groupSummaryPos[B]="footer"),!0===C.groupColumnShow[B]?(C.visibiltyOnNextGrouping[B]=!0,A(this).jqGrid("showCol",C.groupField[B])):(C.visibiltyOnNextGrouping[B]=A("#"+A.jgrid.jqID(this.p.id+"_"+C.groupField[B])).is(":visible"),A(this).jqGrid("hideCol",C.groupField[B]))}C.summary=[];C.hideFirstGroupCol&&(C.formatDisplayField[0]=function(F){return F});B=0;for(E=D.length;B<E;B++){C.hideFirstGroupCol&&!D[B].hidden&&C.groupField[0]===D[B].name&&(D[B].formatter=function(){return""}),D[B].summaryType&&(D[B].summaryDivider?C.summary.push({nm:D[B].name,st:D[B].summaryType,v:"",sd:D[B].summaryDivider,vd:"",sr:D[B].summaryRound,srt:D[B].summaryRoundType||"round"}):C.summary.push({nm:D[B].name,st:D[B].summaryType,v:"",sr:D[B].summaryRound,srt:D[B].summaryRoundType||"round"}))}}else{this.p.grouping=!1}}})},groupingPrepare:function(B,C){this.each(function(){var I=this.p.groupingView,H=this,K,G=I.groupField.length,D,J,F,E=0;for(K=0;K<G;K++){D=I.groupField[K],F=I.displayField[K],J=B[D],F=null==F?null:B[F],null==F&&(F=J),void 0!==J&&(0===C?(I.groups.push({idx:K,dataIndex:D,value:J,displayValue:F,startRow:C,cnt:1,summary:[]}),I.lastvalues[K]=J,I.counters[K]={cnt:1,pos:I.groups.length-1,summary:A.extend(!0,[],I.summary)}):"object"===typeof J||(A.isArray(I.isInTheSameGroup)&&A.isFunction(I.isInTheSameGroup[K])?I.isInTheSameGroup[K].call(H,I.lastvalues[K],J,K,I):I.lastvalues[K]===J)?1===E?(I.groups.push({idx:K,dataIndex:D,value:J,displayValue:F,startRow:C,cnt:1,summary:[]}),I.lastvalues[K]=J,I.counters[K]={cnt:1,pos:I.groups.length-1,summary:A.extend(!0,[],I.summary)}):(I.counters[K].cnt+=1,I.groups[I.counters[K].pos].cnt=I.counters[K].cnt):(I.groups.push({idx:K,dataIndex:D,value:J,displayValue:F,startRow:C,cnt:1,summary:[]}),I.lastvalues[K]=J,E=1,I.counters[K]={cnt:1,pos:I.groups.length-1,summary:A.extend(!0,[],I.summary)}),A.each(I.counters[K].summary,function(){A.isFunction(this.st)?this.v=this.st.call(H,this.v,this.nm,B):(this.v=A(H).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,B),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=A(H).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,B)))}),I.groups[I.counters[K].pos].summary=I.counters[K].summary)}});return this},groupingToggle:function(B){this.each(function(){var G=this.p.groupingView,L=B.split("_"),K=parseInt(L[L.length-2],10);L.splice(L.length-2,2);var N=L.join("_"),L=G.minusicon,J=G.plusicon,C=A("#"+A.jgrid.jqID(B)),C=C.length?C[0].nextSibling:null,M=A("#"+A.jgrid.jqID(B)+" span.tree-wrap-"+this.p.direction),H=function(O){O=A.map(O.split(" "),function(P){if(P.substring(0,N.length+1)===N+"_"){return parseInt(P.substring(N.length+1),10)}});return 0<O.length?O[0]:void 0},D,E=!1,F=this.p.frozenColumns?this.p.id+"_frozen":!1,I=F?A("#"+A.jgrid.jqID(B),"#"+A.jgrid.jqID(F)):!1,I=I&&I.length?I[0].nextSibling:null;if(M.hasClass(L)){if(G.showSummaryOnHide){if(C){for(;C&&!(A(C).hasClass("jqfoot")&&parseInt(A(C).attr("jqfootlevel"),10)<=K);){A(C).hide(),C=C.nextSibling,F&&(A(I).hide(),I=I.nextSibling)}}}else{if(C){for(;C;){G=H(C.className);if(void 0!==G&&G<=K){break}A(C).hide();C=C.nextSibling;F&&(A(I).hide(),I=I.nextSibling)}}}M.removeClass(L).addClass(J);E=!0}else{if(C){for(D=void 0;C;){G=H(C.className);void 0===D&&(D=void 0===G);if(void 0!==G){if(G<=K){break}G===K+1&&(A(C).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(L).addClass(J),F&&A(I).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(L).addClass(J))}else{D&&(A(C).show(),F&&A(I).show())}C=C.nextSibling;F&&(I=I.nextSibling)}}M.removeClass(J).addClass(L)}A(this).triggerHandler("jqGridGroupingClickGroup",[B,E]);A.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,B,E)});return !1},groupingRender:function(B,E,D,C){return this.each(function(){function S(X,V,W){var T=!1;if(0===V){T=W[X]}else{var U=W[X].idx;if(0===U){T=W[X]}else{for(;0<=X;X--){if(W[X].idx===U-V){T=W[X];break}}}}return T}function O(g,d,e,i){var X=S(g,d,e),Z=J.p.colModel,Y,V=X.cnt;g="";var U;for(U=i;U<E;U++){var T="<td "+J.formatCol(U,1,"")+">&#160;</td>",W="{0}";A.each(X.summary,function(){if(this.nm===Z[U].name){Z[U].summaryTpl&&(W=Z[U].summaryTpl);"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v/=this.vd:this.v&&0<V&&(this.v/=V));try{this.groupCount=X.cnt,this.groupIndex=X.dataIndex,this.groupValue=X.value,Y=J.formatter("",this.v,U,this)}catch(b){Y=this.v}T="<td "+J.formatCol(U,1,"")+">"+A.jgrid.format(W,Y)+"</td>";return !1}});g+=T}return g}var J=this,R=J.p.groupingView,L="",H="",F,I,M=R.groupCollapse?R.plusicon:R.minusicon,K,Q=[],G=R.groupField.length,M=M+(" tree-wrap-"+J.p.direction);A.each(J.p.colModel,function(V,T){var U;for(U=0;U<G;U++){if(R.groupField[U]===T.name){Q[U]=V;break}}});var P=0,N=A.makeArray(R.groupSummary);N.reverse();A.each(R.groups,function(a,Z){if(R._locgr&&!(Z.startRow+Z.cnt>(D-1)*C&&Z.startRow<D*C)){return !0}P++;I=J.p.id+"ghead_"+Z.idx;F=I+"_"+a;H="<span style='cursor:pointer;' class='ui-icon "+M+"' onclick=\"jQuery('#"+A.jgrid.jqID(J.p.id)+"').jqGrid('groupingToggle','"+F+"');return false;\"></span>";try{A.isArray(R.formatDisplayField)&&A.isFunction(R.formatDisplayField[Z.idx])?(Z.displayValue=R.formatDisplayField[Z.idx].call(J,Z.displayValue,Z.value,J.p.colModel[Q[Z.idx]],Z.idx,R),K=Z.displayValue):K=J.formatter(F,Z.displayValue,Q[Z.idx],Z.value)}catch(X){K=Z.displayValue}"header"===R.groupSummaryPos[Z.idx]?(L+='<tr id="'+F+'"'+(R.groupCollapse&&0<Z.idx?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+J.p.direction+" "+I+'"><td style="padding-left:'+12*Z.idx+'px;">'+H+A.jgrid.template(R.groupText[Z.idx],K,Z.cnt,Z.summary)+"</td>",L+=O(a,Z.idx-1,R.groups,1),L+="</tr>"):L+='<tr id="'+F+'"'+(R.groupCollapse&&0<Z.idx?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+J.p.direction+" "+I+'"><td style="padding-left:'+12*Z.idx+'px;" colspan="'+E+'">'+H+A.jgrid.template(R.groupText[Z.idx],K,Z.cnt,Z.summary)+"</td></tr>";if(G-1===Z.idx){var T=R.groups[a+1],U,W=0;U=Z.startRow;var Y=void 0!==T?R.groups[a+1].startRow:B.length;R._locgr&&(W=(D-1)*C,W>Z.startRow&&(U=W));for(;U<Y&&B[U-W];U++){L+=B[U-W].join("")}if("header"!==R.groupSummaryPos[Z.idx]){var V;if(void 0!==T){for(V=0;V<R.groupField.length&&T.dataIndex!==R.groupField[V];V++){}P=R.groupField.length-V}for(T=0;T<P;T++){N[T]&&(W="",R.groupCollapse&&!R.showSummaryOnHide&&(W=' style="display:none;"'),L+="<tr"+W+' jqfootlevel="'+(Z.idx-T)+'" role="row" class="ui-widget-content jqfoot ui-row-'+J.p.direction+'">',L+=O(a,T,R.groups,0),L+="</tr>")}P=V}}});A("#"+A.jgrid.jqID(J.p.id)+" tbody:first").append(L);L=null})},groupingGroupBy:function(B,C){return this.each(function(){"string"===typeof B&&(B=[B]);var E=this.p.groupingView;this.p.grouping=!0;void 0===E.visibiltyOnNextGrouping&&(E.visibiltyOnNextGrouping=[]);var D;for(D=0;D<E.groupField.length;D++){!E.groupColumnShow[D]&&E.visibiltyOnNextGrouping[D]&&A(this).jqGrid("showCol",E.groupField[D])}for(D=0;D<B.length;D++){E.visibiltyOnNextGrouping[D]=A("#"+A.jgrid.jqID(this.p.id)+"_"+A.jgrid.jqID(B[D])).is(":visible")}this.p.groupingView=A.extend(this.p.groupingView,C||{});E.groupField=B;A(this).trigger("reloadGrid")})},groupingRemove:function(B){return this.each(function(){void 0===B&&(B=!0);this.p.grouping=!1;if(!0===B){var D=this.p.groupingView,C;for(C=0;C<D.groupField.length;C++){!D.groupColumnShow[C]&&D.visibiltyOnNextGrouping[C]&&A(this).jqGrid("showCol",D.groupField)}A("tr.jqgroup, tr.jqfoot","#"+A.jgrid.jqID(this.p.id)+" tbody:first").remove();A("tr.jqgrow:hidden","#"+A.jgrid.jqID(this.p.id)+" tbody:first").show()}else{A(this).trigger("reloadGrid")}})},groupingCalculations:{handler:function(F,C,H,G,B,E){var D={sum:function(){return parseFloat(C||0)+parseFloat(E[H]||0)},min:function(){return""===C?parseFloat(E[H]||0):Math.min(parseFloat(C),parseFloat(E[H]||0))},max:function(){return""===C?parseFloat(E[H]||0):Math.max(parseFloat(C),parseFloat(E[H]||0))},count:function(){""===C&&(C=0);return E.hasOwnProperty(H)?C+1:0},avg:function(){return D.sum()}};if(!D[F]){throw"jqGrid Grouping No such method: "+F}F=D[F]();null!=G&&("fixed"===B?F=F.toFixed(G):(G=Math.pow(10,G),F=Math.round(F*G)/G));return F}}})})(jQuery);(function(A){A.jgrid.extend({setTreeNode:function(B,C){return this.each(function(){var L=this;if(L.grid&&L.p.treeGrid){for(var H=L.p.expColInd,D=L.p.treeReader.expanded_field,G=L.p.treeReader.leaf_field,N=L.p.treeReader.level_field,M=L.p.treeReader.icon_field,I=L.p.treeReader.loaded,K,E,F,J;B<C;){J=A.jgrid.stripPref(L.p.idPrefix,L.rows[B].id),J=L.p.data[L.p._index[J]],"nested"!==L.p.treeGridModel||J[G]||(K=parseInt(J[L.p.treeReader.left_field],10),E=parseInt(J[L.p.treeReader.right_field],10),J[G]=E===K+1?"true":"false",L.rows[B].cells[L.p._treeleafpos].innerHTML=J[G]),K=parseInt(J[N],10),0===L.p.tree_root_level?(F=K+1,E=K):(F=K,E=K-1),F="<div class='tree-wrap tree-wrap-"+L.p.direction+"' style='width:"+18*F+"px;'>",F+="<div style='"+("rtl"===L.p.direction?"right:":"left:")+18*E+"px;' class='ui-icon ",void 0!==J[I]&&(J[I]="true"===J[I]||!0===J[I]?!0:!1),"true"===J[G]||!0===J[G]?(F+=(void 0!==J[M]&&""!==J[M]?J[M]:L.p.treeIcons.leaf)+" tree-leaf treeclick",J[G]=!0,E="leaf"):(J[G]=!1,E=""),J[D]=("true"===J[D]||!0===J[D]?!0:!1)&&(J[I]||void 0===J[I]),F=!1===J[D]?F+(!0===J[G]?"'":L.p.treeIcons.plus+" tree-plus treeclick'"):F+(!0===J[G]?"'":L.p.treeIcons.minus+" tree-minus treeclick'"),F+="></div></div>",A(L.rows[B].cells[H]).wrapInner("<span class='cell-wrapper"+E+"'></span>").prepend(F),K!==parseInt(L.p.tree_root_level,10)&&((J=(J=A(L).jqGrid("getNodeParent",J))&&J.hasOwnProperty(D)?J[D]:!0)||A(L.rows[B]).css("display","none")),A(L.rows[B].cells[H]).find("div.treeclick").bind("click",function(O){O=A.jgrid.stripPref(L.p.idPrefix,A(O.target||O.srcElement,L.rows).closest("tr.jqgrow")[0].id);O=L.p._index[O];L.p.data[O][G]||(L.p.data[O][D]?(A(L).jqGrid("collapseRow",L.p.data[O]),A(L).jqGrid("collapseNode",L.p.data[O])):(A(L).jqGrid("expandRow",L.p.data[O]),A(L).jqGrid("expandNode",L.p.data[O])));return !1}),!0===L.p.ExpandColClick&&A(L.rows[B].cells[H]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(O){O=A.jgrid.stripPref(L.p.idPrefix,A(O.target||O.srcElement,L.rows).closest("tr.jqgrow")[0].id);var P=L.p._index[O];L.p.data[P][G]||(L.p.data[P][D]?(A(L).jqGrid("collapseRow",L.p.data[P]),A(L).jqGrid("collapseNode",L.p.data[P])):(A(L).jqGrid("expandRow",L.p.data[P]),A(L).jqGrid("expandNode",L.p.data[P])));A(L).jqGrid("setSelection",O);return !1}),B++}}})},setTreeGrid:function(){return this.each(function(){var E=this,F=0,G,B=!1,C,H,D=[];if(E.p.treeGrid){E.p.treedatatype||A.extend(E.p,{treedatatype:E.p.datatype});E.p.subGrid=!1;E.p.altRows=!1;E.p.pgbuttons=!1;E.p.pginput=!1;E.p.gridview=!0;null===E.p.rowTotal&&(E.p.rowNum=10000);E.p.multiselect=!1;E.p.rowList=[];E.p.expColInd=0;G="ui-icon-triangle-1-"+("rtl"===E.p.direction?"w":"e");E.p.treeIcons=A.extend({plus:G,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},E.p.treeIcons||{});"nested"===E.p.treeGridModel?E.p.treeReader=A.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},E.p.treeReader):"adjacency"===E.p.treeGridModel&&(E.p.treeReader=A.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},E.p.treeReader));for(C in E.p.colModel){if(E.p.colModel.hasOwnProperty(C)){for(H in G=E.p.colModel[C].name,G!==E.p.ExpandColumn||B||(B=!0,E.p.expColInd=F),F++,E.p.treeReader){E.p.treeReader.hasOwnProperty(H)&&E.p.treeReader[H]===G&&D.push(G)}}}A.each(E.p.treeReader,function(J,I){I&&-1===A.inArray(I,D)&&("leaf_field"===J&&(E.p._treeleafpos=F),F++,E.p.colNames.push(I),E.p.colModel.push({name:I,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(B){this.each(function(){var D=this;if(D.grid&&D.p.treeGrid){var E=A(D).jqGrid("getNodeChildren",B),C=D.p.treeReader.expanded_field;A(E).each(function(){var F=D.p.idPrefix+A.jgrid.getAccessor(this,D.p.localReader.id);A(A(D).jqGrid("getGridRowById",F)).css("display","");this[C]&&A(D).jqGrid("expandRow",this)})}})},collapseRow:function(B){this.each(function(){var D=this;if(D.grid&&D.p.treeGrid){var E=A(D).jqGrid("getNodeChildren",B),C=D.p.treeReader.expanded_field;A(E).each(function(){var F=D.p.idPrefix+A.jgrid.getAccessor(this,D.p.localReader.id);A(A(D).jqGrid("getGridRowById",F)).css("display","none");this[C]&&A(D).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var B=[];this.each(function(){var D=this;if(D.grid&&D.p.treeGrid){switch(D.p.treeGridModel){case"nested":var E=D.p.treeReader.level_field;A(D.p.data).each(function(){parseInt(this[E],10)===parseInt(D.p.tree_root_level,10)&&B.push(this)});break;case"adjacency":var C=D.p.treeReader.parent_id_field;A(D.p.data).each(function(){null!==this[C]&&"null"!==String(this[C]).toLowerCase()||B.push(this)})}}});return B},getNodeDepth:function(B){var C=null;this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":C=parseInt(B[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":C=A(this).jqGrid("getNodeAncestors",B).length}}});return C},getNodeParent:function(B){var C=null;this.each(function(){var J=this;if(J.grid&&J.p.treeGrid){switch(J.p.treeGridModel){case"nested":var G=J.p.treeReader.left_field,D=J.p.treeReader.right_field,F=J.p.treeReader.level_field,L=parseInt(B[G],10),K=parseInt(B[D],10),H=parseInt(B[F],10);A(this.p.data).each(function(){if(parseInt(this[F],10)===H-1&&parseInt(this[G],10)<L&&parseInt(this[D],10)>K){return C=this,!1}});break;case"adjacency":var I=J.p.treeReader.parent_id_field,E=J.p.localReader.id;A(this.p.data).each(function(){if(this[E]===A.jgrid.stripPref(J.p.idPrefix,B[I])){return C=this,!1}})}}});return C},getNodeChildren:function(B){var C=[];this.each(function(){var J=this;if(J.grid&&J.p.treeGrid){switch(J.p.treeGridModel){case"nested":var G=J.p.treeReader.left_field,D=J.p.treeReader.right_field,F=J.p.treeReader.level_field,L=parseInt(B[G],10),K=parseInt(B[D],10),H=parseInt(B[F],10);A(this.p.data).each(function(){parseInt(this[F],10)===H+1&&parseInt(this[G],10)>L&&parseInt(this[D],10)<K&&C.push(this)});break;case"adjacency":var I=J.p.treeReader.parent_id_field,E=J.p.localReader.id;A(this.p.data).each(function(){this[I]==A.jgrid.stripPref(J.p.idPrefix,B[E])&&C.push(this)})}}});return C},getFullTreeNode:function(B){var C=[];this.each(function(){var K=this,H;if(K.grid&&K.p.treeGrid){switch(K.p.treeGridModel){case"nested":var D=K.p.treeReader.left_field,G=K.p.treeReader.right_field,M=K.p.treeReader.level_field,L=parseInt(B[D],10),I=parseInt(B[G],10),J=parseInt(B[M],10);A(this.p.data).each(function(){parseInt(this[M],10)>=J&&parseInt(this[D],10)>=L&&parseInt(this[D],10)<=I&&C.push(this)});break;case"adjacency":if(B){C.push(B);var E=K.p.treeReader.parent_id_field,F=K.p.localReader.id;A(this.p.data).each(function(N){H=C.length;for(N=0;N<H;N++){if(A.jgrid.stripPref(K.p.idPrefix,C[N][F])===this[E]){C.push(this);break}}})}}}});return C},getNodeAncestors:function(B){var C=[];this.each(function(){if(this.grid&&this.p.treeGrid){for(var D=A(this).jqGrid("getNodeParent",B);D;){C.push(D),D=A(this).jqGrid("getNodeParent",D)}}});return C},isVisibleNode:function(B){var C=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var E=A(this).jqGrid("getNodeAncestors",B),D=this.p.treeReader.expanded_field;A(E).each(function(){C=C&&this[D];if(!C){return !1}})}});return C},isNodeLoaded:function(B){var C;this.each(function(){if(this.grid&&this.p.treeGrid){var E=this.p.treeReader.leaf_field,D=this.p.treeReader.loaded;C=void 0!==B?void 0!==B[D]?B[D]:B[E]||0<A(this).jqGrid("getNodeChildren",B).length?!0:!1:!1}});return C},expandNode:function(B){return this.each(function(){if(this.grid&&this.p.treeGrid){var H=this.p.treeReader.expanded_field,I=this.p.treeReader.parent_id_field,E=this.p.treeReader.loaded,C=this.p.treeReader.level_field,D=this.p.treeReader.left_field,K=this.p.treeReader.right_field;if(!B[H]){var J=A.jgrid.getAccessor(B,this.p.localReader.id),F=A("#"+this.p.idPrefix+A.jgrid.jqID(J),this.grid.bDiv)[0],G=this.p._index[J];A(this).jqGrid("isNodeLoaded",this.p.data[G])?(B[H]=!0,A("div.treeclick",F).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(B[H]=!0,A("div.treeclick",F).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=F.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?A(this).jqGrid("setGridParam",{postData:{nodeid:J,n_left:B[D],n_right:B[K],n_level:B[C]}}):A(this).jqGrid("setGridParam",{postData:{nodeid:J,parentid:B[I],n_level:B[C]}}),A(this).trigger("reloadGrid"),B[E]=!0,"nested"===this.p.treeGridModel?A(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):A(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(B){return this.each(function(){if(this.grid&&this.p.treeGrid){var C=this.p.treeReader.expanded_field;B[C]&&(B[C]=!1,C=A.jgrid.getAccessor(B,this.p.localReader.id),C=A("#"+this.p.idPrefix+A.jgrid.jqID(C),this.grid.bDiv)[0],A("div.treeclick",C).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(C,D,E,B){return this.each(function(){if(this.grid&&this.p.treeGrid){var H,K,F,G=[],I=this,J;H=A(this).jqGrid("getRootNodes");H=A.jgrid.from(H);H.orderBy(C,D,E,B);J=H.select();H=0;for(K=J.length;H<K;H++){F=J[H],G.push(F),A(this).jqGrid("collectChildrenSortTree",G,F,C,D,E,B)}A.each(G,function(M){var L=A.jgrid.getAccessor(this,I.p.localReader.id);A("#"+A.jgrid.jqID(I.p.id)+" tbody tr:eq("+M+")").after(A("tr#"+A.jgrid.jqID(L),I.grid.bDiv))});G=J=H=null}})},collectChildrenSortTree:function(D,E,F,B,C,G){return this.each(function(){if(this.grid&&this.p.treeGrid){var H,K,I,J;H=A(this).jqGrid("getNodeChildren",E);H=A.jgrid.from(H);H.orderBy(F,B,C,G);J=H.select();H=0;for(K=J.length;H<K;H++){I=J[H],D.push(I),A(this).jqGrid("collectChildrenSortTree",D,I,F,B,C,G)}}})},setTreeRow:function(B,C){var D=!1;this.each(function(){this.grid&&this.p.treeGrid&&(D=A(this).jqGrid("setRowData",B,C))});return D},delTreeNode:function(B){return this.each(function(){var G=this.p.localReader.id,H,E=this.p.treeReader.left_field,C=this.p.treeReader.right_field,D,J,I;if(this.grid&&this.p.treeGrid&&(H=this.p._index[B],void 0!==H)){D=parseInt(this.p.data[H][C],10);J=D-parseInt(this.p.data[H][E],10)+1;var F=A(this).jqGrid("getFullTreeNode",this.p.data[H]);if(0<F.length){for(H=0;H<F.length;H++){A(this).jqGrid("delRowData",F[H][G])}}if("nested"===this.p.treeGridModel){G=A.jgrid.from(this.p.data).greater(E,D,{stype:"integer"}).select();if(G.length){for(I in G){G.hasOwnProperty(I)&&(G[I][E]=parseInt(G[I][E],10)-J)}}G=A.jgrid.from(this.p.data).greater(C,D,{stype:"integer"}).select();if(G.length){for(I in G){G.hasOwnProperty(I)&&(G[I][C]=parseInt(G[I][C],10)-J)}}}}})},addChildNode:function(O,P,Q,K){var T=this[0];if(Q){var J=T.p.treeReader.expanded_field,S=T.p.treeReader.leaf_field,R=T.p.treeReader.level_field,L=T.p.treeReader.parent_id_field,N=T.p.treeReader.left_field,D=T.p.treeReader.right_field,E=T.p.treeReader.loaded,M,I,H,G,C;M=0;var F=P,U;void 0===K&&(K=!1);if(void 0===O||null===O){C=T.p.data.length-1;if(0<=C){for(;0<=C;){M=Math.max(M,parseInt(T.p.data[C][T.p.localReader.id],10)),C--}}O=M+1}var V=A(T).jqGrid("getInd",P);U=!1;void 0===P||null===P||""===P?(F=P=null,M="last",G=T.p.tree_root_level,C=T.p.data.length+1):(M="after",I=T.p._index[P],H=T.p.data[I],P=H[T.p.localReader.id],G=parseInt(H[R],10)+1,C=A(T).jqGrid("getFullTreeNode",H),C.length?(F=C=C[C.length-1][T.p.localReader.id],C=A(T).jqGrid("getInd",F)+1):C=A(T).jqGrid("getInd",P)+1,H[S]&&(U=!0,H[J]=!0,A(T.rows[V]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(T.p.treeIcons.leaf+" tree-leaf").addClass(T.p.treeIcons.minus+" tree-minus"),T.p.data[I][S]=!1,H[E]=!0));I=C+1;void 0===Q[J]&&(Q[J]=!1);void 0===Q[E]&&(Q[E]=!1);Q[R]=G;void 0===Q[S]&&(Q[S]=!0);"adjacency"===T.p.treeGridModel&&(Q[L]=P);if("nested"===T.p.treeGridModel){var B;if(null!==P){S=parseInt(H[D],10);R=A.jgrid.from(T.p.data);R=R.greaterOrEquals(D,S,{stype:"integer"});R=R.select();if(R.length){for(B in R){R.hasOwnProperty(B)&&(R[B][N]=R[B][N]>S?parseInt(R[B][N],10)+2:R[B][N],R[B][D]=R[B][D]>=S?parseInt(R[B][D],10)+2:R[B][D])}}Q[N]=S;Q[D]=S+1}else{S=parseInt(A(T).jqGrid("getCol",D,!1,"max"),10);R=A.jgrid.from(T.p.data).greater(N,S,{stype:"integer"}).select();if(R.length){for(B in R){R.hasOwnProperty(B)&&(R[B][N]=parseInt(R[B][N],10)+2)}}R=A.jgrid.from(T.p.data).greater(D,S,{stype:"integer"}).select();if(R.length){for(B in R){R.hasOwnProperty(B)&&(R[B][D]=parseInt(R[B][D],10)+2)}}Q[N]=S+1;Q[D]=S+2}}if(null===P||A(T).jqGrid("isNodeLoaded",H)||U){A(T).jqGrid("addRowData",O,Q,M,F),A(T).jqGrid("setTreeNode",C,I)}H&&!H[J]&&K&&A(T.rows[V]).find("div.treeclick").click()}}})})(jQuery);(function(A){function B(D,E){var C,G,H=[],F;if(!this||"function"!==typeof D||D instanceof RegExp){throw new TypeError}F=this.length;for(C=0;C<F;C++){if(this.hasOwnProperty(C)&&(G=this[C],D.call(E,G,C,this))){H.push(G);break}}return H}A.assocArraySize=function(D){var E=0,C;for(C in D){D.hasOwnProperty(C)&&E++}return E};A.jgrid.extend({pivotSetup:function(D,H){var G=[],C=[],E=[],F=[],I={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},K=[],J=A.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},H||{});this.each(function(){function Q(j,g,k){j=B.call(j,g,k);return 0<j.length?j[0]:null}function V(k,l){var j=0,m=!0,g;for(g in k){if(k[g]!=this[j]){m=!1;break}j++;if(j>=this.length){break}}m&&(d=l);return m}function e(Aj,Ak,Al,Ae){var Am=Ak.length,Ai,Ad,An,Ag;Ag=A.isArray(Al)?Al.length:1;F=[];for(An=F.root=0;An<Ag;An++){var Af=[],Ah;for(Ai=0;Ai<Am;Ai++){if(null==Al){Ah=Ad=A.trim(Ak[Ai].member)+"_"+Ak[Ai].aggregator}else{Ah=Al[An].replace(/\s+/g,"");try{Ad=1===Am?Ah:Ah+"_"+Ak[Ai].aggregator+"_"+Ai}catch(z){}}var Ab=Ae,Ac=Ad,Ao=Af,Ap=Ad,Aa=Ae[Ad],o=Ak[Ai].member,r=Aj,j=void 0;switch(Ak[Ai].aggregator){case"sum":j=parseFloat(Aa||0)+parseFloat(r[o]||0);break;case"count":if(""===Aa||null==Aa){Aa=0}j=r.hasOwnProperty(o)?Aa+1:0;break;case"min":j=""===Aa||null==Aa?parseFloat(r[o]||0):Math.min(parseFloat(Aa),parseFloat(r[o]||0));break;case"max":j=""===Aa||null==Aa?parseFloat(r[o]||0):Math.max(parseFloat(Aa),parseFloat(r[o]||0))}Ab[Ac]=Ao[Ap]=j}F[Ah]=Af}return Ae}function X(o){var l,n,j,p,m;for(j in o){if(o.hasOwnProperty(j)){if("object"!==typeof o[j]&&("level"===j&&(void 0===b[o.level]&&(b[o.level]="",0<o.level&&"_r_Totals"!==o.text&&(K[o.level-1]={useColSpanStyle:!1,groupHeaders:[]})),b[o.level]!==o.text&&o.children.length&&"_r_Totals"!==o.text&&0<o.level&&(K[o.level-1].groupHeaders.push({titleText:o.text}),n=K[o.level-1].groupHeaders.length,m=1===n?W:c+(n-1)*f,K[o.level-1].groupHeaders[n-1].startColumnName=G[m].name,K[o.level-1].groupHeaders[n-1].numberOfColumns=G.length-m,c=G.length),b[o.level]=o.text),o.level===R&&"level"===j&&0<R)){if(1<f){n=1;for(l in o.fields){1===n&&K[R-1].groupHeaders.push({startColumnName:l,numberOfColumns:1,titleText:o.text}),n++}K[R-1].groupHeaders[K[R-1].groupHeaders.length-1].numberOfColumns=n-1}else{K.splice(R-1,1)}}null!=o[j]&&"object"===typeof o[j]&&X(o[j]);if("level"===j&&0<o.level){for(l in n=0,o.fields){m={};for(p in J.aggregates[n]){if(J.aggregates[n].hasOwnProperty(p)){switch(p){case"member":case"label":case"aggregator":break;default:m[p]=J.aggregates[n][p]}}}1<f?(m.name=l,m.label=J.aggregates[n].label||l):(m.name=o.text,m.label="_r_Totals"===o.text?J.rowTotalsText:o.text);G.push(m);n++}}}}}var S,d,T,i=D.length,L,R,f,P,M=0;J.rowTotals&&0<J.yDimension.length&&(J.yDimension.splice(0,0,{dataName:J.yDimension[0].dataName}),J.yDimension[0].converter=function(){return"_r_Totals"});L=A.isArray(J.xDimension)?J.xDimension.length:0;R=J.yDimension.length;f=A.isArray(J.aggregates)?J.aggregates.length:0;if(0===L||0===f){throw"xDimension or aggregates optiona are not set!"}var h;for(T=0;T<L;T++){h={name:J.xDimension[T].dataName,frozen:J.frozenStaticCols},h=A.extend(!0,h,J.xDimension[T]),G.push(h)}h=L-1;for(var Z={};M<i;){S=D[M];var N=[],O=[];P={};T=0;do{N[T]=A.trim(S[J.xDimension[T].dataName]),P[J.xDimension[T].dataName]=N[T],T++}while(T<L);var U=0;d=-1;T=Q(C,V,N);if(!T){U=0;if(1<=R){for(U=0;U<R;U++){O[U]=A.trim(S[J.yDimension[U].dataName]),J.yDimension[U].converter&&A.isFunction(J.yDimension[U].converter)&&(O[U]=J.yDimension[U].converter.call(this,O[U],N,O))}P=e(S,J.aggregates,O,P)}else{0===R&&(P=e(S,J.aggregates,null,P))}C.push(P)}else{if(0<=d){U=0;if(1<=R){for(U=0;U<R;U++){O[U]=A.trim(S[J.yDimension[U].dataName]),J.yDimension[U].converter&&A.isFunction(J.yDimension[U].converter)&&(O[U]=J.yDimension[U].converter.call(this,O[U],N,O))}T=e(S,J.aggregates,O,T)}else{0===R&&(T=e(S,J.aggregates,null,T))}C[d]=T}}S=0;var N=P=null,Y;for(Y in F){if(0===S){Z.children&&void 0!==Z.children||(Z={text:Y,level:0,children:[]}),P=Z.children}else{N=null;for(T=0;T<P.length;T++){if(P[T].text===Y){N=P[T];break}}N?P=N.children:(P.push({children:[],text:Y,level:S,fields:F[Y]}),P=P[P.length-1].children)}S++}M++}var b=[],c=G.length,W=c;0<R&&(K[R-1]={useColSpanStyle:!1,groupHeaders:[]});X(Z,0);if(J.colTotals){for(M=C.length;M--;){for(T=L;T<G.length;T++){i=G[T].name,E[i]=E[i]?E[i]+parseFloat(C[M][i]||0):parseFloat(C[M][i]||0)}}}if(0<h){for(T=0;T<h;T++){I.groupingView.groupField[T]=G[T].name,I.groupingView.groupSummary[T]=J.groupSummary,I.groupingView.groupSummaryPos[T]=J.groupSummaryPos}}else{I.grouping=!1}I.sortname=G[h].name;I.groupingView.hideFirstGroupCol=!0});return{colModel:G,rows:C,groupOptions:I,groupHeaders:K,summary:E}},jqPivot:function(E,D,C,F){return this.each(function(){function H(J){var L=jQuery(G).jqGrid("pivotSetup",J,D),K=0<A.assocArraySize(L.summary)?!0:!1,I=A.jgrid.from(L.rows);for(J=0;J<L.groupOptions.groupingView.groupField.length;J++){I.orderBy(L.groupOptions.groupingView.groupField[J],"a","text","")}jQuery(G).jqGrid(A.extend({datastr:A.extend(I.select(),K?{userdata:L.summary}:{}),datatype:"jsonstring",footerrow:K,userDataOnFooter:K,colModel:L.colModel,viewrecords:!0,sortname:D.xDimension[0].dataName},C||{},L.groupOptions));L=L.groupHeaders;if(L.length){for(J=0;J<L.length;J++){L[J]&&L[J].groupHeaders.length&&jQuery(G).jqGrid("setGroupHeaders",L[J])}}D.frozenStaticCols&&jQuery(G).jqGrid("setFrozenColumns")}var G=this;"string"===typeof E?A.ajax(A.extend({url:E,dataType:"json",success:function(I){H(A.jgrid.getAccessor(I,F&&F.reader?F.reader:"rows"))}},F||{})):H(E)})}})})(jQuery);(function(A){A.jgrid.extend({jqGridImport:function(B){B=A.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},B||{});return this.each(function(){var D=this,F=function(K,J){var H=A(J.xmlGrid.config,K)[0],G=A(J.xmlGrid.data,K)[0],L,I;if(xmlJsonClass.xml2json&&A.jgrid.parse){H=xmlJsonClass.xml2json(H," ");H=A.jgrid.parse(H);for(I in H){H.hasOwnProperty(I)&&(L=H[I])}G?(G=H.grid.datatype,H.grid.datatype="xmlstring",H.grid.datastr=K,A(D).jqGrid(L).jqGrid("setGridParam",{datatype:G})):A(D).jqGrid(L)}else{alert("xml2json or parse are not present")}},E=function(J,I){if(J&&"string"===typeof J){var H=!1;A.jgrid.useJSON&&(A.jgrid.useJSON=!1,H=!0);var K=A.jgrid.parse(J);H&&(A.jgrid.useJSON=!0);H=K[I.jsonGrid.config];if(K=K[I.jsonGrid.data]){var G=H.datatype;H.datatype="jsonstring";H.datastr=K;A(D).jqGrid(H).jqGrid("setGridParam",{datatype:G})}else{A(D).jqGrid(H)}}};switch(B.imptype){case"xml":A.ajax(A.extend({url:B.impurl,type:B.mtype,data:B.impData,dataType:"xml",complete:function(H,G){"success"===G&&(F(H.responseXML,B),A(D).triggerHandler("jqGridImportComplete",[H,B]),A.isFunction(B.importComplete)&&B.importComplete(H))}},B.ajaxOptions));break;case"xmlstring":if(B.impstring&&"string"===typeof B.impstring){var C=A.parseXML(B.impstring);C&&(F(C,B),A(D).triggerHandler("jqGridImportComplete",[C,B]),A.isFunction(B.importComplete)&&B.importComplete(C),B.impstring=null);C=null}break;case"json":A.ajax(A.extend({url:B.impurl,type:B.mtype,data:B.impData,dataType:"json",complete:function(H){try{E(H.responseText,B),A(D).triggerHandler("jqGridImportComplete",[H,B]),A.isFunction(B.importComplete)&&B.importComplete(H)}catch(G){}}},B.ajaxOptions));break;case"jsonstring":B.impstring&&"string"===typeof B.impstring&&(E(B.impstring,B),A(D).triggerHandler("jqGridImportComplete",[B.impstring,B]),A.isFunction(B.importComplete)&&B.importComplete(B.impstring),B.impstring=null)}})},jqGridExport:function(C){C=A.extend({exptype:"xmlstring",root:"grid",ident:"\t"},C||{});var B=null;this.each(function(){if(this.grid){var E,D=A.extend(!0,{},A(this).jqGrid("getGridParam"));D.rownumbers&&(D.colNames.splice(0,1),D.colModel.splice(0,1));D.multiselect&&(D.colNames.splice(0,1),D.colModel.splice(0,1));D.subGrid&&(D.colNames.splice(0,1),D.colModel.splice(0,1));D.knv=null;if(D.treeGrid){for(E in D.treeReader){D.treeReader.hasOwnProperty(E)&&(D.colNames.splice(D.colNames.length-1),D.colModel.splice(D.colModel.length-1))}}switch(C.exptype){case"xmlstring":B="<"+C.root+">"+xmlJsonClass.json2xml(D,C.ident)+"</"+C.root+">";break;case"jsonstring":B="{"+xmlJsonClass.toJson(D,C.root,C.ident,!1)+"}",void 0!==D.postData.filters&&(B=B.replace(/filters":"/,'filters":'),B=B.replace(/}]}"/,"}]}"))}}});return B},excelExport:function(B){B=A.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},B||{});return this.each(function(){if(this.grid){var C;"remote"===B.exptype&&(C=A.extend({},this.p.postData),C[B.oper]=B.tag,C=jQuery.param(C),C=-1!==B.url.indexOf("?")?B.url+"&"+C:B.url+"?"+C,window.location=C)}})}})})(jQuery);var xmlJsonClass={xml2json:function(C,B){9===C.nodeType&&(C=C.documentElement);var A=this.removeWhite(C),A=this.toObj(A),A=this.toJson(A,C.nodeName,"\t");return"{\n"+B+(B?A.replace(/\t/g,B):A.replace(/\t|\n/g,""))+"\n}"},json2xml:function(D,C){var A=function(K,J,H){var G="",L,F;if(K instanceof Array){if(0===K.length){G+=H+"<"+J+">__EMPTY_ARRAY_</"+J+">\n"}else{for(L=0,F=K.length;L<F;L+=1){var I=H+A(K[L],J,H+"\t")+"\n",G=G+I}}}else{if("object"===typeof K){L=!1;G+=H+"<"+J;for(F in K){K.hasOwnProperty(F)&&("@"===F.charAt(0)?G+=" "+F.substr(1)+'="'+K[F].toString()+'"':L=!0)}G+=L?">":"/>";if(L){for(F in K){K.hasOwnProperty(F)&&("#text"===F?G+=K[F]:"#cdata"===F?G+="<![CDATA["+K[F]+"]]\x3e":"@"!==F.charAt(0)&&(G+=A(K[F],F,H+"\t")))}G+=("\n"===G.charAt(G.length-1)?H:"")+"</"+J+">"}}else{"function"===typeof K?G+=H+"<"+J+"><![CDATA["+K+"]]\x3e</"+J+">":(void 0===K&&(K=""),G='""'===K.toString()||0===K.toString().length?G+(H+"<"+J+">__EMPTY_STRING_</"+J+">"):G+(H+"<"+J+">"+K.toString()+"</"+J+">"))}}return G},E="",B;for(B in D){D.hasOwnProperty(B)&&(E+=A(D[B],B,""))}return C?E.replace(/\t/g,C):E.replace(/\t|\n/g,"")},toObj:function(F){var D={},A=/function/i;if(1===F.nodeType){if(F.attributes.length){var G;for(G=0;G<F.attributes.length;G+=1){D["@"+F.attributes[G].nodeName]=(F.attributes[G].nodeValue||"").toString()}}if(F.firstChild){var C=G=0,B=!1,E;for(E=F.firstChild;E;E=E.nextSibling){1===E.nodeType?B=!0:3===E.nodeType&&E.nodeValue.match(/[^ \f\n\r\t\v]/)?G+=1:4===E.nodeType&&(C+=1)}if(B){if(2>G&&2>C){for(this.removeWhite(F),E=F.firstChild;E;E=E.nextSibling){3===E.nodeType?D["#text"]=this.escape(E.nodeValue):4===E.nodeType?A.test(E.nodeValue)?D[E.nodeName]=[D[E.nodeName],E.nodeValue]:D["#cdata"]=this.escape(E.nodeValue):D[E.nodeName]?D[E.nodeName] instanceof Array?D[E.nodeName][D[E.nodeName].length]=this.toObj(E):D[E.nodeName]=[D[E.nodeName],this.toObj(E)]:D[E.nodeName]=this.toObj(E)}}else{F.attributes.length?D["#text"]=this.escape(this.innerXml(F)):D=this.escape(this.innerXml(F))}}else{if(G){F.attributes.length?D["#text"]=this.escape(this.innerXml(F)):(D=this.escape(this.innerXml(F)),"__EMPTY_ARRAY_"===D?D="[]":"__EMPTY_STRING_"===D&&(D=""))}else{if(C){if(1<C){D=this.escape(this.innerXml(F))}else{for(E=F.firstChild;E;E=E.nextSibling){if(A.test(F.firstChild.nodeValue)){D=F.firstChild.nodeValue;break}else{D["#cdata"]=this.escape(E.nodeValue)}}}}}}}F.attributes.length||F.firstChild||(D=null)}else{9===F.nodeType?D=this.toObj(F.documentElement):alert("unhandled node type: "+F.nodeType)}return D},toJson:function(G,E,I,H){void 0===H&&(H=!0);var A=E?'"'+E+'"':"",B="\t",F="\n";H||(F=B="");if("[]"===G){A+=E?":[]":"[]"}else{if(G instanceof Array){var C,J,D=[];J=0;for(C=G.length;J<C;J+=1){D[J]=this.toJson(G[J],"",I+B,H)}A+=(E?":[":"[")+(1<D.length?F+I+B+D.join(","+F+I+B)+F+I:D.join(""))+"]"}else{if(null===G){A+=(E&&":")+"null"}else{if("object"===typeof G){C=[];for(J in G){G.hasOwnProperty(J)&&(C[C.length]=this.toJson(G[J],J,I+B,H))}A+=(E?":{":"{")+(1<C.length?F+I+B+C.join(","+F+I+B)+F+I:C.join(""))+"}"}else{A="string"===typeof G?A+((E&&":")+'"'+G.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):A+((E&&":")+G.toString())}}}}return A},innerXml:function(C){var B="";if("innerHTML" in C){B=C.innerHTML}else{var A=function(F){var E="",D;if(1===F.nodeType){E+="<"+F.nodeName;for(D=0;D<F.attributes.length;D+=1){E+=" "+F.attributes[D].nodeName+'="'+(F.attributes[D].nodeValue||"").toString()+'"'}if(F.firstChild){E+=">";for(D=F.firstChild;D;D=D.nextSibling){E+=A(D)}E+="</"+F.nodeName+">"}else{E+="/>"}}else{3===F.nodeType?E+=F.nodeValue:4===F.nodeType&&(E+="<![CDATA["+F.nodeValue+"]]\x3e")}return E};for(C=C.firstChild;C;C=C.nextSibling){B+=A(C)}}return B},escape:function(A){return A.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(C){C.normalize();var B;for(B=C.firstChild;B;){if(3===B.nodeType){if(B.nodeValue.match(/[^ \f\n\r\t\v]/)){B=B.nextSibling}else{var A=B.nextSibling;C.removeChild(B);B=A}}else{1===B.nodeType&&this.removeWhite(B),B=B.nextSibling}}return C}};function tableToGrid(A,B){jQuery(A).each(function(){if(!this.grid){jQuery(this).width("99%");var F=jQuery(this).width(),G=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),H=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),G=0<G.length,H=!G&&0<H.length,D=G||H,K=[],C=[];jQuery("th",jQuery(this)).each(function(){0===K.length&&D?(K.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),C.push("__selection__")):(K.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),C.push(jQuery(this).html()))});var I=[],J=[],E=[];jQuery("tbody > tr",jQuery(this)).each(function(){var L={},M=0;jQuery("td",jQuery(this)).each(function(){if(0===M&&D){var O=jQuery("input",jQuery(this)),N=O.attr("value");J.push(N||I.length);O.is(":checked")&&E.push(N);L[K[M].name]=O.attr("value")}else{L[K[M].name]=jQuery(this).html()}M++});0<M&&I.push(L)});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:F,colNames:C,colModel:K,multiselect:G},B||{}));for(F=0;F<I.length;F++){H=null,0<J.length&&(H=J[F])&&H.replace&&(H=encodeURIComponent(H).replace(/[.\-%]/g,"_")),null===H&&(H=F+1),jQuery(this).jqGrid("addRowData",H,I[F])}for(F=0;F<E.length;F++){jQuery(this).jqGrid("setSelection",E[F])}}})}(function(b){b.jgrid.msie&&8===b.jgrid.msiever()&&(b.expr[":"].hidden=function(b){return 0===b.offsetWidth||0===b.offsetHeight||"none"===b.style.display});b.jgrid._multiselect=!1;if(b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var r=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(a,d){var c=r.call(this,a,d);if(d&&this.selectedList){var e=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(e)})}return c}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===b.Widget?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)});b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(a){return this.each(function(){function d(){c.p.disableClick=!0}var c=this,e=b.jgrid.jqID(c.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(a){return b(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(b,a){a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}},update:function(a,e){var d=b(e.item).parent(),d=b(">th",d),f={},g=c.p.id+"_";b.each(c.p.colModel,function(b){f[this.name]=b});var l=[];d.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(g,"");f.hasOwnProperty(a)&&l.push(f[a])});b(c).jqGrid("remapColumns",l,!0,!0);b.isFunction(c.p.sortable.update)&&c.p.sortable.update(l);setTimeout(function(){c.p.disableClick=!1},50)}};c.p.sortable.options?b.extend(e,c.p.sortable.options):b.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable});if(e.start){var g=e.start;e.start=function(b,a){d();g.call(this,b,a)}}else{e.start=d}c.p.sortable.exclude&&(e.items+=":not("+c.p.sortable.exclude+")");a.sortable(e).data("sortable").floating=!0})},columnChooser:function(a){function d(a,c){a&&("string"===typeof a?b.fn[a]&&b.fn[a].apply(c,b.makeArray(arguments).slice(2)):b.isFunction(a)&&a.apply(c,b.makeArray(arguments).slice(2)))}var c=this;if(!b("#colchooser_"+b.jgrid.jqID(c[0].p.id)).length){var e=b('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),g=b("select",e);a=b.extend({width:420,height:240,classname:null,done:function(b){b&&c.jqGrid("remapColumns",b,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var c={};c[a.bSubmit]=function(){a.apply_perm();a.cleanup(!1)};c[a.bCancel]=function(){a.cleanup(!0)};return b.extend(!0,{buttons:c,close:function(){a.cleanup(!0)},modal:a.modal||!1,resizable:a.resizable||!0,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){b("option",g).each(function(){this.selected?c.jqGrid("showCol",k[this.value].name):c.jqGrid("hideCol",k[this.value].name)});var e=[];b("option:selected",g).each(function(){e.push(parseInt(this.value,10))});b.each(e,function(){delete p[k[parseInt(this,10)].name]});b.each(p,function(){var b=parseInt(this,10);var a=e,c=b;if(0<=c){var d=a.slice(),k=d.splice(c,Math.max(a.length-c,c));c>a.length&&(c=a.length);d[c]=b;e=d.concat(k)}else{e=void 0}});a.done&&a.done.call(c,e)},cleanup:function(b){d(a.dlog,e,"destroy");d(a.msel,g,"destroy");e.remove();b&&a.done&&a.done.call(c)},msel_opts:{}},b.jgrid.col,a||{});if(b.ui&&b.ui.multiselect&&"multiselect"===a.msel){if(!b.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}a.msel_opts=b.extend(b.ui.multiselect.defaults,a.msel_opts)}a.caption&&e.attr("title",a.caption);a.classname&&(e.addClass(a.classname),g.addClass(a.classname));a.width&&(b(">div",e).css({width:a.width,margin:"0 auto"}),g.css("width",a.width));a.height&&(b(">div",e).css("height",a.height),g.css("height",a.height-10));var k=c.jqGrid("getGridParam","colModel"),t=c.jqGrid("getGridParam","colNames"),p={},f=[];g.empty();b.each(k,function(a){p[this.name]=a;this.hidedlg?this.hidden||f.push(a):g.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+b.jgrid.stripHtml(t[a])+"</option>")});var q=b.isFunction(a.dlog_opts)?a.dlog_opts.call(c,a):a.dlog_opts;d(a.dlog,e,q);q=b.isFunction(a.msel_opts)?a.msel_opts.call(c,a):a.msel_opts;d(a.msel,g,q)}},sortableRows:function(a){return this.each(function(){var d=this;d.grid&&!d.p.treeGrid&&b.fn.sortable&&(a=b.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{}),a.start&&b.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&b.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(c,e){b(e.item).css("border-width","0");b("td",e.item).each(function(b){this.style.width=d.grid.cols[b].style.width});if(d.p.subGrid){var g=b(e.item).attr("id");try{b(d).jqGrid("collapseSubGridRow",g)}catch(k){}}a._start_&&a._start_.apply(this,[c,e])},a.update=function(c,e){b(e.item).css("border-width","");!0===d.p.rownumbers&&b("td.jqgrid-rownum",d.rows).each(function(a){b(this).html(a+1+(parseInt(d.p.page,10)-1)*parseInt(d.p.rowNum,10))});a._update_&&a._update_.apply(this,[c,e])},b("tbody:first",d).sortable(a),b("tbody:first",d).disableSelection())})},gridDnD:function(a){return this.each(function(){function d(){var a=b.data(c,"dnd");b("tr.jqgrow:not(.ui-draggable)",c).draggable(b.isFunction(a.drag)?a.drag.call(b(c),a):a.drag)}var c=this,e,g;if(c.grid&&!c.p.treeGrid&&b.fn.draggable&&b.fn.droppable){if(void 0===b("#jqgrid_dnd")[0]&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"===typeof a&&"updateDnD"===a&&!0===c.p.jqgdnd){d()}else{if(a=b.extend({drag:function(a){return b.extend({start:function(e,d){var f;if(c.p.subGrid){f=b(d.helper).attr("id");try{b(c).jqGrid("collapseSubGridRow",f)}catch(g){}}for(f=0;f<b.data(c,"dnd").connectWith.length;f++){0===b(b.data(c,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")&&b(b.data(c,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{})}d.helper.addClass("ui-state-highlight");b("td",d.helper).each(function(b){this.style.width=c.grid.headers[b].width+"px"});a.onstart&&b.isFunction(a.onstart)&&a.onstart.call(b(c),e,d)},stop:function(e,d){var f;d.helper.dropped&&!a.dragcopy&&(f=b(d.helper).attr("id"),void 0===f&&(f=b(this).attr("id")),b(c).jqGrid("delRowData",f));for(f=0;f<b.data(c,"dnd").connectWith.length;f++){b(b.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row")}a.onstop&&b.isFunction(a.onstop)&&a.onstop.call(b(c),e,d)}},a.drag_opts||{})},drop:function(a){return b.extend({accept:function(a){if(!b(a).hasClass("jqgrow")){return a}a=b(a).closest("table.ui-jqgrid-btable");return 0<a.length&&void 0!==b.data(a[0],"dnd")?(a=b.data(a[0],"dnd").connectWith,-1!==b.inArray("#"+b.jgrid.jqID(this.id),a)?!0:!1):!1},drop:function(e,d){if(b(d.draggable).hasClass("jqgrow")){var f=b(d.draggable).attr("id"),f=d.draggable.parent().parent().jqGrid("getRowData",f);if(!a.dropbyname){var g=0,l={},h,n,s=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(n in f){f.hasOwnProperty(n)&&(h=s[g].name,"cb"!==h&&"rn"!==h&&"subgrid"!==h&&f.hasOwnProperty(n)&&s[g]&&(l[h]=f[n]),g++)}f=l}catch(r){}}d.helper.dropped=!0;a.beforedrop&&b.isFunction(a.beforedrop)&&(h=a.beforedrop.call(this,e,d,f,b("#"+b.jgrid.jqID(c.p.id)),b(this)),void 0!==h&&null!==h&&"object"===typeof h&&(f=h));if(d.helper.dropped){var m;a.autoid&&(b.isFunction(a.autoid)?m=a.autoid.call(this,f):(m=Math.ceil(1000*Math.random()),m=a.autoidprefix+m));b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",m,f,a.droppos)}a.ondrop&&b.isFunction(a.ondrop)&&a.ondrop.call(this,e,d,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith){for(a.connectWith=a.connectWith.split(","),a.connectWith=b.map(a.connectWith,function(a){return b.trim(a)}),b.data(c,"dnd",a),0===c.p.reccount||c.p.jqgdnd||d(),c.p.jqgdnd=!0,e=0;e<a.connectWith.length;e++){g=a.connectWith[e],b(g).droppable(b.isFunction(a.drop)?a.drop.call(b(c),a):a.drop)}}}}})},gridResize:function(a){return this.each(function(){var d=this,c=b.jgrid.jqID(d.p.id);d.grid&&b.fn.resizable&&(a=b.extend({},a||{}),a.alsoResize?(a._alsoResize_=a.alsoResize,delete a.alsoResize):a._alsoResize_=!1,a.stop&&b.isFunction(a.stop)?(a._stop_=a.stop,delete a.stop):a._stop_=!1,a.stop=function(e,g){b(d).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()});b(d).jqGrid("setGridWidth",g.size.width,a.shrinkToFit);a._stop_&&a._stop_.call(d,e,g)},a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c),delete a._alsoResize_,b("#gbox_"+c).resizable(a))})}})})(jQuery);