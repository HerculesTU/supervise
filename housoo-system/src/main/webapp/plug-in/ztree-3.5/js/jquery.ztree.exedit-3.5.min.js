(function(F){var C={event:{DRAG:"ztree_drag",DROP:"ztree_drop",REMOVE:"ztree_remove",RENAME:"ztree_rename"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},R={onHoverOverNode:function(I,N){var L=K.getSetting(I.data.treeId),H=K.getRoot(L);if(H.curHoverNode!=N){R.onHoverOutNode(I)}H.curHoverNode=N;A.addHoverDom(L,N)},onHoverOutNode:function(H){var H=K.getSetting(H.data.treeId),I=K.getRoot(H);if(I.curHoverNode&&!K.isSelectedNode(H,I.curHoverNode)){A.removeTreeDom(H,I.curHoverNode),I.curHoverNode=null}},onMousedownNode:function(p,y){function w(l){if(Ai.dragFlag==0&&Math.abs(Ae-l.clientX)<z.edit.drag.minMoveSize&&Math.abs(Af-l.clientY)<z.edit.drag.minMoveSize){return !0}var t,H,h,O,f;f=z.data.key.children;Ah.css("cursor","pointer");if(Ai.dragFlag==0){if(U.apply(z.callback.beforeDrag,[z.treeId,o],!0)==!1){return n(l),!0}for(t=0,H=o.length;t<H;t++){if(t==0){Ai.dragNodeShowBefore=[]}h=o[t];h.isParent&&h.open?(A.expandCollapseNode(z,h,!h.open),Ai.dragNodeShowBefore[h.tId]=!0):Ai.dragNodeShowBefore[h.tId]=!1}Ai.dragFlag=1;X.showHoverDom=!1;U.showIfameMask(z,!0);h=!0;O=-1;if(o.length>1){var N=o[0].parentTId?o[0].getParentNode()[f]:K.getNodes(z);f=[];for(t=0,H=N.length;t<H;t++){if(Ai.dragNodeShowBefore[N[t].tId]!==void 0&&(h&&O>-1&&O+1!==t&&(h=!1),f.push(N[t]),O=t),o.length===f.length){o=f;break}}}h&&(Ad=o[0].getPreNode(),An=o[o.length-1].getNextNode());Aj=J("<ul class='zTreeDragUL'></ul>",z);for(t=0,H=o.length;t<H;t++){if(h=o[t],h.editNameFlag=!1,A.selectNode(z,h,t>0),A.removeTreeDom(z,h),O=J("<li id='"+h.tId+"_tmp'></li>",z),O.append(J(h,W.id.A,z).clone()),O.css("padding","0"),O.children("#"+h.tId+W.id.A).removeClass(W.node.CURSELECTED),Aj.append(O),t==z.edit.drag.maxShowNodeNum-1){O=J("<li id='"+h.tId+"_moretmp'><a>  ...  </a></li>",z);Aj.append(O);break}}Aj.attr("id",o[0].tId+W.id.UL+"_tmp");Aj.addClass(z.treeObj.attr("class"));Aj.appendTo(Ah);Ak=J("<span class='tmpzTreeMove_arrow'></span>",z);Ak.attr("id","zTreeMove_arrow_tmp");Ak.appendTo(Ah);z.treeObj.trigger(W.event.DRAG,[l,z.treeId,o])}if(Ai.dragFlag==1){P&&Ak.attr("id")==l.target.id&&Y&&l.clientX+Al.scrollLeft()+2>F("#"+Y+W.id.A,P).offset().left?(h=F("#"+Y+W.id.A,P),l.target=h.length>0?h.get(0):l.target):P&&(P.removeClass(W.node.TMPTARGET_TREE),Y&&F("#"+Y+W.id.A,P).removeClass(W.node.TMPTARGET_NODE+"_"+W.move.TYPE_PREV).removeClass(W.node.TMPTARGET_NODE+"_"+C.move.TYPE_NEXT).removeClass(W.node.TMPTARGET_NODE+"_"+C.move.TYPE_INNER));Y=P=null;Ac=!1;e=z;h=K.getSettings();for(var Ap in h){if(h[Ap].treeId&&h[Ap].edit.enable&&h[Ap].treeId!=z.treeId&&(l.target.id==h[Ap].treeId||F(l.target).parents("#"+h[Ap].treeId).length>0)){Ac=!0,e=h[Ap]}}Ap=Al.scrollTop();O=Al.scrollLeft();f=e.treeObj.offset();t=e.treeObj.get(0).scrollHeight;h=e.treeObj.get(0).scrollWidth;H=l.clientY+Ap-f.top;var L=e.treeObj.height()+f.top-l.clientY-Ap,v=l.clientX+O-f.left,Ar=e.treeObj.width()+f.left-l.clientX-O;f=H<z.edit.drag.borderMax&&H>z.edit.drag.borderMin;var N=L<z.edit.drag.borderMax&&L>z.edit.drag.borderMin,u=v<z.edit.drag.borderMax&&v>z.edit.drag.borderMin,Ao=Ar<z.edit.drag.borderMax&&Ar>z.edit.drag.borderMin,L=H>z.edit.drag.borderMin&&L>z.edit.drag.borderMin&&v>z.edit.drag.borderMin&&Ar>z.edit.drag.borderMin,v=f&&e.treeObj.scrollTop()<=0,Ar=N&&e.treeObj.scrollTop()+e.treeObj.height()+10>=t,m=u&&e.treeObj.scrollLeft()<=0,s=Ao&&e.treeObj.scrollLeft()+e.treeObj.width()+10>=h;if(l.target&&U.isChildOrSelf(l.target,e.treeId)){for(var Aq=l.target;Aq&&Aq.tagName&&!U.eqs(Aq.tagName,"li")&&Aq.id!=e.treeId;){Aq=Aq.parentNode}var At=!0;for(t=0,H=o.length;t<H;t++){if(h=o[t],Aq.id===h.tId){At=!1;break}else{if(J(h,z).find("#"+Aq.id).length>0){At=!1;break}}}if(At&&l.target&&U.isChildOrSelf(l.target,Aq.id+W.id.A)){P=F(Aq),Y=Aq.id}}h=o[0];if(L&&U.isChildOrSelf(l.target,e.treeId)){if(!P&&(l.target.id==e.treeId||v||Ar||m||s)&&(Ac||!Ac&&h.parentTId)){P=e.treeObj}f?e.treeObj.scrollTop(e.treeObj.scrollTop()-10):N&&e.treeObj.scrollTop(e.treeObj.scrollTop()+10);u?e.treeObj.scrollLeft(e.treeObj.scrollLeft()-10):Ao&&e.treeObj.scrollLeft(e.treeObj.scrollLeft()+10);P&&P!=e.treeObj&&P.offset().left<e.treeObj.offset().left&&e.treeObj.scrollLeft(e.treeObj.scrollLeft()+P.offset().left-e.treeObj.offset().left)}Aj.css({top:l.clientY+Ap+3+"px",left:l.clientX+O+3+"px"});f=t=0;if(P&&P.attr("id")!=e.treeId){var As=Y==null?null:K.getNodeCache(e,Y);H=l.ctrlKey&&z.edit.drag.isMove&&z.edit.drag.isCopy||!z.edit.drag.isMove&&z.edit.drag.isCopy;t=!!(Ad&&Y===Ad.tId);f=!!(An&&Y===An.tId);O=h.parentTId&&h.parentTId==Y;h=(H||!f)&&U.apply(e.edit.drag.prev,[e.treeId,o,As],!!e.edit.drag.prev);t=(H||!t)&&U.apply(e.edit.drag.next,[e.treeId,o,As],!!e.edit.drag.next);Ao=(H||!O)&&!(e.data.keep.leaf&&!As.isParent)&&U.apply(e.edit.drag.inner,[e.treeId,o,As],!!e.edit.drag.inner);if(!h&&!t&&!Ao){if(P=null,Y="",V=W.move.TYPE_INNER,Ak.css({display:"none"}),window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}}else{H=F("#"+Y+W.id.A,P);f=As.isLastNode?null:F("#"+As.getNextNode().tId+W.id.A,P.next());N=H.offset().top;O=H.offset().left;u=h?Ao?0.25:t?0.5:1:-1;Ao=t?Ao?0.75:h?0.5:0:-1;l=(l.clientY+Ap-N)/H.height();(u==1||l<=u&&l>=-0.2)&&h?(t=1-Ak.width(),f=N-Ak.height()/2,V=W.move.TYPE_PREV):(Ao==0||l>=Ao&&l<=1.2)&&t?(t=1-Ak.width(),f=f==null||As.isParent&&As.open?N+H.height()-Ak.height()/2:f.offset().top-Ak.height()/2,V=W.move.TYPE_NEXT):(t=5-Ak.width(),f=N,V=W.move.TYPE_INNER);Ak.css({display:"block",top:f+"px",left:O+t+"px"});H.addClass(W.node.TMPTARGET_NODE+"_"+V);if(Aa!=Y||Ab!=V){Ag=(new Date).getTime()}if(As&&As.isParent&&V==W.move.TYPE_INNER&&(l=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==As.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===As.tId&&(l=!1),l)){window.zTreeMoveTimer=setTimeout(function(){V==W.move.TYPE_INNER&&As&&As.isParent&&!As.open&&(new Date).getTime()-Ag>e.edit.drag.autoOpenTime&&U.apply(e.callback.beforeDragOpen,[e.treeId,As],!0)&&(A.switchNode(e,As),e.edit.drag.autoExpandTrigger&&e.treeObj.trigger(W.event.EXPAND,[e.treeId,As]))},e.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=As.tId}}}else{if(V=W.move.TYPE_INNER,P&&U.apply(e.edit.drag.inner,[e.treeId,o,null],!!e.edit.drag.inner)?P.addClass(W.node.TMPTARGET_TREE):P=null,Ak.css({display:"none"}),window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}}Aa=Y;Ab=V}return !1}function n(c){if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}Ab=Aa=null;Al.unbind("mousemove",w);Al.unbind("mouseup",n);Al.unbind("selectstart",d);Ah.css("cursor","auto");P&&(P.removeClass(W.node.TMPTARGET_TREE),Y&&F("#"+Y+W.id.A,P).removeClass(W.node.TMPTARGET_NODE+"_"+W.move.TYPE_PREV).removeClass(W.node.TMPTARGET_NODE+"_"+C.move.TYPE_NEXT).removeClass(W.node.TMPTARGET_NODE+"_"+C.move.TYPE_INNER));U.showIfameMask(z,!1);X.showHoverDom=!0;if(Ai.dragFlag!=0){Ai.dragFlag=0;var f,H,h;for(f=0,H=o.length;f<H;f++){h=o[f],h.isParent&&Ai.dragNodeShowBefore[h.tId]&&!h.open&&(A.expandCollapseNode(z,h,!h.open),delete Ai.dragNodeShowBefore[h.tId])}Aj&&Aj.remove();Ak&&Ak.remove();var N=c.ctrlKey&&z.edit.drag.isMove&&z.edit.drag.isCopy||!z.edit.drag.isMove&&z.edit.drag.isCopy;!N&&P&&Y&&o[0].parentTId&&Y==o[0].parentTId&&V==W.move.TYPE_INNER&&(P=null);if(P){var L=Y==null?null:K.getNodeCache(e,Y);if(U.apply(z.callback.beforeDrop,[e.treeId,o,L,V,N],!0)==!1){A.selectNodes(Am,o)}else{var O=N?U.clone(o):o;f=function(){if(Ac){if(!N){for(var i=0,b=o.length;i<b;i++){A.removeNode(z,o[i])}}if(V==W.move.TYPE_INNER){A.addNodes(e,L,O)}else{if(A.addNodes(e,L.getParentNode(),O),V==W.move.TYPE_PREV){for(i=0,b=O.length;i<b;i++){A.moveNode(e,L,O[i],V,!1)}}else{for(i=-1,b=O.length-1;i<b;b--){A.moveNode(e,L,O[b],V,!1)}}}}else{if(N&&V==W.move.TYPE_INNER){A.addNodes(e,L,O)}else{if(N&&A.addNodes(e,L.getParentNode(),O),V!=W.move.TYPE_NEXT){for(i=0,b=O.length;i<b;i++){A.moveNode(e,L,O[i],V,!1)}}else{for(i=-1,b=O.length-1;i<b;b--){A.moveNode(e,L,O[b],V,!1)}}}}A.selectNodes(e,O);J(O[0],z).focus().blur();z.treeObj.trigger(W.event.DROP,[c,e.treeId,O,L,V,N])};V==W.move.TYPE_INNER&&U.canAsync(e,L)?A.asyncNode(e,L,!1,f):f()}}else{A.selectNodes(Am,o),z.treeObj.trigger(W.event.DROP,[c,z.treeId,o,null,null,null])}}}function d(){return !1}var g,Z,z=K.getSetting(p.data.treeId),Ai=K.getRoot(z),X=K.getRoots();if(p.button==2||!z.edit.enable||!z.edit.drag.isCopy&&!z.edit.drag.isMove){return !0}var Q=p.target,I=K.getRoot(z).curSelectedList,o=[];if(K.isSelectedNode(z,y)){for(g=0,Z=I.length;g<Z;g++){if(I[g].editNameFlag&&U.eqs(Q.tagName,"input")&&Q.getAttribute("treeNode"+W.id.INPUT)!==null){return !0}o.push(I[g]);if(o[0].parentTId!==I[g].parentTId){o=[y];break}}}else{o=[y]}A.editNodeBlur=!0;A.cancelCurEditNode(z);var Al=F(z.treeObj.get(0).ownerDocument),Ah=F(z.treeObj.get(0).ownerDocument.body),Aj,Ak,P,Ac=!1,e=z,Am=z,Ad,An,Aa=null,Ab=null,Y=null,V=W.move.TYPE_INNER,Ae=p.clientX,Af=p.clientY,Ag=(new Date).getTime();U.uCanDo(z)&&Al.bind("mousemove",w);Al.bind("mouseup",n);Al.bind("selectstart",d);p.preventDefault&&p.preventDefault();return !0}};F.extend(!0,F.fn.zTree.consts,C);F.extend(!0,F.fn.zTree._z,{tools:{getAbs:function(H){H=H.getBoundingClientRect();return[H.left+(document.body.scrollLeft+document.documentElement.scrollLeft),H.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(H){H.get(0)&&(H.focus(),U.setCursorPosition(H.get(0),H.val().length))},inputSelect:function(H){H.get(0)&&(H.focus(),H.select())},setCursorPosition:function(H,L){if(H.setSelectionRange){H.focus(),H.setSelectionRange(L,L)}else{if(H.createTextRange){var I=H.createTextRange();I.collapse(!0);I.moveEnd("character",L);I.moveStart("character",L);I.select()}}},showIfameMask:function(N,P){for(var O=K.getRoot(N);O.dragMaskList.length>0;){O.dragMaskList[0].remove(),O.dragMaskList.shift()}if(P){for(var V=J("iframe",N),H=0,L=V.length;H<L;H++){var I=V.get(H),Q=U.getAbs(I),I=J("<div id='zTreeMask_"+H+"' class='zTreeMask' style='top:"+Q[1]+"px; left:"+Q[0]+"px; width:"+I.offsetWidth+"px; height:"+I.offsetHeight+"px;'></div>",N);I.appendTo(J("body",N));O.dragMaskList.push(I)}}}},view:{addEditBtn:function(I,N){if(!(N.editNameFlag||J(N,W.id.EDIT,I).length>0)&&U.apply(I.edit.showRenameBtn,[I.treeId,N],I.edit.showRenameBtn)){var L=J(N,W.id.A,I),H="<span class='"+W.className.BUTTON+" edit' id='"+N.tId+W.id.EDIT+"' title='"+U.apply(I.edit.renameTitle,[I.treeId,N],I.edit.renameTitle)+"' treeNode"+W.id.EDIT+" style='display:none;'></span>";L.append(H);J(N,W.id.EDIT,I).bind("click",function(){if(!U.uCanDo(I)||U.apply(I.callback.beforeEditName,[I.treeId,N],!0)==!1){return !1}A.editNode(I,N);return !1}).show()}},addRemoveBtn:function(I,N){if(!(N.editNameFlag||J(N,W.id.REMOVE,I).length>0)&&U.apply(I.edit.showRemoveBtn,[I.treeId,N],I.edit.showRemoveBtn)){var L=J(N,W.id.A,I),H="<span class='"+W.className.BUTTON+" remove' id='"+N.tId+W.id.REMOVE+"' title='"+U.apply(I.edit.removeTitle,[I.treeId,N],I.edit.removeTitle)+"' treeNode"+W.id.REMOVE+" style='display:none;'></span>";L.append(H);J(N,W.id.REMOVE,I).bind("click",function(){if(!U.uCanDo(I)||U.apply(I.callback.beforeRemove,[I.treeId,N],!0)==!1){return !1}A.removeNode(I,N);I.treeObj.trigger(W.event.REMOVE,[I.treeId,N]);return !1}).bind("mousedown",function(){return !0}).show()}},addHoverDom:function(H,I){if(K.getRoots().showHoverDom){I.isHover=!0,H.edit.enable&&(A.addEditBtn(H,I),A.addRemoveBtn(H,I)),U.apply(H.view.addHoverDom,[H.treeId,I])}},cancelCurEditNode:function(N,P,O){var L=K.getRoot(N),Q=N.data.key.name,I=L.curEditNode;if(I){var H=L.curEditInput,P=P?P:O?I[Q]:H.val();if(U.apply(N.callback.beforeRename,[N.treeId,I,P,O],!0)===!1){return !1}else{I[Q]=P,N.treeObj.trigger(W.event.RENAME,[N.treeId,I,O])}J(I,W.id.A,N).removeClass(W.node.CURSELECTED_EDIT);H.unbind();A.setNodeName(N,I);I.editNameFlag=!1;L.curEditNode=null;L.curEditInput=null;A.selectNode(N,I,!1)}return L.noSelection=!0},editNode:function(I,N){var L=K.getRoot(I);A.editNodeBlur=!1;if(K.isSelectedNode(I,N)&&L.curEditNode==N&&N.editNameFlag){setTimeout(function(){U.inputFocus(L.curEditInput)},0)}else{var H=I.data.key.name;N.editNameFlag=!0;A.removeTreeDom(I,N);A.cancelCurEditNode(I);A.selectNode(I,N,!1);J(N,W.id.SPAN,I).html("<input type=text class='rename' id='"+N.tId+W.id.INPUT+"' treeNode"+W.id.INPUT+" >");var O=J(N,W.id.INPUT,I);O.attr("value",N[H]);I.edit.editNameSelectAll?U.inputSelect(O):U.inputFocus(O);O.bind("blur",function(){A.editNodeBlur||A.cancelCurEditNode(I)}).bind("keydown",function(P){P.keyCode=="13"?(A.editNodeBlur=!0,A.cancelCurEditNode(I)):P.keyCode=="27"&&A.cancelCurEditNode(I,null,!0)}).bind("click",function(){return !1}).bind("dblclick",function(){return !1});J(N,W.id.A,I).addClass(W.node.CURSELECTED_EDIT);L.curEditInput=O;L.noSelection=!1;L.curEditNode=N}},moveNode:function(Z,h,d,X,P,Q){var O=K.getRoot(Z),n=Z.data.key.children;if(h!=d&&(!Z.data.keep.leaf||!h||h.isParent||X!=W.move.TYPE_INNER)){var o=d.parentTId?d.getParentNode():O,N=h===null||h==O;N&&h===null&&(h=O);if(N){X=W.move.TYPE_INNER}O=h.parentTId?h.getParentNode():O;if(X!=W.move.TYPE_PREV&&X!=W.move.TYPE_NEXT){X=W.move.TYPE_INNER}if(X==W.move.TYPE_INNER){if(N){d.parentTId=null}else{if(!h.isParent){h.isParent=!0,h.open=!!h.open,A.setNodeLineIcos(Z,h)}d.parentTId=h.tId}}var I;N?I=N=Z.treeObj:(!Q&&X==W.move.TYPE_INNER?A.expandCollapseNode(Z,h,!0,!1):Q||A.expandCollapseNode(Z,h.getParentNode(),!0,!1),N=J(h,Z),I=J(h,W.id.UL,Z),N.get(0)&&!I.get(0)&&(I=[],A.makeUlHtml(Z,h,I,""),N.append(I.join(""))),I=J(h,W.id.UL,Z));var H=J(d,Z);H.get(0)?N.get(0)||H.remove():H=A.appendNodes(Z,d.level,[d],null,!1,!0).join("");I.get(0)&&X==W.move.TYPE_INNER?I.append(H):N.get(0)&&X==W.move.TYPE_PREV?N.before(H):N.get(0)&&X==W.move.TYPE_NEXT&&N.after(H);var Y=-1,L=0,V=null,N=null,e=d.level;if(d.isFirstNode){if(Y=0,o[n].length>1){V=o[n][1],V.isFirstNode=!0}}else{if(d.isLastNode){Y=o[n].length-1,V=o[n][Y-1],V.isLastNode=!0}else{for(I=0,H=o[n].length;I<H;I++){if(o[n][I].tId==d.tId){Y=I;break}}}}Y>=0&&o[n].splice(Y,1);if(X!=W.move.TYPE_INNER){for(I=0,H=O[n].length;I<H;I++){O[n][I].tId==h.tId&&(L=I)}}if(X==W.move.TYPE_INNER){h[n]||(h[n]=[]);if(h[n].length>0){N=h[n][h[n].length-1],N.isLastNode=!1}h[n].splice(h[n].length,0,d);d.isLastNode=!0;d.isFirstNode=h[n].length==1}else{h.isFirstNode&&X==W.move.TYPE_PREV?(O[n].splice(L,0,d),N=h,N.isFirstNode=!1,d.parentTId=h.parentTId,d.isFirstNode=!0,d.isLastNode=!1):h.isLastNode&&X==W.move.TYPE_NEXT?(O[n].splice(L+1,0,d),N=h,N.isLastNode=!1,d.parentTId=h.parentTId,d.isFirstNode=!1,d.isLastNode=!0):(X==W.move.TYPE_PREV?O[n].splice(L,0,d):O[n].splice(L+1,0,d),d.parentTId=h.parentTId,d.isFirstNode=!1,d.isLastNode=!1)}K.fixPIdKeyValue(Z,d);K.setSonNodeLevel(Z,d.getParentNode(),d);A.setNodeLineIcos(Z,d);A.repairNodeLevelClass(Z,d,e);!Z.data.keep.parent&&o[n].length<1?(o.isParent=!1,o.open=!1,h=J(o,W.id.UL,Z),X=J(o,W.id.SWITCH,Z),n=J(o,W.id.ICON,Z),A.replaceSwitchClass(o,X,W.folder.DOCU),A.replaceIcoClass(o,n,W.folder.DOCU),h.css("display","none")):V&&A.setNodeLineIcos(Z,V);N&&A.setNodeLineIcos(Z,N);Z.check&&Z.check.enable&&A.repairChkClass&&(A.repairChkClass(Z,o),A.repairParentChkClassWithSelf(Z,o),o!=d.parent&&A.repairParentChkClassWithSelf(Z,d));Q||A.expandCollapseParentNode(Z,d.getParentNode(),!0,P)}},removeEditBtn:function(H,I){J(I,W.id.EDIT,H).unbind().remove()},removeRemoveBtn:function(H,I){J(I,W.id.REMOVE,H).unbind().remove()},removeTreeDom:function(H,I){I.isHover=!1;A.removeEditBtn(H,I);A.removeRemoveBtn(H,I);U.apply(H.view.removeHoverDom,[H.treeId,I])},repairNodeLevelClass:function(L,O,N){if(N!==O.level){var I=J(O,L),H=J(O,W.id.A,L),L=J(O,W.id.UL,L),N=W.className.LEVEL+N,O=W.className.LEVEL+O.level;I.removeClass(N);I.addClass(O);H.removeClass(N);H.addClass(O);L.removeClass(N);L.addClass(O)}},selectNodes:function(I,N){for(var L=0,H=N.length;L<H;L++){A.selectNode(I,N[L],L>0)}}},event:{},data:{setSonNodeLevel:function(L,O,N){if(N){var H=L.data.key.children;N.level=O?O.level+1:0;if(N[H]){for(var O=0,I=N[H].length;O<I;O++){N[H][O]&&K.setSonNodeLevel(L,N,N[H][O])}}}}}});var B=F.fn.zTree,U=B._z.tools,W=B.consts,A=B._z.view,K=B._z.data,J=U.$;K.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDrop:null,onRename:null}});K.addInitBind(function(H){var L=H.treeObj,I=W.event;L.bind(I.RENAME,function(Q,P,N,O){U.apply(H.callback.onRename,[Q,P,N,O])});L.bind(I.REMOVE,function(P,O,N){U.apply(H.callback.onRemove,[P,O,N])});L.bind(I.DRAG,function(Q,P,N,O){U.apply(H.callback.onDrag,[P,N,O])});L.bind(I.DROP,function(X,V,N,O,Y,P,Q){U.apply(H.callback.onDrop,[V,N,O,Y,P,Q])})});K.addInitUnBind(function(H){var H=H.treeObj,I=W.event;H.unbind(I.RENAME);H.unbind(I.REMOVE);H.unbind(I.DRAG);H.unbind(I.DROP)});K.addInitCache(function(){});K.addInitNode(function(H,L,I){if(I){I.isHover=!1,I.editNameFlag=!1}});K.addInitProxy(function(P){var V=P.target,Q=K.getSetting(P.data.treeId),H=P.relatedTarget,N="",O=null,L="",X=null,I=null;if(U.eqs(P.type,"mouseover")){if(I=U.getMDom(Q,V,[{tagName:"a",attrName:"treeNode"+W.id.A}])){N=U.getNodeMainDom(I).id,L="hoverOverNode"}}else{if(U.eqs(P.type,"mouseout")){I=U.getMDom(Q,H,[{tagName:"a",attrName:"treeNode"+W.id.A}]),I||(N="remove",L="hoverOutNode")}else{if(U.eqs(P.type,"mousedown")&&(I=U.getMDom(Q,V,[{tagName:"a",attrName:"treeNode"+W.id.A}]))){N=U.getNodeMainDom(I).id,L="mousedownNode"}}}if(N.length>0){switch(O=K.getNodeCache(Q,N),L){case"mousedownNode":X=R.onMousedownNode;break;case"hoverOverNode":X=R.onHoverOverNode;break;case"hoverOutNode":X=R.onHoverOutNode}}return{stop:!1,node:O,nodeEventType:L,nodeEventCallback:X,treeEventType:"",treeEventCallback:null}});K.addInitRoot(function(H){var H=K.getRoot(H),I=K.getRoots();H.curEditNode=null;H.curEditInput=null;H.curHoverNode=null;H.dragFlag=0;H.dragNodeShowBefore=[];H.dragMaskList=[];I.showHoverDom=!0});K.addZTreeTools(function(H,I){I.cancelEditName=function(L){K.getRoot(H).curEditNode&&A.cancelCurEditNode(H,L?L:null,!0)};I.copyNode=function(P,O,Q,N){if(!O){return null}if(P&&!P.isParent&&H.data.keep.leaf&&Q===W.move.TYPE_INNER){return null}var L=U.clone(O);if(!P){P=null,Q=W.move.TYPE_INNER}Q==W.move.TYPE_INNER?(O=function(){A.addNodes(H,P,[L],N)},U.canAsync(H,P)?A.asyncNode(H,P,N,O):O()):(A.addNodes(H,P.parentNode,[L],N),A.moveNode(H,P,L,Q,!1,N));return L};I.editName=function(L){L&&L.tId&&L===K.getNodeCache(H,L.tId)&&(L.parentTId&&A.expandCollapseParentNode(H,L.getParentNode(),!0),A.editNode(H,L))};I.moveNode=function(P,O,Q,N){function L(){A.moveNode(H,P,O,Q,!1,N)}if(!O){return O}if(P&&!P.isParent&&H.data.keep.leaf&&Q===W.move.TYPE_INNER){return null}else{if(P&&(O.parentTId==P.tId&&Q==W.move.TYPE_INNER||J(O,H).find("#"+P.tId).length>0)){return null}else{P||(P=null)}}U.canAsync(H,P)&&Q===W.move.TYPE_INNER?A.asyncNode(H,P,N,L):L();return O};I.setEditable=function(L){H.edit.enable=L;return this.refresh()}});var D=A.cancelPreSelectedNode;A.cancelPreSelectedNode=function(L,O){for(var N=K.getRoot(L).curSelectedList,I=0,H=N.length;I<H;I++){if(!O||O===N[I]){if(A.removeTreeDom(L,N[I]),O){break}}}D&&D.apply(A,arguments)};var E=A.createNodes;A.createNodes=function(I,N,L,H){E&&E.apply(A,arguments);L&&A.repairParentChkClassWithSelf&&A.repairParentChkClassWithSelf(I,H)};var S=A.makeNodeUrl;A.makeNodeUrl=function(H,I){return H.edit.enable?null:S.apply(A,arguments)};var G=A.removeNode;A.removeNode=function(H,L){var I=K.getRoot(H);if(I.curEditNode===L){I.curEditNode=null}G&&G.apply(A,arguments)};var M=A.selectNode;A.selectNode=function(I,N,L){var H=K.getRoot(I);if(K.isSelectedNode(I,N)&&H.curEditNode==N&&N.editNameFlag){return !1}M&&M.apply(A,arguments);A.addHoverDom(I,N);return !0};var T=U.uCanDo;U.uCanDo=function(H,L){var I=K.getRoot(H);if(L&&(U.eqs(L.type,"mouseover")||U.eqs(L.type,"mouseout")||U.eqs(L.type,"mousedown")||U.eqs(L.type,"mouseup"))){return !0}if(I.curEditNode){A.editNodeBlur=!1,I.curEditInput.focus()}return !I.curEditNode&&(T?T.apply(A,arguments):!0)}})(jQuery);